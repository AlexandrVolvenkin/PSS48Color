///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR          11/Sep/2024  06:58:04
// Copyright 1996-2018 IAR Systems AB.
//
//    Source file  =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//    Command line =  
//        -f C:\Users\Admin\AppData\Local\Temp\EWAAC3.tmp
//        (--string_literals_in_flash
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//        --cpu=m128a -ms -o
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
//        --initializers_in_flash --root_variables --no_cse --no_inline
//        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
//        -DENABLE_BIT_DEFINITIONS -e -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
//        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
//        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -On
//        --eec++)
//    Locale       =  Russian_RUS.1251
//    List file    =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\Pss21.s90
//
///////////////////////////////////////////////////////////////////////////////

        NAME Pss21

        RSEG CSTACK:DATA:NOROOT(0)
        RSEG RSTACK:DATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?CV_SWITCH_L06
        EXTERN ?EPILOGUE_B4_L09
        EXTERN ?EPILOGUE_B6_L09
        EXTERN ?PROLOGUE4_L09
        EXTERN ?PROLOGUE6_L09
        EXTERN ?Register_R4_is_cg_reg
        EXTERN ?Register_R5_is_cg_reg
        EXTERN ?SS_DIVMOD_L02
        EXTERN ?SS_SHR_L02
        EXTERN ?S_EC_MUL_L02
        EXTERN ?S_SHL_L02
        EXTERN ?UL_DIVMOD_L03
        EXTERN ?UL_SHR_L03
        EXTERN ?call_ctors
        EXTERN ?need_segment_init

        PUBWEAK `?<Segment init: NEAR_I>`
        PUBWEAK `?<Segment init: NEAR_Z>`
        PUBLIC ??ActiveAlarmWindowOff
        PUBLIC ??ActiveAlarmWindowOn
        PUBLIC ??AddressBusInit
        PUBLIC ??AlarmTypeChange
        PUBLIC ??AlarmTypeChange_1
        PUBLIC ??AlarmTypeErrorChange
        PUBLIC ??AlarmTypeReceipt
        PUBLIC ??AlarmTypeReset
        PUBLIC ??AlarmTypeSet
        PUBLIC ??AlarmsProcessing
        PUBLIC ??AllAlarmWindowOff
        PUBLIC ??AllAlarmWindowOn
        PUBLIC ??BoardWindowsUpdate
        PUBLIC ??ConfigurationInit
        PUBLIC ??ConnectDevice
        PUBLIC ??CreateDevices
        PUBLIC ??DestroyDevices
        PUBLIC ??DisconnectDevice
        PUBLIC ??DiscreteOutputControlClear
        PUBLIC ??DiscreteOutputsSet
        PUBLIC ??DiscreteSignalsProcessing
        PUBLIC ??ErrorAlarmsProcessing
        PUBLIC ??ErrorMainCycle
        PUBLIC ??ErrorWindowOn
        PUBWEAK ??ExternalKeyState
        PUBWEAK ??GetActivityState
        PUBWEAK ??GetAlarmColor
        PUBWEAK ??GetAlarmType
        PUBWEAK ??GetAlarmWindowControlPointer
        PUBWEAK ??GetAlarmWindowIndex
        PUBLIC ??GetAlarmWindowType
        PUBWEAK ??GetCommonAlarmType
        PUBLIC ??GetDiscreteInputState
        PUBLIC ??GetDiscreteInputsBadState
        PUBLIC ??GetErrorAlarmState
        PUBWEAK ??GetErrorCode
        PUBWEAK ??GetExternalReceipt
        PUBWEAK ??GetExternalReset
        PUBWEAK ??GetFsmState
        PUBWEAK ??GetFsmState_1
        PUBWEAK ??GetLinkedDiscreteOutputsPointer
        PUBWEAK ??GetModbusReceipt
        PUBWEAK ??GetModbusReset
        PUBWEAK ??GetModuleIndex
        PUBWEAK ??GetPanelReceipt
        PUBWEAK ??GetPanelReset
        PUBWEAK ??GetSavedActivityState
        PUBWEAK ??GetSavedAlarmColor
        PUBWEAK ??GetSavedAlarmType
        PUBLIC ??GetTimeoutModbusRtuLinkControl
        PUBLIC ??Init
        PUBLIC ??InitAllocationContext
        PUBWEAK ??KeyOneState
        PUBLIC ??KeyStateProcessing
        PUBWEAK ??KeyThreeState
        PUBWEAK ??KeyTwoState
        PUBLIC ??LinkControlErrorMainCycle
        PUBLIC ??MainFsm
        PUBLIC ??ModbusDefaultInit
        PUBLIC ??ModbusDeviceControl
        PUBLIC ??ModbusDeviceControl_1
        PUBLIC ??ModbusInit
        PUBLIC ??ModbusRtuLinkControlInProgress
        PUBLIC ??ModbusRtuLinkControlIsOn
        PUBLIC ??ModulesInteraction
        PUBLIC ??NormalAlarmWindowOff
        PUBLIC ??NotifyersControlProcessing
        PUBLIC ??ReceiptResetGlobalFlagsClear
        PUBLIC ??ReportType
        PUBLIC ??RestoreContextNotifyerControl
        PUBLIC ??SaveContextNotifyerControl
        PUBLIC ??SearchModules
        PUBLIC ??SendToDevicesModbusReceipt
        PUBLIC ??SendToDevicesModbusReset
        PUBLIC ??SendToDevicesReceipt
        PUBLIC ??SendToDevicesReset
        PUBWEAK ??SetActivityState
        PUBWEAK ??SetAlarmColor
        PUBWEAK ??SetAlarmType
        PUBLIC ??SetAlarmWindowColor
        PUBWEAK ??SetAlarmWindowIndex
        PUBLIC ??SetAlarmWindowType
        PUBLIC ??SetBytesFromBits
        PUBLIC ??SetDiscreteInputState
        PUBWEAK ??SetDiscreteSignalsReceipt
        PUBWEAK ??SetDiscreteSignalsReset
        PUBWEAK ??SetDiscreteStateIndex
        PUBLIC ??SetErrorAlarmState
        PUBWEAK ??SetErrorCode
        PUBWEAK ??SetExternalReceipt
        PUBWEAK ??SetExternalReset
        PUBWEAK ??SetFsmEvent
        PUBWEAK ??SetFsmState
        PUBWEAK ??SetFsmState_1
        PUBWEAK ??SetModbusReceipt
        PUBWEAK ??SetModbusReceipt_1
        PUBWEAK ??SetModbusReset
        PUBWEAK ??SetModbusReset_1
        PUBLIC ??SetModeModbusRtuLinkControlInProgress
        PUBWEAK ??SetModuleIndex
        PUBWEAK ??SetPanelReceipt
        PUBWEAK ??SetPanelReset
        PUBWEAK ??SetReceipt
        PUBWEAK ??SetReset
        PUBWEAK ??SetSavedActivityState
        PUBWEAK ??SetSavedAlarmColor
        PUBWEAK ??SetSavedAlarmType
        PUBWEAK ??SpiSlaveSelectAddress0Off
        PUBWEAK ??SpiSlaveSelectAddress0On
        PUBWEAK ??SpiSlaveSelectAddress0SetPinOutput
        PUBWEAK ??SpiSlaveSelectAddress1Off
        PUBWEAK ??SpiSlaveSelectAddress1On
        PUBWEAK ??SpiSlaveSelectAddress1SetPinOutput
        PUBWEAK ??SpiSlaveSelectAddress2Off
        PUBWEAK ??SpiSlaveSelectAddress2On
        PUBWEAK ??SpiSlaveSelectAddress2SetPinOutput
        PUBWEAK ??SpiSlaveSelectAddress3Off
        PUBWEAK ??SpiSlaveSelectAddress3On
        PUBWEAK ??SpiSlaveSelectAddress3SetPinOutput
        PUBWEAK ??SpiSlaveSelectEnableOff
        PUBWEAK ??SpiSlaveSelectEnableOn
        PUBWEAK ??SpiSlaveSelectEnableSetPinOutput
        PUBLIC ??TestMainCycle
        PUBWEAK ??WatchdogEnable
        PUBWEAK ??WatchdogReset
        PUBLIC ??m_apxAlarmDfa
        PUBLIC ??m_apxDrivers
        PUBLIC ??m_apxErrorAlarmDfa
        PUBLIC ??m_aucDiscreteInputsBadState
        PUBLIC ??m_aucRtuDiscreteDataArray
        PUBLIC ??m_aucRtuHoldingRegistersArray
        PUBLIC ??m_aucRtuInputRegistersArray
        PUBLIC ??m_auiErrorAlarmDataArray
        PUBLIC ??m_auiErrorLedOn
        PUBLIC ??m_auiIntermediateBuff
        PUBLIC ??m_auiReceiveMessageBuff
        PUBLIC ??m_auiSpiRxBuffer
        PUBLIC ??m_auiSpiTxBuffer
        PUBLIC ??m_axAlarmWindowControl
        PUBLIC ??m_axDiscreteOutputControl
        PUBLIC ??m_uiCommonAlarmType
        PUBLIC ??m_uiCommonAlarmTypePrevious
        PUBLIC ??m_uiDiscreteSignalsReceipt
        PUBLIC ??m_uiDiscreteSignalsReset
        PUBLIC ??m_uiErrorCode
        PUBLIC ??m_uiExternalReceipt
        PUBLIC ??m_uiExternalReset
        PUBLIC ??m_uiFsmState
        PUBLIC ??m_uiModbusReceipt
        PUBLIC ??m_uiModbusReset
        PUBLIC ??m_uiModuleIndex
        PUBLIC ??m_uiPanelReceipt
        PUBLIC ??m_uiPanelReset
        PUBLIC ??m_uiType
        PUBLIC ??m_xBuzzerNotifyerControl
        PUBLIC ??m_xCheckKey
        PUBLIC ??m_xDeviceConfigSearch
        PUBLIC ??m_xDeviceConfiguration
        PUBLIC ??m_xDeviceState
        PUBLIC ??m_xDiscreteOutputDataBase
        PUBLIC ??m_xEmergencyAlarmWindowNotifyerControl
        PUBLIC ??m_xEventUniteLogicAndOne
        PUBLIC ??m_xExternalKey
        PUBLIC ??m_xMainCycleTimer
        PUBLIC ??m_xModbusRtuLinkControl
        PUBLIC ??m_xModbusRtuOne
        PUBLIC ??m_xModbusSettings
        PUBLIC ??m_xPreventiveAlarmWindowNotifyerControl
        PUBLIC ??m_xReceiptKey
        PUBLIC ??m_xResetKey
        PUBLIC ??m_xStatusLedNotifyerControl
        PUBLIC ??m_xTestModeNotifyerControl
        PUBLIC ??m_xUart1
        PUBWEAK _A_ACSR
        PUBWEAK _A_ADC
        PUBWEAK _A_ADCSRA
        PUBWEAK _A_ADMUX
        PUBWEAK _A_ASSR
        PUBWEAK _A_DDRA
        PUBWEAK _A_DDRB
        PUBWEAK _A_DDRC
        PUBWEAK _A_DDRD
        PUBWEAK _A_DDRE
        PUBWEAK _A_DDRF
        PUBWEAK _A_DDRG
        PUBWEAK _A_EEAR
        PUBWEAK _A_EECR
        PUBWEAK _A_EEDR
        PUBWEAK _A_EICRA
        PUBWEAK _A_EICRB
        PUBWEAK _A_EIFR
        PUBWEAK _A_EIMSK
        PUBWEAK _A_ETIFR
        PUBWEAK _A_ETIMSK
        PUBWEAK _A_ICR1
        PUBWEAK _A_ICR3
        PUBWEAK _A_MCUCR
        PUBWEAK _A_MCUCSR
        PUBWEAK _A_OCDR
        PUBWEAK _A_OCR0
        PUBWEAK _A_OCR1A
        PUBWEAK _A_OCR1B
        PUBWEAK _A_OCR1C
        PUBWEAK _A_OCR2
        PUBWEAK _A_OCR3A
        PUBWEAK _A_OCR3B
        PUBWEAK _A_OCR3C
        PUBWEAK _A_OSCCAL
        PUBWEAK _A_PINA
        PUBWEAK _A_PINB
        PUBWEAK _A_PINC
        PUBWEAK _A_PIND
        PUBWEAK _A_PINE
        PUBWEAK _A_PINF
        PUBWEAK _A_PING
        PUBWEAK _A_PORTA
        PUBWEAK _A_PORTB
        PUBWEAK _A_PORTC
        PUBWEAK _A_PORTD
        PUBWEAK _A_PORTE
        PUBWEAK _A_PORTF
        PUBWEAK _A_PORTG
        PUBWEAK _A_RAMPZ
        PUBWEAK _A_SFIOR
        PUBWEAK _A_SP
        PUBWEAK _A_SPCR
        PUBWEAK _A_SPDR
        PUBWEAK _A_SPMCSR
        PUBWEAK _A_SPSR
        PUBWEAK _A_SREG
        PUBWEAK _A_TCCR0
        PUBWEAK _A_TCCR1A
        PUBWEAK _A_TCCR1B
        PUBWEAK _A_TCCR1C
        PUBWEAK _A_TCCR2
        PUBWEAK _A_TCCR3A
        PUBWEAK _A_TCCR3B
        PUBWEAK _A_TCCR3C
        PUBWEAK _A_TCNT0
        PUBWEAK _A_TCNT1
        PUBWEAK _A_TCNT2
        PUBWEAK _A_TCNT3
        PUBWEAK _A_TIFR
        PUBWEAK _A_TIMSK
        PUBWEAK _A_TWAR
        PUBWEAK _A_TWBR
        PUBWEAK _A_TWCR
        PUBWEAK _A_TWDR
        PUBWEAK _A_TWSR
        PUBWEAK _A_UBRR0H
        PUBWEAK _A_UBRR0L
        PUBWEAK _A_UBRR1H
        PUBWEAK _A_UBRR1L
        PUBWEAK _A_UCSR0A
        PUBWEAK _A_UCSR0B
        PUBWEAK _A_UCSR0C
        PUBWEAK _A_UCSR1A
        PUBWEAK _A_UCSR1B
        PUBWEAK _A_UCSR1C
        PUBWEAK _A_UDR0
        PUBWEAK _A_UDR1
        PUBWEAK _A_WDTCR
        PUBWEAK _A_XDIV
        PUBWEAK _A_XMCRA
        PUBWEAK _A_XMCRB
        PUBWEAK __?EEARH
        PUBWEAK __?EEARL
        PUBWEAK __?EECR
        PUBWEAK __?EEDR
        PUBLIC uiMapTestCounter

`?<Name CPlatform 196>` SYMBOL "CPlatform"
??m_pxUart1         SYMBOL "m_pxUart1", `?<Name CPlatform 196>`
`?<Name CPss21 260>` SYMBOL "CPss21"
??m_apxAlarmDfa     SYMBOL "m_apxAlarmDfa", `?<Name CPss21 260>`
??m_apxDrivers      SYMBOL "m_apxDrivers", `?<Name CPss21 260>`
??m_apxErrorAlarmDfa SYMBOL "m_apxErrorAlarmDfa", `?<Name CPss21 260>`
??m_aucDiscreteInputsBadState SYMBOL "m_aucDiscreteInputsBadState", `?<Name CPss21 260>`
??m_aucRtuDiscreteDataArray SYMBOL "m_aucRtuDiscreteDataArray", `?<Name CPss21 260>`
??m_aucRtuHoldingRegistersArray SYMBOL "m_aucRtuHoldingRegistersArray", `?<Name CPss21 260>`
??m_aucRtuInputRegistersArray SYMBOL "m_aucRtuInputRegistersArray", `?<Name CPss21 260>`
??m_auiErrorAlarmDataArray SYMBOL "m_auiErrorAlarmDataArray", `?<Name CPss21 260>`
??m_auiErrorLedOn   SYMBOL "m_auiErrorLedOn", `?<Name CPss21 260>`
??m_auiIntermediateBuff SYMBOL "m_auiIntermediateBuff", `?<Name CPss21 260>`
??m_auiReceiveMessageBuff SYMBOL "m_auiReceiveMessageBuff", `?<Name CPss21 260>`
??m_auiSpiRxBuffer  SYMBOL "m_auiSpiRxBuffer", `?<Name CPss21 260>`
??m_auiSpiTxBuffer  SYMBOL "m_auiSpiTxBuffer", `?<Name CPss21 260>`
??m_axAlarmWindowControl SYMBOL "m_axAlarmWindowControl", `?<Name CPss21 260>`
??m_axDiscreteOutputControl SYMBOL "m_axDiscreteOutputControl", `?<Name CPss21 260>`
??m_uiCommonAlarmType SYMBOL "m_uiCommonAlarmType", `?<Name CPss21 260>`
??m_uiCommonAlarmTypePrevious SYMBOL "m_uiCommonAlarmTypePrevious", `?<Name CPss21 260>`
??m_uiDiscreteSignalsReceipt SYMBOL "m_uiDiscreteSignalsReceipt", `?<Name CPss21 260>`
??m_uiDiscreteSignalsReset SYMBOL "m_uiDiscreteSignalsReset", `?<Name CPss21 260>`
??m_uiErrorCode     SYMBOL "m_uiErrorCode", `?<Name CPss21 260>`
??m_uiExternalReceipt SYMBOL "m_uiExternalReceipt", `?<Name CPss21 260>`
??m_uiExternalReset SYMBOL "m_uiExternalReset", `?<Name CPss21 260>`
??m_uiFsmState      SYMBOL "m_uiFsmState", `?<Name CPss21 260>`
??m_uiModbusReceipt SYMBOL "m_uiModbusReceipt", `?<Name CPss21 260>`
??m_uiModbusReset   SYMBOL "m_uiModbusReset", `?<Name CPss21 260>`
??m_uiModuleIndex   SYMBOL "m_uiModuleIndex", `?<Name CPss21 260>`
??m_uiPanelReceipt  SYMBOL "m_uiPanelReceipt", `?<Name CPss21 260>`
??m_uiPanelReset    SYMBOL "m_uiPanelReset", `?<Name CPss21 260>`
??m_uiType          SYMBOL "m_uiType", `?<Name CPss21 260>`
??m_xBuzzerNotifyerControl SYMBOL "m_xBuzzerNotifyerControl", `?<Name CPss21 260>`
??m_xCheckKey       SYMBOL "m_xCheckKey", `?<Name CPss21 260>`
??m_xDeviceConfigSearch SYMBOL "m_xDeviceConfigSearch", `?<Name CPss21 260>`
??m_xDeviceConfiguration SYMBOL "m_xDeviceConfiguration", `?<Name CPss21 260>`
??m_xDeviceState    SYMBOL "m_xDeviceState", `?<Name CPss21 260>`
??m_xDiscreteOutputDataBase SYMBOL "m_xDiscreteOutputDataBase", `?<Name CPss21 260>`
??m_xEmergencyAlarmWindowNotifyerControl SYMBOL "m_xEmergencyAlarmWindowNotifyerControl", `?<Name CPss21 260>`
??m_xEventUniteLogicAndOne SYMBOL "m_xEventUniteLogicAndOne", `?<Name CPss21 260>`
??m_xExternalKey    SYMBOL "m_xExternalKey", `?<Name CPss21 260>`
??m_xMainCycleTimer SYMBOL "m_xMainCycleTimer", `?<Name CPss21 260>`
??m_xModbusRtuLinkControl SYMBOL "m_xModbusRtuLinkControl", `?<Name CPss21 260>`
??m_xModbusRtuOne   SYMBOL "m_xModbusRtuOne", `?<Name CPss21 260>`
??m_xModbusSettings SYMBOL "m_xModbusSettings", `?<Name CPss21 260>`
??m_xPreventiveAlarmWindowNotifyerControl SYMBOL "m_xPreventiveAlarmWindowNotifyerControl", `?<Name CPss21 260>`
??m_xReceiptKey     SYMBOL "m_xReceiptKey", `?<Name CPss21 260>`
??m_xResetKey       SYMBOL "m_xResetKey", `?<Name CPss21 260>`
??m_xStatusLedNotifyerControl SYMBOL "m_xStatusLedNotifyerControl", `?<Name CPss21 260>`
??m_xTestModeNotifyerControl SYMBOL "m_xTestModeNotifyerControl", `?<Name CPss21 260>`
??m_xUart1          SYMBOL "m_xUart1", `?<Name CPss21 260>`

        EXTERN ??AlarmSet
        EXTERN ??AlarmSet_1
        EXTERN ??AlarmSet_2
        EXTERN ??AlarmSet_3
        EXTERN ??CAlarmWindow
        EXTERN ??CBuzzerNotifyerControl
        EXTERN ??CEmergencyAlarmWindowNotifyerControl
        EXTERN ??CEventUniteLogicAnd
        EXTERN ??CIndicationAlarmHighLevelDfa
        EXTERN ??CIndicationAlarmHighLevelNamurDfa
        EXTERN ??CIndicationAlarmLowLevelDfa
        EXTERN ??CIndicationAlarmLowLevelNamurDfa
        EXTERN ??CModbusRTU
        EXTERN ??CModbusRtuLinkControl
        EXTERN ??CModuleMrXXDriver
        EXTERN ??CMultiFunctionKey
        EXTERN ??CMvsn21Driver
        EXTERN ??CNormalAlarmDfa
        EXTERN ??CPreventiveAlarmHighLevelDfa
        EXTERN ??CPreventiveAlarmHighLevelNamurDfa
        EXTERN ??CPreventiveAlarmLowLevelDfa
        EXTERN ??CPreventiveAlarmLowLevelNamurDfa
        EXTERN ??CPreventiveAlarmWindowNotifyerControl
        EXTERN ??CStatusLedNotifyerControl
        EXTERN ??CTestModeNotifyerControl
        EXTERN ??CTimer
        EXTERN ??CUart
        EXTERN ??Check
        EXTERN ??Disable
        EXTERN ??Enable
        EXTERN ??Exchange
        EXTERN ??Fsm
        EXTERN ??Fsm_1
        EXTERN ??Fsm_2
        EXTERN ??Fsm_3
        EXTERN ??Fsm_4
        EXTERN ??Init_1
        EXTERN ??Init_2
        EXTERN ??Init_3
        EXTERN ??Init_4
        EXTERN ??Init_5
        EXTERN ??IsHappened
        EXTERN ??IsOverflow
        EXTERN ??KeyEventHappened
        EXTERN ??ReadBlock
        EXTERN ??Reset
        EXTERN ??Set
        EXTERN ??Set_1
        EXTERN ??SignatureCreate
        EXTERN ??SlaveSet
        EXTERN ??WriteBlock
        EXTERN ??delay_ms
        EXTERN ??iCrcSummOneByteCompare
        EXTERN ??m_pxUart1
        EXTERN `??operator new`
        EXTERN `?~CAlarmWindow`
        EXTERN `?~CBuzzerNotifyerControl`
        EXTERN `?~CEmergencyAlarmWindowNotifyerControl`
        EXTERN `?~CEventUniteLogicAnd`
        EXTERN `?~CModbusRTU`
        EXTERN `?~CModbusRtuLinkControl`
        EXTERN `?~CMultiFunctionKey`
        EXTERN `?~CPreventiveAlarmWindowNotifyerControl`
        EXTERN `?~CStatusLedNotifyerControl`
        EXTERN `?~CTestModeNotifyerControl`
        EXTERN `?~CTimer`
        EXTERN `?~CUart`
        EXTERN __near_vec_construct
        EXTERN __near_vec_destroy
        EXTERN __record_needed_destruction
        EXTERN memcpy
        EXTERN memset

// D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//    1 //-----------------------------------------------------------------------------------------------------
//    2 //  Source      : FileName.cpp
//    3 //  Created     : 01.06.2022
//    4 //  Author      : Alexandr Volvenkin
//    5 //  email       : aav-36@mail.ru
//    6 //  GitHub      : https://github.com/AlexandrVolvenkin
//    7 //-----------------------------------------------------------------------------------------------------
//    8 #include "Pss21.h"

        ASEGN ABSOLUTE:DATA:ROOT,09dH
// union <unnamed> volatile __io _A_UCSR1C
_A_UCSR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09cH
// union <unnamed> volatile __io _A_UDR1
_A_UDR1:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09bH
// union <unnamed> volatile __io _A_UCSR1A
_A_UCSR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09aH
// union <unnamed> volatile __io _A_UCSR1B
_A_UCSR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,099H
// union <unnamed> volatile __io _A_UBRR1L
_A_UBRR1L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,098H
// union <unnamed> volatile __io _A_UBRR1H
_A_UBRR1H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,095H
// union <unnamed> volatile __io _A_UCSR0C
_A_UCSR0C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,090H
// union <unnamed> volatile __io _A_UBRR0H
_A_UBRR0H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08cH
// union <unnamed> volatile __io _A_TCCR3C
_A_TCCR3C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08bH
// union <unnamed> volatile __io _A_TCCR3A
_A_TCCR3A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08aH
// union <unnamed> volatile __io _A_TCCR3B
_A_TCCR3B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,088H
// union <unnamed> volatile __io _A_TCNT3
_A_TCNT3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,086H
// union <unnamed> volatile __io _A_OCR3A
_A_OCR3A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,084H
// union <unnamed> volatile __io _A_OCR3B
_A_OCR3B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,082H
// union <unnamed> volatile __io _A_OCR3C
_A_OCR3C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,080H
// union <unnamed> volatile __io _A_ICR3
_A_ICR3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,07dH
// union <unnamed> volatile __io _A_ETIMSK
_A_ETIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07cH
// union <unnamed> volatile __io _A_ETIFR
_A_ETIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07aH
// union <unnamed> volatile __io _A_TCCR1C
_A_TCCR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,078H
// union <unnamed> volatile __io _A_OCR1C
_A_OCR1C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,074H
// union <unnamed> volatile __io _A_TWCR
_A_TWCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,073H
// union <unnamed> volatile __io _A_TWDR
_A_TWDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,072H
// union <unnamed> volatile __io _A_TWAR
_A_TWAR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,071H
// union <unnamed> volatile __io _A_TWSR
_A_TWSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,070H
// union <unnamed> volatile __io _A_TWBR
_A_TWBR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06fH
// union <unnamed> volatile __io _A_OSCCAL
_A_OSCCAL:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06dH
// union <unnamed> volatile __io _A_XMCRA
_A_XMCRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06cH
// union <unnamed> volatile __io _A_XMCRB
_A_XMCRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06aH
// union <unnamed> volatile __io _A_EICRA
_A_EICRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,068H
// union <unnamed> volatile __io _A_SPMCSR
_A_SPMCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,065H
// union <unnamed> volatile __io _A_PORTG
_A_PORTG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,064H
// union <unnamed> volatile __io _A_DDRG
_A_DDRG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,063H
// union <unnamed> volatile __io _A_PING
_A_PING:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,062H
// union <unnamed> volatile __io _A_PORTF
_A_PORTF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,061H
// union <unnamed> volatile __io _A_DDRF
_A_DDRF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05fH
// union <unnamed> volatile __io _A_SREG
_A_SREG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05dH
// union <unnamed> volatile __io _A_SP
_A_SP:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,05cH
// union <unnamed> volatile __io _A_XDIV
_A_XDIV:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05bH
// union <unnamed> volatile __io _A_RAMPZ
_A_RAMPZ:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05aH
// union <unnamed> volatile __io _A_EICRB
_A_EICRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,059H
// union <unnamed> volatile __io _A_EIMSK
_A_EIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,058H
// union <unnamed> volatile __io _A_EIFR
_A_EIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,057H
// union <unnamed> volatile __io _A_TIMSK
_A_TIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,056H
// union <unnamed> volatile __io _A_TIFR
_A_TIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,055H
// union <unnamed> volatile __io _A_MCUCR
_A_MCUCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,054H
// union <unnamed> volatile __io _A_MCUCSR
_A_MCUCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,053H
// union <unnamed> volatile __io _A_TCCR0
_A_TCCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,052H
// union <unnamed> volatile __io _A_TCNT0
_A_TCNT0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,051H
// union <unnamed> volatile __io _A_OCR0
_A_OCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,050H
// union <unnamed> volatile __io _A_ASSR
_A_ASSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04fH
// union <unnamed> volatile __io _A_TCCR1A
_A_TCCR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04eH
// union <unnamed> volatile __io _A_TCCR1B
_A_TCCR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04cH
// union <unnamed> volatile __io _A_TCNT1
_A_TCNT1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,04aH
// union <unnamed> volatile __io _A_OCR1A
_A_OCR1A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,048H
// union <unnamed> volatile __io _A_OCR1B
_A_OCR1B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,046H
// union <unnamed> volatile __io _A_ICR1
_A_ICR1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,045H
// union <unnamed> volatile __io _A_TCCR2
_A_TCCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,044H
// union <unnamed> volatile __io _A_TCNT2
_A_TCNT2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,043H
// union <unnamed> volatile __io _A_OCR2
_A_OCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,042H
// union <unnamed> volatile __io _A_OCDR
_A_OCDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,041H
// union <unnamed> volatile __io _A_WDTCR
_A_WDTCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,040H
// union <unnamed> volatile __io _A_SFIOR
_A_SFIOR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03eH
// union <unnamed> volatile __io _A_EEAR
_A_EEAR:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,03dH
// union <unnamed> volatile __io _A_EEDR
_A_EEDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03cH
// union <unnamed> volatile __io _A_EECR
_A_EECR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03bH
// union <unnamed> volatile __io _A_PORTA
_A_PORTA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03aH
// union <unnamed> volatile __io _A_DDRA
_A_DDRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,039H
// union <unnamed> volatile __io _A_PINA
_A_PINA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,038H
// union <unnamed> volatile __io _A_PORTB
_A_PORTB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,037H
// union <unnamed> volatile __io _A_DDRB
_A_DDRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,036H
// union <unnamed> volatile __io _A_PINB
_A_PINB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,035H
// union <unnamed> volatile __io _A_PORTC
_A_PORTC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,034H
// union <unnamed> volatile __io _A_DDRC
_A_DDRC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,033H
// union <unnamed> volatile __io _A_PINC
_A_PINC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,032H
// union <unnamed> volatile __io _A_PORTD
_A_PORTD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,031H
// union <unnamed> volatile __io _A_DDRD
_A_DDRD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,030H
// union <unnamed> volatile __io _A_PIND
_A_PIND:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02fH
// union <unnamed> volatile __io _A_SPDR
_A_SPDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02eH
// union <unnamed> volatile __io _A_SPSR
_A_SPSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02dH
// union <unnamed> volatile __io _A_SPCR
_A_SPCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02cH
// union <unnamed> volatile __io _A_UDR0
_A_UDR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02bH
// union <unnamed> volatile __io _A_UCSR0A
_A_UCSR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02aH
// union <unnamed> volatile __io _A_UCSR0B
_A_UCSR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,029H
// union <unnamed> volatile __io _A_UBRR0L
_A_UBRR0L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,028H
// union <unnamed> volatile __io _A_ACSR
_A_ACSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,027H
// union <unnamed> volatile __io _A_ADMUX
_A_ADMUX:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,026H
// union <unnamed> volatile __io _A_ADCSRA
_A_ADCSRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,024H
// union <unnamed> volatile __io _A_ADC
_A_ADC:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,023H
// union <unnamed> volatile __io _A_PORTE
_A_PORTE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,022H
// union <unnamed> volatile __io _A_DDRE
_A_DDRE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,021H
// union <unnamed> volatile __io _A_PINE
_A_PINE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,020H
// union <unnamed> volatile __io _A_PINF
_A_PINF:
        DS8 1
//    9 #include "Platform.h"
//   10 #include "InputDevice.h"
//   11 #include "Mvsn21.h"
//   12 #include "ModuleMrXX.h"
//   13 #include "Crc.h"
//   14 #include "ModbusRTU.h"
//   15 #include "DataBase.h"
//   16 #include "DataTypes.h"
//   17 #include "Alarm.h"
//   18 #include "NotifyerControl.h"
//   19 #include "Buzzer.h"
//   20 #include "Event.h"
//   21 #include "Dfa.h"
//   22 
//   23 
//   24 //uint8_t CPss21::m_aucRtuCoilsArray[];
//   25 //uint8_t CPss21::m_aucRtuDiscreteInputsArray[];

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   26 uint16_t CPss21::m_aucRtuHoldingRegistersArray[];
??m_aucRtuHoldingRegistersArray:
        DS8 16

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   27 uint16_t CPss21::m_aucRtuInputRegistersArray[];
??m_aucRtuInputRegistersArray:
        DS8 16

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   28 uint8_t CPss21::m_aucRtuDiscreteDataArray[];
??m_aucRtuDiscreteDataArray:
        DS8 120

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   29 uint8_t CPss21::m_auiReceiveMessageBuff[];
??m_auiReceiveMessageBuff:
        DS8 256
//   30 //uint8_t CPss21::m_auiTransmitMessageBuff[];

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   31 uint8_t CPss21::m_auiIntermediateBuff[];
??m_auiIntermediateBuff:
        DS8 256

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   32 uint8_t CPss21::m_auiSpiRxBuffer[];
??m_auiSpiRxBuffer:
        DS8 64

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   33 uint8_t CPss21::m_auiSpiTxBuffer[];
??m_auiSpiTxBuffer:
        DS8 64
//   34 

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   35 uint8_t CPss21::m_uiFsmState;
??m_uiFsmState:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   36 uint8_t CPss21::m_uiType;
??m_uiType:
        DS8 1
//   37 //CDriver* CPss21::m_pxDriver;
//   38 //CDevice* CPss21::m_apxDevices[];

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   39 CDriver* CPss21::m_apxDrivers[];
??m_apxDrivers:
        DS8 6

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
//   40 
//   41 CUart CPss21::m_xUart1(&UBRR1H, &UBRR1L, &UCSR1A, &UCSR1B, &UCSR1C, &UDR1, &DDRC, DDC7, &PORTC, PC7);
?_0:
        DS8 6
        REQUIRE `?<Initializer for >`

        RSEG CODE:CODE:NOROOT(1)
// static __intrinsic __version_3 void __sti__routine()
??__sti__routine:
        LDI     R16, 7
        ST      -Y, R16
        LDI     R16, LOW(53)
        LDI     R17, (53) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, 7
        ST      -Y, R16
        LDI     R16, LOW(52)
        LDI     R17, (52) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(156)
        LDI     R17, (156) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(157)
        LDI     R17, (157) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(154)
        LDI     R17, (154) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R22, LOW(155)
        LDI     R23, (155) >> 8
        LDI     R20, LOW(153)
        LDI     R21, (153) >> 8
        LDI     R18, LOW(152)
        LDI     R19, (152) >> 8
        LDI     R16, LOW(??m_xUart1)
        LDI     R17, (??m_xUart1) >> 8
        CALL    ??CUart
        LDI     R16, LOW(?_0)
        LDI     R17, (?_0) >> 8
        CALL    __record_needed_destruction
//   42 CModbusRTU CPss21::m_xModbusRtuOne;
        LDI     R18, 0
        LDI     R19, 0
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??CModbusRTU
        LDI     R16, LOW(?_2)
        LDI     R17, (?_2) >> 8
        CALL    __record_needed_destruction
//   43 
//   44 //CDataBase CPss21::m_xDataBase;
//   45 //CDataBase* CPss21::m_pxDataBase;
//   46 //CDataStore CPss21::m_xDataStore;
//   47 
//   48 CMultiFunctionKey CPss21::m_xReceiptKey(CPlatform::KeyOneState);
        LDI     R18, LOW(??KeyOneState/2)
        LDI     R19, (??KeyOneState/2) >> 8
        LDI     R16, LOW(??m_xReceiptKey)
        LDI     R17, (??m_xReceiptKey) >> 8
        CALL    ??CMultiFunctionKey
        LDI     R16, LOW(?_4)
        LDI     R17, (?_4) >> 8
        CALL    __record_needed_destruction
//   49 CMultiFunctionKey CPss21::m_xResetKey(CPlatform::KeyTwoState);
        LDI     R18, LOW(??KeyTwoState/2)
        LDI     R19, (??KeyTwoState/2) >> 8
        LDI     R16, LOW(??m_xResetKey)
        LDI     R17, (??m_xResetKey) >> 8
        CALL    ??CMultiFunctionKey
        LDI     R16, LOW(?_6)
        LDI     R17, (?_6) >> 8
        CALL    __record_needed_destruction
//   50 CMultiFunctionKey CPss21::m_xCheckKey(CPlatform::KeyThreeState);
        LDI     R18, LOW(??KeyThreeState/2)
        LDI     R19, (??KeyThreeState/2) >> 8
        LDI     R16, LOW(??m_xCheckKey)
        LDI     R17, (??m_xCheckKey) >> 8
        CALL    ??CMultiFunctionKey
        LDI     R16, LOW(?_8)
        LDI     R17, (?_8) >> 8
        CALL    __record_needed_destruction
//   51 CMultiFunctionKey CPss21::m_xExternalKey(CPlatform::ExternalKeyState);
        LDI     R18, LOW(??ExternalKeyState/2)
        LDI     R19, (??ExternalKeyState/2) >> 8
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??CMultiFunctionKey
        LDI     R16, LOW(?_10)
        LDI     R17, (?_10) >> 8
        CALL    __record_needed_destruction
//   52 
//   53 //CIsReceiptButtonPressed CPss21::m_xIsReceiptButtonPressed;
//   54 
//   55 uint8_t CPss21::m_uiPanelReceipt;
//   56 uint8_t CPss21::m_uiPanelReset;
//   57 uint8_t CPss21::m_uiExternalReceipt;
//   58 uint8_t CPss21::m_uiExternalReset;
//   59 uint8_t CPss21::m_uiModbusReceipt;
//   60 uint8_t CPss21::m_uiModbusReset;
//   61 uint8_t CPss21::m_uiDiscreteSignalsReceipt;
//   62 uint8_t CPss21::m_uiDiscreteSignalsReset;
//   63 uint8_t CPss21::m_uiErrorCode;
//   64 uint8_t CPss21::m_uiModuleIndex;
//   65 CEventUniteLogicAnd CPss21::m_xEventUniteLogicAndOne(500);
        LDI     R18, 244
        LDI     R19, 1
        LDI     R16, LOW(??m_xEventUniteLogicAndOne)
        LDI     R17, (??m_xEventUniteLogicAndOne) >> 8
        CALL    ??CEventUniteLogicAnd
        LDI     R16, LOW(?_12)
        LDI     R17, (?_12) >> 8
        CALL    __record_needed_destruction
//   66 CTimer CPss21::m_xMainCycleTimer(MAIN_CYCLE_PERIOD_TIME);
        LDI     R18, 100
        LDI     R19, 0
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??CTimer
        LDI     R16, LOW(?_14)
        LDI     R17, (?_14) >> 8
        CALL    __record_needed_destruction
//   67 //CTimer CPss21::m_xPeripheryTimer(PERIPHERY_SCAN_TIME);
//   68 
//   69 CPreventiveAlarmWindowNotifyerControl CPss21::m_xPreventiveAlarmWindowNotifyerControl;
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??CPreventiveAlarmWindowNotifyerControl
        LDI     R16, LOW(?_16)
        LDI     R17, (?_16) >> 8
        CALL    __record_needed_destruction
//   70 CEmergencyAlarmWindowNotifyerControl CPss21::m_xEmergencyAlarmWindowNotifyerControl;
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??CEmergencyAlarmWindowNotifyerControl
        LDI     R16, LOW(?_18)
        LDI     R17, (?_18) >> 8
        CALL    __record_needed_destruction
//   71 CStatusLedNotifyerControl CPss21::m_xStatusLedNotifyerControl;
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??CStatusLedNotifyerControl
        LDI     R16, LOW(?_20)
        LDI     R17, (?_20) >> 8
        CALL    __record_needed_destruction
//   72 CBuzzerNotifyerControl CPss21::m_xBuzzerNotifyerControl;
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??CBuzzerNotifyerControl
        LDI     R16, LOW(?_22)
        LDI     R17, (?_22) >> 8
        CALL    __record_needed_destruction
//   73 CTestModeNotifyerControl CPss21::m_xTestModeNotifyerControl;
        LDI     R16, LOW(??m_xTestModeNotifyerControl)
        LDI     R17, (??m_xTestModeNotifyerControl) >> 8
        CALL    ??CTestModeNotifyerControl
        LDI     R16, LOW(?_24)
        LDI     R17, (?_24) >> 8
        CALL    __record_needed_destruction
//   74 CModbusRtuLinkControl CPss21::m_xModbusRtuLinkControl;
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??CModbusRtuLinkControl
        LDI     R16, LOW(?_26)
        LDI     R17, (?_26) >> 8
        CALL    __record_needed_destruction
//   75 
//   76 
//   77 uint8_t CPss21::m_uiCommonAlarmType;
//   78 uint8_t CPss21::m_uiCommonAlarmTypePrevious;
//   79 //CLightBoard CPss21::m_xLightBoard;
//   80 TConfigDataPackOne CPss21::m_xDeviceConfigSearch;
//   81 TDevConfig CPss21::m_xDeviceConfiguration;
//   82 TDeviceState CPss21::m_xDeviceState;
//   83 TMBusSetting CPss21::m_xModbusSettings;
//   84 CAlarmDfa *CPss21::m_apxAlarmDfa[];
//   85 
//   86 CErrorAlarmDfa *CPss21::m_apxErrorAlarmDfa[];
//   87 uint8_t CPss21::m_auiErrorAlarmDataArray[];
//   88 
//   89 TDiscreteOutputControl CPss21::m_axDiscreteOutputControl[];
//   90 TOutputData CPss21::m_xDiscreteOutputDataBase;
//   91 CAlarmWindow CPss21::m_axAlarmWindowControl[];
        LDI     R22, LOW(??CAlarmWindow/2)
        LDI     R23, (??CAlarmWindow/2) >> 8
        LDI     R20, 8
        LDI     R21, 0
        LDI     R18, 48
        LDI     R19, 0
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        CALL    __near_vec_construct
        LDI     R16, LOW(?_28)
        LDI     R17, (?_28) >> 8
        CALL    __record_needed_destruction
        RET
        REQUIRE _A_UBRR1H
        REQUIRE _A_UBRR1L
        REQUIRE _A_UCSR1A
        REQUIRE _A_UCSR1B
        REQUIRE _A_UCSR1C
        REQUIRE _A_UDR1
        REQUIRE _A_DDRC
        REQUIRE _A_PORTC

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 0>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CUart`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xUart1:
        DS8 47

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_1:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 1>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CModbusRTU`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_2:
        DS8 6
        REQUIRE `?<Initializer for >_1`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xModbusRtuOne:
        DS8 49

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_3:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 2>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CMultiFunctionKey`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_4:
        DS8 6
        REQUIRE `?<Initializer for >_2`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xReceiptKey:
        DS8 15

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_5:
        DS8 2

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_6:
        DS8 6
        REQUIRE `?<Initializer for >_3`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xResetKey:
        DS8 15

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_7:
        DS8 2

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_8:
        DS8 6
        REQUIRE `?<Initializer for >_4`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xCheckKey:
        DS8 15

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_9:
        DS8 2

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_10:
        DS8 6
        REQUIRE `?<Initializer for >_5`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xExternalKey:
        DS8 15

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_11:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiPanelReceipt:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiPanelReset:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiExternalReceipt:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiExternalReset:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiModbusReceipt:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiModbusReset:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiDiscreteSignalsReceipt:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiDiscreteSignalsReset:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiErrorCode:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiModuleIndex:
        DS8 1

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 3>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CEventUniteLogicAnd`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_12:
        DS8 6
        REQUIRE `?<Initializer for >_6`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xEventUniteLogicAndOne:
        DS8 14

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_13:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 4>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CTimer`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_14:
        DS8 6
        REQUIRE `?<Initializer for >_7`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xMainCycleTimer:
        DS8 6

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_15:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 5>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CPreventiveAlarmWindowNotifyerControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_16:
        DS8 6
        REQUIRE `?<Initializer for >_8`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xPreventiveAlarmWindowNotifyerControl:
        DS8 12

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_17:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 6>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CEmergencyAlarmWindowNotifyerControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_18:
        DS8 6
        REQUIRE `?<Initializer for >_9`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xEmergencyAlarmWindowNotifyerControl:
        DS8 12

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_19:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 7>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CStatusLedNotifyerControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_20:
        DS8 6
        REQUIRE `?<Initializer for >_10`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xStatusLedNotifyerControl:
        DS8 12

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_21:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 8>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CBuzzerNotifyerControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_22:
        DS8 6
        REQUIRE `?<Initializer for >_11`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xBuzzerNotifyerControl:
        DS8 12

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_23:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 9>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CTestModeNotifyerControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_24:
        DS8 6
        REQUIRE `?<Initializer for >_12`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xTestModeNotifyerControl:
        DS8 12

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_25:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 10>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CModbusRtuLinkControl`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 11>`:
        LDI     R22, LOW(`?<Unnamed 12>`/2)
        LDI     R23, (`?<Unnamed 12>`/2) >> 8
        LDI     R20, 8
        LDI     R21, 0
        LDI     R18, 48
        LDI     R19, 0
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        CALL    __near_vec_destroy
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_26:
        DS8 6
        REQUIRE `?<Initializer for >_13`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xModbusRtuLinkControl:
        DS8 11

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_27:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiCommonAlarmType:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiCommonAlarmTypePrevious:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDeviceConfigSearch:
        DS8 9

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDeviceConfiguration:
        DS8 20

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDeviceState:
        DS8 8

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xModbusSettings:
        DS8 7

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_apxAlarmDfa:
        DS8 192

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_apxErrorAlarmDfa:
        DS8 4

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_auiErrorAlarmDataArray:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_axDiscreteOutputControl:
        DS8 16

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDiscreteOutputDataBase:
        DS8 24

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 12>`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        LDI     R18, 2
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CAlarmWindow`
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_28:
        DS8 6
        REQUIRE `?<Initializer for >_14`

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_axAlarmWindowControl:
        DS8 384

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_29:
        DS8 2
//   92 

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//   93 uint8_t CPss21::m_aucDiscreteInputsBadState[];
??m_aucDiscreteInputsBadState:
        DS8 48

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
//   94 

        RSEG NEAR_F:CODE:ROOT(0)
//   95 __flash uint8_t CPss21::m_auiErrorLedOn[] =
??m_auiErrorLedOn:
        DC8 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0
        DC8 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1
        DC8 1, 1
//   96 {
//   97     1, 1, 1, 1,    1, 1, 1, 1,
//   98     1, 0, 0, 0,    0, 0, 0, 1,
//   99     1, 0, 0, 0,    0, 0, 0, 1,
//  100     1, 0, 0, 0,    0, 0, 0, 1,
//  101     1, 0, 0, 0,    0, 0, 0, 1,
//  102     1, 1, 1, 1,    1, 1, 1, 1,
//  103 };
//  104 
//  105 ////-----------------------------------------------------------------------------------------------------
//  106 //CPss21::CPss21(uint8_t uiType, CDriver* pxDriver)// :
//  107 ////    m_uiType(uiType),
//  108 ////    m_pxDriver(pxDriver)
//  109 //{
//  110 //
//  111 //}
//  112 //
//  113 ////-----------------------------------------------------------------------------------------------------
//  114 //CPss21::~CPss21()
//  115 //{
//  116 //
//  117 //}
//  118 
//  119 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  120 void CPss21::ModbusInit(void)
??ModbusInit:
//  121 {
//  122     CPlatform::m_pxUart1 = &m_xUart1;
        LDI     R16, LOW(??m_xUart1)
        LDI     R17, (??m_xUart1) >> 8
        LDI     R30, LOW(??m_pxUart1)
        LDI     R31, (??m_pxUart1) >> 8
        ST      Z, R16
        STD     Z+1, R17
//  123     m_xModbusRtuOne.Init(CPlatform::m_pxUart1,
//  124                          static_cast<uint32_t>((F_CPU / ((CPss21::m_xModbusSettings.BaudRate) + 1)) / 16UL),
//  125                          'N',
//  126                          8,
//  127                          1,
//  128                          CPss21::m_auiReceiveMessageBuff,
//  129                          CPss21::m_auiReceiveMessageBuff,//reinterpret_cast<uint8_t*>(CPss21::m_aucRtuHoldingRegistersArray),//m_auiTransmitMessageBuff,//
//  130                          CPss21::m_aucRtuDiscreteDataArray,//CPss21::m_aucRtuCoilsArray,
//  131                          CPss21::m_aucRtuDiscreteDataArray,//CPss21::m_aucRtuDiscreteInputsArray,
//  132                          CPss21::m_aucRtuHoldingRegistersArray,
//  133                          CPss21::m_aucRtuInputRegistersArray,
//  134                          DISCRETE_DATA_ARRAY_LENGTH,
//  135                          DISCRETE_DATA_ARRAY_LENGTH,
//  136                          HOLDING_REGISTERS_ARRAY_LENGTH,
//  137                          INPUT_REGISTERS_ARRAY_LENGTH);
        LDI     R16, 8
        LDI     R17, 0
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, 8
        LDI     R17, 0
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, 120
        LDI     R17, 0
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, 120
        LDI     R17, 0
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_aucRtuInputRegistersArray)
        LDI     R17, (??m_aucRtuInputRegistersArray) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_aucRtuHoldingRegistersArray)
        LDI     R17, (??m_aucRtuHoldingRegistersArray) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_aucRtuDiscreteDataArray)
        LDI     R17, (??m_aucRtuDiscreteDataArray) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_aucRtuDiscreteDataArray)
        LDI     R17, (??m_aucRtuDiscreteDataArray) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_auiReceiveMessageBuff)
        LDI     R17, (??m_auiReceiveMessageBuff) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, LOW(??m_auiReceiveMessageBuff)
        LDI     R17, (??m_auiReceiveMessageBuff) >> 8
        ST      -Y, R17
        ST      -Y, R16
        LDI     R16, 1
        ST      -Y, R16
        LDI     R16, 8
        ST      -Y, R16
        LDI     R16, 78
        ST      -Y, R16
        LDS     R20, (??m_xModbusSettings + 1)
        LDI     R21, 0
        SUBI    R20, 255
        SBCI    R21, 255
        MOV     R22, R21
        LSL     R22
        SBC     R22, R22
        MOV     R23, R22
        LDI     R16, 0
        LDI     R17, 128
        LDI     R18, 112
        LDI     R19, 0
        CALL    ?UL_DIVMOD_L03
        LDI     R20, 4
        CALL    ?UL_SHR_L03
        MOVW    R21:R20, R17:R16
        MOVW    R23:R22, R19:R18
        LDI     R30, LOW(??m_pxUart1)
        LDI     R31, (??m_pxUart1) >> 8
        LD      R18, Z
        LDD     R19, Z+1
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Init_1
//  138     m_xModbusRtuOne.SlaveSet(CPss21::m_xModbusSettings.NetAddress);
        LDS     R18, ??m_xModbusSettings
        LDI     R30, LOW(??m_xModbusRtuOne)
        LDI     R31, (??m_xModbusRtuOne) >> 8
        LDD     R16, Z+13
        LDD     R17, Z+14
        CALL    ??SlaveSet
//  139     m_xModbusRtuOne.SetFsmState(CModbus::START_SLAVE);
        LDI     R18, 2
        LDI     R30, LOW(??m_xModbusRtuOne)
        LDI     R31, (??m_xModbusRtuOne) >> 8
        LDD     R16, Z+13
        LDD     R17, Z+14
        CALL    ??SetFsmState
//  140 }
        RET
//  141 
//  142 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  143 void CPss21::ModbusDefaultInit(void)
??ModbusDefaultInit:
//  144 {
//  145     CPss21::m_xModbusSettings.NetAddress = 1;
        LDI     R16, 1
        STS     ??m_xModbusSettings, R16
//  146     // 9600 baud.
//  147     CPss21::m_xModbusSettings.BaudRate = 47;
        LDI     R16, 47
        STS     (??m_xModbusSettings + 1), R16
//  148     //   .
//  149     CPss21::m_xModbusSettings.LinkParam = 0x08;
        LDI     R16, 8
        STS     (??m_xModbusSettings + 2), R16
//  150 
//  151     ModbusInit();
        RCALL   ??ModbusInit
//  152 }
        RET
//  153 
//  154 //-----------------------------------------------------------------------------------------------------
//  155 void CPss21::Init(void)
//  156 {
//  157     CLightBoard::Init(m_axAlarmWindowControl);
//  158     m_uiCommonAlarmType = NORMAL;
//  159     m_uiCommonAlarmTypePrevious = NORMAL;
//  160     SetErrorCode(0);
//  161     //   .
//  162     memset(CPss21::m_auiErrorAlarmDataArray, 0, HANDLED_ERROR_NUMBER);
//  163     CPss21::AllAlarmWindowOff();
//  164 }
//  165 
//  166 //-----------------------------------------------------------------------------------------------------
//  167 void CPss21::AddressBusInit(void)
//  168 {
//  169     CPlatform::SpiSlaveSelectAddress0SetPinOutput();
//  170     CPlatform::SpiSlaveSelectAddress1SetPinOutput();
//  171     CPlatform::SpiSlaveSelectAddress2SetPinOutput();
//  172     CPlatform::SpiSlaveSelectAddress3SetPinOutput();
//  173     CPlatform::SpiSlaveSelectEnableSetPinOutput();
//  174     CPlatform::SpiSlaveSelectAddress0On();
//  175     CPlatform::SpiSlaveSelectAddress1On();
//  176     CPlatform::SpiSlaveSelectAddress2On();
//  177     CPlatform::SpiSlaveSelectAddress3On();
//  178     CPlatform::SpiSlaveSelectEnableOff();
//  179 };
//  180 
//  181 //-----------------------------------------------------------------------------------------------------
//  182 void CPss21::ConnectDevice(uint8_t uiAddress)
//  183 {
//  184     uiAddress &= 0x0F;
//  185 
//  186     if (uiAddress &  BIT(0))
//  187     {
//  188         CPlatform::SpiSlaveSelectAddress0Off();
//  189     }
//  190     else
//  191     {
//  192         CPlatform::SpiSlaveSelectAddress0On();
//  193     }
//  194     if (uiAddress &  BIT(1))
//  195     {
//  196         CPlatform::SpiSlaveSelectAddress1Off();
//  197     }
//  198     else
//  199     {
//  200         CPlatform::SpiSlaveSelectAddress1On();
//  201     }
//  202     if (uiAddress &  BIT(2))
//  203     {
//  204         CPlatform::SpiSlaveSelectAddress2Off();
//  205     }
//  206     else
//  207     {
//  208         CPlatform::SpiSlaveSelectAddress2On();
//  209     }
//  210     if (uiAddress &  BIT(3))
//  211     {
//  212         CPlatform::SpiSlaveSelectAddress3Off();
//  213     }
//  214     else
//  215     {
//  216         CPlatform::SpiSlaveSelectAddress3On();
//  217     }
//  218 
//  219     CPlatform::SpiSlaveSelectEnableOn();
//  220     CSpi::Enable();
//  221 };
//  222 
//  223 //-----------------------------------------------------------------------------------------------------
//  224 void CPss21::DisconnectDevice(void)
//  225 {
//  226     CSpi::Disable();
//  227     CPlatform::SpiSlaveSelectEnableOff();
//  228     CPlatform::SpiSlaveSelectAddress0Off();
//  229     CPlatform::SpiSlaveSelectAddress1Off();
//  230     CPlatform::SpiSlaveSelectAddress2Off();
//  231     CPlatform::SpiSlaveSelectAddress3Off();
//  232 };
//  233 
//  234 //-----------------------------------------------------------------------------------------------------
//  235 void CPss21::SearchModules(void)
//  236 {
//  237     delay_ms(500);
//  238     CPlatform::WatchdogReset();
//  239 
//  240     memset(reinterpret_cast<uint8_t*>(&m_xDeviceConfigSearch),
//  241            0,
//  242            sizeof(struct TConfigDataPackOne));
//  243 
//  244     //   SPI.   ?
//  245     for (uint8_t i = 0; i < SPI_MAX_BUS_ADDRESS; i++)
//  246     {
//  247         //     MODULE_REQUEST_QUANTITY ,
//  248         //      .
//  249         for (uint8_t j = 0; j < MODULE_REQUEST_QUANTITY; j++)
//  250         {
//  251             CPlatform::WatchdogReset();
//  252             delay_ms(5);
//  253 
//  254             m_auiSpiTxBuffer[0] = GET_MODULE_TYPE_COMMAND;
//  255             ConnectDevice(i);
//  256             delay_us(500);
//  257             CSpi::Exchange(m_auiSpiRxBuffer,
//  258                            m_auiSpiTxBuffer,
//  259                            GET_MODULE_TYPE_REQUEST_LENGTH);
//  260             DisconnectDevice();
//  261 
//  262             //  ?
//  263             if (m_auiSpiRxBuffer[SPI_COMMAND_BYTE_OFFSET] ==
//  264                     GET_MODULE_TYPE_COMMAND)
//  265             {
//  266                 //     ?
//  267                 if (iCrcSummOneByteCompare(&m_auiSpiRxBuffer[SPI_COMMAND_BYTE_OFFSET], 2))
//  268                 {
//  269                     //             SPI.
//  270                     m_xDeviceConfigSearch.axModulesContext[m_xDeviceConfigSearch.uiModulesQuantity].uiType =
//  271                         m_auiSpiRxBuffer[MODULE_TYPE_OFFSET];
//  272                     //             SPI.
//  273                     m_xDeviceConfigSearch.axModulesContext[m_xDeviceConfigSearch.uiModulesQuantity].uiAddress = i;
//  274                     //  .    -
//  275                     //     .
//  276                     (m_xDeviceConfigSearch.uiModulesQuantity)++;
//  277 
//  278                     if (m_xDeviceConfigSearch.uiModulesQuantity >=
//  279                             INTERNAL_MODULE_QUANTITY)
//  280                     {
//  281                         return;
//  282                     }
//  283                     //     .
//  284                     break;
//  285                 }
//  286             }
//  287         }
//  288     }
//  289 
//  290     if(m_xDeviceConfiguration.FixConfig)
//  291     {
//  292         //       ?
//  293         if((m_xDeviceConfiguration.ICount != m_xDeviceConfigSearch.uiDiscreteInputQuantity) ||
//  294                 (m_xDeviceConfiguration.OCount != m_xDeviceConfigSearch.uiDiscreteOutputQuantity))
//  295         {
//  296             SetErrorCode(CFG_ERROR);
//  297         }
//  298     }
//  299 };
//  300 
//  301 //-----------------------------------------------------------------------------------------------------
//  302 void CPss21::InitAllocationContext(TMemoryAllocationContext &xMemoryAllocationContext)
//  303 {
//  304     //          .
//  305 
//  306     xMemoryAllocationContext.puiRxBuffer = m_auiSpiRxBuffer;
//  307     xMemoryAllocationContext.puiTxBuffer = m_auiSpiTxBuffer;
//  308     xMemoryAllocationContext.puiErrorCode = &m_uiErrorCode;
//  309 
//  310     //     .
//  311     xMemoryAllocationContext.uiUsedDiscreteInputs = 0;
//  312     //       .
//  313     xMemoryAllocationContext.puiDiscreteInputs =
//  314         &m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET];
//  315 
//  316     //     .
//  317     xMemoryAllocationContext.uiUsedDiscreteInputsBadState = 0;
//  318     //        .
//  319     xMemoryAllocationContext.puiDiscreteInputsBadState =
//  320         &m_aucDiscreteInputsBadState[0];
//  321 
//  322     //     .
//  323     xMemoryAllocationContext.uiUsedDiscreteOutputState = 0;
//  324     //       .
//  325     xMemoryAllocationContext.puiDiscreteOutputState =
//  326         &m_aucRtuDiscreteDataArray[DISCRETE_OUTPUT_BIT_ARRAY_OFFSET];
//  327 
//  328     //     .
//  329     xMemoryAllocationContext.uiUsedDiscreteOutputs = 0;
//  330     //      .
//  331     xMemoryAllocationContext.pxDiscreteOutputControl = m_axDiscreteOutputControl;
//  332 
//  333     //     .
//  334     xMemoryAllocationContext.uiUsedDiscreteOutputDataBase = 0;
//  335     //        .
//  336     xMemoryAllocationContext.pxDiscreteOutputDataBase = &m_xDiscreteOutputDataBase;
//  337 
//  338     //     .
//  339     xMemoryAllocationContext.uiUsedErrorAlarmDataArray = 0;
//  340     //      .
//  341     xMemoryAllocationContext.puiErrorAlarmDataArray = m_auiErrorAlarmDataArray;
//  342 };
//  343 
//  344 //-----------------------------------------------------------------------------------------------------
//  345 void CPss21::CreateDevices(void)
//  346 {
//  347     TMemoryAllocationContext xMemoryAllocationContext;
//  348     InitAllocationContext(xMemoryAllocationContext);
//  349 
//  350     for (uint8_t i = 0;
//  351             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  352             i++)
//  353     {
//  354         CPlatform::WatchdogReset();
//  355 
//  356         uint8_t uiType = m_xDeviceConfigSearch.axModulesContext[i].uiType;
//  357         switch (uiType)
//  358         {
//  359         case MODULE_TYPE_MVSN:
//  360 //        case MODULE_TYPE_MVDI:
//  361 //        case MODULE_TYPE_MVDS9:
//  362             if (m_xDeviceConfigSearch.uiDiscreteInputQuantity <
//  363                     DISCRETE_INPUT_MODULE_MAX_NUMBER)
//  364             {
//  365 //            m_apxDevices[i] = new CMvsn21;
//  366 //            m_apxDevices[i] -> m_pxDriver = new CMvsn21Driver(uiType);
//  367                 m_apxDrivers[i] = new CMvsn21Driver(uiType);
//  368                 xMemoryAllocationContext.uiAddress = m_xDeviceConfigSearch.axModulesContext[i].uiAddress;
//  369 //            m_apxDevices[i] -> m_pxDriver -> Allocate(xMemoryAllocationContext);
//  370                 m_apxDrivers[i] -> Allocate(xMemoryAllocationContext);
//  371                 m_xDeviceConfigSearch.uiDiscreteInputQuantity += 1;
//  372             }
//  373             break;
//  374 
//  375         case MODULE_TYPE_MVDO5:
//  376             break;
//  377 
//  378         case MODULE_TYPE_MR53:
//  379         case MODULE_TYPE_MR54:
//  380             if (m_xDeviceConfigSearch.uiDiscreteOutputQuantity <
//  381                     DISCRETE_OUTPUT_MODULE_MAX_NUMBER)
//  382             {
//  383 //            m_apxDevices[i] = new CModuleMrXX;
//  384 //            m_apxDevices[i] -> m_pxDriver = new CModuleMrXXDriver(uiType);
//  385                 m_apxDrivers[i] = new CModuleMrXXDriver(uiType);
//  386                 xMemoryAllocationContext.uiAddress = m_xDeviceConfigSearch.axModulesContext[i].uiAddress;
//  387 //            m_apxDevices[i] -> m_pxDriver -> Allocate(xMemoryAllocationContext);
//  388                 m_apxDrivers[i] -> Allocate(xMemoryAllocationContext);
//  389                 m_xDeviceConfigSearch.uiDiscreteOutputQuantity += 1;
//  390             }
//  391             break;
//  392 
//  393         case MODULE_TYPE_MVI:
//  394             break;
//  395 
//  396         default:
//  397             break;
//  398         }
//  399     }
//  400 };
//  401 
//  402 //-----------------------------------------------------------------------------------------------------
//  403 void CPss21::DestroyDevices(uint8_t uiLength)
//  404 {
//  405     for (uint16_t i = 0; i < uiLength; i++)
//  406     {
//  407 //        delete m_apxDevices[i];
//  408 //        delete m_apxDrivers[i];
//  409     }
//  410 };
//  411 
//  412 //-----------------------------------------------------------------------------------------------------
//  413 uint16_t CPss21::ReportType(uint8_t *puiDestination, uint16_t uiLength)
//  414 {
//  415     memset(m_auiSpiTxBuffer, 0, 6);
//  416     uint8_t uiLengthLocal = 0;
//  417     m_auiSpiTxBuffer[uiLengthLocal++] = GET_MODULE_TYPE_COMMAND;
//  418     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
//  419     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
//  420     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
//  421     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
//  422 
//  423     ConnectDevice(0);
//  424     delay_us(500);
//  425     CSpi::Exchange(m_auiSpiRxBuffer,
//  426                    m_auiSpiTxBuffer,
//  427                    uiLengthLocal);
//  428     DisconnectDevice();
//  429 
//  430     return 1;
//  431 }
//  432 
//  433 //-----------------------------------------------------------------------------------------------------
//  434 void CPss21::SetBytesFromBits(uint8_t *uiDestination,
//  435                               uint8_t *uiSource,
//  436                               uint16_t uiLength)
//  437 {
//  438     int16_t shift = 0;
//  439 
//  440     for (int16_t i = 0; i < uiLength; i++)
//  441     {
//  442         uiDestination[i] = uiSource[(i) / 8] & (1 << shift) ? 1 : 0;
//  443         /* gcc doesn't like: shift = (++shift) % 8; */
//  444         shift++;
//  445         shift %= 8;
//  446     }
//  447 }
//  448 
//  449 //-----------------------------------------------------------------------------------------------------
//  450 void CPss21::ModbusDeviceControl(uint8_t* puiData, uint16_t uiLength, uint16_t uiAddress)
//  451 {
//  452     //  - ""?
//  453     if (uiAddress == MODBUS_RECEIPT_ADDRESS)
//  454     {
//  455         if (*puiData)
//  456         {
//  457             CPss21::SetModbusReceipt(1);
//  458             SetDiscreteSignalsReceipt(1);
//  459             SendToDevicesModbusReceipt();
//  460         }
//  461     }
//  462     //  - ""?
//  463     else if (uiAddress == MODBUS_RESET_ADDRESS)
//  464     {
//  465         if (*puiData)
//  466         {
//  467             CPss21::SetModbusReset(1);
//  468             SetDiscreteSignalsReset(1);
//  469             SendToDevicesModbusReset();
//  470         }
//  471     }
//  472     //    ?
//  473     else if ((uiAddress >= ALARM_WINDOWS_BIT_ARRAY_OFFSET) &&
//  474              (uiAddress < (ALARM_WINDOWS_BIT_ARRAY_OFFSET +
//  475                            ALARM_WINDOWS_ARRAY_LENGTH)))
//  476     {
//  477         SetBytesFromBits(&m_aucRtuDiscreteDataArray[uiAddress],
//  478                          puiData,
//  479                          uiLength);
//  480         //      .
//  481         m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::LINK_SESSION_HAPPENED_FSM_EVENT);
//  482     }
//  483 ////    //    ?
//  484 //    else if ((uiAddress >= DISCRETE_INPUTS_BIT_ARRAY_OFFSET) &&//debag//
//  485 //             (uiAddress < (ALARM_WINDOWS_BIT_ARRAY_OFFSET +
//  486 //                           ALARM_WINDOWS_ARRAY_LENGTH)))
//  487 //    {
//  488 //        SetBytesFromBits(&m_aucRtuDiscreteDataArray[uiAddress],
//  489 //                         puiData,
//  490 //                         uiLength);
//  491 //        //      .
//  492 //        m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::LINK_SESSION_HAPPENED_FSM_EVENT);
//  493 //    }
//  494 }
//  495 
//  496 //-----------------------------------------------------------------------------------------------------
//  497 void CPss21::ModbusDeviceControl(uint8_t uiData, uint16_t uiAddress)
//  498 {
//  499     ModbusDeviceControl(&uiData, 1, uiAddress);
//  500 }
//  501 
//  502 //-----------------------------------------------------------------------------------------------------
//  503 bool CPss21::ModbusRtuLinkControlIsOn(void)
//  504 {
//  505     if (m_xDeviceConfiguration.MBTimeout != 0)
//  506     {
//  507         return true;
//  508     }
//  509     else
//  510     {
//  511         return false;
//  512     }
//  513 }
//  514 
//  515 //-----------------------------------------------------------------------------------------------------
//  516 uint16_t CPss21::GetTimeoutModbusRtuLinkControl(void)
//  517 {
//  518     return (m_xDeviceConfiguration.MBTimeout * 1000);
//  519 }
//  520 
//  521 //-----------------------------------------------------------------------------------------------------
//  522 bool CPss21::ModbusRtuLinkControlInProgress(void)
//  523 {
//  524     if (m_xDeviceState.ModbusRtuLinkControlInProgress)
//  525     {
//  526         return true;
//  527     }
//  528     else
//  529     {
//  530         return false;
//  531     }
//  532 }
//  533 
//  534 //-----------------------------------------------------------------------------------------------------
//  535 void CPss21::SetModeModbusRtuLinkControlInProgress(bool bData)
//  536 {
//  537     m_xDeviceState.ModbusRtuLinkControlInProgress = bData;
//  538     //   .
//  539     CDataBase::WriteBlock(reinterpret_cast<uint8_t*>(&m_xDeviceState),
//  540                           TDataBase::DEVICE_STATE);
//  541     //      .
//  542     //   .
//  543     CDataBase::SignatureCreate();
//  544 }
//  545 
//  546 //-----------------------------------------------------------------------------------------------------
//  547 void CPss21::SendToDevicesReceipt(void)
//  548 {
//  549     for (uint8_t i = 0;
//  550             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  551             i++)
//  552     {
//  553         m_apxDrivers[i] -> SetReceipt(1);
//  554     }
//  555 
//  556     //     .
//  557     m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::RECEIPT_HAPPENED_FSM_EVENT);
//  558 }
//  559 
//  560 //-----------------------------------------------------------------------------------------------------
//  561 void CPss21::SendToDevicesReset(void)
//  562 {
//  563     for (uint8_t i = 0;
//  564             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  565             i++)
//  566     {
//  567         m_apxDrivers[i] -> SetReset(1);
//  568     }
//  569 }
//  570 
//  571 //-----------------------------------------------------------------------------------------------------
//  572 void CPss21::SendToDevicesModbusReceipt(void)
//  573 {
//  574     for (uint8_t i = 0;
//  575             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  576             i++)
//  577     {
//  578         m_apxDrivers[i] -> SetModbusReceipt(1);
//  579     }
//  580 
//  581     //     .
//  582     m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::RECEIPT_HAPPENED_FSM_EVENT);
//  583 }
//  584 
//  585 //-----------------------------------------------------------------------------------------------------
//  586 void CPss21::SendToDevicesModbusReset(void)
//  587 {
//  588     for (uint8_t i = 0;
//  589             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  590             i++)
//  591     {
//  592         m_apxDrivers[i] -> SetModbusReset(1);
//  593     }
//  594 }
//  595 
//  596 //-----------------------------------------------------------------------------------------------------
//  597 void CPss21::KeyStateProcessing(void)
//  598 {
//  599 //    m_xIsReceiptButtonPressed.Fsm();
//  600 
//  601 //    m_xReceiptKey.Fsm();
//  602 //    m_xResetKey.Fsm();
//  603 //    m_xCheckKey.Fsm();
//  604 //    m_xExternalKey.Fsm();
//  605 
//  606 //    if (m_xIsReceiptButtonPressed.IsSolved())
//  607 //    {
//  608 //        SetPanelReceipt(1);
//  609 //        SetDiscreteSignalsReceipt(1);
//  610 //        SendToDevicesReceipt();
//  611 //        m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  612 //    }
//  613     if (m_xReceiptKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  614     {
//  615         SetPanelReceipt(1);
//  616         SetDiscreteSignalsReceipt(1);
//  617         SendToDevicesReceipt();
//  618         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  619     }
//  620 
//  621 //    if (m_xReceiptKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_UNPRESSED))
//  622 //    {
//  623     if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  624     {
//  625         //   .
//  626         SetFsmState(TEST_START);
//  627         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  628     }
//  629 //    }
//  630 
//  631     if (m_xResetKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  632     {
//  633         SetPanelReset(1);
//  634         SetDiscreteSignalsReset(1);
//  635         SendToDevicesReset();
//  636         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  637     }
//  638 
//  639 //    if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_HOLD))
//  640 //    {
//  641 //        //      .
//  642 //        SetFsmState(MAP_CREATE_START);
//  643 //        m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  644 //    }
//  645 //
//  646 //    if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  647 //    {
//  648 //        if (GetFsmState() == MAP_CREATE_ON)
//  649 //        {
//  650 //            //  .
//  651 //            SetFsmState(MAP_CREATE_NEXT_WINDOW);
//  652 //            m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  653 //        }
//  654 //    }
//  655 
//  656 
//  657     //    -  ?
//  658     if(m_xDeviceConfiguration.ExtUnsetOnly)
//  659     {
//  660         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RECEIPT))
//  661         {
//  662             SetExternalReset(1);
//  663             SetDiscreteSignalsReset(1);
//  664             SendToDevicesReset();
//  665             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  666         }
//  667 
//  668         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_CHECK))
//  669         {
//  670             //   .
//  671             SetFsmState(TEST_START);
//  672             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  673         }
//  674     }
//  675     else
//  676     {
//  677         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RECEIPT))
//  678         {
//  679             SetExternalReceipt(1);
//  680             SetDiscreteSignalsReceipt(1);
//  681             SendToDevicesReceipt();
//  682             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  683         }
//  684 
//  685         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RESET))
//  686         {
//  687             SetExternalReset(1);
//  688             SetDiscreteSignalsReset(1);
//  689             SendToDevicesReset();
//  690             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  691         }
//  692 
//  693         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_CHECK))
//  694         {
//  695             //   .
//  696             SetFsmState(TEST_START);
//  697             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  698         }
//  699     }
//  700 
//  701     //  ""  ""   7 ?
//  702     if (m_xEventUniteLogicAndOne.IsHappened((m_xReceiptKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_SET_DEFAULT)),
//  703                                             (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_SET_DEFAULT))))
//  704     {
//  705         //   Modbus     .
//  706         CPss21::ModbusDefaultInit();
//  707         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  708     }
//  709 }
//  710 
//  711 //-----------------------------------------------------------------------------------------------------
//  712 void CPss21::ReceiptResetGlobalFlagsClear(void)
//  713 {
//  714     SetPanelReceipt(0);
//  715     SetExternalReceipt(0);
//  716     SetModbusReceipt(0);
//  717     SetPanelReset(0);
//  718     SetExternalReset(0);
//  719     SetModbusReset(0);
//  720 }
//  721 
//  722 //-----------------------------------------------------------------------------------------------------
//  723 uint8_t CPss21::ModulesInteraction(uint8_t uiModuleIndex)
//  724 {
//  725     if (uiModuleIndex < (m_xDeviceConfigSearch.uiModulesQuantity))
//  726     {
//  727         m_apxDrivers[uiModuleIndex] -> DataExchange();
//  728         return 0;
//  729     }
//  730     else
//  731     {
//  732         return 1;
//  733     }
//  734 };
//  735 
//  736 //-----------------------------------------------------------------------------------------------------
//  737 void CPss21::ConfigurationInit(void)
//  738 {
//  739     uint8_t* puiTempBuffer = m_auiIntermediateBuff;
//  740     uint8_t* puiAlarmDfaInit = m_auiReceiveMessageBuff;
//  741 
//  742     memset(puiAlarmDfaInit, 0, DISCRETE_SIGNALS_NUMBER);
//  743 
//  744     //   .
//  745     //       - " ".
//  746     CDataBase::ReadBlock(puiTempBuffer, TDataBase::DEV_CONFIG);
//  747     memcpy(reinterpret_cast<uint8_t*>(&m_xDeviceConfiguration),
//  748            puiTempBuffer,
//  749            sizeof(struct TDevConfig));
//  750 
//  751     //    ModBus.
//  752     //       - "  ModBus".
//  753     CDataBase::ReadBlock(puiTempBuffer, TDataBase::MODBUS_SET);
//  754     memcpy(reinterpret_cast<uint8_t*>(&m_xModbusSettings),
//  755            puiTempBuffer,
//  756            sizeof(struct TMBusSetting));
//  757 
//  758     //       - "  ".
//  759     CDataBase::ReadBlock(puiTempBuffer, TDataBase::OUT_BASE);
//  760     memcpy(reinterpret_cast<uint8_t*>(&m_xDiscreteOutputDataBase),
//  761            puiTempBuffer,
//  762            sizeof(struct TOutputData));
//  763 
//  764     //       .
//  765     //       - "     ".
//  766     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ACTIVITY_LEVEL);
//  767     for (uint8_t i = 0;
//  768             i < DISCRETE_INPUTS_NUMBER;
//  769         )
//  770     {
//  771         uint8_t uiData = *puiTempBuffer;
//  772         for (uint8_t j = 0;
//  773                 j < 8;
//  774                 j++)
//  775         {
//  776             //        .
//  777             if (((uiData >> j) & 0x01))
//  778             {
//  779                 puiAlarmDfaInit[i] |= 0x80;
//  780             }
//  781 
//  782             if ((i == 0) || (i == 23))
//  783             {
//  784                 puiAlarmDfaInit[i] |= 0x40;
//  785             }
//  786 
//  787             i++;
//  788         }
//  789         puiTempBuffer++;
//  790     }
//  791 
//  792     //       namur.
//  793     //       - "     namur".
//  794     CDataBase::ReadBlock(puiTempBuffer, TDataBase::NAMUR_INPUTS);
//  795     for (uint8_t i = 0;
//  796             i < DISCRETE_INPUTS_NUMBER;
//  797         )
//  798     {
//  799         uint8_t uiData = *puiTempBuffer;
//  800         for (uint8_t j = 0;
//  801                 j < 8;
//  802                 j++)
//  803         {
//  804             //       namur.
//  805             if (((uiData >> j) & 0x01))
//  806             {
//  807                 puiAlarmDfaInit[i] |= 0x40;
//  808             }
//  809 
//  810             i++;
//  811         }
//  812         puiTempBuffer++;
//  813     }
//  814 
//  815     puiTempBuffer = m_auiIntermediateBuff;
//  816     //      .
//  817     //       - "        ".
//  818     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_WINDOW_INDEX);
//  819     for (uint8_t i = 0;
//  820             i < DISCRETE_SIGNALS_NUMBER;
//  821             i++)
//  822     {
//  823         //       .
//  824         puiAlarmDfaInit[i] |= (puiTempBuffer[i] & ~(0xC0));
//  825     }
//  826 
//  827     //       - "    ".
//  828     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_TYPE);
//  829     for (uint8_t i = 0;
//  830             i < DISCRETE_SIGNALS_NUMBER;
//  831             i++)
//  832     {
//  833         uint8_t uiWindowIndex = (puiAlarmDfaInit[i] & ~(0xC0));
//  834         //      ?
//  835         if (uiWindowIndex < ALARM_WINDOWS_NUMBER)
//  836         {
//  837             //    ,   .
//  838             //       .
//  839             //      namur.
//  840             puiAlarmDfaInit[i] &= 0xC0;
//  841             //      .
//  842             puiAlarmDfaInit[i] |= puiTempBuffer[uiWindowIndex];
//  843         }
//  844         else
//  845         {
//  846             //    ,   .
//  847             //       .
//  848             //      namur.
//  849             puiAlarmDfaInit[i] &= 0xC0;
//  850         }
//  851     }
//  852 
//  853     //       .
//  854     for (uint8_t i = 0;
//  855             i < DISCRETE_SIGNALS_NUMBER;
//  856             i++)
//  857     {
//  858         //       ?
//  859         switch (puiAlarmDfaInit[i] & 0x03)
//  860         {
//  861         case NORMAL:
//  862             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  863             break;
//  864 
//  865         case INDICATION:
//  866             //       - ?
//  867             if (puiAlarmDfaInit[i] & 0x80)
//  868             {
//  869 //                m_apxAlarmDfa[i] = new CIndicationAlarmHighLevelDfa;
//  870                 //      namur - ?
//  871                 if (puiAlarmDfaInit[i] & 0x40)
//  872                 {
//  873                     m_apxAlarmDfa[i] = new CIndicationAlarmHighLevelNamurDfa;
//  874                 }
//  875                 else
//  876                 {
//  877                     m_apxAlarmDfa[i] = new CIndicationAlarmHighLevelDfa;
//  878                 }
//  879             }
//  880             else
//  881             {
//  882 //                m_apxAlarmDfa[i] = new CIndicationAlarmLowLevelDfa;
//  883                 //      namur - ?
//  884                 if (puiAlarmDfaInit[i] & 0x40)
//  885                 {
//  886                     m_apxAlarmDfa[i] = new CIndicationAlarmLowLevelNamurDfa;
//  887                 }
//  888                 else
//  889                 {
//  890                     m_apxAlarmDfa[i] = new CIndicationAlarmLowLevelDfa;
//  891                 }
//  892             }
//  893             break;
//  894 
//  895         case PREVENTIVE:
//  896             //       - ?
//  897             if (puiAlarmDfaInit[i] & 0x80)
//  898             {
//  899 //                m_apxAlarmDfa[i] = new CPreventiveAlarmHighLevelDfa;
//  900                 //      namur - ?
//  901                 if (puiAlarmDfaInit[i] & 0x40)
//  902                 {
//  903                     m_apxAlarmDfa[i] = new CPreventiveAlarmHighLevelNamurDfa;
//  904                 }
//  905                 else
//  906                 {
//  907                     m_apxAlarmDfa[i] = new CPreventiveAlarmHighLevelDfa;
//  908                 }
//  909             }
//  910             else
//  911             {
//  912 //                m_apxAlarmDfa[i] = new CPreventiveAlarmLowLevelDfa;
//  913                 //      namur - ?
//  914                 if (puiAlarmDfaInit[i] & 0x40)
//  915                 {
//  916                     m_apxAlarmDfa[i] = new CPreventiveAlarmLowLevelNamurDfa;
//  917                 }
//  918                 else
//  919                 {
//  920                     m_apxAlarmDfa[i] = new CPreventiveAlarmLowLevelDfa;
//  921                 }
//  922             }
//  923             break;
//  924 
//  925         case EMERGENCY:
//  926             //       - ?
//  927             if (puiAlarmDfaInit[i] & 0x80)
//  928             {
//  929 //                m_apxAlarmDfa[i] = new CEmergencyAlarmHighLevelDfa;
//  930                 //      namur - ?
//  931                 if (puiAlarmDfaInit[i] & 0x40)
//  932                 {
//  933                     m_apxAlarmDfa[i] = new CEmergencyAlarmHighLevelNamurDfa;
//  934                 }
//  935                 else
//  936                 {
//  937                     m_apxAlarmDfa[i] = new CEmergencyAlarmHighLevelDfa;
//  938                 }
//  939             }
//  940             else
//  941             {
//  942 //                m_apxAlarmDfa[i] = new CEmergencyAlarmLowLevelDfa;
//  943                 //      namur - ?
//  944                 if (puiAlarmDfaInit[i] & 0x40)
//  945                 {
//  946                     m_apxAlarmDfa[i] = new CEmergencyAlarmLowLevelNamurDfa;
//  947                 }
//  948                 else
//  949                 {
//  950                     m_apxAlarmDfa[i] = new CEmergencyAlarmLowLevelDfa;
//  951                 }
//  952             }
//  953             break;
//  954 
//  955         case IND_PREVENTIVE:
//  956             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  957             break;
//  958 
//  959         case IND_EMERGENCY:
//  960             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  961             break;
//  962 
//  963         default:
//  964             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  965             break;
//  966         }
//  967     }
//  968 
//  969     //         .
//  970     //       - "        ".
//  971     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_WINDOW_INDEX);
//  972     for (uint8_t i = 0;
//  973             i < DISCRETE_SIGNALS_NUMBER;
//  974             i++)
//  975     {
//  976         //      ?
//  977         if (puiTempBuffer[i] < ALARM_WINDOWS_NUMBER)
//  978         {
//  979             //       .
//  980             m_apxAlarmDfa[i] ->
//  981             SetAlarmWindowIndex(puiTempBuffer[i]);
//  982         }
//  983         else
//  984         {
//  985             m_apxAlarmDfa[i] ->
//  986             SetAlarmWindowIndex(0);
//  987         }
//  988     }
//  989 
//  990     //       - " ,   ".
//  991     CDataBase::ReadBlock(puiTempBuffer, TDataBase::RELAY);
//  992     //     .
//  993     for (uint8_t i = 0;
//  994             i < DISCRETE_SIGNALS_NUMBER;
//  995             i++)
//  996     {
//  997         *(m_apxAlarmDfa[i] -> GetLinkedDiscreteOutputsPointer()) = puiTempBuffer[i];
//  998     };
//  999 
// 1000     //       -   .
// 1001     for (uint8_t i = 0;
// 1002             i < DISCRETE_INPUTS_NUMBER;
// 1003             i++)
// 1004     {
// 1005         m_apxAlarmDfa[i] -> SetDiscreteStateIndex(i);
// 1006     };
// 1007     //       -  (coils Modbus).
// 1008     for (uint8_t i = 0;
// 1009             i < ALARM_WINDOWS_NUMBER;
// 1010             i++)
// 1011     {
// 1012         m_apxAlarmDfa[DISCRETE_INPUTS_NUMBER + i] -> SetDiscreteStateIndex(DISCRETE_INPUTS_NUMBER + i);
// 1013 //        m_apxAlarmDfa[DISCRETE_INPUTS_NUMBER + i] -> SetDiscreteStateIndex(i);
// 1014     };
// 1015 
// 1016     //    .
// 1017     //       - "    EEPROM".
// 1018     CDataBase::ReadBlock(puiTempBuffer, TDataBase::DEVICE_STATE);
// 1019     memcpy(reinterpret_cast<uint8_t*>(&m_xDeviceState),
// 1020            puiTempBuffer,
// 1021            sizeof(struct TDeviceState));
// 1022 
// 1023 //    //    .
// 1024 //    uint8_t uiIndex = 0;
// 1025 //
// 1026 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
// 1027 //    //        .
// 1028 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(IMD_ERROR);
// 1029 //    //     .
// 1030 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(IMD_ERROR);
// 1031 //    uiIndex++;
// 1032 //
// 1033 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
// 1034 //    //        .
// 1035 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(OMD_ERROR);
// 1036 //    //     .
// 1037 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(OMD_ERROR);
// 1038 //    uiIndex++;
// 1039 //
// 1040 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
// 1041 //    //        .
// 1042 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(CFG_ERROR);
// 1043 //    //     .
// 1044 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(CFG_ERROR);
// 1045 //    uiIndex++;
// 1046 //
// 1047 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
// 1048 //    //        .
// 1049 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(DB_ERROR);
// 1050 //    //     .
// 1051 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(DB_ERROR);
// 1052 //    uiIndex++;
// 1053 //
// 1054 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
// 1055 //    //        .
// 1056 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(MBS_ERROR);
// 1057 //    //     .
// 1058 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(MBS_ERROR);
// 1059 //    uiIndex++;
// 1060 
// 1061 //    //    .
// 1062 //    for (uint8_t i = 0;
// 1063 //            i < HANDLED_ERROR_NUMBER;
// 1064 //            i++)
// 1065 //    {
// 1066 //        m_apxErrorAlarmDfa[i] = new CErrorAlarmDfa;
// 1067 //        //        .
// 1068 //        m_apxErrorAlarmDfa[i] -> SetAlarmWindowIndex(i);
// 1069 //        //     .
// 1070 //        m_apxErrorAlarmDfa[i] -> SetDiscreteStateIndex(i);
// 1071 //    };
// 1072 }
// 1073 
// 1074 //-----------------------------------------------------------------------------------------------------
// 1075 void CPss21::DiscreteOutputControlClear(void)
// 1076 {
// 1077     //      ()   .
// 1078     for (int j = 0;
// 1079             j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
// 1080             j++)
// 1081     {
// 1082         //   .
// 1083         for (int k = 0;
// 1084                 k < MR_DISCRETE_OUTPUT_NUMBER;
// 1085                 k++)
// 1086         {
// 1087             //   -  .
// 1088             m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiNewActivation = 0;
// 1089             //   -   .
// 1090             m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 0;
// 1091         }
// 1092     }
// 1093 }
// 1094 
// 1095 //-----------------------------------------------------------------------------------------------------
// 1096 void CPss21::DiscreteOutputsSet(uint8_t *puiLinkedDiscreteOutputs, uint8_t uiNewViolation)
// 1097 {
// 1098     //       ?
// 1099     if (!uiNewViolation)
// 1100     {
// 1101         //   .
// 1102         //   -  ,   ,
// 1103         //       - .
// 1104         //   .
// 1105         for (int j = 0;
// 1106                 j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
// 1107                 j++)
// 1108         {
// 1109             //   .
// 1110             for (int k = 0;
// 1111                     k < MR_DISCRETE_OUTPUT_NUMBER;
// 1112                     k++)
// 1113             {
// 1114                 //  - (j, k)  () ?
// 1115                 if (puiLinkedDiscreteOutputs[j] & (0x01 << k))
// 1116                 {
// 1117                     //   -   .
// 1118                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 1;
// 1119                 }
// 1120             }
// 1121         }
// 1122     }
// 1123     else
// 1124     {
// 1125         //  .
// 1126         //   -  ,   
// 1127         //      -  .
// 1128         //   -  ,   ,
// 1129         //       - .
// 1130         //   .
// 1131         for (int j = 0;
// 1132                 j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
// 1133                 j++)
// 1134         {
// 1135             //   .
// 1136             for (int k = 0;
// 1137                     k < MR_DISCRETE_OUTPUT_NUMBER;
// 1138                     k++)
// 1139             {
// 1140                 //  - (j, k)  () ?
// 1141                 if (puiLinkedDiscreteOutputs[j] & (0x01 << k))
// 1142                 {
// 1143                     //   -  .
// 1144                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiNewActivation = 1;
// 1145                     //   -   .
// 1146                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 1;
// 1147                 }
// 1148             }
// 1149         }
// 1150     }
// 1151 }
// 1152 
// 1153 //-----------------------------------------------------------------------------------------------------
// 1154 void CPss21::AlarmsProcessing(void)
// 1155 {
// 1156     uint8_t uiCurrentCommonAlarmType = NORMAL;
// 1157 
// 1158     //    .
// 1159     for (uint8_t i = 0;
// 1160             i < DISCRETE_SIGNALS_NUMBER;
// 1161             i++)
// 1162     {
// 1163         m_apxAlarmDfa[i] -> Fsm();
// 1164 
// 1165         //         ,
// 1166         //     ?
// 1167         if (uiCurrentCommonAlarmType < GetAlarmWindowType(m_apxAlarmDfa[i] -> GetAlarmWindowIndex()))
// 1168         {
// 1169             //     .
// 1170             uiCurrentCommonAlarmType = GetAlarmWindowType(m_apxAlarmDfa[i] -> GetAlarmWindowIndex());
// 1171         }
// 1172     }
// 1173 
// 1174     CPss21::NormalAlarmWindowOff();
// 1175     //    .
// 1176     CPss21::AlarmTypeChange(uiCurrentCommonAlarmType);
// 1177 }
// 1178 
// 1179 //-----------------------------------------------------------------------------------------------------
// 1180 void CPss21::ErrorAlarmsProcessing(void)
// 1181 {
// 1182     //    .
// 1183     for (uint8_t i = 0;
// 1184             i < HANDLED_ERROR_NUMBER;
// 1185             i++)
// 1186     {
// 1187         m_apxErrorAlarmDfa[i] -> Fsm();
// 1188     }
// 1189 }
// 1190 
// 1191 //-----------------------------------------------------------------------------------------------------
// 1192 void CPss21::SetDiscreteInputState(uint8_t uiIndex, uint8_t uiData)
// 1193 {
// 1194     if (uiIndex < DISCRETE_INPUTS_NUMBER)
// 1195     {
// 1196         //     -   .
// 1197         m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET + uiIndex] = uiData;
// 1198     }
// 1199     else
// 1200     {
// 1201         //     -  (coils Modbus).
// 1202         m_aucRtuDiscreteDataArray[ALARM_WINDOWS_BIT_ARRAY_OFFSET + (uiIndex - DISCRETE_INPUTS_NUMBER)] = uiData;
// 1203     }
// 1204 }
// 1205 
// 1206 //-----------------------------------------------------------------------------------------------------
// 1207 uint8_t CPss21::GetDiscreteInputState(uint8_t uiIndex)
// 1208 {
// 1209 //    //       ?
// 1210 //    if ((uiIndex >= 0) &&
// 1211 //            (uiIndex < (DISCRETE_INPUTS_NUMBER + ALARM_WINDOWS_NUMBER)))
// 1212 //    {
// 1213 //        //     -   .
// 1214 //        return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET + uiIndex];
// 1215 //    }
// 1216 //    else
// 1217 //    {
// 1218 //        //     -   ,  0.
// 1219 //        return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET];
// 1220 //    }
// 1221 
// 1222     if (uiIndex < DISCRETE_INPUTS_NUMBER)
// 1223     {
// 1224         //     -   .
// 1225         return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET + uiIndex];
// 1226     }
// 1227     else
// 1228     {
// 1229         //     -  (coils Modbus).
// 1230         return m_aucRtuDiscreteDataArray[ALARM_WINDOWS_BIT_ARRAY_OFFSET + (uiIndex - DISCRETE_INPUTS_NUMBER)];
// 1231     }
// 1232 }
// 1233 
// 1234 //-----------------------------------------------------------------------------------------------------
// 1235 uint8_t CPss21::GetDiscreteInputsBadState(uint8_t uiIndex)
// 1236 {
// 1237     //     -  (coils Modbus).
// 1238     return m_aucDiscreteInputsBadState[uiIndex];
// 1239 }
// 1240 
// 1241 //-----------------------------------------------------------------------------------------------------
// 1242 void CPss21::SetErrorAlarmState(uint8_t uiIndex, uint8_t uiData)
// 1243 {
// 1244     //    .
// 1245     m_auiErrorAlarmDataArray[uiIndex] = uiData;
// 1246 }
// 1247 
// 1248 //-----------------------------------------------------------------------------------------------------
// 1249 uint8_t CPss21::GetErrorAlarmState(uint8_t uiIndex)
// 1250 {
// 1251     //    .
// 1252     return m_auiErrorAlarmDataArray[uiIndex];
// 1253 }
// 1254 
// 1255 //-----------------------------------------------------------------------------------------------------
// 1256 void CPss21::AlarmTypeSet(uint8_t uiAlarmType)
// 1257 {
// 1258     m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(uiAlarmType);
// 1259     m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(uiAlarmType);
// 1260     m_xStatusLedNotifyerControl.AlarmSet(uiAlarmType);
// 1261     m_xBuzzerNotifyerControl.AlarmSet(uiAlarmType);
// 1262 }
// 1263 
// 1264 //-----------------------------------------------------------------------------------------------------
// 1265 void CPss21::AlarmTypeChange(void)
// 1266 {
// 1267     if (m_uiCommonAlarmType != m_uiCommonAlarmTypePrevious)
// 1268     {
// 1269         m_uiCommonAlarmTypePrevious = m_uiCommonAlarmType;
// 1270         AlarmTypeSet(m_uiCommonAlarmType);
// 1271     }
// 1272 }
// 1273 
// 1274 //-----------------------------------------------------------------------------------------------------
// 1275 void CPss21::AlarmTypeChange(uint8_t uiAlarmType)
// 1276 {
// 1277     if (uiAlarmType != m_uiCommonAlarmType)
// 1278     {
// 1279         m_uiCommonAlarmType = uiAlarmType;
// 1280 
// 1281         if (m_uiCommonAlarmType != m_uiCommonAlarmTypePrevious)
// 1282         {
// 1283             m_uiCommonAlarmTypePrevious = m_uiCommonAlarmType;
// 1284             AlarmTypeSet(m_uiCommonAlarmType);
// 1285         }
// 1286     }
// 1287 }
// 1288 
// 1289 //-----------------------------------------------------------------------------------------------------
// 1290 void CPss21::AlarmTypeErrorChange(void)
// 1291 {
// 1292     if (m_uiCommonAlarmType != m_uiCommonAlarmTypePrevious)
// 1293     {
// 1294         m_uiCommonAlarmTypePrevious = m_uiCommonAlarmType;
// 1295 
// 1296         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1297         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1298         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
// 1299         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
// 1300     }
// 1301 }
// 1302 
// 1303 //-----------------------------------------------------------------------------------------------------
// 1304 void CPss21::AlarmTypeReceipt(void)
// 1305 {
// 1306     m_uiCommonAlarmType = INDICATION;
// 1307     m_uiCommonAlarmTypePrevious = INDICATION;
// 1308     AlarmTypeSet(INDICATION);
// 1309 }
// 1310 
// 1311 //-----------------------------------------------------------------------------------------------------
// 1312 void CPss21::AlarmTypeReset(void)
// 1313 {
// 1314     m_uiCommonAlarmType = NORMAL;
// 1315     m_uiCommonAlarmTypePrevious = NORMAL;
// 1316     AlarmTypeSet(NORMAL);
// 1317 }
// 1318 
// 1319 //-----------------------------------------------------------------------------------------------------
// 1320 void CPss21::NotifyersControlProcessing(void)
// 1321 {
// 1322     m_xPreventiveAlarmWindowNotifyerControl.Fsm();
// 1323     CPss21::m_xModbusRtuOne.Fsm();
// 1324     m_xEmergencyAlarmWindowNotifyerControl.Fsm();
// 1325     CPss21::m_xModbusRtuOne.Fsm();
// 1326     m_xStatusLedNotifyerControl.Fsm();
// 1327     CPss21::m_xModbusRtuOne.Fsm();
// 1328     m_xBuzzerNotifyerControl.Fsm();
// 1329 }
// 1330 
// 1331 //-----------------------------------------------------------------------------------------------------
// 1332 void CPss21::SetAlarmWindowType(uint8_t uiAlarmWindowIndex, uint8_t uiAlarmType)
// 1333 {
// 1334     GetAlarmWindowControlPointer(uiAlarmWindowIndex) -> SetAlarmType(uiAlarmType);
// 1335 }
// 1336 
// 1337 //-----------------------------------------------------------------------------------------------------
// 1338 uint8_t CPss21::GetAlarmWindowType(uint8_t uiAlarmWindowIndex)
// 1339 {
// 1340     return (GetAlarmWindowControlPointer(uiAlarmWindowIndex) -> GetAlarmType());
// 1341 }
// 1342 
// 1343 //-----------------------------------------------------------------------------------------------------
// 1344 void CPss21::SetAlarmWindowColor(uint8_t uiAlarmWindowIndex, uint8_t uiAlarmColor)
// 1345 {
// 1346     GetAlarmWindowControlPointer(uiAlarmWindowIndex) -> SetAlarmColor(uiAlarmColor);
// 1347 }
// 1348 
// 1349 //-----------------------------------------------------------------------------------------------------
// 1350 void CPss21::SaveContextNotifyerControl(void)
// 1351 {
// 1352 //    //      .
// 1353 //    m_xPreventiveAlarmWindowNotifyerControl.SetSavedFsmState(m_xPreventiveAlarmWindowNotifyerControl.GetFsmState());
// 1354 //    m_xEmergencyAlarmWindowNotifyerControl.SetSavedFsmState(m_xEmergencyAlarmWindowNotifyerControl.GetFsmState());
// 1355 //    m_xStatusLedNotifyerControl.SetSavedFsmState(m_xStatusLedNotifyerControl.GetFsmState());
// 1356 //    m_xBuzzerNotifyerControl.SetSavedFsmState(m_xBuzzerNotifyerControl.GetFsmState());
// 1357 
// 1358     //     -  .
// 1359     for (uint8_t i = 0;
// 1360             i < ALARM_WINDOWS_NUMBER;
// 1361             i++)
// 1362     {
// 1363         m_axAlarmWindowControl[i].SetSavedAlarmType(m_axAlarmWindowControl[i].GetAlarmType());
// 1364         m_axAlarmWindowControl[i].SetSavedActivityState(m_axAlarmWindowControl[i].GetActivityState());
// 1365         m_axAlarmWindowControl[i].SetSavedAlarmColor(m_axAlarmWindowControl[i].GetAlarmColor());
// 1366     };
// 1367 }
// 1368 
// 1369 //-----------------------------------------------------------------------------------------------------
// 1370 void CPss21::RestoreContextNotifyerControl(void)
// 1371 {
// 1372 //    //      .
// 1373 //    m_xPreventiveAlarmWindowNotifyerControl.SetFsmState(m_xPreventiveAlarmWindowNotifyerControl.GetSavedFsmState());
// 1374 //    m_xEmergencyAlarmWindowNotifyerControl.SetFsmState(m_xEmergencyAlarmWindowNotifyerControl.GetSavedFsmState());
// 1375 //    m_xStatusLedNotifyerControl.SetFsmState(m_xStatusLedNotifyerControl.GetSavedFsmState());
// 1376 //    m_xBuzzerNotifyerControl.SetFsmState(m_xBuzzerNotifyerControl.GetSavedFsmState());
// 1377     AlarmTypeSet(GetCommonAlarmType());
// 1378 
// 1379     //     -  .
// 1380     for (uint8_t i = 0;
// 1381             i < ALARM_WINDOWS_NUMBER;
// 1382             i++)
// 1383     {
// 1384         m_axAlarmWindowControl[i].SetAlarmType(m_axAlarmWindowControl[i].GetSavedAlarmType());
// 1385         m_axAlarmWindowControl[i].SetActivityState(m_axAlarmWindowControl[i].GetSavedActivityState());
// 1386         m_axAlarmWindowControl[i].SetAlarmColor(m_axAlarmWindowControl[i].GetSavedAlarmColor());
// 1387     };
// 1388 }
// 1389 
// 1390 //-----------------------------------------------------------------------------------------------------
// 1391 void CPss21::DiscreteSignalsProcessing(void)
// 1392 {
// 1393     DiscreteOutputControlClear();
// 1394     AlarmsProcessing();
// 1395 //    ErrorAlarmsProcessing();
// 1396     SetDiscreteSignalsReceipt(0);
// 1397     SetDiscreteSignalsReset(0);
// 1398 }
// 1399 
// 1400 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1401 void CPss21::BoardWindowsUpdate(void)
??BoardWindowsUpdate:
// 1402 {
// 1403     CLightBoard::Set(m_axAlarmWindowControl);
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        CALL    ??Set
// 1404 }
        RET

        RSEG CODE:CODE:NOROOT(1)
??AllAlarmWindowOff:
        ST      -Y, R24
        LDI     R24, 0
??AllAlarmWindowOff_1:
        CPI     R24, 48
        BRCC    ??AllAlarmWindowOff_2
        LDI     R18, 0
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmType
        LDI     R18, 0
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
        INC     R24
        RJMP    ??AllAlarmWindowOff_1
??AllAlarmWindowOff_2:
        RCALL   ??BoardWindowsUpdate
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??Init:
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        CALL    ??Init_2
        LDI     R16, 0
        STS     ??m_uiCommonAlarmType, R16
        LDI     R16, 0
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDI     R16, 0
        CALL    ??SetErrorCode
        LDI     R20, 2
        LDI     R21, 0
        LDI     R18, 0
        LDI     R19, 0
        LDI     R16, LOW(??m_auiErrorAlarmDataArray)
        LDI     R17, (??m_auiErrorAlarmDataArray) >> 8
        CALL    memset
        RCALL   ??AllAlarmWindowOff
        RET

        RSEG CODE:CODE:NOROOT(1)
??AddressBusInit:
        CALL    ??SpiSlaveSelectAddress0SetPinOutput
        CALL    ??SpiSlaveSelectAddress1SetPinOutput
        CALL    ??SpiSlaveSelectAddress2SetPinOutput
        CALL    ??SpiSlaveSelectAddress3SetPinOutput
        CALL    ??SpiSlaveSelectEnableSetPinOutput
        CALL    ??SpiSlaveSelectAddress0On
        CALL    ??SpiSlaveSelectAddress1On
        CALL    ??SpiSlaveSelectAddress2On
        CALL    ??SpiSlaveSelectAddress3On
        CALL    ??SpiSlaveSelectEnableOff
        RET

        RSEG CODE:CODE:NOROOT(1)
??ConnectDevice:
        ST      -Y, R24
        MOV     R24, R16
        ANDI    R24, 0x0F
        BST     R24, 0
        BRTC    ??ConnectDevice_1
        CALL    ??SpiSlaveSelectAddress0Off
        RJMP    ??ConnectDevice_2
??ConnectDevice_1:
        CALL    ??SpiSlaveSelectAddress0On
??ConnectDevice_2:
        BST     R24, 1
        BRTC    ??ConnectDevice_3
        CALL    ??SpiSlaveSelectAddress1Off
        RJMP    ??ConnectDevice_4
??ConnectDevice_3:
        CALL    ??SpiSlaveSelectAddress1On
??ConnectDevice_4:
        BST     R24, 2
        BRTC    ??ConnectDevice_5
        CALL    ??SpiSlaveSelectAddress2Off
        RJMP    ??ConnectDevice_6
??ConnectDevice_5:
        CALL    ??SpiSlaveSelectAddress2On
??ConnectDevice_6:
        BST     R24, 3
        BRTC    ??ConnectDevice_7
        CALL    ??SpiSlaveSelectAddress3Off
        RJMP    ??ConnectDevice_8
??ConnectDevice_7:
        CALL    ??SpiSlaveSelectAddress3On
??ConnectDevice_8:
        CALL    ??SpiSlaveSelectEnableOn
        CALL    ??Enable
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??DisconnectDevice:
        CALL    ??Disable
        CALL    ??SpiSlaveSelectEnableOff
        CALL    ??SpiSlaveSelectAddress0Off
        CALL    ??SpiSlaveSelectAddress1Off
        CALL    ??SpiSlaveSelectAddress2Off
        CALL    ??SpiSlaveSelectAddress3Off
        RET

        RSEG CODE:CODE:NOROOT(1)
??SearchModules:
        ST      -Y, R25
        ST      -Y, R24
        LDI     R16, 244
        LDI     R17, 1
        CALL    ??delay_ms
        CALL    ??WatchdogReset
        LDI     R20, 9
        LDI     R21, 0
        LDI     R18, 0
        LDI     R19, 0
        LDI     R16, LOW(??m_xDeviceConfigSearch)
        LDI     R17, (??m_xDeviceConfigSearch) >> 8
        CALL    memset
        LDI     R25, 0
??SearchModules_1:
        CPI     R25, 16
        BRCS    $+2+2
        RJMP    ??SearchModules_2
        LDI     R24, 0
??SearchModules_3:
        CPI     R24, 5
        BRCS    $+2+2
        RJMP    ??SearchModules_4
        CALL    ??WatchdogReset
        LDI     R16, 5
        LDI     R17, 0
        CALL    ??delay_ms
        LDI     R16, 145
        STS     ??m_auiSpiTxBuffer, R16
        MOV     R16, R25
        RCALL   ??ConnectDevice
        LDI     R16, 106
        LDI     R17, 3
        SUBI    R16, 1
        SBCI    R17, 0
        BRNE    $-4
        RJMP    $+2
        NOP
        LDI     R20, 4
        LDI     R21, 0
        LDI     R18, LOW(??m_auiSpiTxBuffer)
        LDI     R19, (??m_auiSpiTxBuffer) >> 8
        LDI     R16, LOW(??m_auiSpiRxBuffer)
        LDI     R17, (??m_auiSpiRxBuffer) >> 8
        CALL    ??Exchange
        RCALL   ??DisconnectDevice
        LDS     R16, (??m_auiSpiRxBuffer + 1)
        CPI     R16, 145
        BRNE    ??SearchModules_5
        LDI     R18, 2
        LDI     R19, 0
        LDI     R16, LOW((??m_auiSpiRxBuffer + 1))
        LDI     R17, HIGH((??m_auiSpiRxBuffer + 1))
        CALL    ??iCrcSummOneByteCompare
        OR      R16, R17
        BREQ    ??SearchModules_5
        LDS     R18, (??m_auiSpiRxBuffer + 2)
        LDS     R16, ??m_xDeviceConfigSearch
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        STD     Z+1, R18
        LDS     R16, ??m_xDeviceConfigSearch
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        STD     Z+2, R25
        LDS     R16, ??m_xDeviceConfigSearch
        INC     R16
        STS     ??m_xDeviceConfigSearch, R16
        LDS     R16, ??m_xDeviceConfigSearch
        CPI     R16, 3
        BRCS    ??SearchModules_4
        RJMP    ??SearchModules_6
??SearchModules_5:
        INC     R24
        RJMP    ??SearchModules_3
??SearchModules_4:
        INC     R25
        RJMP    ??SearchModules_1
??SearchModules_2:
        LDI     R30, LOW(??m_xDeviceConfiguration)
        LDI     R31, (??m_xDeviceConfiguration) >> 8
        LDD     R16, Z+3
        SBRS    R16, 0
        RJMP    ??SearchModules_6
        LDS     R16, ??m_xDeviceConfiguration
        LDS     R17, (??m_xDeviceConfigSearch + 8)
        CP      R16, R17
        BRNE    ??SearchModules_7
        LDS     R16, (??m_xDeviceConfiguration + 1)
        LDS     R17, (??m_xDeviceConfigSearch + 7)
        CP      R16, R17
        BREQ    ??SearchModules_6
??SearchModules_7:
        LDI     R16, 3
        CALL    ??SetErrorCode
??SearchModules_6:
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??InitAllocationContext:
        LDI     R18, LOW(??m_auiSpiRxBuffer)
        LDI     R19, (??m_auiSpiRxBuffer) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+1, R18
        STD     Z+2, R19
        LDI     R18, LOW(??m_auiSpiTxBuffer)
        LDI     R19, (??m_auiSpiTxBuffer) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+3, R18
        STD     Z+4, R19
        LDI     R18, LOW(??m_uiErrorCode)
        LDI     R19, (??m_uiErrorCode) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+5, R18
        STD     Z+6, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+9, R18
        LDI     R18, LOW((??m_aucRtuDiscreteDataArray + 16))
        LDI     R19, HIGH((??m_aucRtuDiscreteDataArray + 16))
        MOVW    R31:R30, R17:R16
        STD     Z+7, R18
        STD     Z+8, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+12, R18
        LDI     R18, LOW(??m_aucDiscreteInputsBadState)
        LDI     R19, (??m_aucDiscreteInputsBadState) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+10, R18
        STD     Z+11, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+15, R18
        LDI     R18, LOW((??m_aucRtuDiscreteDataArray + 112))
        LDI     R19, HIGH((??m_aucRtuDiscreteDataArray + 112))
        MOVW    R31:R30, R17:R16
        STD     Z+13, R18
        STD     Z+14, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+18, R18
        LDI     R18, LOW(??m_axDiscreteOutputControl)
        LDI     R19, (??m_axDiscreteOutputControl) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+16, R18
        STD     Z+17, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+21, R18
        LDI     R18, LOW(??m_xDiscreteOutputDataBase)
        LDI     R19, (??m_xDiscreteOutputDataBase) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+19, R18
        STD     Z+20, R19
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+24, R18
        LDI     R18, LOW(??m_auiErrorAlarmDataArray)
        LDI     R19, (??m_auiErrorAlarmDataArray) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+22, R18
        STD     Z+23, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??CreateDevices:
        ST      -Y, R26
        ST      -Y, R24
        SBIW    R29:R28, 25
        MOVW    R17:R16, R29:R28
        RCALL   ??InitAllocationContext
        LDI     R26, 0
??CreateDevices_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R26, R16
        BRCS    $+2+2
        RJMP    ??CreateDevices_2
        CALL    ??WatchdogReset
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        LDD     R24, Z+1
        MOV     R16, R24
        SUBI    R16, 1
        BREQ    ??CreateDevices_3
        DEC     R16
        BRNE    $+2+2
        RJMP    ??CreateDevices_4
        DEC     R16
        BRNE    $+2+2
        RJMP    ??CreateDevices_5
        DEC     R16
        BRNE    $+2+2
        RJMP    ??CreateDevices_5
        DEC     R16
        BRNE    $+2+2
        RJMP    ??CreateDevices_4
        RJMP    ??CreateDevices_4
??CreateDevices_3:
        LDS     R16, (??m_xDeviceConfigSearch + 8)
        CPI     R16, 2
        BRCS    $+2+2
        RJMP    ??CreateDevices_4
        LDI     R16, 26
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??CreateDevices_6
        MOV     R18, R24
        CALL    ??CMvsn21Driver
        RJMP    ??CreateDevices_7
??CreateDevices_6:
        LDI     R16, 0
        LDI     R17, 0
??CreateDevices_7:
        MOV     R18, R26
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        LDD     R16, Z+2
        ST      Y, R16
        MOVW    R19:R18, R29:R28
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        MOV     R20, R26
        LDI     R21, 0
        LSL     R20
        ROL     R21
        MOVW    R31:R30, R21:R20
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R20, Z
        LDD     R21, Z+1
        MOVW    R31:R30, R21:R20
        LDD     R20, Z+9
        LDD     R21, Z+10
        MOVW    R31:R30, R21:R20
        LPM     R20, Z+
        LPM     R21, Z
        SBIW    R31:R30, 1
        MOVW    R31:R30, R21:R20
        ICALL
        LDS     R16, (??m_xDeviceConfigSearch + 8)
        INC     R16
        STS     (??m_xDeviceConfigSearch + 8), R16
        RJMP    ??CreateDevices_4
??CreateDevices_5:
        LDS     R16, (??m_xDeviceConfigSearch + 7)
        TST     R16
        BREQ    $+2+2
        RJMP    ??CreateDevices_4
        LDI     R16, 30
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??CreateDevices_8
        MOV     R18, R24
        CALL    ??CModuleMrXXDriver
        RJMP    ??CreateDevices_9
??CreateDevices_8:
        LDI     R16, 0
        LDI     R17, 0
??CreateDevices_9:
        MOV     R18, R26
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        LDD     R16, Z+2
        ST      Y, R16
        MOVW    R19:R18, R29:R28
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        MOV     R20, R26
        LDI     R21, 0
        LSL     R20
        ROL     R21
        MOVW    R31:R30, R21:R20
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R20, Z
        LDD     R21, Z+1
        MOVW    R31:R30, R21:R20
        LDD     R20, Z+9
        LDD     R21, Z+10
        MOVW    R31:R30, R21:R20
        LPM     R20, Z+
        LPM     R21, Z
        SBIW    R31:R30, 1
        MOVW    R31:R30, R21:R20
        ICALL
        LDS     R16, (??m_xDeviceConfigSearch + 7)
        INC     R16
        STS     (??m_xDeviceConfigSearch + 7), R16
??CreateDevices_4:
        INC     R26
        RJMP    ??CreateDevices_1
??CreateDevices_2:
        ADIW    R29:R28, 25
        LD      R24, Y+
        LD      R26, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??DestroyDevices:
        LDI     R30, 0
        LDI     R31, 0
??DestroyDevices_1:
        LDI     R17, 0
        CP      R30, R16
        CPC     R31, R17
        BRCC    ??DestroyDevices_2
        ADIW    R31:R30, 1
        RJMP    ??DestroyDevices_1
??DestroyDevices_2:
        RET

        RSEG CODE:CODE:NOROOT(1)
??ReportType:
        CALL    ?PROLOGUE6_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R25:R24, R19:R18
        LDI     R20, 6
        LDI     R21, 0
        LDI     R18, 0
        LDI     R19, 0
        LDI     R16, LOW(??m_auiSpiTxBuffer)
        LDI     R17, (??m_auiSpiTxBuffer) >> 8
        CALL    memset
        LDI     R26, 0
        LDI     R27, 0
        MOVW    R31:R30, R27:R26
        SUBI    R30, LOW((-(??m_auiSpiTxBuffer) & 0xFFFF))
        SBCI    R31, (-(??m_auiSpiTxBuffer) & 0xFFFF) >> 8
        LDI     R16, 145
        ST      Z, R16
        INC     R26
        LDI     R27, 0
        MOVW    R31:R30, R27:R26
        SUBI    R30, LOW((-(??m_auiSpiTxBuffer) & 0xFFFF))
        SBCI    R31, (-(??m_auiSpiTxBuffer) & 0xFFFF) >> 8
        LDI     R16, 0
        ST      Z, R16
        INC     R26
        LDI     R27, 0
        MOVW    R31:R30, R27:R26
        SUBI    R30, LOW((-(??m_auiSpiTxBuffer) & 0xFFFF))
        SBCI    R31, (-(??m_auiSpiTxBuffer) & 0xFFFF) >> 8
        LDI     R16, 0
        ST      Z, R16
        INC     R26
        LDI     R27, 0
        MOVW    R31:R30, R27:R26
        SUBI    R30, LOW((-(??m_auiSpiTxBuffer) & 0xFFFF))
        SBCI    R31, (-(??m_auiSpiTxBuffer) & 0xFFFF) >> 8
        LDI     R16, 0
        ST      Z, R16
        INC     R26
        LDI     R27, 0
        MOVW    R31:R30, R27:R26
        SUBI    R30, LOW((-(??m_auiSpiTxBuffer) & 0xFFFF))
        SBCI    R31, (-(??m_auiSpiTxBuffer) & 0xFFFF) >> 8
        LDI     R16, 0
        ST      Z, R16
        INC     R26
        LDI     R16, 0
        RCALL   ??ConnectDevice
        LDI     R16, 106
        LDI     R17, 3
        SUBI    R16, 1
        SBCI    R17, 0
        BRNE    $-4
        RJMP    $+2
        NOP
        MOV     R20, R26
        LDI     R21, 0
        LDI     R18, LOW(??m_auiSpiTxBuffer)
        LDI     R19, (??m_auiSpiTxBuffer) >> 8
        LDI     R16, LOW(??m_auiSpiRxBuffer)
        LDI     R17, (??m_auiSpiRxBuffer) >> 8
        CALL    ??Exchange
        RCALL   ??DisconnectDevice
        LDI     R16, 1
        LDI     R17, 0
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09

        RSEG CODE:CODE:NOROOT(1)
??SetBytesFromBits:
        CALL    ?PROLOGUE4_L09
        MOVW    R23:R22, R17:R16
        MOVW    R3:R2, R21:R20
        LDI     R24, 0
        LDI     R25, 0
        LDI     R26, 0
        LDI     R27, 0
??SetBytesFromBits_1:
        CP      R26, R2
        CPC     R27, R3
        BRCC    ??SetBytesFromBits_2
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R27:R26
        CALL    ?SS_DIVMOD_L02
        MOVW    R31:R30, R19:R18
        ADD     R30, R16
        ADC     R31, R17
        LD      R21, Z
        MOV     R20, R24
        LDI     R16, 1
        LDI     R17, 0
        CALL    ?S_SHL_L02
        AND     R21, R16
        TST     R21
        BREQ    ??SetBytesFromBits_3
        LDI     R16, 1
        RJMP    ??SetBytesFromBits_4
??SetBytesFromBits_3:
        LDI     R16, 0
??SetBytesFromBits_4:
        MOVW    R31:R30, R23:R22
        ADD     R30, R26
        ADC     R31, R27
        ST      Z, R16
        ADIW    R25:R24, 1
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R25:R24
        CALL    ?SS_DIVMOD_L02
        MOVW    R25:R24, R21:R20
        ADIW    R27:R26, 1
        RJMP    ??SetBytesFromBits_1
??SetBytesFromBits_2:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesModbusReset:
        ST      -Y, R24
        LDI     R24, 0
??SendToDevicesModbusReset_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R24, R16
        BRCC    ??SendToDevicesModbusReset_2
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetModbusReset
        INC     R24
        RJMP    ??SendToDevicesModbusReset_1
??SendToDevicesModbusReset_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesModbusReceipt:
        ST      -Y, R24
        LDI     R24, 0
??SendToDevicesModbusReceipt_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R24, R16
        BRCC    ??SendToDevicesModbusReceipt_2
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetModbusReceipt
        INC     R24
        RJMP    ??SendToDevicesModbusReceipt_1
??SendToDevicesModbusReceipt_2:
        LDI     R18, 2
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??SetFsmEvent
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModbusDeviceControl:
        CALL    ?PROLOGUE6_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R25:R24, R21:R20
        MOV     R16, R24
        OR      R16, R25
        BRNE    ??ModbusDeviceControl_2
        LD      R16, X
        TST     R16
        BREQ    ??ModbusDeviceControl_3
        LDI     R16, 1
        CALL    ??SetModbusReceipt_1
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReceipt
        RCALL   ??SendToDevicesModbusReceipt
        RJMP    ??ModbusDeviceControl_3
??ModbusDeviceControl_2:
        CPI     R24, 1
        LDI     R16, 0
        CPC     R25, R16
        BRNE    ??ModbusDeviceControl_4
        LD      R16, X
        TST     R16
        BREQ    ??ModbusDeviceControl_3
        LDI     R16, 1
        CALL    ??SetModbusReset_1
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReset
        RCALL   ??SendToDevicesModbusReset
        RJMP    ??ModbusDeviceControl_3
??ModbusDeviceControl_4:
        CPI     R24, 64
        LDI     R16, 0
        CPC     R25, R16
        BRCS    ??ModbusDeviceControl_3
        CPI     R24, 112
        LDI     R16, 0
        CPC     R25, R16
        BRCC    ??ModbusDeviceControl_3
        MOVW    R21:R20, R5:R4
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_aucRtuDiscreteDataArray)
        LDI     R17, (??m_aucRtuDiscreteDataArray) >> 8
        ADD     R16, R24
        ADC     R17, R25
        RCALL   ??SetBytesFromBits
        LDI     R18, 1
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??SetFsmEvent
??ModbusDeviceControl_3:
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09

        RSEG CODE:CODE:NOROOT(1)
??ModbusDeviceControl_1:
        ST      -Y, R25
        ST      -Y, R24
        SBIW    R29:R28, 1
        ST      Y, R16
        MOVW    R25:R24, R19:R18
        MOVW    R21:R20, R25:R24
        LDI     R18, 1
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        RCALL   ??ModbusDeviceControl
        ADIW    R29:R28, 1
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModbusRtuLinkControlIsOn:
        LDS     R16, (??m_xDeviceConfiguration + 5)
        TST     R16
        BREQ    ??ModbusRtuLinkControlIsOn_1
        LDI     R16, 1
        RET
??ModbusRtuLinkControlIsOn_1:
        LDI     R16, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetTimeoutModbusRtuLinkControl:
        LDS     R16, (??m_xDeviceConfiguration + 5)
        LDI     R17, 0
        LDI     R20, 232
        LDI     R21, 3
        CALL    ?S_EC_MUL_L02
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModbusRtuLinkControlInProgress:
        LDI     R30, LOW(??m_xDeviceState)
        LDI     R31, (??m_xDeviceState) >> 8
        LD      R16, Z
        SBRS    R16, 0
        RJMP    ??ModbusRtuLinkControlInProgress_1
        LDI     R16, 1
        RET
??ModbusRtuLinkControlInProgress_1:
        LDI     R16, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
??SetModeModbusRtuLinkControlInProgress:
        ST      -Y, R24
        MOV     R24, R16
        LDI     R30, LOW(??m_xDeviceState)
        LDI     R31, (??m_xDeviceState) >> 8
        BST     R24, 0
        LD      R16, Z
        BLD     R16, 0
        ST      Z, R16
        LDI     R18, 11
        LDI     R16, LOW(??m_xDeviceState)
        LDI     R17, (??m_xDeviceState) >> 8
        CALL    ??WriteBlock
        CALL    ??SignatureCreate
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesReceipt:
        ST      -Y, R24
        LDI     R24, 0
??SendToDevicesReceipt_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R24, R16
        BRCC    ??SendToDevicesReceipt_2
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetReceipt
        INC     R24
        RJMP    ??SendToDevicesReceipt_1
??SendToDevicesReceipt_2:
        LDI     R18, 2
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??SetFsmEvent
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesReset:
        ST      -Y, R24
        LDI     R24, 0
??SendToDevicesReset_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R24, R16
        BRCC    ??SendToDevicesReset_2
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetReset
        INC     R24
        RJMP    ??SendToDevicesReset_1
??SendToDevicesReset_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??KeyStateProcessing:
        ST      -Y, R24
        LDI     R18, 2
        LDI     R16, LOW(??m_xReceiptKey)
        LDI     R17, (??m_xReceiptKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_1
        LDI     R16, 1
        CALL    ??SetPanelReceipt
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReceipt
        RCALL   ??SendToDevicesReceipt
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_1:
        LDI     R18, 2
        LDI     R16, LOW(??m_xCheckKey)
        LDI     R17, (??m_xCheckKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_2
        LDI     R16, 11
        CALL    ??SetFsmState_1
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_2:
        LDI     R18, 2
        LDI     R16, LOW(??m_xResetKey)
        LDI     R17, (??m_xResetKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_3
        LDI     R16, 1
        CALL    ??SetPanelReset
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReset
        RCALL   ??SendToDevicesReset
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_3:
        LDI     R30, LOW(??m_xDeviceConfiguration)
        LDI     R31, (??m_xDeviceConfiguration) >> 8
        LDD     R16, Z+3
        SBRS    R16, 2
        RJMP    ??KeyStateProcessing_4
        LDI     R18, 2
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_5
        LDI     R16, 1
        CALL    ??SetExternalReset
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReset
        RCALL   ??SendToDevicesReset
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_5:
        LDI     R18, 4
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_6
        LDI     R16, 11
        CALL    ??SetFsmState_1
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
        RJMP    ??KeyStateProcessing_6
??KeyStateProcessing_4:
        LDI     R18, 2
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_7
        LDI     R16, 1
        CALL    ??SetExternalReceipt
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReceipt
        RCALL   ??SendToDevicesReceipt
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_7:
        LDI     R18, 3
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_8
        LDI     R16, 1
        CALL    ??SetExternalReset
        LDI     R16, 1
        CALL    ??SetDiscreteSignalsReset
        RCALL   ??SendToDevicesReset
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_8:
        LDI     R18, 4
        LDI     R16, LOW(??m_xExternalKey)
        LDI     R17, (??m_xExternalKey) >> 8
        CALL    ??KeyEventHappened
        TST     R16
        BREQ    ??KeyStateProcessing_6
        LDI     R16, 11
        CALL    ??SetFsmState_1
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_6:
        LDI     R18, 5
        LDI     R16, LOW(??m_xCheckKey)
        LDI     R17, (??m_xCheckKey) >> 8
        CALL    ??KeyEventHappened
        MOV     R24, R16
        LDI     R18, 5
        LDI     R16, LOW(??m_xReceiptKey)
        LDI     R17, (??m_xReceiptKey) >> 8
        CALL    ??KeyEventHappened
        MOV     R18, R16
        MOV     R19, R24
        LDI     R16, LOW(??m_xEventUniteLogicAndOne)
        LDI     R17, (??m_xEventUniteLogicAndOne) >> 8
        CALL    ??IsHappened
        TST     R16
        BREQ    ??KeyStateProcessing_9
        RCALL   ??ModbusDefaultInit
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??KeyStateProcessing_9:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ReceiptResetGlobalFlagsClear:
        LDI     R16, 0
        CALL    ??SetPanelReceipt
        LDI     R16, 0
        CALL    ??SetExternalReceipt
        LDI     R16, 0
        CALL    ??SetModbusReceipt_1
        LDI     R16, 0
        CALL    ??SetPanelReset
        LDI     R16, 0
        CALL    ??SetExternalReset
        LDI     R16, 0
        CALL    ??SetModbusReset_1
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModulesInteraction:
        ST      -Y, R24
        MOV     R24, R16
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R24, R16
        BRCC    ??ModulesInteraction_1
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        MOV     R18, R24
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxDrivers) & 0xFFFF))
        SBCI    R31, (-(??m_apxDrivers) & 0xFFFF) >> 8
        LD      R18, Z
        LDD     R19, Z+1
        MOVW    R31:R30, R19:R18
        LDD     R18, Z+9
        LDD     R19, Z+10
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 2
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 3
        MOVW    R31:R30, R19:R18
        ICALL
        LDI     R16, 0
        RJMP    ??ModulesInteraction_2
??ModulesInteraction_1:
        LDI     R16, 1
??ModulesInteraction_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ConfigurationInit:
        CALL    ?PROLOGUE6_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        LDI     R26, LOW(??m_auiIntermediateBuff)
        LDI     R27, (??m_auiIntermediateBuff) >> 8
        LDI     R24, LOW(??m_auiReceiveMessageBuff)
        LDI     R25, (??m_auiReceiveMessageBuff) >> 8
        LDI     R20, 96
        LDI     R21, 0
        LDI     R18, 0
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    memset
        LDI     R18, 0
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R20, 20
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xDeviceConfiguration)
        LDI     R17, (??m_xDeviceConfiguration) >> 8
        CALL    memcpy
        LDI     R18, 1
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R20, 7
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xModbusSettings)
        LDI     R17, (??m_xModbusSettings) >> 8
        CALL    memcpy
        LDI     R18, 5
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R20, 24
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xDiscreteOutputDataBase)
        LDI     R17, (??m_xDiscreteOutputDataBase) >> 8
        CALL    memcpy
        LDI     R18, 2
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R18, 0
??ConfigurationInit_1:
        CPI     R18, 48
        BRCC    ??ConfigurationInit_2
        LD      R21, X
        LDI     R19, 0
??ConfigurationInit_3:
        CPI     R19, 8
        BRCC    ??ConfigurationInit_4
        MOV     R16, R21
        LDI     R17, 0
        MOV     R20, R19
        CALL    ?SS_SHR_L02
        ANDI    R16, 0x01
        TST     R16
        BREQ    ??ConfigurationInit_5
        MOV     R16, R18
        LDI     R17, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R16
        ADC     R31, R17
        LD      R16, Z
        ORI     R16, 0x80
        ST      Z, R16
??ConfigurationInit_5:
        TST     R18
        BREQ    ??ConfigurationInit_6
        CPI     R18, 23
        BRNE    ??ConfigurationInit_7
??ConfigurationInit_6:
        MOV     R16, R18
        LDI     R17, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R16
        ADC     R31, R17
        LD      R16, Z
        ORI     R16, 0x40
        ST      Z, R16
??ConfigurationInit_7:
        INC     R18
        INC     R19
        RJMP    ??ConfigurationInit_3
??ConfigurationInit_4:
        ADIW    R27:R26, 1
        RJMP    ??ConfigurationInit_1
??ConfigurationInit_2:
        LDI     R18, 10
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R22, 0
??ConfigurationInit_8:
        CPI     R22, 48
        BRCC    ??ConfigurationInit_9
        LD      R19, X
        LDI     R18, 0
??ConfigurationInit_10:
        CPI     R18, 8
        BRCC    ??ConfigurationInit_11
        MOV     R16, R19
        LDI     R17, 0
        MOV     R20, R18
        CALL    ?SS_SHR_L02
        ANDI    R16, 0x01
        TST     R16
        BREQ    ??ConfigurationInit_12
        LDI     R23, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R22
        ADC     R31, R23
        LD      R16, Z
        ORI     R16, 0x40
        ST      Z, R16
??ConfigurationInit_12:
        INC     R22
        INC     R18
        RJMP    ??ConfigurationInit_10
??ConfigurationInit_11:
        ADIW    R27:R26, 1
        RJMP    ??ConfigurationInit_8
??ConfigurationInit_9:
        LDI     R16, LOW(??m_auiIntermediateBuff)
        LDI     R17, (??m_auiIntermediateBuff) >> 8
        MOVW    R27:R26, R17:R16
        LDI     R18, 3
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R16, 0
??ConfigurationInit_13:
        CPI     R16, 96
        BRCC    ??ConfigurationInit_14
        LDI     R17, 0
        MOVW    R31:R30, R27:R26
        ADD     R30, R16
        ADC     R31, R17
        LD      R17, Z
        ANDI    R17, 0x3F
        MOV     R18, R16
        LDI     R19, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R18
        ADC     R31, R19
        LD      R18, Z
        OR      R18, R17
        ST      Z, R18
        INC     R16
        RJMP    ??ConfigurationInit_13
??ConfigurationInit_14:
        LDI     R18, 4
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R18, 0
??ConfigurationInit_15:
        CPI     R18, 96
        BRCC    ??ConfigurationInit_16
        LDI     R19, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R18
        ADC     R31, R19
        LD      R16, Z
        ANDI    R16, 0x3F
        CPI     R16, 48
        BRCC    ??ConfigurationInit_17
        LDI     R19, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R18
        ADC     R31, R19
        LD      R17, Z
        ANDI    R17, 0xC0
        ST      Z, R17
        LDI     R17, 0
        MOVW    R31:R30, R27:R26
        ADD     R30, R16
        ADC     R31, R17
        LD      R16, Z
        LDI     R19, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R18
        ADC     R31, R19
        LD      R17, Z
        OR      R17, R16
        ST      Z, R17
        RJMP    ??ConfigurationInit_18
??ConfigurationInit_17:
        LDI     R19, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R18
        ADC     R31, R19
        LD      R17, Z
        ANDI    R17, 0xC0
        ST      Z, R17
??ConfigurationInit_18:
        INC     R18
        RJMP    ??ConfigurationInit_15
??ConfigurationInit_16:
        CLR     R4
??ConfigurationInit_19:
        LDI     R16, 96
        CP      R4, R16
        BRCS    $+2+2
        RJMP    ??ConfigurationInit_20
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        LDI     R17, 0
        ANDI    R16, 0x03
        ANDI    R17, 0x00
        SUBI    R16, 0
        BREQ    ??ConfigurationInit_21
        DEC     R16
        BREQ    ??ConfigurationInit_22
        SUBI    R16, 2
        BRNE    $+2+2
        RJMP    ??ConfigurationInit_23
        RJMP    ??ConfigurationInit_24
??ConfigurationInit_21:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_25
        CALL    ??CNormalAlarmDfa
        RJMP    ??ConfigurationInit_26
??ConfigurationInit_25:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_26:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_22:
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 7
        RJMP    ??ConfigurationInit_28
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 6
        RJMP    ??ConfigurationInit_29
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_30
        CALL    ??CIndicationAlarmHighLevelNamurDfa
        RJMP    ??ConfigurationInit_31
??ConfigurationInit_30:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_31:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_29:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_32
        CALL    ??CIndicationAlarmHighLevelDfa
        RJMP    ??ConfigurationInit_33
??ConfigurationInit_32:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_33:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_28:
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 6
        RJMP    ??ConfigurationInit_34
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_35
        CALL    ??CIndicationAlarmLowLevelNamurDfa
        RJMP    ??ConfigurationInit_36
??ConfigurationInit_35:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_36:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_34:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_37
        CALL    ??CIndicationAlarmLowLevelDfa
        RJMP    ??ConfigurationInit_38
??ConfigurationInit_37:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_38:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_23:
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 7
        RJMP    ??ConfigurationInit_39
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 6
        RJMP    ??ConfigurationInit_40
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_41
        CALL    ??CPreventiveAlarmHighLevelNamurDfa
        RJMP    ??ConfigurationInit_42
??ConfigurationInit_41:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_42:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_40:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_43
        CALL    ??CPreventiveAlarmHighLevelDfa
        RJMP    ??ConfigurationInit_44
??ConfigurationInit_43:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_44:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_39:
        CLR     R5
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        SBRS    R16, 6
        RJMP    ??ConfigurationInit_45
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_46
        CALL    ??CPreventiveAlarmLowLevelNamurDfa
        RJMP    ??ConfigurationInit_47
??ConfigurationInit_46:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_47:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_45:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_48
        CALL    ??CPreventiveAlarmLowLevelDfa
        RJMP    ??ConfigurationInit_49
??ConfigurationInit_48:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_49:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RJMP    ??ConfigurationInit_27
??ConfigurationInit_24:
        LDI     R16, 7
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    ??ConfigurationInit_50
        CALL    ??CNormalAlarmDfa
        RJMP    ??ConfigurationInit_51
??ConfigurationInit_50:
        LDI     R16, 0
        LDI     R17, 0
??ConfigurationInit_51:
        MOV     R18, R4
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        ST      Z, R16
        STD     Z+1, R17
??ConfigurationInit_27:
        INC     R4
        RJMP    ??ConfigurationInit_19
??ConfigurationInit_20:
        LDI     R18, 3
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        CLR     R4
??ConfigurationInit_52:
        LDI     R16, 96
        CP      R4, R16
        BRCC    ??ConfigurationInit_53
        CLR     R5
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        LD      R16, Z
        CPI     R16, 48
        BRCC    ??ConfigurationInit_54
        CLR     R5
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        LD      R18, Z
        MOV     R16, R4
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetAlarmWindowIndex
        RJMP    ??ConfigurationInit_55
??ConfigurationInit_54:
        LDI     R18, 0
        MOV     R16, R4
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetAlarmWindowIndex
??ConfigurationInit_55:
        INC     R4
        RJMP    ??ConfigurationInit_52
??ConfigurationInit_53:
        LDI     R18, 6
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        CLR     R4
??ConfigurationInit_56:
        LDI     R16, 96
        CP      R4, R16
        BRCC    ??ConfigurationInit_57
        MOV     R16, R4
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??GetLinkedDiscreteOutputsPointer
        CLR     R5
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        LD      R18, Z
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        INC     R4
        RJMP    ??ConfigurationInit_56
??ConfigurationInit_57:
        CLR     R4
??ConfigurationInit_58:
        LDI     R16, 48
        CP      R4, R16
        BRCC    ??ConfigurationInit_59
        MOV     R18, R4
        MOV     R16, R4
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetDiscreteStateIndex
        INC     R4
        RJMP    ??ConfigurationInit_58
??ConfigurationInit_59:
        CLR     R4
??ConfigurationInit_60:
        LDI     R16, 48
        CP      R4, R16
        BRCC    ??ConfigurationInit_61
        MOV     R18, R4
        SUBI    R18, 208
        MOV     R16, R4
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa + 96) & 0xFFFF))
        SBCI    R31, HIGH((-(??m_apxAlarmDfa + 96) & 0xFFFF))
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??SetDiscreteStateIndex
        INC     R4
        RJMP    ??ConfigurationInit_60
??ConfigurationInit_61:
        LDI     R18, 11
        MOVW    R17:R16, R27:R26
        CALL    ??ReadBlock
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xDeviceState)
        LDI     R17, (??m_xDeviceState) >> 8
        CALL    memcpy
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09

        RSEG CODE:CODE:NOROOT(1)
??DiscreteOutputControlClear:
        CALL    ?PROLOGUE4_L09
        LDI     R30, 0
        LDI     R31, 0
??DiscreteOutputControlClear_1:
        CPI     R30, 1
        LDI     R16, 0
        CPC     R31, R16
        BRGE    ??DiscreteOutputControlClear_2
        LDI     R24, 0
        LDI     R25, 0
??DiscreteOutputControlClear_3:
        CPI     R24, 8
        LDI     R16, 0
        CPC     R25, R16
        BRGE    ??DiscreteOutputControlClear_4
        MOVW    R17:R16, R31:R30
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        ADD     R16, R24
        ADC     R17, R25
        LSL     R16
        ROL     R17
        MOVW    R27:R26, R17:R16
        SUBI    R26, LOW((-(??m_axDiscreteOutputControl) & 0xFFFF))
        SBCI    R27, (-(??m_axDiscreteOutputControl) & 0xFFFF) >> 8
        LDI     R16, 0
        ST      X, R16
        MOVW    R17:R16, R31:R30
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        ADD     R16, R24
        ADC     R17, R25
        LSL     R16
        ROL     R17
        MOVW    R27:R26, R17:R16
        SUBI    R26, LOW((-(??m_axDiscreteOutputControl + 1) & 0xFFFF))
        SBCI    R27, HIGH((-(??m_axDiscreteOutputControl + 1) & 0xFFFF))
        LDI     R16, 0
        ST      X, R16
        ADIW    R25:R24, 1
        RJMP    ??DiscreteOutputControlClear_3
??DiscreteOutputControlClear_4:
        ADIW    R31:R30, 1
        RJMP    ??DiscreteOutputControlClear_1
??DiscreteOutputControlClear_2:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
??DiscreteOutputsSet:
        CALL    ?PROLOGUE4_L09
        MOVW    R23:R22, R17:R16
        TST     R18
        BRNE    ??DiscreteOutputsSet_1
        LDI     R24, 0
        LDI     R25, 0
??DiscreteOutputsSet_2:
        CPI     R24, 1
        LDI     R16, 0
        CPC     R25, R16
        BRLT    $+2+2
        RJMP    ??DiscreteOutputsSet_3
        LDI     R26, 0
        LDI     R27, 0
??DiscreteOutputsSet_4:
        CPI     R26, 8
        LDI     R16, 0
        CPC     R27, R16
        BRGE    ??DiscreteOutputsSet_5
        MOVW    R31:R30, R23:R22
        ADD     R30, R24
        ADC     R31, R25
        LD      R19, Z
        MOV     R20, R26
        LDI     R16, 1
        LDI     R17, 0
        CALL    ?S_SHL_L02
        AND     R19, R16
        TST     R19
        BREQ    ??DiscreteOutputsSet_6
        MOVW    R17:R16, R25:R24
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        ADD     R16, R26
        ADC     R17, R27
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_axDiscreteOutputControl) & 0xFFFF))
        SBCI    R31, (-(??m_axDiscreteOutputControl) & 0xFFFF) >> 8
        LDI     R16, 1
        STD     Z+1, R16
??DiscreteOutputsSet_6:
        ADIW    R27:R26, 1
        RJMP    ??DiscreteOutputsSet_4
??DiscreteOutputsSet_5:
        ADIW    R25:R24, 1
        RJMP    ??DiscreteOutputsSet_2
??DiscreteOutputsSet_1:
        LDI     R24, 0
        LDI     R25, 0
??DiscreteOutputsSet_7:
        CPI     R24, 1
        LDI     R16, 0
        CPC     R25, R16
        BRGE    ??DiscreteOutputsSet_3
        LDI     R26, 0
        LDI     R27, 0
??DiscreteOutputsSet_8:
        CPI     R26, 8
        LDI     R16, 0
        CPC     R27, R16
        BRGE    ??DiscreteOutputsSet_9
        MOVW    R31:R30, R23:R22
        ADD     R30, R24
        ADC     R31, R25
        LD      R19, Z
        MOV     R20, R26
        LDI     R16, 1
        LDI     R17, 0
        CALL    ?S_SHL_L02
        AND     R19, R16
        TST     R19
        BREQ    ??DiscreteOutputsSet_10
        MOVW    R17:R16, R25:R24
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        ADD     R16, R26
        ADC     R17, R27
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_axDiscreteOutputControl) & 0xFFFF))
        SBCI    R31, (-(??m_axDiscreteOutputControl) & 0xFFFF) >> 8
        LDI     R16, 1
        ST      Z, R16
        MOVW    R17:R16, R25:R24
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        ADD     R16, R26
        ADC     R17, R27
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_axDiscreteOutputControl) & 0xFFFF))
        SBCI    R31, (-(??m_axDiscreteOutputControl) & 0xFFFF) >> 8
        LDI     R16, 1
        STD     Z+1, R16
??DiscreteOutputsSet_10:
        ADIW    R27:R26, 1
        RJMP    ??DiscreteOutputsSet_8
??DiscreteOutputsSet_9:
        ADIW    R25:R24, 1
        RJMP    ??DiscreteOutputsSet_7
??DiscreteOutputsSet_3:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeSet:
        ST      -Y, R24
        MOV     R24, R16
        MOV     R18, R24
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_1
        MOV     R18, R24
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_2
        MOV     R18, R24
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??AlarmSet_3
        MOV     R18, R24
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeChange:
        ST      -Y, R24
        MOV     R24, R16
        LDS     R16, ??m_uiCommonAlarmType
        CP      R24, R16
        BREQ    ??AlarmTypeChange_2
        STS     ??m_uiCommonAlarmType, R24
        LDS     R16, ??m_uiCommonAlarmType
        LDS     R17, ??m_uiCommonAlarmTypePrevious
        CP      R16, R17
        BREQ    ??AlarmTypeChange_2
        LDS     R16, ??m_uiCommonAlarmType
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDS     R16, ??m_uiCommonAlarmType
        RCALL   ??AlarmTypeSet
??AlarmTypeChange_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??NormalAlarmWindowOff:
        ST      -Y, R24
        LDI     R24, 0
??NormalAlarmWindowOff_1:
        CPI     R24, 48
        BRCC    ??NormalAlarmWindowOff_2
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmType
        TST     R16
        BRNE    ??NormalAlarmWindowOff_3
        LDI     R18, 0
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
??NormalAlarmWindowOff_3:
        INC     R24
        RJMP    ??NormalAlarmWindowOff_1
??NormalAlarmWindowOff_2:
        RCALL   ??BoardWindowsUpdate
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetAlarmWindowType:
        ST      -Y, R24
        MOV     R24, R16
        MOV     R16, R24
        CALL    ??GetAlarmWindowControlPointer
        CALL    ??GetAlarmType
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmsProcessing:
        ST      -Y, R26
        ST      -Y, R24
        LDI     R24, 0
        LDI     R26, 0
??AlarmsProcessing_1:
        CPI     R26, 96
        BRCC    ??AlarmsProcessing_2
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        MOV     R18, R26
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R18, Z
        LDD     R19, Z+1
        MOVW    R31:R30, R19:R18
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 2
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 3
        MOVW    R31:R30, R19:R18
        ICALL
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??GetAlarmWindowIndex
        RCALL   ??GetAlarmWindowType
        CP      R24, R16
        BRCC    ??AlarmsProcessing_3
        MOV     R16, R26
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        CALL    ??GetAlarmWindowIndex
        RCALL   ??GetAlarmWindowType
        MOV     R24, R16
??AlarmsProcessing_3:
        INC     R26
        RJMP    ??AlarmsProcessing_1
??AlarmsProcessing_2:
        RCALL   ??NormalAlarmWindowOff
        MOV     R16, R24
        RCALL   ??AlarmTypeChange
        LD      R24, Y+
        LD      R26, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ErrorAlarmsProcessing:
        ST      -Y, R24
        LDI     R24, 0
??ErrorAlarmsProcessing_1:
        CPI     R24, 2
        BRCC    ??ErrorAlarmsProcessing_2
        MOV     R16, R24
        LDI     R17, 0
        LSL     R16
        ROL     R17
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_apxErrorAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxErrorAlarmDfa) & 0xFFFF) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        MOV     R18, R24
        LDI     R19, 0
        LSL     R18
        ROL     R19
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_apxErrorAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxErrorAlarmDfa) & 0xFFFF) >> 8
        LD      R18, Z
        LDD     R19, Z+1
        MOVW    R31:R30, R19:R18
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 2
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 3
        MOVW    R31:R30, R19:R18
        ICALL
        INC     R24
        RJMP    ??ErrorAlarmsProcessing_1
??ErrorAlarmsProcessing_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SetDiscreteInputState:
        CPI     R16, 48
        BRCC    ??SetDiscreteInputState_1
        MOV     R18, R16
        LDI     R19, 0
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_aucRtuDiscreteDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_aucRtuDiscreteDataArray) & 0xFFFF) >> 8
        STD     Z+16, R17
        RET
??SetDiscreteInputState_1:
        MOV     R18, R16
        LDI     R19, 0
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_aucRtuDiscreteDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_aucRtuDiscreteDataArray) & 0xFFFF) >> 8
        STD     Z+16, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetDiscreteInputState:
        CPI     R16, 48
        BRCC    ??GetDiscreteInputState_1
        LDI     R17, 0
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_aucRtuDiscreteDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_aucRtuDiscreteDataArray) & 0xFFFF) >> 8
        LDD     R16, Z+16
        RET
??GetDiscreteInputState_1:
        LDI     R17, 0
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_aucRtuDiscreteDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_aucRtuDiscreteDataArray) & 0xFFFF) >> 8
        LDD     R16, Z+16
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetDiscreteInputsBadState:
        LDI     R17, 0
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_aucDiscreteInputsBadState) & 0xFFFF))
        SBCI    R31, (-(??m_aucDiscreteInputsBadState) & 0xFFFF) >> 8
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
??SetErrorAlarmState:
        MOV     R18, R16
        LDI     R19, 0
        MOVW    R31:R30, R19:R18
        SUBI    R30, LOW((-(??m_auiErrorAlarmDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_auiErrorAlarmDataArray) & 0xFFFF) >> 8
        ST      Z, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetErrorAlarmState:
        LDI     R17, 0
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_auiErrorAlarmDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_auiErrorAlarmDataArray) & 0xFFFF) >> 8
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeChange_1:
        LDS     R16, ??m_uiCommonAlarmType
        LDS     R17, ??m_uiCommonAlarmTypePrevious
        CP      R16, R17
        BREQ    ??AlarmTypeChange_3
        LDS     R16, ??m_uiCommonAlarmType
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDS     R16, ??m_uiCommonAlarmType
        RCALL   ??AlarmTypeSet
??AlarmTypeChange_3:
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeErrorChange:
        LDS     R16, ??m_uiCommonAlarmType
        LDS     R17, ??m_uiCommonAlarmTypePrevious
        CP      R16, R17
        BREQ    ??AlarmTypeErrorChange_1
        LDS     R16, ??m_uiCommonAlarmType
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDI     R18, 1
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_1
        LDI     R18, 1
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_2
        LDI     R18, 7
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??AlarmSet_3
        LDI     R18, 7
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
??AlarmTypeErrorChange_1:
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeReceipt:
        LDI     R16, 1
        STS     ??m_uiCommonAlarmType, R16
        LDI     R16, 1
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDI     R16, 1
        RCALL   ??AlarmTypeSet
        RET

        RSEG CODE:CODE:NOROOT(1)
??AlarmTypeReset:
        LDI     R16, 0
        STS     ??m_uiCommonAlarmType, R16
        LDI     R16, 0
        STS     ??m_uiCommonAlarmTypePrevious, R16
        LDI     R16, 0
        RCALL   ??AlarmTypeSet
        RET

        RSEG CODE:CODE:NOROOT(1)
??NotifyersControlProcessing:
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??Fsm
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??Fsm
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??Fsm
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??Fsm
        RET

        RSEG CODE:CODE:NOROOT(1)
??SetAlarmWindowType:
        ST      -Y, R25
        ST      -Y, R24
        MOV     R24, R16
        MOV     R25, R17
        MOV     R16, R24
        CALL    ??GetAlarmWindowControlPointer
        MOV     R18, R25
        CALL    ??SetAlarmType
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SetAlarmWindowColor:
        ST      -Y, R25
        ST      -Y, R24
        MOV     R24, R16
        MOV     R25, R17
        MOV     R16, R24
        CALL    ??GetAlarmWindowControlPointer
        MOV     R18, R25
        CALL    ??SetAlarmColor
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SaveContextNotifyerControl:
        ST      -Y, R24
        LDI     R24, 0
??SaveContextNotifyerControl_1:
        CPI     R24, 48
        BRCS    $+2+2
        RJMP    ??SaveContextNotifyerControl_2
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmType
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetSavedAlarmType
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetActivityState
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetSavedActivityState
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmColor
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetSavedAlarmColor
        INC     R24
        RJMP    ??SaveContextNotifyerControl_1
??SaveContextNotifyerControl_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??RestoreContextNotifyerControl:
        ST      -Y, R24
        CALL    ??GetCommonAlarmType
        RCALL   ??AlarmTypeSet
        LDI     R24, 0
??RestoreContextNotifyerControl_1:
        CPI     R24, 48
        BRCS    $+2+2
        RJMP    ??RestoreContextNotifyerControl_2
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetSavedAlarmType
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmType
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetSavedActivityState
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetSavedAlarmColor
        MOV     R18, R16
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmColor
        INC     R24
        RJMP    ??RestoreContextNotifyerControl_1
??RestoreContextNotifyerControl_2:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??DiscreteSignalsProcessing:
        RCALL   ??DiscreteOutputControlClear
        RCALL   ??AlarmsProcessing
        LDI     R16, 0
        CALL    ??SetDiscreteSignalsReceipt
        LDI     R16, 0
        CALL    ??SetDiscreteSignalsReset
        RET
// 1405 
// 1406 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1407 void CPss21::ActiveAlarmWindowOn(uint8_t uiAlarmType)
??ActiveAlarmWindowOn:
// 1408 {
        ST      -Y, R25
        ST      -Y, R24
        MOV     R25, R16
// 1409     for (uint8_t i = 0;
        LDI     R24, 0
// 1410             i < ALARM_WINDOWS_NUMBER;
??ActiveAlarmWindowOn_1:
        CPI     R24, 48
        BRCC    ??ActiveAlarmWindowOn_2
// 1411             i++)
// 1412     {
// 1413         //        ?
// 1414         if (m_axAlarmWindowControl[i].GetAlarmType() == uiAlarmType)
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmType
        CP      R16, R25
        BRNE    ??ActiveAlarmWindowOn_3
// 1415         {
// 1416             //   ,   .
// 1417             m_axAlarmWindowControl[i].SetActivityState(1);
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
// 1418         }
// 1419 
// 1420 //        CPss21::m_aucRtuHoldingRegistersArray[i] = m_axAlarmWindowControl[i].GetActivityState();
// 1421     };
??ActiveAlarmWindowOn_3:
        INC     R24
        RJMP    ??ActiveAlarmWindowOn_1
// 1422 
// 1423     BoardWindowsUpdate();
??ActiveAlarmWindowOn_2:
        CALL    ??BoardWindowsUpdate
// 1424 }
        LD      R24, Y+
        LD      R25, Y+
        RET
// 1425 
// 1426 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1427 void CPss21::ActiveAlarmWindowOff(uint8_t uiAlarmType)
??ActiveAlarmWindowOff:
// 1428 {
        ST      -Y, R25
        ST      -Y, R24
        MOV     R25, R16
// 1429     for (uint8_t i = 0;
        LDI     R24, 0
// 1430             i < ALARM_WINDOWS_NUMBER;
??ActiveAlarmWindowOff_1:
        CPI     R24, 48
        BRCC    ??ActiveAlarmWindowOff_2
// 1431             i++)
// 1432     {
// 1433         //        ?
// 1434         if (m_axAlarmWindowControl[i].GetAlarmType() == uiAlarmType)
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmType
        CP      R16, R25
        BRNE    ??ActiveAlarmWindowOff_3
// 1435         {
// 1436             //   ,    .
// 1437             m_axAlarmWindowControl[i].SetActivityState(0);
        LDI     R18, 0
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
        RJMP    ??ActiveAlarmWindowOff_4
// 1438         }
// 1439         else if (m_axAlarmWindowControl[i].GetAlarmType() == NORMAL)
??ActiveAlarmWindowOff_3:
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        CALL    ??GetAlarmType
        TST     R16
        BRNE    ??ActiveAlarmWindowOff_4
// 1440         {
// 1441             //   ,    .
// 1442             m_axAlarmWindowControl[i].SetActivityState(0);
        LDI     R18, 0
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
// 1443         }
// 1444 
// 1445 //        CPss21::m_aucRtuHoldingRegistersArray[i] = m_axAlarmWindowControl[i].GetActivityState();
// 1446     };
??ActiveAlarmWindowOff_4:
        INC     R24
        RJMP    ??ActiveAlarmWindowOff_1
// 1447 
// 1448     BoardWindowsUpdate();
??ActiveAlarmWindowOff_2:
        CALL    ??BoardWindowsUpdate
// 1449 }
        LD      R24, Y+
        LD      R25, Y+
        RET
// 1450 
// 1451 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1452 void CPss21::AllAlarmWindowOn(uint8_t uiAlarmType)
??AllAlarmWindowOn:
// 1453 {
        ST      -Y, R25
        ST      -Y, R24
        MOV     R25, R16
// 1454 //    CAlarmWindow axAlarmWindowControl[ALARM_WINDOWS_NUMBER];
// 1455 
// 1456     for (uint8_t i = 0;
        LDI     R24, 0
// 1457             i < ALARM_WINDOWS_NUMBER;
??AllAlarmWindowOn_1:
        CPI     R24, 48
        BRCC    ??AllAlarmWindowOn_2
// 1458             i++)
// 1459     {
// 1460         //   ,   .
// 1461         m_axAlarmWindowControl[i].SetAlarmType(uiAlarmType);
        MOV     R18, R25
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmType
// 1462         //   ,   .
// 1463         m_axAlarmWindowControl[i].SetActivityState(1);
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
// 1464         m_axAlarmWindowControl[i].SetAlarmColor(uiAlarmType);
        MOV     R18, R25
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmColor
// 1465     };
        INC     R24
        RJMP    ??AllAlarmWindowOn_1
// 1466 
// 1467     BoardWindowsUpdate();
??AllAlarmWindowOn_2:
        CALL    ??BoardWindowsUpdate
// 1468 }
        LD      R24, Y+
        LD      R25, Y+
        RET
// 1469 
// 1470 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1471 void CPss21::ErrorWindowOn(uint8_t uiIndex)
??ErrorWindowOn:
// 1472 {
        ST      -Y, R26
        ST      -Y, R24
        MOV     R26, R16
// 1473     //    - .
// 1474     for (uint8_t i = 0;
        LDI     R24, 0
// 1475             i < ALARM_WINDOWS_NUMBER;
??ErrorWindowOn_1:
        CPI     R24, 48
        BRCC    ??ErrorWindowOn_2
// 1476             i++)
// 1477     {
// 1478         if (m_auiErrorLedOn[i])
        MOV     R30, R24
        LDI     R31, 0
        SUBI    R30, LOW((-(??m_auiErrorLedOn) & 0xFFFF))
        SBCI    R31, (-(??m_auiErrorLedOn) & 0xFFFF) >> 8
        LPM     R16, Z
        TST     R16
        BREQ    ??ErrorWindowOn_3
// 1479         {
// 1480             //   ,   .
// 1481             m_axAlarmWindowControl[i].SetAlarmType(INDICATION);
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmType
// 1482             m_axAlarmWindowControl[i].SetActivityState(1);
        LDI     R18, 1
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
// 1483             m_axAlarmWindowControl[i].SetAlarmColor(ERROR);
        LDI     R18, 7
        MOV     R16, R24
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmColor
// 1484         }
// 1485     };
??ErrorWindowOn_3:
        INC     R24
        RJMP    ??ErrorWindowOn_1
// 1486 
// 1487     if (uiIndex < ALARM_WINDOWS_NUMBER)
??ErrorWindowOn_2:
        CPI     R26, 48
        BRCC    ??ErrorWindowOn_4
// 1488     {
// 1489         m_axAlarmWindowControl[uiIndex].SetAlarmType(NORMAL);
        LDI     R18, 0
        MOV     R16, R26
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmType
// 1490         m_axAlarmWindowControl[uiIndex].SetActivityState(0);
        LDI     R18, 0
        MOV     R16, R26
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetActivityState
// 1491         m_axAlarmWindowControl[uiIndex].SetAlarmColor(NORMAL);
        LDI     R18, 0
        MOV     R16, R26
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R20
        ADC     R17, R21
        CALL    ??SetAlarmColor
// 1492     }
// 1493 
// 1494     BoardWindowsUpdate();
??ErrorWindowOn_4:
        CALL    ??BoardWindowsUpdate
// 1495 }
        LD      R24, Y+
        LD      R26, Y+
        RET
// 1496 
// 1497 //-----------------------------------------------------------------------------------------------------
// 1498 void CPss21::AllAlarmWindowOff(void)
// 1499 {
// 1500     for (uint8_t i = 0;
// 1501             i < ALARM_WINDOWS_NUMBER;
// 1502             i++)
// 1503     {
// 1504 //        CPss21::m_aucRtuHoldingRegistersArray[i + 4] = 0;
// 1505         //   ,    .
// 1506         m_axAlarmWindowControl[i].SetAlarmType(NORMAL);
// 1507         //   ,    .
// 1508         m_axAlarmWindowControl[i].SetActivityState(0);
// 1509     };
// 1510 
// 1511     BoardWindowsUpdate();
// 1512 }
// 1513 
// 1514 //-----------------------------------------------------------------------------------------------------
// 1515 void CPss21::NormalAlarmWindowOff(void)
// 1516 {
// 1517     for (uint8_t i = 0;
// 1518             i < ALARM_WINDOWS_NUMBER;
// 1519             i++)
// 1520     {
// 1521         //        ?
// 1522         if (m_axAlarmWindowControl[i].GetAlarmType() == NORMAL)
// 1523         {
// 1524             //   ,    .
// 1525             m_axAlarmWindowControl[i].SetActivityState(0);
// 1526         }
// 1527     };
// 1528 
// 1529     BoardWindowsUpdate();
// 1530 }
// 1531 
// 1532 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1533 void CPss21::TestMainCycle(void)
??TestMainCycle:
// 1534 {
// 1535     CPss21::m_xModbusRtuOne.Fsm();
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1536 
// 1537     m_xTestModeNotifyerControl.Fsm();
        LDI     R16, LOW(??m_xTestModeNotifyerControl)
        LDI     R17, (??m_xTestModeNotifyerControl) >> 8
        CALL    ??Fsm_2
// 1538 //    NotifyersControlProcessing();
// 1539 
// 1540     CPss21::KeyStateProcessing();
        RCALL   ??KeyStateProcessing
// 1541 
// 1542     //   - ""  ""?
// 1543     if ((GetPanelReceipt()) ||
// 1544             (GetExternalReceipt()) ||
// 1545             (GetModbusReceipt()) ||
// 1546             (GetPanelReset()) ||
// 1547             (GetExternalReset()) ||
// 1548             (GetModbusReset()) ||
// 1549             //      ?
// 1550             (m_xTestModeNotifyerControl.GetFsmState() ==
// 1551              CNotifyerControl::IDDLE))
        CALL    ??GetPanelReceipt
        TST     R16
        BRNE    ??TestMainCycle_1
        CALL    ??GetExternalReceipt
        TST     R16
        BRNE    ??TestMainCycle_1
        CALL    ??GetModbusReceipt
        TST     R16
        BRNE    ??TestMainCycle_1
        CALL    ??GetPanelReset
        TST     R16
        BRNE    ??TestMainCycle_1
        CALL    ??GetExternalReset
        TST     R16
        BRNE    ??TestMainCycle_1
        CALL    ??GetModbusReset
        TST     R16
        BRNE    ??TestMainCycle_1
        LDI     R16, LOW(??m_xTestModeNotifyerControl)
        LDI     R17, (??m_xTestModeNotifyerControl) >> 8
        CALL    ??GetFsmState
        TST     R16
        BRNE    ??TestMainCycle_2
// 1552     {
// 1553         //       , 
// 1554         //     
// 1555         m_xTestModeNotifyerControl.SetFsmState(CNotifyerControl::STOP);
??TestMainCycle_1:
        LDI     R18, 37
        LDI     R16, LOW(??m_xTestModeNotifyerControl)
        LDI     R17, (??m_xTestModeNotifyerControl) >> 8
        CALL    ??SetFsmState
// 1556         SetFsmState(TEST_STOP);
        LDI     R16, 13
        CALL    ??SetFsmState_1
// 1557     }
// 1558     //    if (CPss21::m_xMainCycleTimer.IsOverflow())
// 1559 //    {
// 1560 //        SetFsmState(TEST_STOP);
// 1561 //    }
// 1562 
// 1563 
// 1564 
// 1565     CPss21::ReceiptResetGlobalFlagsClear();
??TestMainCycle_2:
        RCALL   ??ReceiptResetGlobalFlagsClear
// 1566 
// 1567     CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1568 }
        RET
// 1569 
// 1570 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1571 void CPss21::ErrorMainCycle(void)
??ErrorMainCycle:
// 1572 {
// 1573     CPss21::m_xModbusRtuOne.Fsm();
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1574 
// 1575     CPss21::KeyStateProcessing();
        RCALL   ??KeyStateProcessing
// 1576 
// 1577     //   - ""?
// 1578     if ((GetPanelReceipt()) ||
// 1579             (GetExternalReceipt()) ||
// 1580             (GetModbusReceipt()))
        CALL    ??GetPanelReceipt
        TST     R16
        BRNE    ??ErrorMainCycle_1
        CALL    ??GetExternalReceipt
        TST     R16
        BRNE    ??ErrorMainCycle_1
        CALL    ??GetModbusReceipt
        TST     R16
        BREQ    ??ErrorMainCycle_2
// 1581     {
// 1582 //        m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1583 //        m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1584         m_xStatusLedNotifyerControl.AlarmSet(NORMAL);
??ErrorMainCycle_1:
        LDI     R18, 0
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??AlarmSet_3
// 1585         m_xBuzzerNotifyerControl.AlarmSet(NORMAL);
        LDI     R18, 0
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
// 1586     }
// 1587 
// 1588     NotifyersControlProcessing();
??ErrorMainCycle_2:
        RCALL   ??NotifyersControlProcessing
// 1589 
// 1590     CPss21::ReceiptResetGlobalFlagsClear();
        RCALL   ??ReceiptResetGlobalFlagsClear
// 1591 
// 1592     CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1593 }
        RET
// 1594 
// 1595 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1596 void CPss21::LinkControlErrorMainCycle(void)
??LinkControlErrorMainCycle:
// 1597 {
// 1598     CPss21::m_xModbusRtuOne.Fsm();
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1599     CPss21::m_xModbusRtuLinkControl.Fsm();
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??Fsm_3
// 1600 
// 1601     CPss21::KeyStateProcessing();
        RCALL   ??KeyStateProcessing
// 1602 
// 1603     NotifyersControlProcessing();
        RCALL   ??NotifyersControlProcessing
// 1604 
// 1605     CPss21::ReceiptResetGlobalFlagsClear();
        RCALL   ??ReceiptResetGlobalFlagsClear
// 1606 
// 1607     CDataStore::Fsm();
        CALL    ??Fsm_4
// 1608 
// 1609     CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1610 }
        RET

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
// 1611 uint8_t uiMapTestCounter = 0;
uiMapTestCounter:
        DS8 1
// 1612 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1613 void CPss21::MainFsm(void)
??MainFsm:
// 1614 {
// 1615     switch (GetFsmState())
        CALL    ??GetFsmState_1
        LDI     R30, LOW(`?<Jumptable for MainFsm>_0`)
        LDI     R31, (`?<Jumptable for MainFsm>_0`) >> 16
        OUT     0x3B, R31
        LDI     R31, HIGH(`?<Jumptable for MainFsm>_0`)
        JMP     ?CV_SWITCH_L06
// 1616     {
// 1617     case START:
// 1618         CPlatform::WatchdogEnable();
??MainFsm_1:
        CALL    ??WatchdogEnable
// 1619         CPlatform::Init();
        CALL    ??Init_3
// 1620         CPss21::Init();
        CALL    ??Init
// 1621         CBuzzer::Init();
        CALL    ??Init_4
// 1622         if (!(CDataBase::Check()))
        CALL    ??Check
        TST     R16
        BRNE    ??MainFsm_2
// 1623         {
// 1624             SetFsmState(ERROR_START);
        LDI     R16, 14
        CALL    ??SetFsmState_1
        RET
// 1625         }
// 1626         else
// 1627         {
// 1628             CPss21::ConfigurationInit();
??MainFsm_2:
        RCALL   ??ConfigurationInit
// 1629             CPss21::ModbusInit();
        CALL    ??ModbusInit
// 1630             CSpi::Init();
        CALL    ??Init_5
// 1631             CPss21::AddressBusInit();
        CALL    ??AddressBusInit
// 1632             CPss21::SearchModules();
        CALL    ??SearchModules
// 1633             CPss21::CreateDevices();
        CALL    ??CreateDevices
// 1634 //            m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
// 1635             SetFsmState(MAIN_CYCLE_START_WAITING);
        LDI     R16, 2
        CALL    ??SetFsmState_1
// 1636         }
// 1637         break;
        RET
// 1638 
// 1639     case RESTART:
// 1640         break;
// 1641 
// 1642     case MAIN_CYCLE_START_WAITING:
// 1643         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_3:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1644 
// 1645         CPss21::KeyStateProcessing();
        RCALL   ??KeyStateProcessing
// 1646 
// 1647         NotifyersControlProcessing();
        RCALL   ??NotifyersControlProcessing
// 1648 
// 1649         CDataStore::Fsm();
        CALL    ??Fsm_4
// 1650 
// 1651         if (CPss21::m_xMainCycleTimer.IsOverflow())
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??IsOverflow
        TST     R16
        BREQ    ??MainFsm_4
// 1652         {
// 1653             CPss21::m_xMainCycleTimer.Reset();
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??Reset
// 1654             CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1655             SetModuleIndex(0);
        LDI     R16, 0
        CALL    ??SetModuleIndex
// 1656             SetFsmState(MAIN_CYCLE_MODULES_INTERACTION);
        LDI     R16, 3
        CALL    ??SetFsmState_1
// 1657         }
// 1658 //            SetFsmState(MAIN_CYCLE_DISCRETE_SIGNALS_PROCESSING);
// 1659 //
// 1660 //        CPlatform::WatchdogReset();
// 1661         break;
??MainFsm_4:
        RET
// 1662 
// 1663     case MAIN_CYCLE_MODULES_INTERACTION:
// 1664         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_5:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1665         CPss21::m_xModbusRtuLinkControl.Fsm();
        LDI     R16, LOW(??m_xModbusRtuLinkControl)
        LDI     R17, (??m_xModbusRtuLinkControl) >> 8
        CALL    ??Fsm_3
// 1666 
// 1667         CPss21::KeyStateProcessing();
        RCALL   ??KeyStateProcessing
// 1668 
// 1669         NotifyersControlProcessing();
        RCALL   ??NotifyersControlProcessing
// 1670 
// 1671         CDataStore::Fsm();
        CALL    ??Fsm_4
// 1672 
// 1673         if (CPss21::ModulesInteraction(GetModuleIndex()))
        CALL    ??GetModuleIndex
        RCALL   ??ModulesInteraction
        TST     R16
        BREQ    ??MainFsm_6
// 1674         {
// 1675             SetFsmState(MAIN_CYCLE_DISCRETE_SIGNALS_PROCESSING);
        LDI     R16, 4
        CALL    ??SetFsmState_1
        RJMP    ??MainFsm_7
// 1676         }
// 1677         else
// 1678         {
// 1679             SetModuleIndex(GetModuleIndex() + 1);
??MainFsm_6:
        CALL    ??GetModuleIndex
        INC     R16
        CALL    ??SetModuleIndex
// 1680         }
// 1681 
// 1682         switch (GetErrorCode())
??MainFsm_7:
        CALL    ??GetErrorCode
        SUBI    R16, 3
        BREQ    ??MainFsm_8
        DEC     R16
        BREQ    ??MainFsm_8
        DEC     R16
        BREQ    ??MainFsm_9
        RET
// 1683         {
// 1684 //        case IMD_ERROR:
// 1685 //        case OMD_ERROR:
// 1686         case CFG_ERROR:
// 1687         case DB_ERROR:
// 1688             SetFsmState(ERROR_START);
??MainFsm_8:
        LDI     R16, 14
        CALL    ??SetFsmState_1
// 1689             break;
        RET
// 1690 
// 1691         case MBS_ERROR:
// 1692             SetFsmState(LINK_CONTROL_ERROR_START);
??MainFsm_9:
        LDI     R16, 16
        CALL    ??SetFsmState_1
// 1693             break;
// 1694 
// 1695         default:
// 1696             break;
// 1697         }
// 1698         break;
        RET
// 1699 
// 1700     case MAIN_CYCLE_DISCRETE_SIGNALS_PROCESSING:
// 1701         CPss21::DiscreteSignalsProcessing();
??MainFsm_10:
        RCALL   ??DiscreteSignalsProcessing
// 1702         SetFsmState(MAIN_CYCLE_END);
        LDI     R16, 5
        CALL    ??SetFsmState_1
// 1703         break;
        RET
// 1704 
// 1705     case MAIN_CYCLE_END:
// 1706         CPss21::ReceiptResetGlobalFlagsClear();
??MainFsm_11:
        RCALL   ??ReceiptResetGlobalFlagsClear
// 1707         SetFsmState(MAIN_CYCLE_START_WAITING);
        LDI     R16, 2
        CALL    ??SetFsmState_1
// 1708         break;
        RET
// 1709 
// 1710 ////-----------------------------------------------------------------------------------------------------
// 1711 //    case MAP_CREATE_START:
// 1712 //        uiMapTestCounter = 0;
// 1713 //        SetFsmState(MAP_CREATE_WINDOW_ON);
// 1714 //
// 1715 //        CPlatform::WatchdogReset();
// 1716 //
// 1717 //
// 1718 ////        CPss21::AllAlarmWindowOff();
// 1719 ////        for (uint8_t i = 0;
// 1720 ////                i < 48;
// 1721 ////                i++)
// 1722 ////        {
// 1723 ////            //   ,   .
// 1724 ////            m_axAlarmWindowControl[uiMapTestCounter].SetAlarmType(INDICATION);
// 1725 ////            //   ,   .
// 1726 ////            m_axAlarmWindowControl[uiMapTestCounter].SetActivityState(1);
// 1727 ////        };
// 1728 ////        BoardWindowsUpdate();
// 1729 ////        SetFsmState(MAP_CREATE_ALL_LED_ON);
// 1730 ////        break;
// 1731 //
// 1732 ////    case MAP_CREATE_ALL_LED_ON:
// 1733 ////
// 1734 ////        CPlatform::WatchdogReset();
// 1735 ////        break;
// 1736 //
// 1737 //    case MAP_CREATE_WINDOW_ON:
// 1738 //        CPss21::m_aucRtuHoldingRegistersArray[0] = uiMapTestCounter;
// 1739 //        if (uiMapTestCounter != 48)
// 1740 //        {
// 1741 //            CPss21::AllAlarmWindowOff();
// 1742 //            //   ,   .
// 1743 //            m_axAlarmWindowControl[uiMapTestCounter].SetAlarmType(INDICATION);
// 1744 //            //   ,   .
// 1745 //            m_axAlarmWindowControl[uiMapTestCounter].SetActivityState(1);
// 1746 //
// 1747 //            CPss21::m_aucRtuHoldingRegistersArray[0] = uiMapTestCounter;
// 1748 //            BoardWindowsUpdate();
// 1749 //            SetFsmState(MAP_CREATE_ON);
// 1750 //        }
// 1751 //        else
// 1752 //        {
// 1753 //            SetFsmState(MAP_CREATE_START);
// 1754 //        }
// 1755 //
// 1756 //        CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
// 1757 //        CPlatform::WatchdogReset();
// 1758 //        break;
// 1759 //
// 1760 //    case MAP_CREATE_ON:
// 1761 //        TestMainCycle();
// 1762 //
// 1763 //
// 1764 ////        if (CPss21::m_xMainCycleTimer.IsOverflow())
// 1765 ////        {
// 1766 ////            CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
// 1767 ////            SetFsmState(MAP_CREATE_NEXT_WINDOW);
// 1768 ////        }
// 1769 //        break;
// 1770 //
// 1771 //    case MAP_CREATE_NEXT_WINDOW:
// 1772 //        uiMapTestCounter++;
// 1773 //        SetFsmState(MAP_CREATE_WINDOW_ON);
// 1774 //
// 1775 //        CPlatform::WatchdogReset();
// 1776 //        break;
// 1777 
// 1778 
// 1779 //-----------------------------------------------------------------------------------------------------
// 1780     case TEST_START:
// 1781         SaveContextNotifyerControl();
??MainFsm_12:
        RCALL   ??SaveContextNotifyerControl
// 1782 //        AlarmTypeSet(PREVENTIVE);
// 1783 //        CPss21::AllAlarmWindowOn(PREVENTIVE);
// 1784 //        CPss21::m_xMainCycleTimer.Set(TEST_ON_TIME());
// 1785         m_xTestModeNotifyerControl.SetFsmState(CNotifyerControl::INDICATION_SIGNAL_START);
        LDI     R18, 1
        LDI     R16, LOW(??m_xTestModeNotifyerControl)
        LDI     R17, (??m_xTestModeNotifyerControl) >> 8
        CALL    ??SetFsmState
// 1786         SetFsmState(TEST_ON);
        LDI     R16, 12
        CALL    ??SetFsmState_1
// 1787 
// 1788         CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1789         break;
        RET
// 1790 
// 1791     case TEST_ON:
// 1792 //        if (CPss21::m_xMainCycleTimer.IsOverflow())
// 1793 //        {
// 1794 //            CPss21::AllAlarmWindowOff();
// 1795 //            RestoreContextNotifyerControl();
// 1796 //            CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
// 1797 //            SetFsmState(MAIN_CYCLE_START_WAITING);
// 1798 //        }
// 1799 
// 1800         TestMainCycle();
??MainFsm_13:
        RCALL   ??TestMainCycle
// 1801         break;
        RET
// 1802 
// 1803     case TEST_STOP:
// 1804         CPss21::AllAlarmWindowOff();
??MainFsm_14:
        CALL    ??AllAlarmWindowOff
// 1805         RestoreContextNotifyerControl();
        RCALL   ??RestoreContextNotifyerControl
// 1806         CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
        LDI     R18, 100
        LDI     R19, 0
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??Set_1
// 1807         SetFsmState(MAIN_CYCLE_START_WAITING);
        LDI     R16, 2
        CALL    ??SetFsmState_1
// 1808         break;
        RET
// 1809 
// 1810 //-----------------------------------------------------------------------------------------------------
// 1811     case ERROR_START:
// 1812         //   Modbus     .
// 1813         ModbusDefaultInit();
??MainFsm_15:
        CALL    ??ModbusDefaultInit
// 1814         ErrorWindowOn(GetErrorCode() - 1);
        CALL    ??GetErrorCode
        DEC     R16
        RCALL   ??ErrorWindowOn
// 1815         SetErrorCode(0);
        LDI     R16, 0
        CALL    ??SetErrorCode
// 1816 
// 1817         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
        LDI     R18, 1
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_1
// 1818         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
        LDI     R18, 1
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_2
// 1819         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
        LDI     R18, 7
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??AlarmSet_3
// 1820         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
        LDI     R18, 7
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
// 1821 
// 1822         SetFsmState(ERROR_ON);
        LDI     R16, 15
        CALL    ??SetFsmState_1
// 1823 
// 1824         CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1825         break;
        RET
// 1826 
// 1827     case ERROR_ON:
// 1828         ErrorMainCycle();
??MainFsm_16:
        RCALL   ??ErrorMainCycle
// 1829         break;
        RET
// 1830 
// 1831 //-----------------------------------------------------------------------------------------------------
// 1832     case LINK_CONTROL_ERROR_START:
// 1833         SaveContextNotifyerControl();
??MainFsm_17:
        RCALL   ??SaveContextNotifyerControl
// 1834         ErrorWindowOn(GetErrorCode() - 1);
        CALL    ??GetErrorCode
        DEC     R16
        RCALL   ??ErrorWindowOn
// 1835         SetErrorCode(0);
        LDI     R16, 0
        CALL    ??SetErrorCode
// 1836 
// 1837         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
        LDI     R18, 1
        LDI     R16, LOW(??m_xPreventiveAlarmWindowNotifyerControl)
        LDI     R17, (??m_xPreventiveAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_1
// 1838         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
        LDI     R18, 1
        LDI     R16, LOW(??m_xEmergencyAlarmWindowNotifyerControl)
        LDI     R17, (??m_xEmergencyAlarmWindowNotifyerControl) >> 8
        CALL    ??AlarmSet_2
// 1839         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
        LDI     R18, 7
        LDI     R16, LOW(??m_xStatusLedNotifyerControl)
        LDI     R17, (??m_xStatusLedNotifyerControl) >> 8
        CALL    ??AlarmSet_3
// 1840         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
        LDI     R18, 7
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
// 1841 
// 1842         CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1843         SetFsmState(LINK_CONTROL_ERROR_ON);
        LDI     R16, 17
        CALL    ??SetFsmState_1
// 1844         break;
        RET
// 1845 
// 1846     case LINK_CONTROL_ERROR_ON:
// 1847         LinkControlErrorMainCycle();
??MainFsm_18:
        RCALL   ??LinkControlErrorMainCycle
// 1848         break;
        RET
// 1849 
// 1850     case LINK_CONTROL_ERROR_OFF:
// 1851         CPss21::AllAlarmWindowOff();
??MainFsm_19:
        CALL    ??AllAlarmWindowOff
// 1852         RestoreContextNotifyerControl();
        RCALL   ??RestoreContextNotifyerControl
// 1853         CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
        LDI     R18, 100
        LDI     R19, 0
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??Set_1
// 1854 
// 1855         CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1856         SetFsmState(MAIN_CYCLE_START_WAITING);
        LDI     R16, 2
        CALL    ??SetFsmState_1
// 1857         break;
        RET
// 1858 
// 1859 //-----------------------------------------------------------------------------------------------------
// 1860     case PROGRAMMING_START:
// 1861         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_20:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1862         //        
// 1863         //  "PROGRAMMING_TIME + WDTO_2S",    .
// 1864         CPss21::m_xMainCycleTimer.Set(PROGRAMMING_TIME);
        LDI     R18, 232
        LDI     R19, 3
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??Set_1
// 1865         SetFsmState(PROGRAMMING_ON);
        LDI     R16, 20
        CALL    ??SetFsmState_1
// 1866 
// 1867         CPlatform::WatchdogReset();
        CALL    ??WatchdogReset
// 1868         break;
        RET
// 1869 
// 1870     case PROGRAMMING_ON:
// 1871         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_21:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1872 
// 1873         CDataStore::Fsm();
        CALL    ??Fsm_4
// 1874 
// 1875         if (CPss21::m_xMainCycleTimer.IsOverflow())
        LDI     R16, LOW(??m_xMainCycleTimer)
        LDI     R17, (??m_xMainCycleTimer) >> 8
        CALL    ??IsOverflow
        TST     R16
        BREQ    ??MainFsm_22
// 1876         {
// 1877             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
        LDI     R18, 8
        LDI     R16, LOW(??m_xBuzzerNotifyerControl)
        LDI     R17, (??m_xBuzzerNotifyerControl) >> 8
        CALL    ??AlarmSet
// 1878             SetFsmState(REBOOT);
        LDI     R16, 21
        CALL    ??SetFsmState_1
// 1879         }
// 1880 
// 1881         CPlatform::WatchdogReset();
??MainFsm_22:
        CALL    ??WatchdogReset
// 1882         break;
        RET
// 1883 
// 1884     case REBOOT:
// 1885         //  "WDTO_2S" - ,    .
// 1886         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_23:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Fsm_1
// 1887 
// 1888         CDataStore::Fsm();
        CALL    ??Fsm_4
// 1889         break;
// 1890 
// 1891 //-----------------------------------------------------------------------------------------------------
// 1892     default:
// 1893         break;
// 1894     }
// 1895 }
??MainFsm_24:
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDriver::SetReceipt(uint8_t)
??SetReceipt:
        MOVW    R31:R30, R17:R16
        STD     Z+1, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDriver::SetReset(uint8_t)
??SetReset:
        MOVW    R31:R30, R17:R16
        STD     Z+2, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDriver::SetModbusReceipt(uint8_t)
??SetModbusReceipt:
        MOVW    R31:R30, R17:R16
        STD     Z+3, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDriver::SetModbusReset(uint8_t)
??SetModbusReset:
        MOVW    R31:R30, R17:R16
        STD     Z+4, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDfaLite::SetFsmState(uint8_t)
??SetFsmState:
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CDfaLite::GetFsmState()
??GetFsmState:
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDfa::SetFsmEvent(uint8_t)
??SetFsmEvent:
        MOVW    R31:R30, R17:R16
        STD     Z+4, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::WatchdogReset()
??WatchdogReset:
        WDR
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::WatchdogEnable()
??WatchdogEnable:
        WDR
        IN      R16, 0x21
        ORI     R16, 0x18
        OUT     0x21, R16
        IN      R16, 0x21
        ORI     R16, 0x07
        OUT     0x21, R16
        RET
        REQUIRE _A_WDTCR

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyOneState()
??KeyOneState:
        LDI     R16, 0
        SBIC    0x13, 0x02
        INC     R16
??KeyOneState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyTwoState()
??KeyTwoState:
        LDI     R16, 0
        SBIC    0x13, 0x01
        INC     R16
??KeyTwoState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyThreeState()
??KeyThreeState:
        LDI     R16, 0
        SBIC    0x13, 0x00
        INC     R16
??KeyThreeState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::ExternalKeyState()
??ExternalKeyState:
        LDI     R16, 0
        SBIC    0x13, 0x04
        INC     R16
??ExternalKeyState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress0SetPinOutput()
??SpiSlaveSelectAddress0SetPinOutput:
        SBI     0x11, 0x07
        RET
        REQUIRE _A_DDRD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress0On()
??SpiSlaveSelectAddress0On:
        SBI     0x12, 0x07
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress0Off()
??SpiSlaveSelectAddress0Off:
        CBI     0x12, 0x07
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress1SetPinOutput()
??SpiSlaveSelectAddress1SetPinOutput:
        SBI     0x11, 0x06
        RET
        REQUIRE _A_DDRD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress1On()
??SpiSlaveSelectAddress1On:
        SBI     0x12, 0x06
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress1Off()
??SpiSlaveSelectAddress1Off:
        CBI     0x12, 0x06
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress2SetPinOutput()
??SpiSlaveSelectAddress2SetPinOutput:
        SBI     0x11, 0x05
        RET
        REQUIRE _A_DDRD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress2On()
??SpiSlaveSelectAddress2On:
        SBI     0x12, 0x05
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress2Off()
??SpiSlaveSelectAddress2Off:
        CBI     0x12, 0x05
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress3SetPinOutput()
??SpiSlaveSelectAddress3SetPinOutput:
        SBI     0x11, 0x04
        RET
        REQUIRE _A_DDRD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress3On()
??SpiSlaveSelectAddress3On:
        SBI     0x12, 0x04
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectAddress3Off()
??SpiSlaveSelectAddress3Off:
        CBI     0x12, 0x04
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectEnableSetPinOutput()
??SpiSlaveSelectEnableSetPinOutput:
        SBI     0x11, 0x01
        RET
        REQUIRE _A_DDRD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectEnableOn()
??SpiSlaveSelectEnableOn:
        SBI     0x12, 0x01
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::SpiSlaveSelectEnableOff()
??SpiSlaveSelectEnableOff:
        CBI     0x12, 0x01
        RET
        REQUIRE _A_PORTD

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetActivityState(uint8_t)
??SetActivityState:
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetActivityState()
??GetActivityState:
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetSavedActivityState(uint8_t)
??SetSavedActivityState:
        MOVW    R31:R30, R17:R16
        STD     Z+1, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetSavedActivityState()
??GetSavedActivityState:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetAlarmType(uint8_t)
??SetAlarmType:
        MOVW    R31:R30, R17:R16
        STD     Z+2, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetAlarmType()
??GetAlarmType:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+2
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetSavedAlarmType(uint8_t)
??SetSavedAlarmType:
        MOVW    R31:R30, R17:R16
        STD     Z+3, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetSavedAlarmType()
??GetSavedAlarmType:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+3
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetAlarmColor(uint8_t)
??SetAlarmColor:
        MOVW    R31:R30, R17:R16
        STD     Z+4, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetAlarmColor()
??GetAlarmColor:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+4
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmWindow::SetSavedAlarmColor(uint8_t)
??SetSavedAlarmColor:
        MOVW    R31:R30, R17:R16
        STD     Z+5, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmWindow::GetSavedAlarmColor()
??GetSavedAlarmColor:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+5
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmDfa::SetDiscreteStateIndex(uint8_t)
??SetDiscreteStateIndex:
        MOVW    R31:R30, R17:R16
        STD     Z+5, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CAlarmDfa::SetAlarmWindowIndex(uint8_t)
??SetAlarmWindowIndex:
        MOVW    R31:R30, R17:R16
        STD     Z+3, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CAlarmDfa::GetAlarmWindowIndex()
??GetAlarmWindowIndex:
        MOVW    R31:R30, R17:R16
        LDD     R16, Z+3
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t *CAlarmDfa::GetLinkedDiscreteOutputsPointer()
??GetLinkedDiscreteOutputsPointer:
        SUBI    R16, 252
        SBCI    R17, 255
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetFsmState()
??GetFsmState_1:
        LDS     R16, ??m_uiFsmState
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetFsmState(uint8_t)
??SetFsmState_1:
        STS     ??m_uiFsmState, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetPanelReceipt(uint8_t)
??SetPanelReceipt:
        STS     ??m_uiPanelReceipt, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetPanelReceipt()
??GetPanelReceipt:
        LDS     R16, ??m_uiPanelReceipt
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetPanelReset(uint8_t)
??SetPanelReset:
        STS     ??m_uiPanelReset, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetPanelReset()
??GetPanelReset:
        LDS     R16, ??m_uiPanelReset
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetExternalReceipt(uint8_t)
??SetExternalReceipt:
        STS     ??m_uiExternalReceipt, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetExternalReceipt()
??GetExternalReceipt:
        LDS     R16, ??m_uiExternalReceipt
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetExternalReset(uint8_t)
??SetExternalReset:
        STS     ??m_uiExternalReset, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetExternalReset()
??GetExternalReset:
        LDS     R16, ??m_uiExternalReset
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetModbusReceipt(uint8_t)
??SetModbusReceipt_1:
        STS     ??m_uiModbusReceipt, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetModbusReceipt()
??GetModbusReceipt:
        LDS     R16, ??m_uiModbusReceipt
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetModbusReset(uint8_t)
??SetModbusReset_1:
        STS     ??m_uiModbusReset, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetModbusReset()
??GetModbusReset:
        LDS     R16, ??m_uiModbusReset
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetDiscreteSignalsReceipt(uint8_t)
??SetDiscreteSignalsReceipt:
        STS     ??m_uiDiscreteSignalsReceipt, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetDiscreteSignalsReset(uint8_t)
??SetDiscreteSignalsReset:
        STS     ??m_uiDiscreteSignalsReset, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetCommonAlarmType()
??GetCommonAlarmType:
        LDS     R16, ??m_uiCommonAlarmType
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetErrorCode(uint8_t)
??SetErrorCode:
        STS     ??m_uiErrorCode, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetErrorCode()
??GetErrorCode:
        LDS     R16, ??m_uiErrorCode
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPss21::GetModuleIndex()
??GetModuleIndex:
        LDS     R16, ??m_uiModuleIndex
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetModuleIndex(uint8_t)
??SetModuleIndex:
        STS     ??m_uiModuleIndex, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CAlarmWindow *CPss21::GetAlarmWindowControlPointer(uint8_t)
??GetAlarmWindowControlPointer:
        LDI     R17, 0
        LDI     R20, 8
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        ADD     R16, R18
        ADC     R17, R19
        RET

        ASEGN ABSOLUTE:DATA:NOROOT,01cH
__?EECR:

        ASEGN ABSOLUTE:DATA:NOROOT,01dH
__?EEDR:

        ASEGN ABSOLUTE:DATA:NOROOT,01eH
__?EEARL:

        ASEGN ABSOLUTE:DATA:NOROOT,01fH
__?EEARH:

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_Z>`:
        DC16    SFE(NEAR_Z) - SFB(NEAR_Z)
        DC16    SFB(NEAR_Z)
        DP      0
        REQUIRE ?need_segment_init

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >`:
        DC16 ?_1, ??m_xUart1, `?<Unnamed 0>`/2

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_I>`:
        DC16    SFE(NEAR_I) - SFB(NEAR_I)
        DC16    SFB(NEAR_I)
        DP      SFB(NEAR_ID)
        REQUIRE ?need_segment_init

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_1`:
        DC16 ?_3, ??m_xModbusRtuOne, `?<Unnamed 1>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_2`:
        DC16 ?_5, ??m_xReceiptKey, `?<Unnamed 2>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_3`:
        DC16 ?_7, ??m_xResetKey, `?<Unnamed 2>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_4`:
        DC16 ?_9, ??m_xCheckKey, `?<Unnamed 2>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_5`:
        DC16 ?_11, ??m_xExternalKey, `?<Unnamed 2>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_6`:
        DC16 ?_13, ??m_xEventUniteLogicAndOne, `?<Unnamed 3>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_7`:
        DC16 ?_15, ??m_xMainCycleTimer, `?<Unnamed 4>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_8`:
        DC16 ?_17, ??m_xPreventiveAlarmWindowNotifyerControl, `?<Unnamed 5>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_9`:
        DC16 ?_19, ??m_xEmergencyAlarmWindowNotifyerControl, `?<Unnamed 6>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_10`:
        DC16 ?_21, ??m_xStatusLedNotifyerControl, `?<Unnamed 7>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_11`:
        DC16 ?_23, ??m_xBuzzerNotifyerControl, `?<Unnamed 8>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_12`:
        DC16 ?_25, ??m_xTestModeNotifyerControl, `?<Unnamed 9>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_13`:
        DC16 ?_27, ??m_xModbusRtuLinkControl, `?<Unnamed 10>`/2

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >_14`:
        DC16 ?_29, 0H, `?<Unnamed 11>`/2

        RSEG DIFUNCT:CODE:ROOT(0)
        REQUIRE ?call_ctors
        DW      ??__sti__routine/2

        RSEG SWITCH:CODE:NOROOT(1)
`?<Jumptable for MainFsm>_0`:
        DB      0
        DB      0
        DW      (??MainFsm_24) /2
        DW      22
        DW      (??MainFsm_1) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_3) /2
        DW      (??MainFsm_5) /2
        DW      (??MainFsm_10) /2
        DW      (??MainFsm_11) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_12) /2
        DW      (??MainFsm_13) /2
        DW      (??MainFsm_14) /2
        DW      (??MainFsm_15) /2
        DW      (??MainFsm_16) /2
        DW      (??MainFsm_17) /2
        DW      (??MainFsm_18) /2
        DW      (??MainFsm_19) /2
        DW      (??MainFsm_20) /2
        DW      (??MainFsm_21) /2
        DW      (??MainFsm_23) /2

        END
// 1896 
// 
//   105 bytes in segment ABSOLUTE
// 7 336 bytes in segment CODE
//     2 bytes in segment DIFUNCT
//    14 bytes in segment INITTAB
//    70 bytes in segment NEAR_F
//    90 bytes in segment NEAR_I
//    90 bytes in segment NEAR_ID
// 1 804 bytes in segment NEAR_Z
//    50 bytes in segment SWITCH
// 
// 7 134 bytes of CODE memory (+ 428 bytes shared)
// 1 894 bytes of DATA memory (+ 105 bytes shared)
//
//Errors: none
//Warnings: 7
