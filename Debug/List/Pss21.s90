///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR          30/May/2023  07:56:25
// Copyright 1996-2018 IAR Systems AB.
//
//    Source file  =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//    Command line =  
//        -f C:\Users\Admin\AppData\Local\Temp\EW409A.tmp
//        (--string_literals_in_flash
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//        --cpu=m128a -ms -o
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
//        --initializers_in_flash --root_variables --debug
//        -DENABLE_BIT_DEFINITIONS -e -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
//        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
//        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -Ohz
//        --eec++)
//    Locale       =  Russian_RUS.1251
//    List file    =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\Pss21.s90
//
///////////////////////////////////////////////////////////////////////////////

        NAME Pss21

        RSEG CSTACK:DATA:NOROOT(0)
        RSEG RSTACK:DATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?CV_SWITCH_L06
        EXTERN ?EPILOGUE_B4_L09
        EXTERN ?EPILOGUE_B5_L09
        EXTERN ?PROLOGUE4_L09
        EXTERN ?PROLOGUE5_L09
        EXTERN ?Register_R4_is_cg_reg
        EXTERN ?SS_DIVMOD_L02
        EXTERN ?SS_SHR_L02
        EXTERN ?S_EC_MUL_L02
        EXTERN ?S_SHL_L02
        EXTERN ?UL_DIVMOD_L03
        EXTERN ?UL_SHR_L03
        EXTERN ?call_ctors
        EXTERN ?need_segment_init

        PUBWEAK `?<Segment init: NEAR_I>`
        PUBWEAK `?<Segment init: NEAR_Z>`
        PUBLIC ??ActiveAlarmWindowOff
        PUBLIC ??ActiveAlarmWindowOn
        PUBLIC ??AddressBusInit
        PUBLIC ??AlarmTypeChange
        PUBLIC ??AlarmTypeErrorChange
        PUBLIC ??AlarmTypeReceipt
        PUBLIC ??AlarmTypeReset
        PUBLIC ??AlarmTypeSet
        PUBLIC ??AlarmsProcessing
        PUBLIC ??AllAlarmWindowOff
        PUBLIC ??AllAlarmWindowOn
        PUBLIC ??BoardWindowsUpdate
        PUBLIC ??ConfigurationInit
        PUBLIC ??ConnectDevice
        PUBLIC ??CreateDevices
        PUBLIC ??DestroyDevices
        PUBLIC ??DisconnectDevice
        PUBLIC ??DiscreteOutputControlClear
        PUBLIC ??DiscreteOutputsSet
        PUBLIC ??DiscreteSignalsProcessing
        PUBLIC ??ErrorAlarmsProcessing
        PUBLIC ??ErrorMainCycle
        PUBLIC ??ErrorWindowOn
        PUBWEAK ??ExternalKeyState
        PUBLIC ??GetDiscreteInputState
        PUBLIC ??GetErrorAlarmState
        PUBLIC ??GetTimeoutModbusRtuLinkControl
        PUBLIC ??Init
        PUBLIC ??InitAllocationContext
        PUBWEAK ??KeyOneState
        PUBLIC ??KeyStateProcessing
        PUBWEAK ??KeyThreeState
        PUBWEAK ??KeyTwoState
        PUBLIC ??LinkControlErrorMainCycle
        PUBLIC ??MainFsm
        PUBLIC ??ModbusDefaultInit
        PUBLIC ??ModbusDeviceControl
        PUBLIC ??ModbusDeviceControl_1
        PUBLIC ??ModbusInit
        PUBLIC ??ModbusRtuLinkControlInProgress
        PUBLIC ??ModbusRtuLinkControlIsOn
        PUBLIC ??ModulesInteraction
        PUBLIC ??NotifyersControlProcessing
        PUBLIC ??ReceiptResetGlobalFlagsClear
        PUBLIC ??ReportType
        PUBLIC ??RestoreContextNotifyerControl
        PUBLIC ??SaveContextNotifyerControl
        PUBLIC ??SearchModules
        PUBLIC ??SendToDevicesModbusReceipt
        PUBLIC ??SendToDevicesModbusReset
        PUBLIC ??SendToDevicesReceipt
        PUBLIC ??SendToDevicesReset
        PUBLIC ??SetAlarmWindowType
        PUBLIC ??SetBytesFromBits
        PUBLIC ??SetErrorAlarmState
        PUBLIC ??SetModeModbusRtuLinkControlInProgress
        PUBLIC ??TestMainCycle
        PUBLIC ??m_apxAlarmDfa
        PUBLIC ??m_apxDrivers
        PUBLIC ??m_apxErrorAlarmDfa
        PUBLIC ??m_aucRtuDiscreteDataArray
        PUBLIC ??m_aucRtuHoldingRegistersArray
        PUBLIC ??m_aucRtuInputRegistersArray
        PUBLIC ??m_auiErrorAlarmDataArray
        PUBLIC ??m_auiErrorLedOn
        PUBLIC ??m_auiIntermediateBuff
        PUBLIC ??m_auiReceiveMessageBuff
        PUBLIC ??m_auiSpiRxBuffer
        PUBLIC ??m_auiSpiTxBuffer
        PUBLIC ??m_axAlarmWindowControl
        PUBLIC ??m_axDiscreteOutputControl
        PUBLIC ??m_uiCommonAlarmType
        PUBLIC ??m_uiCommonAlarmTypePrevious
        PUBLIC ??m_uiDiscreteSignalsReceipt
        PUBLIC ??m_uiDiscreteSignalsReset
        PUBLIC ??m_uiErrorCode
        PUBLIC ??m_uiExternalReceipt
        PUBLIC ??m_uiExternalReset
        PUBLIC ??m_uiFsmState
        PUBLIC ??m_uiModbusReceipt
        PUBLIC ??m_uiModbusReset
        PUBLIC ??m_uiModuleIndex
        PUBLIC ??m_uiPanelReceipt
        PUBLIC ??m_uiPanelReset
        PUBLIC ??m_uiType
        PUBLIC ??m_xBuzzerNotifyerControl
        PUBLIC ??m_xCheckKey
        PUBLIC ??m_xDeviceConfigSearch
        PUBLIC ??m_xDeviceConfiguration
        PUBLIC ??m_xDeviceState
        PUBLIC ??m_xDiscreteOutputDataBase
        PUBLIC ??m_xEmergencyAlarmWindowNotifyerControl
        PUBLIC ??m_xEventUniteLogicAndOne
        PUBLIC ??m_xExternalKey
        PUBLIC ??m_xMainCycleTimer
        PUBLIC ??m_xModbusRtuLinkControl
        PUBLIC ??m_xModbusRtuOne
        PUBLIC ??m_xModbusSettings
        PUBLIC ??m_xPreventiveAlarmWindowNotifyerControl
        PUBLIC ??m_xReceiptKey
        PUBLIC ??m_xResetKey
        PUBLIC ??m_xStatusLedNotifyerControl
        PUBLIC ??m_xUart1
        PUBWEAK _A_ACSR
        PUBWEAK _A_ADC
        PUBWEAK _A_ADCSRA
        PUBWEAK _A_ADMUX
        PUBWEAK _A_ASSR
        PUBWEAK _A_DDRA
        PUBWEAK _A_DDRB
        PUBWEAK _A_DDRC
        PUBWEAK _A_DDRD
        PUBWEAK _A_DDRE
        PUBWEAK _A_DDRF
        PUBWEAK _A_DDRG
        PUBWEAK _A_EEAR
        PUBWEAK _A_EECR
        PUBWEAK _A_EEDR
        PUBWEAK _A_EICRA
        PUBWEAK _A_EICRB
        PUBWEAK _A_EIFR
        PUBWEAK _A_EIMSK
        PUBWEAK _A_ETIFR
        PUBWEAK _A_ETIMSK
        PUBWEAK _A_ICR1
        PUBWEAK _A_ICR3
        PUBWEAK _A_MCUCR
        PUBWEAK _A_MCUCSR
        PUBWEAK _A_OCDR
        PUBWEAK _A_OCR0
        PUBWEAK _A_OCR1A
        PUBWEAK _A_OCR1B
        PUBWEAK _A_OCR1C
        PUBWEAK _A_OCR2
        PUBWEAK _A_OCR3A
        PUBWEAK _A_OCR3B
        PUBWEAK _A_OCR3C
        PUBWEAK _A_OSCCAL
        PUBWEAK _A_PINA
        PUBWEAK _A_PINB
        PUBWEAK _A_PINC
        PUBWEAK _A_PIND
        PUBWEAK _A_PINE
        PUBWEAK _A_PINF
        PUBWEAK _A_PING
        PUBWEAK _A_PORTA
        PUBWEAK _A_PORTB
        PUBWEAK _A_PORTC
        PUBWEAK _A_PORTD
        PUBWEAK _A_PORTE
        PUBWEAK _A_PORTF
        PUBWEAK _A_PORTG
        PUBWEAK _A_RAMPZ
        PUBWEAK _A_SFIOR
        PUBWEAK _A_SP
        PUBWEAK _A_SPCR
        PUBWEAK _A_SPDR
        PUBWEAK _A_SPMCSR
        PUBWEAK _A_SPSR
        PUBWEAK _A_SREG
        PUBWEAK _A_TCCR0
        PUBWEAK _A_TCCR1A
        PUBWEAK _A_TCCR1B
        PUBWEAK _A_TCCR1C
        PUBWEAK _A_TCCR2
        PUBWEAK _A_TCCR3A
        PUBWEAK _A_TCCR3B
        PUBWEAK _A_TCCR3C
        PUBWEAK _A_TCNT0
        PUBWEAK _A_TCNT1
        PUBWEAK _A_TCNT2
        PUBWEAK _A_TCNT3
        PUBWEAK _A_TIFR
        PUBWEAK _A_TIMSK
        PUBWEAK _A_TWAR
        PUBWEAK _A_TWBR
        PUBWEAK _A_TWCR
        PUBWEAK _A_TWDR
        PUBWEAK _A_TWSR
        PUBWEAK _A_UBRR0H
        PUBWEAK _A_UBRR0L
        PUBWEAK _A_UBRR1H
        PUBWEAK _A_UBRR1L
        PUBWEAK _A_UCSR0A
        PUBWEAK _A_UCSR0B
        PUBWEAK _A_UCSR0C
        PUBWEAK _A_UCSR1A
        PUBWEAK _A_UCSR1B
        PUBWEAK _A_UCSR1C
        PUBWEAK _A_UDR0
        PUBWEAK _A_UDR1
        PUBWEAK _A_WDTCR
        PUBWEAK _A_XDIV
        PUBWEAK _A_XMCRA
        PUBWEAK _A_XMCRB
        PUBWEAK __?EEARH
        PUBWEAK __?EEARL
        PUBWEAK __?EECR
        PUBWEAK __?EEDR
        PUBLIC uiMapTestCounter

`?<Name CPlatform 130>` SYMBOL "CPlatform"
??m_pxUart1         SYMBOL "m_pxUart1", `?<Name CPlatform 130>`
`?<Name CPss21 244>` SYMBOL "CPss21"
??m_apxAlarmDfa     SYMBOL "m_apxAlarmDfa", `?<Name CPss21 244>`
??m_apxDrivers      SYMBOL "m_apxDrivers", `?<Name CPss21 244>`
??m_apxErrorAlarmDfa SYMBOL "m_apxErrorAlarmDfa", `?<Name CPss21 244>`
??m_aucRtuDiscreteDataArray SYMBOL "m_aucRtuDiscreteDataArray", `?<Name CPss21 244>`
??m_aucRtuHoldingRegistersArray SYMBOL "m_aucRtuHoldingRegistersArray", `?<Name CPss21 244>`
??m_aucRtuInputRegistersArray SYMBOL "m_aucRtuInputRegistersArray", `?<Name CPss21 244>`
??m_auiErrorAlarmDataArray SYMBOL "m_auiErrorAlarmDataArray", `?<Name CPss21 244>`
??m_auiErrorLedOn   SYMBOL "m_auiErrorLedOn", `?<Name CPss21 244>`
??m_auiIntermediateBuff SYMBOL "m_auiIntermediateBuff", `?<Name CPss21 244>`
??m_auiReceiveMessageBuff SYMBOL "m_auiReceiveMessageBuff", `?<Name CPss21 244>`
??m_auiSpiRxBuffer  SYMBOL "m_auiSpiRxBuffer", `?<Name CPss21 244>`
??m_auiSpiTxBuffer  SYMBOL "m_auiSpiTxBuffer", `?<Name CPss21 244>`
??m_axAlarmWindowControl SYMBOL "m_axAlarmWindowControl", `?<Name CPss21 244>`
??m_axDiscreteOutputControl SYMBOL "m_axDiscreteOutputControl", `?<Name CPss21 244>`
??m_uiCommonAlarmType SYMBOL "m_uiCommonAlarmType", `?<Name CPss21 244>`
??m_uiCommonAlarmTypePrevious SYMBOL "m_uiCommonAlarmTypePrevious", `?<Name CPss21 244>`
??m_uiDiscreteSignalsReceipt SYMBOL "m_uiDiscreteSignalsReceipt", `?<Name CPss21 244>`
??m_uiDiscreteSignalsReset SYMBOL "m_uiDiscreteSignalsReset", `?<Name CPss21 244>`
??m_uiErrorCode     SYMBOL "m_uiErrorCode", `?<Name CPss21 244>`
??m_uiExternalReceipt SYMBOL "m_uiExternalReceipt", `?<Name CPss21 244>`
??m_uiExternalReset SYMBOL "m_uiExternalReset", `?<Name CPss21 244>`
??m_uiFsmState      SYMBOL "m_uiFsmState", `?<Name CPss21 244>`
??m_uiModbusReceipt SYMBOL "m_uiModbusReceipt", `?<Name CPss21 244>`
??m_uiModbusReset   SYMBOL "m_uiModbusReset", `?<Name CPss21 244>`
??m_uiModuleIndex   SYMBOL "m_uiModuleIndex", `?<Name CPss21 244>`
??m_uiPanelReceipt  SYMBOL "m_uiPanelReceipt", `?<Name CPss21 244>`
??m_uiPanelReset    SYMBOL "m_uiPanelReset", `?<Name CPss21 244>`
??m_uiType          SYMBOL "m_uiType", `?<Name CPss21 244>`
??m_xBuzzerNotifyerControl SYMBOL "m_xBuzzerNotifyerControl", `?<Name CPss21 244>`
??m_xCheckKey       SYMBOL "m_xCheckKey", `?<Name CPss21 244>`
??m_xDeviceConfigSearch SYMBOL "m_xDeviceConfigSearch", `?<Name CPss21 244>`
??m_xDeviceConfiguration SYMBOL "m_xDeviceConfiguration", `?<Name CPss21 244>`
??m_xDeviceState    SYMBOL "m_xDeviceState", `?<Name CPss21 244>`
??m_xDiscreteOutputDataBase SYMBOL "m_xDiscreteOutputDataBase", `?<Name CPss21 244>`
??m_xEmergencyAlarmWindowNotifyerControl SYMBOL "m_xEmergencyAlarmWindowNotifyerControl", `?<Name CPss21 244>`
??m_xEventUniteLogicAndOne SYMBOL "m_xEventUniteLogicAndOne", `?<Name CPss21 244>`
??m_xExternalKey    SYMBOL "m_xExternalKey", `?<Name CPss21 244>`
??m_xMainCycleTimer SYMBOL "m_xMainCycleTimer", `?<Name CPss21 244>`
??m_xModbusRtuLinkControl SYMBOL "m_xModbusRtuLinkControl", `?<Name CPss21 244>`
??m_xModbusRtuOne   SYMBOL "m_xModbusRtuOne", `?<Name CPss21 244>`
??m_xModbusSettings SYMBOL "m_xModbusSettings", `?<Name CPss21 244>`
??m_xPreventiveAlarmWindowNotifyerControl SYMBOL "m_xPreventiveAlarmWindowNotifyerControl", `?<Name CPss21 244>`
??m_xReceiptKey     SYMBOL "m_xReceiptKey", `?<Name CPss21 244>`
??m_xResetKey       SYMBOL "m_xResetKey", `?<Name CPss21 244>`
??m_xStatusLedNotifyerControl SYMBOL "m_xStatusLedNotifyerControl", `?<Name CPss21 244>`
??m_xUart1          SYMBOL "m_xUart1", `?<Name CPss21 244>`

        EXTERN ??AlarmSet
        EXTERN ??AlarmSet_1
        EXTERN ??AlarmSet_2
        EXTERN ??AlarmSet_3
        EXTERN ??CAlarmWindow
        EXTERN ??CBuzzerNotifyerControl
        EXTERN ??CEmergencyAlarmWindowNotifyerControl
        EXTERN ??CEventUniteLogicAnd
        EXTERN ??CModbusRTU
        EXTERN ??CModbusRtuLinkControl
        EXTERN ??CMultiFunctionKey
        EXTERN ??CPreventiveAlarmWindowNotifyerControl
        EXTERN ??CStatusLedNotifyerControl
        EXTERN ??CTimer
        EXTERN ??CUart
        EXTERN ??Check
        EXTERN ??Disable
        EXTERN ??Enable
        EXTERN ??Exchange
        EXTERN ??Fsm
        EXTERN ??Fsm_1
        EXTERN ??Fsm_2
        EXTERN ??Fsm_3
        EXTERN ??Init_1
        EXTERN ??Init_2
        EXTERN ??Init_3
        EXTERN ??Init_4
        EXTERN ??Init_5
        EXTERN ??IsHappened
        EXTERN ??IsOverflow
        EXTERN ??KeyEventHappened
        EXTERN ??ReadBlock
        EXTERN ??Reset
        EXTERN ??Set
        EXTERN ??Set_1
        EXTERN ??SignatureCreate
        EXTERN ??SlaveSet
        EXTERN ??WriteBlock
        EXTERN ??delay_ms
        EXTERN ??iCrcSummOneByteCompare
        EXTERN ??m_pxUart1
        EXTERN `??new CEmergencyAlarmHighLevelDfa`
        EXTERN `??new CEmergencyAlarmLowLevelDfa`
        EXTERN `??new CErrorAlarmDfa`
        EXTERN `??new CIndicationAlarmHighLevelDfa`
        EXTERN `??new CIndicationAlarmLowLevelDfa`
        EXTERN `??new CModuleMrXXDriver`
        EXTERN `??new CMvsn21Driver`
        EXTERN `??new CNormalAlarmDfa`
        EXTERN `??new CPreventiveAlarmHighLevelDfa`
        EXTERN `??new CPreventiveAlarmLowLevelDfa`
        EXTERN `?~CAlarmWindow`
        EXTERN `?~CBuzzerNotifyerControl`
        EXTERN `?~CEmergencyAlarmWindowNotifyerControl`
        EXTERN `?~CEventUniteLogicAnd`
        EXTERN `?~CModbusRTU`
        EXTERN `?~CModbusRtuLinkControl`
        EXTERN `?~CMultiFunctionKey`
        EXTERN `?~CPreventiveAlarmWindowNotifyerControl`
        EXTERN `?~CStatusLedNotifyerControl`
        EXTERN `?~CTimer`
        EXTERN `?~CUart`
        EXTERN __near_vec_construct
        EXTERN __near_vec_destroy
        EXTERN __record_needed_destruction
        EXTERN memcpy
        EXTERN memset

// D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Pss21.cpp
//    1 //-----------------------------------------------------------------------------------------------------
//    2 //  Source      : FileName.cpp
//    3 //  Created     : 01.06.2022
//    4 //  Author      : Alexandr Volvenkin
//    5 //  email       : aav-36@mail.ru
//    6 //  GitHub      : https://github.com/AlexandrVolvenkin
//    7 //-----------------------------------------------------------------------------------------------------
//    8 #include "Pss21.h"

        ASEGN ABSOLUTE:DATA:ROOT,09dH
// union <unnamed> volatile __io _A_UCSR1C
_A_UCSR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09cH
// union <unnamed> volatile __io _A_UDR1
_A_UDR1:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09bH
// union <unnamed> volatile __io _A_UCSR1A
_A_UCSR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09aH
// union <unnamed> volatile __io _A_UCSR1B
_A_UCSR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,099H
// union <unnamed> volatile __io _A_UBRR1L
_A_UBRR1L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,098H
// union <unnamed> volatile __io _A_UBRR1H
_A_UBRR1H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,095H
// union <unnamed> volatile __io _A_UCSR0C
_A_UCSR0C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,090H
// union <unnamed> volatile __io _A_UBRR0H
_A_UBRR0H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08cH
// union <unnamed> volatile __io _A_TCCR3C
_A_TCCR3C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08bH
// union <unnamed> volatile __io _A_TCCR3A
_A_TCCR3A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08aH
// union <unnamed> volatile __io _A_TCCR3B
_A_TCCR3B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,088H
// union <unnamed> volatile __io _A_TCNT3
_A_TCNT3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,086H
// union <unnamed> volatile __io _A_OCR3A
_A_OCR3A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,084H
// union <unnamed> volatile __io _A_OCR3B
_A_OCR3B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,082H
// union <unnamed> volatile __io _A_OCR3C
_A_OCR3C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,080H
// union <unnamed> volatile __io _A_ICR3
_A_ICR3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,07dH
// union <unnamed> volatile __io _A_ETIMSK
_A_ETIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07cH
// union <unnamed> volatile __io _A_ETIFR
_A_ETIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07aH
// union <unnamed> volatile __io _A_TCCR1C
_A_TCCR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,078H
// union <unnamed> volatile __io _A_OCR1C
_A_OCR1C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,074H
// union <unnamed> volatile __io _A_TWCR
_A_TWCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,073H
// union <unnamed> volatile __io _A_TWDR
_A_TWDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,072H
// union <unnamed> volatile __io _A_TWAR
_A_TWAR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,071H
// union <unnamed> volatile __io _A_TWSR
_A_TWSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,070H
// union <unnamed> volatile __io _A_TWBR
_A_TWBR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06fH
// union <unnamed> volatile __io _A_OSCCAL
_A_OSCCAL:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06dH
// union <unnamed> volatile __io _A_XMCRA
_A_XMCRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06cH
// union <unnamed> volatile __io _A_XMCRB
_A_XMCRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06aH
// union <unnamed> volatile __io _A_EICRA
_A_EICRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,068H
// union <unnamed> volatile __io _A_SPMCSR
_A_SPMCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,065H
// union <unnamed> volatile __io _A_PORTG
_A_PORTG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,064H
// union <unnamed> volatile __io _A_DDRG
_A_DDRG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,063H
// union <unnamed> volatile __io _A_PING
_A_PING:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,062H
// union <unnamed> volatile __io _A_PORTF
_A_PORTF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,061H
// union <unnamed> volatile __io _A_DDRF
_A_DDRF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05fH
// union <unnamed> volatile __io _A_SREG
_A_SREG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05dH
// union <unnamed> volatile __io _A_SP
_A_SP:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,05cH
// union <unnamed> volatile __io _A_XDIV
_A_XDIV:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05bH
// union <unnamed> volatile __io _A_RAMPZ
_A_RAMPZ:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05aH
// union <unnamed> volatile __io _A_EICRB
_A_EICRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,059H
// union <unnamed> volatile __io _A_EIMSK
_A_EIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,058H
// union <unnamed> volatile __io _A_EIFR
_A_EIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,057H
// union <unnamed> volatile __io _A_TIMSK
_A_TIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,056H
// union <unnamed> volatile __io _A_TIFR
_A_TIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,055H
// union <unnamed> volatile __io _A_MCUCR
_A_MCUCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,054H
// union <unnamed> volatile __io _A_MCUCSR
_A_MCUCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,053H
// union <unnamed> volatile __io _A_TCCR0
_A_TCCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,052H
// union <unnamed> volatile __io _A_TCNT0
_A_TCNT0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,051H
// union <unnamed> volatile __io _A_OCR0
_A_OCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,050H
// union <unnamed> volatile __io _A_ASSR
_A_ASSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04fH
// union <unnamed> volatile __io _A_TCCR1A
_A_TCCR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04eH
// union <unnamed> volatile __io _A_TCCR1B
_A_TCCR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04cH
// union <unnamed> volatile __io _A_TCNT1
_A_TCNT1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,04aH
// union <unnamed> volatile __io _A_OCR1A
_A_OCR1A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,048H
// union <unnamed> volatile __io _A_OCR1B
_A_OCR1B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,046H
// union <unnamed> volatile __io _A_ICR1
_A_ICR1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,045H
// union <unnamed> volatile __io _A_TCCR2
_A_TCCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,044H
// union <unnamed> volatile __io _A_TCNT2
_A_TCNT2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,043H
// union <unnamed> volatile __io _A_OCR2
_A_OCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,042H
// union <unnamed> volatile __io _A_OCDR
_A_OCDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,041H
// union <unnamed> volatile __io _A_WDTCR
_A_WDTCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,040H
// union <unnamed> volatile __io _A_SFIOR
_A_SFIOR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03eH
// union <unnamed> volatile __io _A_EEAR
_A_EEAR:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,03dH
// union <unnamed> volatile __io _A_EEDR
_A_EEDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03cH
// union <unnamed> volatile __io _A_EECR
_A_EECR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03bH
// union <unnamed> volatile __io _A_PORTA
_A_PORTA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03aH
// union <unnamed> volatile __io _A_DDRA
_A_DDRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,039H
// union <unnamed> volatile __io _A_PINA
_A_PINA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,038H
// union <unnamed> volatile __io _A_PORTB
_A_PORTB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,037H
// union <unnamed> volatile __io _A_DDRB
_A_DDRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,036H
// union <unnamed> volatile __io _A_PINB
_A_PINB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,035H
// union <unnamed> volatile __io _A_PORTC
_A_PORTC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,034H
// union <unnamed> volatile __io _A_DDRC
_A_DDRC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,033H
// union <unnamed> volatile __io _A_PINC
_A_PINC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,032H
// union <unnamed> volatile __io _A_PORTD
_A_PORTD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,031H
// union <unnamed> volatile __io _A_DDRD
_A_DDRD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,030H
// union <unnamed> volatile __io _A_PIND
_A_PIND:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02fH
// union <unnamed> volatile __io _A_SPDR
_A_SPDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02eH
// union <unnamed> volatile __io _A_SPSR
_A_SPSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02dH
// union <unnamed> volatile __io _A_SPCR
_A_SPCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02cH
// union <unnamed> volatile __io _A_UDR0
_A_UDR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02bH
// union <unnamed> volatile __io _A_UCSR0A
_A_UCSR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02aH
// union <unnamed> volatile __io _A_UCSR0B
_A_UCSR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,029H
// union <unnamed> volatile __io _A_UBRR0L
_A_UBRR0L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,028H
// union <unnamed> volatile __io _A_ACSR
_A_ACSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,027H
// union <unnamed> volatile __io _A_ADMUX
_A_ADMUX:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,026H
// union <unnamed> volatile __io _A_ADCSRA
_A_ADCSRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,024H
// union <unnamed> volatile __io _A_ADC
_A_ADC:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,023H
// union <unnamed> volatile __io _A_PORTE
_A_PORTE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,022H
// union <unnamed> volatile __io _A_DDRE
_A_DDRE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,021H
// union <unnamed> volatile __io _A_PINE
_A_PINE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,020H
// union <unnamed> volatile __io _A_PINF
_A_PINF:
        DS8 1
//    9 #include "Platform.h"
//   10 #include "InputDevice.h"
//   11 #include "Mvsn21.h"
//   12 #include "ModuleMrXX.h"
//   13 #include "Crc.h"
//   14 #include "ModbusRTU.h"
//   15 #include "DataBase.h"
//   16 #include "DataTypes.h"
//   17 #include "Alarm.h"
//   18 #include "NotifyerControl.h"
//   19 #include "Buzzer.h"
//   20 #include "Event.h"
//   21 #include "Dfa.h"
//   22 
//   23 
//   24 //uint8_t CPss21::m_aucRtuCoilsArray[];
//   25 //uint8_t CPss21::m_aucRtuDiscreteInputsArray[];
//   26 uint16_t CPss21::m_aucRtuHoldingRegistersArray[];
//   27 uint16_t CPss21::m_aucRtuInputRegistersArray[];
//   28 uint8_t CPss21::m_aucRtuDiscreteDataArray[];
//   29 uint8_t CPss21::m_auiReceiveMessageBuff[];
//   30 //uint8_t CPss21::m_auiTransmitMessageBuff[];
//   31 uint8_t CPss21::m_auiIntermediateBuff[];
//   32 uint8_t CPss21::m_auiSpiRxBuffer[];
//   33 uint8_t CPss21::m_auiSpiTxBuffer[];
//   34 
//   35 uint8_t CPss21::m_uiFsmState;
//   36 uint8_t CPss21::m_uiType;
//   37 //CDriver* CPss21::m_pxDriver;
//   38 //CDevice* CPss21::m_apxDevices[];
//   39 CDriver* CPss21::m_apxDrivers[];
//   40 

        RSEG CODE:CODE:NOROOT(1)
// static __intrinsic __version_3 void __sti__routine()
??__sti__routine:
//   41 CUart CPss21::m_xUart1(&UBRR1H, &UBRR1L, &UCSR1A, &UCSR1B, &UCSR1C, &UDR1, &DDRC, DDC7, &PORTC, PC7);
        LDI     R16, 7
        ST      -Y, R16
        LDI     R16, LOW(53)
        LDI     R17, (53) >> 8
        RCALL   ?Subroutine77
??CrossCallReturnLabel_101:
        LDI     R16, 7
        ST      -Y, R16
        LDI     R16, LOW(52)
        RCALL   ?Subroutine77
??CrossCallReturnLabel_102:
        LDI     R16, LOW(156)
        RCALL   ?Subroutine77
??CrossCallReturnLabel_103:
        LDI     R16, LOW(157)
        RCALL   ?Subroutine77
??CrossCallReturnLabel_104:
        LDI     R16, LOW(154)
        RCALL   ?Subroutine77
??CrossCallReturnLabel_105:
        LDI     R22, LOW(155)
        LDI     R23, (53) >> 8
        LDI     R20, LOW(153)
        LDI     R21, (53) >> 8
        LDI     R18, LOW(152)
        LDI     R19, (53) >> 8
        LDI     R16, LOW(??m_xUart1)
        LDI     R17, (??m_xUart1) >> 8
        CALL    ??CUart
        LDI     R16, LOW(?_0)
        LDI     R17, (?_0) >> 8
        RCALL   ?Subroutine74
//   42 CModbusRTU CPss21::m_xModbusRtuOne;
??CrossCallReturnLabel_88:
        RCALL   ??Subroutine97_0
??CrossCallReturnLabel_169:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??CModbusRTU
        LDI     R16, LOW((?_0 + 6))
        LDI     R17, HIGH((?_0 + 6))
        RCALL   ?Subroutine74
//   43 
//   44 //CDataBase CPss21::m_xDataBase;
//   45 //CDataBase* CPss21::m_pxDataBase;
//   46 //CDataStore CPss21::m_xDataStore;
//   47 
//   48 CMultiFunctionKey CPss21::m_xReceiptKey(CPlatform::KeyOneState);
??CrossCallReturnLabel_89:
        LDI     R18, LOW(??KeyOneState/2)
        LDI     R19, (??KeyOneState/2) >> 8
        LDI     R16, LOW((??m_xDeviceConfiguration + 79))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 79))
        RCALL   ?Subroutine12
??CrossCallReturnLabel_7:
        LDI     R16, LOW((?_0 + 12))
        LDI     R17, HIGH((?_0 + 12))
        RCALL   ?Subroutine74
//   49 CMultiFunctionKey CPss21::m_xResetKey(CPlatform::KeyTwoState);
??CrossCallReturnLabel_90:
        LDI     R18, LOW(??KeyTwoState/2)
        LDI     R19, (??KeyTwoState/2) >> 8
        LDI     R16, LOW((??m_xDeviceConfiguration + 94))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 94))
        RCALL   ?Subroutine12
??CrossCallReturnLabel_6:
        LDI     R16, LOW((?_0 + 18))
        LDI     R17, HIGH((?_0 + 18))
        RCALL   ?Subroutine74
//   50 CMultiFunctionKey CPss21::m_xCheckKey(CPlatform::KeyThreeState);
??CrossCallReturnLabel_91:
        LDI     R18, LOW(??KeyThreeState/2)
        LDI     R19, (??KeyThreeState/2) >> 8
        LDI     R16, LOW((??m_xDeviceConfiguration + 109))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 109))
        RCALL   ?Subroutine12
??CrossCallReturnLabel_5:
        LDI     R16, LOW((?_0 + 24))
        LDI     R17, HIGH((?_0 + 24))
        RCALL   ?Subroutine74
//   51 CMultiFunctionKey CPss21::m_xExternalKey(CPlatform::ExternalKeyState);
??CrossCallReturnLabel_92:
        LDI     R18, LOW(??ExternalKeyState/2)
        LDI     R19, (??ExternalKeyState/2) >> 8
        LDI     R16, LOW((??m_xDeviceConfiguration + 124))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 124))
        RCALL   ?Subroutine12
??CrossCallReturnLabel_4:
        LDI     R16, LOW((?_0 + 30))
        LDI     R17, HIGH((?_0 + 30))
        RCALL   ?Subroutine74
//   52 
//   53 //CIsReceiptButtonPressed CPss21::m_xIsReceiptButtonPressed;
//   54 
//   55 uint8_t CPss21::m_uiPanelReceipt;
//   56 uint8_t CPss21::m_uiPanelReset;
//   57 uint8_t CPss21::m_uiExternalReceipt;
//   58 uint8_t CPss21::m_uiExternalReset;
//   59 uint8_t CPss21::m_uiModbusReceipt;
//   60 uint8_t CPss21::m_uiModbusReset;
//   61 uint8_t CPss21::m_uiDiscreteSignalsReceipt;
//   62 uint8_t CPss21::m_uiDiscreteSignalsReset;
//   63 uint8_t CPss21::m_uiErrorCode;
//   64 uint8_t CPss21::m_uiModuleIndex;
//   65 CEventUniteLogicAnd CPss21::m_xEventUniteLogicAndOne(500);
??CrossCallReturnLabel_93:
        LDI     R18, 244
        LDI     R19, 1
        LDI     R16, LOW((??m_xDeviceConfiguration + 139))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 139))
        CALL    ??CEventUniteLogicAnd
        LDI     R16, LOW((?_0 + 36))
        LDI     R17, HIGH((?_0 + 36))
        RCALL   ?Subroutine74
//   66 CTimer CPss21::m_xMainCycleTimer(MAIN_CYCLE_PERIOD_TIME);
??CrossCallReturnLabel_94:
        LDI     R18, 100
        LDI     R19, 0
        RCALL   ?Subroutine63
??CrossCallReturnLabel_238:
        CALL    ??CTimer
        LDI     R16, LOW((?_0 + 42))
        LDI     R17, HIGH((?_0 + 42))
        RCALL   ?Subroutine74
//   67 //CTimer CPss21::m_xPeripheryTimer(PERIPHERY_SCAN_TIME);
//   68 
//   69 CPreventiveAlarmWindowNotifyerControl CPss21::m_xPreventiveAlarmWindowNotifyerControl;
??CrossCallReturnLabel_95:
        LDI     R16, LOW((??m_xDeviceConfiguration + 159))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 159))
        CALL    ??CPreventiveAlarmWindowNotifyerControl
        LDI     R16, LOW((?_0 + 48))
        LDI     R17, HIGH((?_0 + 48))
        RCALL   ?Subroutine74
//   70 CEmergencyAlarmWindowNotifyerControl CPss21::m_xEmergencyAlarmWindowNotifyerControl;
??CrossCallReturnLabel_96:
        LDI     R16, LOW((??m_xDeviceConfiguration + 171))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 171))
        CALL    ??CEmergencyAlarmWindowNotifyerControl
        LDI     R16, LOW((?_0 + 54))
        LDI     R17, HIGH((?_0 + 54))
        RCALL   ?Subroutine74
//   71 CStatusLedNotifyerControl CPss21::m_xStatusLedNotifyerControl;
??CrossCallReturnLabel_97:
        LDI     R16, LOW((??m_xDeviceConfiguration + 183))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 183))
        CALL    ??CStatusLedNotifyerControl
        LDI     R16, LOW((?_0 + 60))
        LDI     R17, HIGH((?_0 + 60))
        RCALL   ?Subroutine74
//   72 CBuzzerNotifyerControl CPss21::m_xBuzzerNotifyerControl;
??CrossCallReturnLabel_98:
        LDI     R16, LOW((??m_xDeviceConfiguration + 195))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 195))
        CALL    ??CBuzzerNotifyerControl
        LDI     R16, LOW((?_0 + 66))
        LDI     R17, HIGH((?_0 + 66))
        RCALL   ?Subroutine74
//   73 CModbusRtuLinkControl CPss21::m_xModbusRtuLinkControl;
??CrossCallReturnLabel_99:
        LDI     R16, LOW((??m_xDeviceConfiguration + 20))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 20))
        CALL    ??CModbusRtuLinkControl
        LDI     R16, LOW((?_0 + 72))
        LDI     R17, HIGH((?_0 + 72))
        RCALL   ?Subroutine74
//   74 
//   75 uint8_t CPss21::m_uiCommonAlarmType;
//   76 uint8_t CPss21::m_uiCommonAlarmTypePrevious;
//   77 //CLightBoard CPss21::m_xLightBoard;
//   78 TConfigDataPackOne CPss21::m_xDeviceConfigSearch;
//   79 TDevConfig CPss21::m_xDeviceConfiguration;
//   80 TDeviceState CPss21::m_xDeviceState;
//   81 TMBusSetting CPss21::m_xModbusSettings;
//   82 CAlarmDfa *CPss21::m_apxAlarmDfa[];
//   83 
//   84 CErrorAlarmDfa *CPss21::m_apxErrorAlarmDfa[];
//   85 uint8_t CPss21::m_auiErrorAlarmDataArray[];
//   86 
//   87 TDiscreteOutputControl CPss21::m_axDiscreteOutputControl[];
//   88 TOutputData CPss21::m_xDiscreteOutputDataBase;
//   89 CAlarmWindow CPss21::m_axAlarmWindowControl[];
??CrossCallReturnLabel_100:
        LDI     R22, LOW(??CAlarmWindow/2)
        LDI     R23, (??CAlarmWindow/2) >> 8
        RCALL   ?Subroutine15
??CrossCallReturnLabel_137:
        CALL    __near_vec_construct
        LDI     R16, LOW((?_0 + 78))
        LDI     R17, HIGH((?_0 + 78))
        REQUIRE ?Subroutine74
        REQUIRE _A_UBRR1H
        REQUIRE _A_UBRR1L
        REQUIRE _A_UCSR1A
        REQUIRE _A_UCSR1B
        REQUIRE _A_UCSR1C
        REQUIRE _A_UDR1
        REQUIRE _A_DDRC
        REQUIRE _A_PORTC
        ;               // Fall through to label ?Subroutine74

        RSEG CODE:CODE:NOROOT(1)
?Subroutine74:
        JMP     __record_needed_destruction

        RSEG CODE:CODE:NOROOT(1)
?Subroutine12:
        JMP     ??CMultiFunctionKey

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 0>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_157:
        JMP     `?~CUart`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 1>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_158:
        JMP     `?~CModbusRTU`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 2>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_159:
        JMP     `?~CMultiFunctionKey`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 3>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_160:
        JMP     `?~CEventUniteLogicAnd`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 4>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_161:
        JMP     `?~CTimer`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 5>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_162:
        JMP     `?~CPreventiveAlarmWindowNotifyerControl`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 6>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_163:
        JMP     `?~CEmergencyAlarmWindowNotifyerControl`

        RSEG NEAR_I:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
?_0:
        DS8 6
        REQUIRE `?<Initializer for >`
        DS8 6
        REQUIRE `?<Initializer for >_1`
        DS8 6
        REQUIRE `?<Initializer for >_2`
        DS8 6
        REQUIRE `?<Initializer for >_3`
        DS8 6
        REQUIRE `?<Initializer for >_4`
        DS8 6
        REQUIRE `?<Initializer for >_5`
        DS8 6
        REQUIRE `?<Initializer for >_6`
        DS8 6
        REQUIRE `?<Initializer for >_7`
        DS8 6
        REQUIRE `?<Initializer for >_8`
        DS8 6
        REQUIRE `?<Initializer for >_9`
        DS8 6
        REQUIRE `?<Initializer for >_10`
        DS8 6
        REQUIRE `?<Initializer for >_11`
        DS8 6
        REQUIRE `?<Initializer for >_12`
        DS8 6
        REQUIRE `?<Initializer for >_13`

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
//   90 

        RSEG NEAR_F:CODE:ROOT(0)
//   91 __flash uint8_t CPss21::m_auiErrorLedOn[] =
??m_auiErrorLedOn:
        DC8 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0
        DC8 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1
        DC8 1, 1

        RSEG CODE:CODE:NOROOT(1)
?Subroutine18:
        LDI     R18, 2
        REQUIRE ?Subroutine80
        ;               // Fall through to label ?Subroutine80

        RSEG CODE:CODE:NOROOT(1)
?Subroutine80:
        LDI     R19, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 7>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_164:
        JMP     `?~CStatusLedNotifyerControl`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 8>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_165:
        JMP     `?~CBuzzerNotifyerControl`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 9>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_166:
        JMP     `?~CModbusRtuLinkControl`

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 10>`:
        LDI     R22, LOW(`?<Unnamed 11>`/2)
        LDI     R23, (`?<Unnamed 11>`/2) >> 8
        RCALL   ?Subroutine15
??CrossCallReturnLabel_138:
        JMP     __near_vec_destroy

        RSEG CODE:CODE:NOROOT(1)
?Subroutine15:
        LDI     R20, 6
        LDI     R21, 0
        LDI     R18, 48
        LDI     R19, 0
        REQUIRE ?Subroutine75
        ;               // Fall through to label ?Subroutine75

        RSEG CODE:CODE:NOROOT(1)
?Subroutine75:
        LDI     R16, LOW(??m_axAlarmWindowControl)
        LDI     R17, (??m_axAlarmWindowControl) >> 8
        RET

        RSEG CODE:CODE:NOROOT(1)
`?<Unnamed 11>`:
        RCALL   ?Subroutine18
??CrossCallReturnLabel_167:
        JMP     `?~CAlarmWindow`
//   92 {
//   93     1, 1, 1, 1,    1, 1, 1, 1,
//   94     1, 0, 0, 0,    0, 0, 0, 1,
//   95     1, 0, 0, 0,    0, 0, 0, 1,
//   96     1, 0, 0, 0,    0, 0, 0, 1,
//   97     1, 0, 0, 0,    0, 0, 0, 1,
//   98     1, 1, 1, 1,    1, 1, 1, 1,
//   99 };
//  100 
//  101 ////-----------------------------------------------------------------------------------------------------
//  102 //CPss21::CPss21(uint8_t uiType, CDriver* pxDriver)// :
//  103 ////    m_uiType(uiType),
//  104 ////    m_pxDriver(pxDriver)
//  105 //{
//  106 //
//  107 //}
//  108 //
//  109 ////-----------------------------------------------------------------------------------------------------
//  110 //CPss21::~CPss21()
//  111 //{
//  112 //
//  113 //}
//  114 
//  115 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  116 void CPss21::ModbusInit(void)
??ModbusInit:
//  117 {
        ST      -Y, R27
        ST      -Y, R26
//  118     CPlatform::m_pxUart1 = &m_xUart1;
        LDI     R16, LOW(??m_xUart1)
        LDI     R17, (??m_xUart1) >> 8
        LDI     R30, LOW(??m_pxUart1)
        LDI     R31, (??m_pxUart1) >> 8
        ST      Z, R16
        STD     Z+1, R17
//  119     m_xModbusRtuOne.Init(CPlatform::m_pxUart1,
//  120                          static_cast<uint32_t>((F_CPU / ((CPss21::m_xModbusSettings.BaudRate) + 1)) / 16UL),
//  121                          'N',
//  122                          8,
//  123                          1,
//  124                          CPss21::m_auiReceiveMessageBuff,
//  125                          CPss21::m_auiReceiveMessageBuff,//reinterpret_cast<uint8_t*>(CPss21::m_aucRtuHoldingRegistersArray),//m_auiTransmitMessageBuff,//
//  126                          CPss21::m_aucRtuDiscreteDataArray,//CPss21::m_aucRtuCoilsArray,
//  127                          CPss21::m_aucRtuDiscreteDataArray,//CPss21::m_aucRtuDiscreteInputsArray,
//  128                          CPss21::m_aucRtuHoldingRegistersArray,
//  129                          CPss21::m_aucRtuInputRegistersArray,
//  130                          DISCRETE_DATA_ARRAY_LENGTH,
//  131                          DISCRETE_DATA_ARRAY_LENGTH,
//  132                          HOLDING_REGISTERS_ARRAY_LENGTH,
//  133                          INPUT_REGISTERS_ARRAY_LENGTH);
        LDI     R16, 8
        LDI     R17, 0
        RCALL   ?Subroutine2
??CrossCallReturnLabel_108:
        LDI     R16, 120
        RCALL   ?Subroutine2
??CrossCallReturnLabel_109:
        LDI     R16, LOW((??m_xDeviceConfiguration + 63))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 63))
        RCALL   ?Subroutine77
??CrossCallReturnLabel_106:
        LDI     R16, LOW((??m_xDeviceConfiguration + 31))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 31))
        RCALL   ?Subroutine77
??CrossCallReturnLabel_107:
        LDI     R16, LOW(??m_aucRtuDiscreteDataArray)
        LDI     R17, (??m_aucRtuDiscreteDataArray) >> 8
        RCALL   ?Subroutine2
??CrossCallReturnLabel_110:
        LDI     R16, LOW(??m_auiReceiveMessageBuff)
        LDI     R17, (??m_auiReceiveMessageBuff) >> 8
        RCALL   ?Subroutine2
??CrossCallReturnLabel_111:
        LDI     R16, 1
        ST      -Y, R16
        LDI     R16, 8
        ST      -Y, R16
        LDI     R16, 78
        ST      -Y, R16
        LDS     R20, (??m_xModbusSettings + 1)
        LDI     R21, 0
        SUBI    R20, 255
        SBCI    R21, 255
        MOV     R22, R21
        LSL     R22
        SBC     R22, R22
        MOV     R23, R22
        LDI     R16, 0
        LDI     R17, 128
        LDI     R18, 112
        LDI     R19, 0
        CALL    ?UL_DIVMOD_L03
        LDI     R20, 4
        CALL    ?UL_SHR_L03
        MOVW    R21:R20, R17:R16
        MOVW    R23:R22, R19:R18
        LDI     R18, LOW(??m_xUart1)
        LDI     R19, (??m_xUart1) >> 8
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        CALL    ??Init_1
//  134     m_xModbusRtuOne.SlaveSet(CPss21::m_xModbusSettings.NetAddress);
        LDS     R18, ??m_xModbusSettings
        LDI     R30, LOW(??m_xModbusRtuOne)
        LDI     R31, (??m_xModbusRtuOne) >> 8
        LDD     R16, Z+13
        LDD     R17, Z+14
        CALL    ??SlaveSet
//  135     m_xModbusRtuOne.SetFsmState(CModbus::START_REQUEST);
        LDI     R26, LOW((??m_xModbusRtuOne + 13))
        LDI     R27, HIGH((??m_xModbusRtuOne + 13))
        LD      R30, X+
        LD      R31, X
        LDI     R16, 2
        ST      Z, R16
//  136 }
        REQUIRE ?Subroutine76
        ;               // Fall through to label ?Subroutine76

        RSEG CODE:CODE:NOROOT(1)
?Subroutine76:
        LD      R26, Y+
        LD      R27, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine77:
        ST      -Y, R17
        ST      -Y, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine2:
        ST      -Y, R17
        ST      -Y, R16
        RJMP    ?Subroutine77
//  137 
//  138 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  139 void CPss21::ModbusDefaultInit(void)
??ModbusDefaultInit:
//  140 {
//  141     CPss21::m_xModbusSettings.NetAddress = 1;
        LDI     R30, LOW(??m_xModbusSettings)
        LDI     R31, (??m_xModbusSettings) >> 8
        RCALL   ?Subroutine26
//  142     // 9600 baud.
//  143     CPss21::m_xModbusSettings.BaudRate = 47;
??CrossCallReturnLabel_14:
        LDI     R16, 47
        STD     Z+1, R16
//  144     // ƒва стоп бита.
//  145     CPss21::m_xModbusSettings.LinkParam = 0x08;
        LDI     R16, 8
        STD     Z+2, R16
//  146 
//  147     ModbusInit();
        RJMP    ??ModbusInit
//  148 }

        RSEG CODE:CODE:NOROOT(1)
??AllAlarmWindowOff:
        RCALL   ??Subroutine101_0
??CrossCallReturnLabel_190:
        MOV     R16, R18
        RCALL   ?Subroutine20
??CrossCallReturnLabel_10:
        RCALL   ?Subroutine29
??CrossCallReturnLabel_20:
        BRNE    ??CrossCallReturnLabel_190
        RJMP    ?Subroutine89
//  149 
//  150 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  151 void CPss21::Init(void)
??Init:
//  152 {
//  153     CLightBoard::Init(m_axAlarmWindowControl);
        RCALL   ?Subroutine75
??CrossCallReturnLabel_135:
        CALL    ??Init_2
//  154     m_uiCommonAlarmType = NORMAL;
        RCALL   ?Subroutine32
??CrossCallReturnLabel_31:
        LDI     R16, 0
        STD     Z+58, R16
//  155     m_uiCommonAlarmTypePrevious = NORMAL;
        STD     Z+59, R16
//  156     SetErrorCode(0);
        STD     Z+56, R16
//  157     // —бросим все ошибки.
//  158     memset(CPss21::m_auiErrorAlarmDataArray, 0, HANDLED_ERROR_NUMBER);
        LDI     R20, 2
        RCALL   ?Subroutine4
??CrossCallReturnLabel_170:
        LDI     R16, LOW((??m_xDeviceConfiguration + 60))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 60))
        RCALL   ?Subroutine33
//  159     CPss21::AllAlarmWindowOff();
??CrossCallReturnLabel_40:
        RJMP    ??AllAlarmWindowOff
//  160 }
//  161 
//  162 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  163 void CPss21::AddressBusInit(void)
??AddressBusInit:
//  164 {
//  165     CPlatform::SpiSlaveSelectAddress0SetPinOutput();
        SBI     0x11, 0x07
//  166     CPlatform::SpiSlaveSelectAddress1SetPinOutput();
        SBI     0x11, 0x06
//  167     CPlatform::SpiSlaveSelectAddress2SetPinOutput();
        SBI     0x11, 0x05
//  168     CPlatform::SpiSlaveSelectAddress3SetPinOutput();
        SBI     0x11, 0x04
//  169     CPlatform::SpiSlaveSelectEnableSetPinOutput();
        SBI     0x11, 0x01
//  170     CPlatform::SpiSlaveSelectAddress0On();
        SBI     0x12, 0x07
//  171     CPlatform::SpiSlaveSelectAddress1On();
        SBI     0x12, 0x06
//  172     CPlatform::SpiSlaveSelectAddress2On();
        SBI     0x12, 0x05
//  173     CPlatform::SpiSlaveSelectAddress3On();
        SBI     0x12, 0x04
//  174     CPlatform::SpiSlaveSelectEnableOff();
        CBI     0x12, 0x01
//  175 };
        RET
        REQUIRE _A_DDRD
        REQUIRE _A_PORTD
//  176 
//  177 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  178 void CPss21::ConnectDevice(uint8_t uiAddress)
??ConnectDevice:
//  179 {
//  180     uiAddress &= 0x0F;
//  181 
//  182     if (uiAddress &  BIT(0))
        BST     R16, 0
        BRTC    ??ConnectDevice_1
//  183     {
//  184         CPlatform::SpiSlaveSelectAddress0Off();
        CBI     0x12, 0x07
//  185     }
        RJMP    ??ConnectDevice_2
//  186     else
//  187     {
//  188         CPlatform::SpiSlaveSelectAddress0On();
??ConnectDevice_1:
        SBI     0x12, 0x07
//  189     }
//  190     if (uiAddress &  BIT(1))
??ConnectDevice_2:
        BST     R16, 1
        BRTC    ??ConnectDevice_3
//  191     {
//  192         CPlatform::SpiSlaveSelectAddress1Off();
        CBI     0x12, 0x06
//  193     }
        RJMP    ??ConnectDevice_4
//  194     else
//  195     {
//  196         CPlatform::SpiSlaveSelectAddress1On();
??ConnectDevice_3:
        SBI     0x12, 0x06
//  197     }
//  198     if (uiAddress &  BIT(2))
??ConnectDevice_4:
        BST     R16, 2
        BRTC    ??ConnectDevice_5
//  199     {
//  200         CPlatform::SpiSlaveSelectAddress2Off();
        CBI     0x12, 0x05
//  201     }
        RJMP    ??ConnectDevice_6
//  202     else
//  203     {
//  204         CPlatform::SpiSlaveSelectAddress2On();
??ConnectDevice_5:
        SBI     0x12, 0x05
//  205     }
//  206     if (uiAddress &  BIT(3))
??ConnectDevice_6:
        BST     R16, 3
        BRTC    ??ConnectDevice_7
//  207     {
//  208         CPlatform::SpiSlaveSelectAddress3Off();
        CBI     0x12, 0x04
//  209     }
        RJMP    ??ConnectDevice_8
//  210     else
//  211     {
//  212         CPlatform::SpiSlaveSelectAddress3On();
??ConnectDevice_7:
        SBI     0x12, 0x04
//  213     }
//  214 
//  215     CPlatform::SpiSlaveSelectEnableOn();
??ConnectDevice_8:
        SBI     0x12, 0x01
//  216     CSpi::Enable();
        JMP     ??Enable
        REQUIRE _A_PORTD
//  217 };
//  218 
//  219 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  220 void CPss21::DisconnectDevice(void)
??DisconnectDevice:
//  221 {
//  222     CSpi::Disable();
        CALL    ??Disable
//  223     CPlatform::SpiSlaveSelectEnableOff();
        CBI     0x12, 0x01
//  224     CPlatform::SpiSlaveSelectAddress0Off();
        CBI     0x12, 0x07
//  225     CPlatform::SpiSlaveSelectAddress1Off();
        CBI     0x12, 0x06
//  226     CPlatform::SpiSlaveSelectAddress2Off();
        CBI     0x12, 0x05
//  227     CPlatform::SpiSlaveSelectAddress3Off();
        CBI     0x12, 0x04
//  228 };
        RET
        REQUIRE _A_PORTD
//  229 
//  230 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  231 void CPss21::SearchModules(void)
??SearchModules:
//  232 {
        CALL    ?PROLOGUE5_L09
        REQUIRE ?Register_R4_is_cg_reg
//  233     delay_ms(500);
        LDI     R16, 244
        LDI     R17, 1
        CALL    ??delay_ms
//  234     CPlatform::WatchdogReset();
        WDR
//  235 
//  236     memset(reinterpret_cast<uint8_t*>(&m_xDeviceConfigSearch),
//  237            0,
//  238            sizeof(struct TConfigDataPackOne));
        LDI     R20, 9
        RCALL   ?Subroutine4
??CrossCallReturnLabel_171:
        LDI     R16, LOW(??m_xDeviceConfigSearch)
        LDI     R17, (??m_xDeviceConfigSearch) >> 8
        RCALL   ?Subroutine33
//  239 
//  240     // опросим интерфейс SPI. какие модули присутствуют?
//  241     for (uint8_t i = 0; i < SPI_MAX_BUS_ADDRESS; i++)
??CrossCallReturnLabel_39:
        LDI     R24, 0
        LDI     R25, 16
        LDI     R26, LOW(??m_xDeviceConfigSearch)
        LDI     R27, (??m_xDeviceConfigSearch) >> 8
//  242     {
//  243         // если модуль не ответил MODULE_REQUEST_QUANTITY раз,
//  244         // то его нет или он неисправен.
//  245         for (uint8_t j = 0; j < MODULE_REQUEST_QUANTITY; j++)
??SearchModules_1:
        LDI     R16, 5
        MOV     R4, R16
//  246         {
//  247             CPlatform::WatchdogReset();
??SearchModules_2:
        WDR
//  248             delay_ms(5);
//  249 
//  250             m_auiSpiTxBuffer[0] = GET_MODULE_TYPE_COMMAND;
//  251             ConnectDevice(i);
//  252             delay_us(500);
//  253             CSpi::Exchange(m_auiSpiRxBuffer,
//  254                            m_auiSpiTxBuffer,
//  255                            GET_MODULE_TYPE_REQUEST_LENGTH);
//  256             DisconnectDevice();
//  257 
//  258             // модуль отвечает?
//  259             if (m_auiSpiRxBuffer[SPI_COMMAND_BYTE_OFFSET] ==
//  260                     GET_MODULE_TYPE_COMMAND)
//  261             {
//  262                 // обмен данными прошЄл без ошибок?
//  263                 if (iCrcSummOneByteCompare(&m_auiSpiRxBuffer[SPI_COMMAND_BYTE_OFFSET], 2))
//  264                 {
//  265                     // сохраним тип модул€ в массиве дл€ упор€дочивани€ следовани€ модулей при поиске на SPI.
//  266                     m_xDeviceConfigSearch.axModulesContext[m_xDeviceConfigSearch.uiModulesQuantity].uiType =
//  267                         m_auiSpiRxBuffer[MODULE_TYPE_OFFSET];
//  268                     // сохраним адрес модул€ в массиве дл€ упор€дочивани€ следовани€ модулей при поиске на SPI.
//  269                     m_xDeviceConfigSearch.axModulesContext[m_xDeviceConfigSearch.uiModulesQuantity].uiAddress = i;
//  270                     // модуль присутствует. увеличим значение переменной -
//  271                     // фактическое количество модулей в системе.
//  272                     (m_xDeviceConfigSearch.uiModulesQuantity)++;
//  273 
//  274                     if (m_xDeviceConfigSearch.uiModulesQuantity >=
//  275                             INTERNAL_MODULE_QUANTITY)
//  276                     {
//  277                         return;
//  278                     }
//  279                     // перейдЄм к опросу следующего адреса.
//  280                     break;
//  281                 }
//  282             }
//  283         }
//  284     }
        LDI     R16, 5
        LDI     R17, 0
        CALL    ??delay_ms
        LDI     R16, 145
        STS     ??m_auiSpiTxBuffer, R16
        MOV     R16, R24
        RCALL   ?Subroutine36
??CrossCallReturnLabel_47:
        LDI     R20, 4
        RCALL   ?Subroutine19
??CrossCallReturnLabel_9:
        LDS     R16, (??m_auiSpiRxBuffer + 1)
        CPI     R16, 145
        BRNE    ??SearchModules_3
        RCALL   ?Subroutine18
??CrossCallReturnLabel_168:
        LDI     R16, LOW((??m_auiSpiRxBuffer + 1))
        LDI     R17, HIGH((??m_auiSpiRxBuffer + 1))
        CALL    ??iCrcSummOneByteCompare
        OR      R16, R17
        BREQ    ??SearchModules_3
        LDS     R16, (??m_auiSpiRxBuffer + 2)
        LDS     R17, ??m_xDeviceConfigSearch
        LDI     R18, 2
        MUL     R17, R18
        RCALL   ?Subroutine65
??CrossCallReturnLabel_181:
        STD     Z+1, R16
        LDS     R16, ??m_xDeviceConfigSearch
        MUL     R16, R18
        RCALL   ?Subroutine65
??CrossCallReturnLabel_182:
        STD     Z+2, R24
        LD      R16, X
        INC     R16
        ST      X, R16
        CPI     R16, 3
        BRCS    ??SearchModules_4
        RJMP    ??SearchModules_5
??SearchModules_3:
        DEC     R4
        BRNE    ??SearchModules_2
??SearchModules_4:
        INC     R24
        DEC     R25
        BRNE    ??SearchModules_1
//  285 
//  286     if(m_xDeviceConfiguration.FixConfig)
        RCALL   ?Subroutine32
??CrossCallReturnLabel_32:
        LDD     R16, Z+3
        SBRS    R16, 0
        RJMP    ??SearchModules_5
//  287     {
//  288         // ѕредыдуща€ сохранЄнна€ и текуща€ конфигурации не совпадают?
//  289         if((m_xDeviceConfiguration.ICount != m_xDeviceConfigSearch.uiDiscreteInputQuantity) ||
//  290                 (m_xDeviceConfiguration.OCount != m_xDeviceConfigSearch.uiDiscreteOutputQuantity))
        LD      R16, Z
        LDS     R17, (??m_xDeviceConfigSearch + 8)
        CP      R16, R17
        BRNE    ??SearchModules_6
        LDD     R16, Z+1
        LDS     R17, (??m_xDeviceConfigSearch + 7)
        CP      R16, R17
        BREQ    ??SearchModules_5
//  291         {
//  292             SetErrorCode(CFG_ERROR);
??SearchModules_6:
        LDI     R16, 3
        STD     Z+56, R16
//  293         }
//  294     }
//  295 };
??SearchModules_5:
        REQUIRE ?Subroutine90
        ;               // Fall through to label ?Subroutine90

        RSEG CODE:CODE:NOROOT(1)
?Subroutine90:
        LDI     R30, 5
        JMP     ?EPILOGUE_B5_L09

        RSEG CODE:CODE:NOROOT(1)
?Subroutine4:
        LDI     R21, 0
        REQUIRE ??Subroutine97_0
        ;               // Fall through to label ??Subroutine97_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine97_0:
        LDI     R18, 0
        RJMP    ?Subroutine80
//  296 
//  297 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  298 void CPss21::InitAllocationContext(TMemoryAllocationConext &xMemoryAllocationConext)
??InitAllocationContext:
//  299 {
//  300     // ѕодготовим к отправке текущие адреса объектов системы используемых драйверами устройств.
//  301 
//  302     xMemoryAllocationConext.puiRxBuffer = m_auiSpiRxBuffer;
        LDI     R18, LOW(??m_auiSpiRxBuffer)
        LDI     R19, (??m_auiSpiRxBuffer) >> 8
        MOVW    R31:R30, R17:R16
        STD     Z+1, R18
        STD     Z+2, R19
//  303     xMemoryAllocationConext.puiTxBuffer = m_auiSpiTxBuffer;
        LDI     R18, LOW(??m_auiSpiTxBuffer)
        LDI     R19, (??m_auiSpiTxBuffer) >> 8
        STD     Z+3, R18
        STD     Z+4, R19
//  304     xMemoryAllocationConext.puiErrorCode = &m_uiErrorCode;
        LDI     R18, LOW((??m_xDeviceConfiguration + 56))
        LDI     R19, HIGH((??m_xDeviceConfiguration + 56))
        STD     Z+5, R18
        STD     Z+6, R19
//  305 
//  306     // ќбнулим общий объЄм выделенной пам€ти.
//  307     xMemoryAllocationConext.uiUsedDiscreteInputs = 0;
        LDI     R18, 0
        STD     Z+9, R18
//  308     // ѕодключим буфер дл€ хранени€ состо€ний дискретных входов.
//  309     xMemoryAllocationConext.puiDiscreteInputs =
//  310         &m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET];
        LDI     R18, LOW((??m_aucRtuDiscreteDataArray + 16))
        LDI     R19, HIGH((??m_aucRtuDiscreteDataArray + 16))
        STD     Z+7, R18
        STD     Z+8, R19
//  311 
//  312     // ќбнулим общий объЄм выделенной пам€ти.
//  313     xMemoryAllocationConext.uiUsedDiscreteOutputState = 0;
        LDI     R18, 0
        STD     Z+12, R18
//  314     // ѕодключим буфер дл€ хранени€ состо€ний дискретных выходов.
//  315     xMemoryAllocationConext.puiDiscreteOutputState =
//  316         &m_aucRtuDiscreteDataArray[DISCRETE_OUTPUT_BIT_ARRAY_OFFSET];
        LDI     R18, LOW((??m_aucRtuDiscreteDataArray + 112))
        LDI     R19, HIGH((??m_aucRtuDiscreteDataArray + 112))
        STD     Z+10, R18
        STD     Z+11, R19
//  317 
//  318     // ќбнулим общий объЄм выделенной пам€ти.
//  319     xMemoryAllocationConext.uiUsedDiscreteOutputs = 0;
        LDI     R18, 0
        STD     Z+15, R18
//  320     // ѕодключим буфер дл€ управлени€ дискретными выходами.
//  321     xMemoryAllocationConext.pxDiscreteOutputControl = m_axDiscreteOutputControl;
        LDI     R18, LOW(??m_axDiscreteOutputControl)
        LDI     R19, (??m_axDiscreteOutputControl) >> 8
        STD     Z+13, R18
        STD     Z+14, R19
//  322 
//  323     // ќбнулим общий объЄм выделенной пам€ти.
//  324     xMemoryAllocationConext.uiUsedDiscreteOutputDataBase = 0;
        LDI     R18, 0
        STD     Z+18, R18
//  325     // ѕодключим буфер с базой данных модулей дискретных выходов.
//  326     xMemoryAllocationConext.pxDiscreteOutputDataBase = &m_xDiscreteOutputDataBase;
        LDI     R18, LOW((??m_xDeviceConfiguration + 207))
        LDI     R19, HIGH((??m_xDeviceConfiguration + 207))
        STD     Z+16, R18
        STD     Z+17, R19
//  327 
//  328     // ќбнулим общий объЄм выделенной пам€ти.
//  329     xMemoryAllocationConext.uiUsedErrorAlarmDataArray = 0;
        LDI     R18, 0
        STD     Z+21, R18
//  330     // ѕодключим буфер дл€ хранени€ состо€ний ошибок.
//  331     xMemoryAllocationConext.puiErrorAlarmDataArray = m_auiErrorAlarmDataArray;
        LDI     R18, LOW((??m_xDeviceConfiguration + 60))
        LDI     R19, HIGH((??m_xDeviceConfiguration + 60))
        STD     Z+19, R18
        STD     Z+20, R19
//  332 };
        RET
//  333 
//  334 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  335 void CPss21::CreateDevices(void)
??CreateDevices:
//  336 {
        CALL    ?PROLOGUE5_L09
        REQUIRE ?Register_R4_is_cg_reg
        SBIW    R29:R28, 22
//  337     TMemoryAllocationConext xMemoryAllocationConext;
//  338     InitAllocationContext(xMemoryAllocationConext);
        MOVW    R17:R16, R29:R28
        RCALL   ??InitAllocationContext
//  339 
//  340     for (uint8_t i = 0;
        CLR     R4
        RJMP    ??CreateDevices_1
//  341             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  342             i++)
//  343     {
//  344         CPlatform::WatchdogReset();
//  345 
//  346         uint8_t uiType = m_xDeviceConfigSearch.axModulesContext[i].uiType;
//  347         switch (uiType)
//  348         {
//  349         case MODULE_TYPE_MVSN:
//  350 //        case MODULE_TYPE_MVDI:
//  351 //        case MODULE_TYPE_MVDS9:
//  352             if (m_xDeviceConfigSearch.uiDiscreteInputQuantity <
//  353                     DISCRETE_INPUT_MODULE_MAX_NUMBER)
//  354             {
//  355 //            m_apxDevices[i] = new CMvsn21;
//  356 //            m_apxDevices[i] -> m_pxDriver = new CMvsn21Driver(uiType);
//  357                 m_apxDrivers[i] = new CMvsn21Driver(uiType);
//  358                 xMemoryAllocationConext.uiAddress = m_xDeviceConfigSearch.axModulesContext[i].uiAddress;
//  359 //            m_apxDevices[i] -> m_pxDriver -> Allocate(xMemoryAllocationConext);
//  360                 m_apxDrivers[i] -> Allocate(xMemoryAllocationConext);
//  361                 m_xDeviceConfigSearch.uiDiscreteInputQuantity += 1;
//  362             }
//  363             break;
//  364 
//  365         case MODULE_TYPE_MVDO5:
//  366             break;
//  367 
//  368         case MODULE_TYPE_MR53:
//  369         case MODULE_TYPE_MR54:
//  370             if (m_xDeviceConfigSearch.uiDiscreteOutputQuantity <
//  371                     DISCRETE_OUTPUT_MODULE_MAX_NUMBER)
??CreateDevices_2:
        LDS     R17, (??m_xDeviceConfigSearch + 7)
        TST     R17
        BRNE    ??CreateDevices_3
//  372             {
//  373 //            m_apxDevices[i] = new CModuleMrXX;
//  374 //            m_apxDevices[i] -> m_pxDriver = new CModuleMrXXDriver(uiType);
//  375                 m_apxDrivers[i] = new CModuleMrXXDriver(uiType);
        CALL    `??new CModuleMrXXDriver`
        RCALL   ?Subroutine35
//  376                 xMemoryAllocationConext.uiAddress = m_xDeviceConfigSearch.axModulesContext[i].uiAddress;
//  377 //            m_apxDevices[i] -> m_pxDriver -> Allocate(xMemoryAllocationConext);
//  378                 m_apxDrivers[i] -> Allocate(xMemoryAllocationConext);
//  379                 m_xDeviceConfigSearch.uiDiscreteOutputQuantity += 1;
//  380             }
??CrossCallReturnLabel_45:
        LDD     R16, Z+7
        INC     R16
        STD     Z+7, R16
??CreateDevices_3:
        INC     R4
??CreateDevices_1:
        LDS     R16, ??m_xDeviceConfigSearch
        CP      R4, R16
        BRCC    ??CreateDevices_4
        WDR
        LDI     R16, 2
        MUL     R4, R16
        LDI     R26, LOW(??m_xDeviceConfigSearch)
        LDI     R27, (??m_xDeviceConfigSearch) >> 8
        ADD     R26, R0
        ADC     R27, R1
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+1
        MOV     R17, R16
        DEC     R17
        BREQ    ??CreateDevices_5
        SUBI    R17, 2
        BREQ    ??CreateDevices_2
        DEC     R17
        BREQ    ??CreateDevices_2
        RJMP    ??CreateDevices_3
??CreateDevices_5:
        LDS     R16, (??m_xDeviceConfigSearch + 8)
        CPI     R16, 2
        BRCC    ??CreateDevices_3
        LDI     R16, 1
        CALL    `??new CMvsn21Driver`
        RCALL   ?Subroutine35
//  381             break;
//  382 
//  383         case MODULE_TYPE_MVI:
//  384             break;
//  385 
//  386         default:
//  387             break;
//  388         }
//  389     }
??CrossCallReturnLabel_46:
        LDD     R16, Z+8
        INC     R16
        STD     Z+8, R16
        RJMP    ??CreateDevices_3
//  390 };
??CreateDevices_4:
        ADIW    R29:R28, 22
        RJMP    ?Subroutine90

        RSEG CODE:CODE:NOROOT(1)
?Subroutine35:
        MOV     R20, R16
        MOVW    R31:R30, R27:R26
        STD     Z+9, R16
        STD     Z+10, R17
        LDD     R16, Z+2
        ST      Y, R16
        MOVW    R19:R18, R29:R28
        MOV     R16, R20
        MOV     R30, R20
        MOV     R31, R17
        LDD     R20, Z+9
        LDD     R31, Z+10
        MOV     R30, R20
        LPM     R20, Z+
        LPM     R31, Z
        MOV     R30, R20
        ICALL
        LDI     R30, LOW(??m_xDeviceConfigSearch)
        LDI     R31, (??m_xDeviceConfigSearch) >> 8
        RET
//  391 
//  392 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  393 void CPss21::DestroyDevices(uint8_t uiLength)
??DestroyDevices:
//  394 {
//  395     for (uint16_t i = 0; i < uiLength; i++)
        LDI     R30, 0
        LDI     R31, 0
        LDI     R17, 0
        RJMP    ??DestroyDevices_1
??DestroyDevices_2:
        ADIW    R31:R30, 1
??DestroyDevices_1:
        CP      R30, R16
        CPC     R31, R17
        BRCS    ??DestroyDevices_2
//  396     {
//  397 //        delete m_apxDevices[i];
//  398 //        delete m_apxDrivers[i];
//  399     }
//  400 };
        RET
//  401 
//  402 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  403 uint16_t CPss21::ReportType(uint8_t *puiDestination, uint16_t uiLength)
??ReportType:
//  404 {
//  405     memset(m_auiSpiTxBuffer, 0, 6);
        LDI     R20, 6
        RCALL   ?Subroutine4
??CrossCallReturnLabel_172:
        LDI     R16, LOW(??m_auiSpiTxBuffer)
        LDI     R17, (??m_auiSpiTxBuffer) >> 8
        RCALL   ?Subroutine33
//  406     uint8_t uiLengthLocal = 0;
//  407     m_auiSpiTxBuffer[uiLengthLocal++] = GET_MODULE_TYPE_COMMAND;
??CrossCallReturnLabel_38:
        LDI     R30, LOW(??m_auiSpiTxBuffer)
        LDI     R31, (??m_auiSpiTxBuffer) >> 8
        LDI     R16, 145
        ST      Z, R16
//  408     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
        LDI     R16, 0
        STD     Z+1, R16
//  409     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
        STD     Z+2, R16
//  410     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
        STD     Z+3, R16
//  411     m_auiSpiTxBuffer[uiLengthLocal++] = 0;
        STD     Z+4, R16
//  412 
//  413     ConnectDevice(0);
        RCALL   ?Subroutine36
//  414     delay_us(500);
//  415     CSpi::Exchange(m_auiSpiRxBuffer,
//  416                    m_auiSpiTxBuffer,
//  417                    uiLengthLocal);
??CrossCallReturnLabel_48:
        LDI     R20, 5
        RCALL   ?Subroutine19
//  418     DisconnectDevice();
//  419 
//  420     return 1;
??CrossCallReturnLabel_8:
        LDI     R16, 1
        LDI     R17, 0
        RET
//  421 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine36:
        RCALL   ??ConnectDevice
        LDI     R16, 106
        LDI     R17, 3
        SUBI    R16, 1
        SBCI    R17, 0
        BRNE    $-4
        RJMP    $+2
        NOP
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine33:
        JMP     memset

        RSEG CODE:CODE:NOROOT(1)
?Subroutine19:
        LDI     R21, 0
        LDI     R18, LOW(??m_auiSpiTxBuffer)
        LDI     R19, (??m_auiSpiTxBuffer) >> 8
        LDI     R16, LOW(??m_auiSpiRxBuffer)
        LDI     R17, (??m_auiSpiRxBuffer) >> 8
        CALL    ??Exchange
        RJMP    ??DisconnectDevice
//  422 
//  423 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  424 void CPss21::SetBytesFromBits(uint8_t *uiDestination,
??SetBytesFromBits:
//  425                               uint8_t *uiSource,
//  426                               uint16_t uiLength)
//  427 {
        RCALL   ?Subroutine40
??CrossCallReturnLabel_53:
        MOVW    R23:R22, R17:R16
        MOVW    R3:R2, R21:R20
//  428     int16_t shift = 0;
        LDI     R26, 0
        LDI     R27, 0
//  429 
//  430     for (int16_t i = 0; i < uiLength; i++)
        RCALL   ?Subroutine34
??CrossCallReturnLabel_41:
        RJMP    ??SetBytesFromBits_1
//  431     {
//  432         uiDestination[i] = uiSource[(i) / 8] & (1 << shift) ? 1 : 0;
??SetBytesFromBits_2:
        LDI     R16, 0
??SetBytesFromBits_3:
        MOVW    R31:R30, R23:R22
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
//  433         /* gcc doesn't like: shift = (++shift) % 8; */
//  434         shift++;
//  435         shift %= 8;
        ADIW    R27:R26, 1
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R27:R26
        CALL    ?SS_DIVMOD_L02
        LDI     R20, 3
        RCALL   ?Subroutine67
??CrossCallReturnLabel_177:
        SUB     R26, R16
        SBC     R27, R17
        ADIW    R25:R24, 1
??SetBytesFromBits_1:
        CP      R24, R2
        CPC     R25, R3
        BRCC    ??SetBytesFromBits_4
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R25:R24
        CALL    ?SS_DIVMOD_L02
        MOVW    R31:R30, R19:R18
        RCALL   ??Subroutine103_0
//  436     }
??CrossCallReturnLabel_196:
        LD      R21, Z
        MOV     R20, R26
        RCALL   ??Subroutine98_0
??CrossCallReturnLabel_174:
        BREQ    ??SetBytesFromBits_2
        LDI     R16, 1
        RJMP    ??SetBytesFromBits_3
//  437 }
??SetBytesFromBits_4:
        RJMP    ?Subroutine91

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesModbusReset:
        RCALL   ?Subroutine45
??CrossCallReturnLabel_115:
        RJMP    ??CrossCallReturnLabel_27
??SendToDevicesModbusReset_1:
        RCALL   ?Subroutine42
??CrossCallReturnLabel_59:
        ADIW    R27:R26, 4
        RCALL   ?Subroutine30
??CrossCallReturnLabel_27:
        RCALL   ?Subroutine37
??CrossCallReturnLabel_121:
        BRCS    ??SendToDevicesModbusReset_1
        REQUIRE ?Subroutine81
        ;               // Fall through to label ?Subroutine81
//  438 
//  439 //-----------------------------------------------------------------------------------------------------
//  440 void CPss21::ModbusDeviceControl(uint8_t* puiData, uint16_t uiLength, uint16_t uiAddress)
//  441 {
//  442     //  оманда - " витирование"?
//  443     if (uiAddress == MODBUS_RECEIPT_ADDRESS)
//  444     {
//  445         if (*puiData)
//  446         {
//  447             CPss21::SetModbusReceipt(1);
//  448             SetDiscreteSignalsReceipt(1);
//  449             SendToDevicesModbusReceipt();
//  450         }
//  451     }
//  452     //  оманда - "—брос"?
//  453     else if (uiAddress == MODBUS_RESET_ADDRESS)
//  454     {
//  455         if (*puiData)
//  456         {
//  457             CPss21::SetModbusReset(1);
//  458             SetDiscreteSignalsReset(1);
//  459             SendToDevicesModbusReset();
//  460         }
//  461     }
//  462     // »зменение состо€ни€ окон сигнализации?
//  463     else if ((uiAddress >= ALARM_WINDOWS_BIT_ARRAY_OFFSET) &&
//  464              (uiAddress < (ALARM_WINDOWS_BIT_ARRAY_OFFSET +
//  465                            ALARM_WINDOWS_ARRAY_LENGTH)))
//  466     {
//  467         SetBytesFromBits(&m_aucRtuDiscreteDataArray[uiAddress],
//  468                          puiData,
//  469                          uiLength);
//  470         // —ообщим автомату о состо€вшемс€ сеансе св€зи.
//  471         m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::LINK_SESSION_HAPPENED_FSM_EVENT);
//  472     }
//  473 ////    // »зменение состо€ни€ окон сигнализации?
//  474 //    else if ((uiAddress >= DISCRETE_INPUTS_BIT_ARRAY_OFFSET) &&//debag//
//  475 //             (uiAddress < (ALARM_WINDOWS_BIT_ARRAY_OFFSET +
//  476 //                           ALARM_WINDOWS_ARRAY_LENGTH)))
//  477 //    {
//  478 //        SetBytesFromBits(&m_aucRtuDiscreteDataArray[uiAddress],
//  479 //                         puiData,
//  480 //                         uiLength);
//  481 //        // —ообщим автомату о состо€вшемс€ сеансе св€зи.
//  482 //        m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::LINK_SESSION_HAPPENED_FSM_EVENT);
//  483 //    }
//  484 }
//  485 
//  486 //-----------------------------------------------------------------------------------------------------
//  487 void CPss21::ModbusDeviceControl(uint8_t uiData, uint16_t uiAddress)
//  488 {
//  489     ModbusDeviceControl(&uiData, 1, uiAddress);
//  490 }
//  491 
//  492 //-----------------------------------------------------------------------------------------------------
//  493 bool CPss21::ModbusRtuLinkControlIsOn(void)
//  494 {
//  495     if (m_xDeviceConfiguration.MBTimeout != 0)
//  496     {
//  497         return true;
//  498     }
//  499     else
//  500     {
//  501         return false;
//  502     }
//  503 }
//  504 
//  505 //-----------------------------------------------------------------------------------------------------
//  506 uint16_t CPss21::GetTimeoutModbusRtuLinkControl(void)
//  507 {
//  508     return (m_xDeviceConfiguration.MBTimeout * 1000);
//  509 }
//  510 
//  511 //-----------------------------------------------------------------------------------------------------
//  512 bool CPss21::ModbusRtuLinkControlInProgress(void)
//  513 {
//  514     if (m_xDeviceState.ModbusRtuLinkControlInProgress)
//  515     {
//  516         return true;
//  517     }
//  518     else
//  519     {
//  520         return false;
//  521     }
//  522 }
//  523 
//  524 //-----------------------------------------------------------------------------------------------------
//  525 void CPss21::SetModeModbusRtuLinkControlInProgress(bool bData)
//  526 {
//  527     m_xDeviceState.ModbusRtuLinkControlInProgress = bData;
//  528     // —охраним текущую конфигурацию.
//  529     CDataBase::WriteBlock(reinterpret_cast<uint8_t*>(&m_xDeviceState),
//  530                           TDataBase::DEVICE_STATE);
//  531     // Ѕаза данных изменена при записи блока.
//  532     // ѕоставим подтверждающую подпись.
//  533     CDataBase::SignatureCreate();
//  534 }
//  535 
//  536 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
?Subroutine81:
//  537 void CPss21::SendToDevicesReceipt(void)
//  538 {
//  539     for (uint8_t i = 0;
//  540             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  541             i++)
//  542     {
//  543         m_apxDrivers[i] -> SetReceipt(1);
//  544     }
//  545 
//  546     // —ообщим автомату о состо€вшемс€ квитировании.
//  547     m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::RECEIPT_HAPPENED_FSM_EVENT);
//  548 }
//  549 
//  550 //-----------------------------------------------------------------------------------------------------
//  551 void CPss21::SendToDevicesReset(void)
//  552 {
//  553     for (uint8_t i = 0;
//  554             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  555             i++)
//  556     {
//  557         m_apxDrivers[i] -> SetReset(1);
//  558     }
//  559 }
        MOVW    R27:R26, R19:R18
        RET

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesModbusReceipt:
        RCALL   ?Subroutine45
??CrossCallReturnLabel_116:
        RJMP    ??CrossCallReturnLabel_28
??SendToDevicesModbusReceipt_1:
        RCALL   ?Subroutine42
??CrossCallReturnLabel_60:
        ADIW    R27:R26, 3
        RCALL   ?Subroutine30
??CrossCallReturnLabel_28:
        RCALL   ?Subroutine37
??CrossCallReturnLabel_122:
        BRCS    ??SendToDevicesModbusReceipt_1
        RJMP    ?Subroutine27

        RSEG CODE:CODE:NOROOT(1)
??ModbusDeviceControl:
        MOVW    R23:R22, R21:R20
        OR      R20, R23
        BRNE    ??ModbusDeviceControl_2
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        TST     R16
        BREQ    ??ModbusDeviceControl_3
        RCALL   ?Subroutine32
??CrossCallReturnLabel_33:
        LDI     R16, 1
        STD     Z+52, R16
        STD     Z+54, R16
        RJMP    ??SendToDevicesModbusReceipt
??ModbusDeviceControl_2:
        CPI     R22, 1
        LDI     R20, 0
        CPC     R21, R20
        BRNE    ??ModbusDeviceControl_4
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        TST     R16
        BREQ    ??ModbusDeviceControl_3
        RCALL   ?Subroutine32
??CrossCallReturnLabel_34:
        LDI     R16, 1
        STD     Z+53, R16
        STD     Z+55, R16
        RJMP    ??SendToDevicesModbusReset
??ModbusDeviceControl_4:
        MOV     R30, R22
        MOV     R31, R21
        SUBI    R30, 64
        SBCI    R31, 0
        SBIW    R31:R30, 48
        BRCC    ??ModbusDeviceControl_3
        MOVW    R21:R20, R19:R18
        MOVW    R19:R18, R17:R16
        LDI     R16, LOW(??m_aucRtuDiscreteDataArray)
        LDI     R17, (??m_aucRtuDiscreteDataArray) >> 8
        ADD     R16, R22
        ADC     R17, R23
        RCALL   ??SetBytesFromBits
        LDI     R16, 1
        STS     (??m_xDeviceConfiguration + 24), R16
??ModbusDeviceControl_3:
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine32:
        LDI     R30, LOW(??m_xDeviceConfiguration)
        LDI     R31, (??m_xDeviceConfiguration) >> 8
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModbusDeviceControl_1:
        SBIW    R29:R28, 1
        ST      Y, R16
        MOVW    R21:R20, R19:R18
        LDI     R18, 1
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        RCALL   ??ModbusDeviceControl
        ADIW    R29:R28, 1
        RET

        RSEG CODE:CODE:NOROOT(1)
??ModbusRtuLinkControlIsOn:
        LDS     R16, (??m_xDeviceConfiguration + 5)
        TST     R16
        BREQ    ??ModbusRtuLinkControlIsOn_1
        RJMP    ?Subroutine83
??ModbusRtuLinkControlIsOn_1:
        RJMP    ?Subroutine82

        RSEG CODE:CODE:NOROOT(1)
?Subroutine83:
        LDI     R16, 1
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine82:
        LDI     R16, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
??GetTimeoutModbusRtuLinkControl:
        LDS     R16, (??m_xDeviceConfiguration + 5)
        LDI     R17, 0
        LDI     R20, 232
        LDI     R21, 3
        REQUIRE ?Subroutine92
        ;               // Fall through to label ?Subroutine92

        RSEG CODE:CODE:NOROOT(1)
?Subroutine92:
        JMP     ?S_EC_MUL_L02

        RSEG CODE:CODE:NOROOT(1)
??ModbusRtuLinkControlInProgress:
        LDS     R16, (??m_xModbusSettings + 11)
        SBRC    R16, 0
        RJMP    ?Subroutine83
??ModbusRtuLinkControlInProgress_1:
        RJMP    ?Subroutine82

        RSEG CODE:CODE:NOROOT(1)
??SetModeModbusRtuLinkControlInProgress:
        LDI     R30, LOW(??m_xModbusSettings)
        LDI     R31, (??m_xModbusSettings) >> 8
        BST     R16, 0
        LDD     R16, Z+11
        BLD     R16, 0
        STD     Z+11, R16
        LDI     R18, 10
        LDI     R16, LOW((??m_xModbusSettings + 11))
        LDI     R17, HIGH((??m_xModbusSettings + 11))
        CALL    ??WriteBlock
        JMP     ??SignatureCreate

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesReceipt:
        RCALL   ?Subroutine45
??CrossCallReturnLabel_117:
        RJMP    ??CrossCallReturnLabel_29
??SendToDevicesReceipt_1:
        RCALL   ?Subroutine42
??CrossCallReturnLabel_61:
        ADIW    R27:R26, 1
        RCALL   ?Subroutine30
??CrossCallReturnLabel_29:
        RCALL   ?Subroutine37
??CrossCallReturnLabel_123:
        BRCS    ??SendToDevicesReceipt_1
        RJMP    ?Subroutine27

        RSEG CODE:CODE:NOROOT(1)
?Subroutine45:
        MOVW    R19:R18, R27:R26
        RJMP    ?Subroutine82

        RSEG CODE:CODE:NOROOT(1)
?Subroutine42:
        LDI     R17, 2
        MUL     R16, R17
        MOVW    R31:R30, R1:R0
        SUBI    R30, LOW((-(??m_xDeviceConfigSearch) & 0xFFFF))
        SBCI    R31, (-(??m_xDeviceConfigSearch) & 0xFFFF) >> 8
        LDD     R26, Z+9
        LDD     R27, Z+10
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine37:
        LDS     R17, ??m_xDeviceConfigSearch
        REQUIRE ?Subroutine84
        ;               // Fall through to label ?Subroutine84

        RSEG CODE:CODE:NOROOT(1)
?Subroutine84:
        CP      R16, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine30:
        LDI     R17, 1
        ST      X, R17
        INC     R16
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine27:
        LDI     R16, 2
        STS     (??m_xDeviceConfiguration + 24), R16
        RJMP    ?Subroutine81

        RSEG CODE:CODE:NOROOT(1)
??SendToDevicesReset:
        RCALL   ?Subroutine45
??CrossCallReturnLabel_118:
        RJMP    ??CrossCallReturnLabel_30
??SendToDevicesReset_1:
        RCALL   ?Subroutine42
??CrossCallReturnLabel_62:
        ADIW    R27:R26, 2
        RCALL   ?Subroutine30
??CrossCallReturnLabel_30:
        RCALL   ?Subroutine37
??CrossCallReturnLabel_124:
        BRCS    ??SendToDevicesReset_1
        RJMP    ?Subroutine81
//  560 
//  561 //-----------------------------------------------------------------------------------------------------
//  562 void CPss21::SendToDevicesModbusReceipt(void)
//  563 {
//  564     for (uint8_t i = 0;
//  565             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  566             i++)
//  567     {
//  568         m_apxDrivers[i] -> SetModbusReceipt(1);
//  569     }
//  570 
//  571     // —ообщим автомату о состо€вшемс€ квитировании.
//  572     m_xModbusRtuLinkControl.SetFsmEvent(CModbusRtuLinkControl::RECEIPT_HAPPENED_FSM_EVENT);
//  573 }
//  574 
//  575 //-----------------------------------------------------------------------------------------------------
//  576 void CPss21::SendToDevicesModbusReset(void)
//  577 {
//  578     for (uint8_t i = 0;
//  579             i < (m_xDeviceConfigSearch.uiModulesQuantity);
//  580             i++)
//  581     {
//  582         m_apxDrivers[i] -> SetModbusReset(1);
//  583     }
//  584 }
//  585 
//  586 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  587 void CPss21::KeyStateProcessing(void)
??KeyStateProcessing:
//  588 {
        ST      -Y, R24
        LDI     R18, 2
        RCALL   ?Subroutine11
??CrossCallReturnLabel_2:
        TST     R16
        BREQ    ??CrossCallReturnLabel_222
//  589 //    m_xIsReceiptButtonPressed.Fsm();
//  590 
//  591 //    m_xReceiptKey.Fsm();
//  592 //    m_xResetKey.Fsm();
//  593 //    m_xCheckKey.Fsm();
//  594 //    m_xExternalKey.Fsm();
//  595 
//  596 //    if (m_xIsReceiptButtonPressed.IsSolved())
//  597 //    {
//  598 //        SetPanelReceipt(1);
//  599 //        SetDiscreteSignalsReceipt(1);
//  600 //        SendToDevicesReceipt();
//  601 //        m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  602 //    }
//  603     if (m_xReceiptKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  604     {
//  605         SetPanelReceipt(1);
        LDI     R16, 1
        STS     (??m_xDeviceConfiguration + 48), R16
//  606         SetDiscreteSignalsReceipt(1);
        RCALL   ?Subroutine46
//  607         SendToDevicesReceipt();
//  608         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  609     }
??CrossCallReturnLabel_126:
        RCALL   ??Subroutine106_0
//  610 
//  611     if (m_xResetKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
??CrossCallReturnLabel_222:
        LDI     R18, 2
        LDI     R16, LOW((??m_xDeviceConfiguration + 94))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 94))
        RCALL   ?Subroutine93
??CrossCallReturnLabel_141:
        TST     R16
        BREQ    ??CrossCallReturnLabel_221
//  612     {
//  613         SetPanelReset(1);
        LDI     R16, 1
        STS     (??m_xDeviceConfiguration + 49), R16
//  614         SetDiscreteSignalsReset(1);
        RCALL   ?Subroutine49
//  615         SendToDevicesReset();
//  616         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  617     }
??CrossCallReturnLabel_128:
        RCALL   ??Subroutine106_0
//  618 
//  619     if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_HOLD))
??CrossCallReturnLabel_221:
        LDI     R18, 3
        RCALL   ?Subroutine13
??CrossCallReturnLabel_232:
        BREQ    ??CrossCallReturnLabel_220
//  620     {
//  621         // ¬ключим режим создани€ карты соответстви€ окон.
//  622         SetFsmState(MAP_CREATE_START);
        LDI     R16, 6
        RCALL   ?Subroutine50
//  623         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  624     }
??CrossCallReturnLabel_130:
        RCALL   ??Subroutine106_0
//  625 
//  626     if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
??CrossCallReturnLabel_220:
        LDI     R18, 2
        RCALL   ?Subroutine13
??CrossCallReturnLabel_233:
        BREQ    ??CrossCallReturnLabel_219
//  627     {
//  628         if (GetFsmState() == MAP_CREATE_ON)
        LDS     R16, (??m_xDeviceConfiguration + 47)
        CPI     R16, 8
        BRNE    ??CrossCallReturnLabel_219
//  629         {
//  630             // следующее окно.
//  631             SetFsmState(MAP_CREATE_NEXT_WINDOW);
        LDI     R16, 9
        RCALL   ?Subroutine50
//  632             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  633         }
//  634     }
??CrossCallReturnLabel_131:
        RCALL   ??Subroutine106_0
//  635 
//  636 //    if (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_PUSH))
//  637 //    {
//  638 //        // ¬ключим режим тестировани€.
//  639 //        SetFsmState(TEST_START);
//  640 //        m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  641 //    }
//  642 
//  643     // ‘ункци€ внешней кнопки - только сброс?
//  644     if(m_xDeviceConfiguration.ExtUnsetOnly)
??CrossCallReturnLabel_219:
        LDS     R16, (??m_xDeviceConfiguration + 3)
        LDI     R18, 2
        SBRC    R16, 2
        RJMP    ??KeyStateProcessing_1
//  645     {
//  646         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RECEIPT))
//  647         {
//  648             SetExternalReset(1);
//  649             SetDiscreteSignalsReset(1);
//  650             SendToDevicesReset();
//  651             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  652         }
//  653 
//  654         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_CHECK))
//  655         {
//  656             // ¬ключим режим тестировани€.
//  657             SetFsmState(TEST_START);
//  658             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  659         }
//  660     }
//  661     else
//  662     {
//  663         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RECEIPT))
        RCALL   ?Subroutine8
??CrossCallReturnLabel_229:
        BREQ    ??CrossCallReturnLabel_218
//  664         {
//  665             SetExternalReceipt(1);
        LDI     R16, 1
        STS     (??m_xDeviceConfiguration + 50), R16
//  666             SetDiscreteSignalsReceipt(1);
        RCALL   ?Subroutine46
//  667             SendToDevicesReceipt();
//  668             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  669         }
??CrossCallReturnLabel_127:
        RCALL   ??Subroutine106_0
//  670 
//  671         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_RESET))
??CrossCallReturnLabel_218:
        LDI     R18, 3
??KeyStateProcessing_1:
        RCALL   ?Subroutine8
??CrossCallReturnLabel_230:
        BREQ    ??CrossCallReturnLabel_217
//  672         {
//  673             SetExternalReset(1);
        LDI     R16, 1
        STS     (??m_xDeviceConfiguration + 51), R16
//  674             SetDiscreteSignalsReset(1);
        RCALL   ?Subroutine49
//  675             SendToDevicesReset();
//  676             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  677         }
??CrossCallReturnLabel_129:
        RCALL   ??Subroutine106_0
//  678 
//  679         if (m_xExternalKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_CHECK))
??CrossCallReturnLabel_217:
        LDI     R18, 4
        RCALL   ?Subroutine8
??CrossCallReturnLabel_231:
        BREQ    ??CrossCallReturnLabel_216
//  680         {
//  681             // ¬ключим режим тестировани€.
//  682             SetFsmState(TEST_START);
        LDI     R16, 10
        RCALL   ?Subroutine50
//  683             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
//  684         }
//  685     }
??CrossCallReturnLabel_132:
        RCALL   ??Subroutine106_0
//  686 
//  687     //  нопки " витирование" и " онтроль" нажаты дольше 7 секунд?
//  688     if (m_xEventUniteLogicAndOne.IsHappened((m_xReceiptKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_SET_DEFAULT)),
//  689                                             (m_xCheckKey.KeyEventHappened(CMultiFunctionKey::KEY_EVENT_PRESSED_SET_DEFAULT))))
??CrossCallReturnLabel_216:
        LDI     R18, 5
        RCALL   ?Subroutine59
??CrossCallReturnLabel_143:
        MOV     R24, R16
        LDI     R18, 5
        RCALL   ?Subroutine11
??CrossCallReturnLabel_3:
        MOV     R18, R16
        MOV     R19, R24
        LDI     R16, LOW((??m_xDeviceConfiguration + 139))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 139))
        CALL    ??IsHappened
        TST     R16
        BREQ    ??CrossCallReturnLabel_215
//  690     {
//  691         // ”станавливаем настройки Modbus по умолчанию на текущую сессию.
//  692         CPss21::ModbusDefaultInit();
        RCALL   ??ModbusDefaultInit
//  693         m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
        LDI     R18, 7
        RCALL   ??Subroutine106_0
//  694     }
//  695 }
??CrossCallReturnLabel_215:
        REQUIRE ?Subroutine85
        ;               // Fall through to label ?Subroutine85

        RSEG CODE:CODE:NOROOT(1)
?Subroutine85:
        LD      R24, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine50:
        STS     (??m_xDeviceConfiguration + 47), R16
        REQUIRE ?Subroutine86
        ;               // Fall through to label ?Subroutine86

        RSEG CODE:CODE:NOROOT(1)
?Subroutine86:
        LDI     R18, 7
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine49:
        STS     (??m_xDeviceConfiguration + 55), R16
        RCALL   ??SendToDevicesReset
        RJMP    ?Subroutine86

        RSEG CODE:CODE:NOROOT(1)
?Subroutine46:
        STS     (??m_xDeviceConfiguration + 54), R16
        RCALL   ??SendToDevicesReceipt
        RJMP    ?Subroutine86

        RSEG CODE:CODE:NOROOT(1)
?Subroutine13:
        RCALL   ?Subroutine59
??CrossCallReturnLabel_142:
        REQUIRE ?Subroutine87
        ;               // Fall through to label ?Subroutine87

        RSEG CODE:CODE:NOROOT(1)
?Subroutine87:
        TST     R16
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine59:
        LDI     R16, LOW((??m_xDeviceConfiguration + 109))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 109))
        REQUIRE ?Subroutine93
        ;               // Fall through to label ?Subroutine93

        RSEG CODE:CODE:NOROOT(1)
?Subroutine93:
        JMP     ??KeyEventHappened

        RSEG CODE:CODE:NOROOT(1)
?Subroutine11:
        LDI     R16, LOW((??m_xDeviceConfiguration + 79))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 79))
        RJMP    ?Subroutine93

        RSEG CODE:CODE:NOROOT(1)
?Subroutine8:
        LDI     R16, LOW((??m_xDeviceConfiguration + 124))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 124))
        RCALL   ?Subroutine93
??CrossCallReturnLabel_140:
        RJMP    ?Subroutine87
//  696 
//  697 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  698 void CPss21::ReceiptResetGlobalFlagsClear(void)
??ReceiptResetGlobalFlagsClear:
//  699 {
//  700     SetPanelReceipt(0);
        RCALL   ?Subroutine32
??CrossCallReturnLabel_35:
        LDI     R16, 0
        STD     Z+48, R16
//  701     SetExternalReceipt(0);
        STD     Z+50, R16
//  702     SetModbusReceipt(0);
        STD     Z+52, R16
//  703     SetPanelReset(0);
        STD     Z+49, R16
//  704     SetExternalReset(0);
        STD     Z+51, R16
//  705     SetModbusReset(0);
        STD     Z+53, R16
//  706 }
        RET
//  707 
//  708 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  709 uint8_t CPss21::ModulesInteraction(uint8_t uiModuleIndex)
??ModulesInteraction:
//  710 {
        ST      -Y, R27
        ST      -Y, R26
//  711     if (uiModuleIndex < (m_xDeviceConfigSearch.uiModulesQuantity))
        RCALL   ?Subroutine37
??CrossCallReturnLabel_125:
        BRCC    ??ModulesInteraction_1
        LDI     R17, 2
        MUL     R16, R17
        LDI     R30, LOW(??m_xDeviceConfigSearch)
        LDI     R31, (??m_xDeviceConfigSearch) >> 8
        RCALL   ??Subroutine99_0
??CrossCallReturnLabel_180:
        LDD     R26, Z+9
        LDD     R27, Z+10
        MOVW    R17:R16, R27:R26
        ADIW    R27:R26, 9
        LD      R30, X+
        LD      R31, X
        RCALL   ?Subroutine66
//  712     {
//  713         m_apxDrivers[uiModuleIndex] -> DataExchange();
//  714         return 0;
??CrossCallReturnLabel_82:
        LDI     R16, 0
        RJMP    ??ModulesInteraction_2
//  715     }
//  716     else
//  717     {
//  718         return 1;
??ModulesInteraction_1:
        LDI     R16, 1
//  719     }
??ModulesInteraction_2:
        RJMP    ?Subroutine76
//  720 };
//  721 
//  722 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  723 void CPss21::ConfigurationInit(void)
??ConfigurationInit:
//  724 {
        RCALL   ?Subroutine40
//  725     uint8_t* puiTempBuffer = m_auiIntermediateBuff;
??CrossCallReturnLabel_54:
        LDI     R26, LOW(??m_auiIntermediateBuff)
        LDI     R27, (??m_auiIntermediateBuff) >> 8
//  726     uint8_t* puiAlarmDfaInit = m_auiReceiveMessageBuff;
//  727 
//  728     memset(puiAlarmDfaInit, 0, DISCRETE_SIGNALS_NUMBER);
        LDI     R20, 96
        RCALL   ?Subroutine4
??CrossCallReturnLabel_173:
        LDI     R16, LOW(??m_auiReceiveMessageBuff)
        LDI     R17, (??m_auiReceiveMessageBuff) >> 8
        RCALL   ?Subroutine33
//  729 
//  730     // ”становим конфигурацию устройства.
//  731     // —читаем во временный буфер блок Ѕƒ - " онфигураци€ устройства".
//  732     CDataBase::ReadBlock(puiTempBuffer, TDataBase::DEV_CONFIG);
??CrossCallReturnLabel_37:
        LDI     R18, 0
        RCALL   ?Subroutine43
//  733     memcpy(reinterpret_cast<uint8_t*>(&m_xDeviceConfiguration),
//  734            puiTempBuffer,
//  735            sizeof(struct TDevConfig));
??CrossCallReturnLabel_147:
        LDI     R20, 20
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xDeviceConfiguration)
        LDI     R17, (??m_xDeviceConfiguration) >> 8
        RCALL   ?Subroutine51
//  736 
//  737     // ”становим параметры интерфейса ModBus.
//  738     // —читаем во временный буфер блок Ѕƒ - "ѕараметры интерфейса ModBus".
//  739     CDataBase::ReadBlock(puiTempBuffer, TDataBase::MODBUS_SET);
??CrossCallReturnLabel_68:
        LDI     R18, 1
        RCALL   ?Subroutine43
//  740     memcpy(reinterpret_cast<uint8_t*>(&m_xModbusSettings),
//  741            puiTempBuffer,
//  742            sizeof(struct TMBusSetting));
??CrossCallReturnLabel_146:
        LDI     R20, 7
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW(??m_xModbusSettings)
        LDI     R17, (??m_xModbusSettings) >> 8
        RCALL   ?Subroutine51
//  743 
//  744     // —читаем во временный буфер блок Ѕƒ - "Ѕƒ модулей вывода".
//  745     CDataBase::ReadBlock(puiTempBuffer, TDataBase::OUT_BASE);
??CrossCallReturnLabel_67:
        LDI     R18, 5
        RCALL   ?Subroutine43
//  746     memcpy(reinterpret_cast<uint8_t*>(&m_xDiscreteOutputDataBase),
//  747            puiTempBuffer,
//  748            sizeof(struct TOutputData));
??CrossCallReturnLabel_145:
        LDI     R20, 24
        LDI     R21, 0
        MOVW    R19:R18, R27:R26
        LDI     R16, LOW((??m_xDeviceConfiguration + 207))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 207))
        RCALL   ?Subroutine51
//  749 
//  750     // ”становим уровень дискретного сигнала интерпретируемый как активный.
//  751     // —читаем во временный буфер блок Ѕƒ - "”ровень дискретного сигнала интерпретируемый как активный".
//  752     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ACTIVITY_LEVEL);
??CrossCallReturnLabel_66:
        LDI     R18, 2
        RCALL   ?Subroutine43
//  753     for (uint8_t i = 0;
??CrossCallReturnLabel_144:
        LDI     R18, 0
//  754             i < DISCRETE_INPUTS_NUMBER;
//  755         )
//  756     {
//  757         uint8_t uiData = *puiTempBuffer;
??ConfigurationInit_1:
        LD      R22, X+
//  758         for (uint8_t j = 0;
        LDI     R21, 0
        LDI     R19, 8
//  759                 j < 8;
//  760                 j++)
//  761         {
//  762             // ”становим уровень текущего дискретного сигнала интерпретируемый как активный.
//  763             if (((uiData >> j) & 0x01))
??ConfigurationInit_2:
        LDI     R17, 0
        LDI     R30, LOW(??m_auiReceiveMessageBuff)
        LDI     R31, (??m_auiReceiveMessageBuff) >> 8
        ADD     R30, R18
        ADC     R31, R17
        MOV     R16, R22
        MOV     R20, R21
        CALL    ?SS_SHR_L02
        ANDI    R16, 0x01
        BREQ    ??ConfigurationInit_3
//  764             {
//  765                 puiAlarmDfaInit[i] = 0x80;
        LDI     R16, 128
        RJMP    ??ConfigurationInit_4
//  766             }
//  767             else
//  768             {
//  769                 puiAlarmDfaInit[i] = 0;
??ConfigurationInit_3:
        LDI     R16, 0
??ConfigurationInit_4:
        ST      Z, R16
//  770             }
//  771             i++;
        INC     R18
//  772         }
        INC     R21
        DEC     R19
        BRNE    ??ConfigurationInit_2
//  773         puiTempBuffer++;
//  774     }
        CPI     R18, 48
        BRCS    ??ConfigurationInit_1
//  775 
//  776     puiTempBuffer = m_auiIntermediateBuff;
//  777     // ѕрив€жем окна сигнализации к дискретным сигналам.
//  778     // —читаем во временный буфер блок Ѕƒ - "»ндекс окна сигнализации которое прив€зано к текущему дискретному сигналу".
//  779     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_WINDOW_INDEX);
        RCALL   ?Subroutine47
//  780     for (uint8_t i = 0;
??CrossCallReturnLabel_148:
        LDI     R18, 0
        LDI     R16, 96
//  781             i < DISCRETE_SIGNALS_NUMBER;
//  782             i++)
//  783     {
//  784         // ѕрив€жем окно сигнализации к текущему дискретному сигналу.
//  785         puiAlarmDfaInit[i] |= (puiTempBuffer[i] & ~(0x80));
??ConfigurationInit_5:
        MOV     R30, R18
        LDI     R31, 0
        SUBI    R30, LOW((-(??m_auiIntermediateBuff) & 0xFFFF))
        SBCI    R31, (-(??m_auiIntermediateBuff) & 0xFFFF) >> 8
        LD      R17, Z
        ANDI    R17, 0x7F
        MOV     R30, R18
        LDI     R31, 0
        SUBI    R30, LOW((-(??m_auiReceiveMessageBuff) & 0xFFFF))
        SBCI    R31, (-(??m_auiReceiveMessageBuff) & 0xFFFF) >> 8
        LD      R19, Z
        OR      R19, R17
        ST      Z, R19
//  786     }
        INC     R18
        DEC     R16
        BRNE    ??ConfigurationInit_5
//  787 
//  788     // —читаем во временный буфер блок Ѕƒ - "“ип сигнализации прив€занный к окну".
//  789     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_TYPE);
        LDI     R18, 4
        RCALL   ?Subroutine70
//  790     for (uint8_t i = 0;
??CrossCallReturnLabel_150:
        LDI     R18, 0
        LDI     R17, 96
//  791             i < DISCRETE_SIGNALS_NUMBER;
//  792             i++)
//  793     {
//  794         uint8_t uiWindowIndex = (puiAlarmDfaInit[i] & ~(0x80));
??ConfigurationInit_6:
        LDI     R19, 0
        LDI     R30, LOW(??m_auiReceiveMessageBuff)
        LDI     R31, (??m_auiReceiveMessageBuff) >> 8
        ADD     R30, R18
        ADC     R31, R19
        LD      R19, Z
        MOV     R16, R19
        ANDI    R16, 0x7F
//  795         // ƒл€ текущего дискретного сигнала запрограммирована сигнализаци€?
//  796         if (uiWindowIndex < ALARM_WINDOWS_NUMBER)
        CPI     R16, 48
        ANDI    R19, 0x80
        BRCC    ??ConfigurationInit_7
//  797         {
//  798             // ќчистим индекс прив€занного окна, больше не нужен.
//  799             // ќставим уровень дискретного сигнала интерпретируемый как активный.
//  800             puiAlarmDfaInit[i] &= 0x80;
//  801             // ”становим тип сигнализации по прив€занному окну.
//  802             puiAlarmDfaInit[i] |= puiTempBuffer[uiWindowIndex];
        LDI     R27, 0
        SUBI    R16, LOW((-(??m_auiIntermediateBuff) & 0xFFFF))
        MOV     R26, R16
        SBCI    R27, (-(??m_auiIntermediateBuff) & 0xFFFF) >> 8
        LD      R16, X
        OR      R19, R16
//  803         }
//  804         else
//  805         {
//  806             // ќчистим индекс прив€занного окна, больше не нужен.
//  807             // ќставим уровень дискретного сигнала интерпретируемый как активный.
//  808             puiAlarmDfaInit[i] &= 0x80;
??ConfigurationInit_7:
        ST      Z, R19
//  809         }
//  810     }
        INC     R18
        DEC     R17
        BRNE    ??ConfigurationInit_6
//  811 
//  812     // —оздадим объекты автоматов обработки сигнализаций дискретных сигналов.
//  813     for (uint8_t i = 0;
        LDI     R24, 0
        LDI     R25, 96
//  814             i < DISCRETE_SIGNALS_NUMBER;
//  815             i++)
//  816     {
//  817         //  акой тип сигнализации св€зан с дискретным сигналом?
//  818         switch (puiAlarmDfaInit[i] & 0x03)
??ConfigurationInit_8:
        LDI     R16, 2
        MUL     R24, R16
        LDI     R26, LOW(??m_apxAlarmDfa)
        LDI     R27, (??m_apxAlarmDfa) >> 8
        ADD     R26, R0
        ADC     R27, R1
        LDI     R17, 0
        LDI     R30, LOW(??m_auiReceiveMessageBuff)
        LDI     R31, (??m_auiReceiveMessageBuff) >> 8
        ADD     R30, R24
        ADC     R31, R17
        LD      R16, Z
        ANDI    R16, 0x03
        BREQ    ??ConfigurationInit_9
        DEC     R16
        BREQ    ??ConfigurationInit_10
        DEC     R16
        BREQ    ??ConfigurationInit_11
        DEC     R16
        BREQ    ??ConfigurationInit_12
        RJMP    ??ConfigurationInit_9
//  819         {
//  820         case NORMAL:
//  821             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  822             break;
//  823 
//  824         case INDICATION:
//  825             // ”ровень дискретного сигнала интерпретируемый как активный - высокий?
//  826             if (puiAlarmDfaInit[i] & 0x80)
??ConfigurationInit_10:
        LD      R16, Z
        SBRS    R16, 7
        RJMP    ??ConfigurationInit_13
//  827             {
//  828                 m_apxAlarmDfa[i] = new CIndicationAlarmHighLevelDfa;
        CALL    `??new CIndicationAlarmHighLevelDfa`
        RJMP    ??ConfigurationInit_14
//  829             }
//  830             else
//  831             {
//  832                 m_apxAlarmDfa[i] = new CIndicationAlarmLowLevelDfa;
??ConfigurationInit_13:
        CALL    `??new CIndicationAlarmLowLevelDfa`
        RJMP    ??ConfigurationInit_14
//  833             }
//  834             break;
//  835 
//  836         case PREVENTIVE:
//  837             // ”ровень дискретного сигнала интерпретируемый как активный - высокий?
//  838             if (puiAlarmDfaInit[i] & 0x80)
??ConfigurationInit_11:
        LD      R16, Z
        SBRS    R16, 7
        RJMP    ??ConfigurationInit_15
//  839             {
//  840                 m_apxAlarmDfa[i] = new CPreventiveAlarmHighLevelDfa;
        CALL    `??new CPreventiveAlarmHighLevelDfa`
        RJMP    ??ConfigurationInit_14
//  841             }
//  842             else
//  843             {
//  844                 m_apxAlarmDfa[i] = new CPreventiveAlarmLowLevelDfa;
??ConfigurationInit_15:
        CALL    `??new CPreventiveAlarmLowLevelDfa`
        RJMP    ??ConfigurationInit_14
//  845             }
//  846             break;
//  847 
//  848         case EMERGENCY:
//  849             // ”ровень дискретного сигнала интерпретируемый как активный - высокий?
//  850             if (puiAlarmDfaInit[i] & 0x80)
??ConfigurationInit_12:
        LD      R16, Z
        SBRS    R16, 7
        RJMP    ??ConfigurationInit_16
//  851             {
//  852                 m_apxAlarmDfa[i] = new CEmergencyAlarmHighLevelDfa;
        CALL    `??new CEmergencyAlarmHighLevelDfa`
        RJMP    ??ConfigurationInit_14
//  853             }
//  854             else
//  855             {
//  856                 m_apxAlarmDfa[i] = new CEmergencyAlarmLowLevelDfa;
??ConfigurationInit_16:
        CALL    `??new CEmergencyAlarmLowLevelDfa`
        RJMP    ??ConfigurationInit_14
//  857             }
//  858             break;
//  859 
//  860         case IND_PREVENTIVE:
//  861             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  862             break;
//  863 
//  864         case IND_EMERGENCY:
//  865             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
//  866             break;
//  867 
//  868         default:
//  869             m_apxAlarmDfa[i] = new CNormalAlarmDfa;
??ConfigurationInit_9:
        CALL    `??new CNormalAlarmDfa`
??ConfigurationInit_14:
        ST      X+, R16
        ST      X, R17
//  870             break;
//  871         }
//  872     }
        INC     R24
        DEC     R25
        BRNE    ??ConfigurationInit_8
//  873 
//  874     // ѕрив€жем окна сигнализации к созданным объектам сигнализаций дискретных сигналов.
//  875     // —читаем во временный буфер блок Ѕƒ - "»ндекс окна сигнализации которое прив€зано к текущему дискретному сигналу".
//  876     CDataBase::ReadBlock(puiTempBuffer, TDataBase::ALARM_WINDOW_INDEX);
        RCALL   ?Subroutine47
//  877     for (uint8_t i = 0;
??CrossCallReturnLabel_149:
        LDI     R20, 0
        LDI     R18, 96
//  878             i < DISCRETE_SIGNALS_NUMBER;
//  879             i++)
//  880     {
//  881         // ƒл€ текущего дискретного сигнала запрограммирована сигнализаци€?
//  882         if (puiTempBuffer[i] < ALARM_WINDOWS_NUMBER)
??ConfigurationInit_17:
        RCALL   ?Subroutine25
??CrossCallReturnLabel_133:
        LDD     R17, Z+1
        RCALL   ?Subroutine39
??CrossCallReturnLabel_51:
        CPI     R19, 48
        MOVW    R31:R30, R17:R16
        BRCC    ??ConfigurationInit_18
//  883         {
//  884             // ѕрив€жем окно сигнализации к текущему дискретному сигналу.
//  885             m_apxAlarmDfa[i] ->
//  886             SetAlarmWindowIndex(puiTempBuffer[i]);
        STD     Z+3, R19
//  887         }
        RJMP    ??ConfigurationInit_19
//  888         else
//  889         {
//  890             m_apxAlarmDfa[i] ->
//  891             SetAlarmWindowIndex(0);
??ConfigurationInit_18:
        LDI     R16, 0
        STD     Z+3, R16
//  892         }
//  893     }
??ConfigurationInit_19:
        INC     R20
        DEC     R18
        BRNE    ??ConfigurationInit_17
//  894 
//  895     // —читаем во временный буфер блок Ѕƒ - "¬ыходные реле, сопоставленные физическим входам".
//  896     CDataBase::ReadBlock(puiTempBuffer, TDataBase::RELAY);
        LDI     R18, 6
        RCALL   ?Subroutine70
//  897     // ѕолучим св€занные выходы на ћ–.
//  898     for (uint8_t i = 0;
??CrossCallReturnLabel_151:
        LDI     R20, 0
        LDI     R18, 96
//  899             i < DISCRETE_SIGNALS_NUMBER;
//  900             i++)
//  901     {
//  902         *(m_apxAlarmDfa[i] -> GetLinkedDiscreteOutputsPointer()) = puiTempBuffer[i];
??ConfigurationInit_20:
        RCALL   ?Subroutine39
??CrossCallReturnLabel_52:
        RCALL   ?Subroutine25
??CrossCallReturnLabel_134:
        LDD     R31, Z+1
        MOV     R30, R16
        STD     Z+4, R19
        INC     R20
        DEC     R18
        BRNE    ??ConfigurationInit_20
//  903     };
//  904 
//  905     // ѕолучим индексы источников состо€ни€ дискретных сигналов - дискретные входы модулей.
//  906     for (uint8_t i = 0;
        LDI     R17, 0
        LDI     R16, 48
        LDI     R18, 2
//  907             i < DISCRETE_INPUTS_NUMBER;
//  908             i++)
//  909     {
//  910         m_apxAlarmDfa[i] -> SetDiscreteStateIndex(i);
??ConfigurationInit_21:
        MUL     R17, R18
        RCALL   ?Subroutine68
??CrossCallReturnLabel_83:
        LD      R26, Z
        LDD     R27, Z+1
        ADIW    R27:R26, 5
        ST      X, R17
//  911     };
        INC     R17
        DEC     R16
        BRNE    ??ConfigurationInit_21
//  912     // ѕолучим индексы источников состо€ни€ дискретных сигналов - состо€ние €чеек(coils Modbus).
//  913     for (uint8_t i = 0;
        LDI     R17, 0
        LDI     R16, 48
        LDI     R19, 2
//  914             i < ALARM_WINDOWS_NUMBER;
//  915             i++)
//  916     {
//  917         m_apxAlarmDfa[DISCRETE_INPUTS_NUMBER + i] -> SetDiscreteStateIndex(DISCRETE_INPUTS_NUMBER + i);
??ConfigurationInit_22:
        MOV     R18, R17
        SUBI    R18, 208
        MUL     R17, R19
        MOVW    R31:R30, R1:R0
        SUBI    R30, LOW((-(??m_apxAlarmDfa + 96) & 0xFFFF))
        SBCI    R31, HIGH((-(??m_apxAlarmDfa + 96) & 0xFFFF))
        LD      R26, Z
        LDD     R27, Z+1
        ADIW    R27:R26, 5
        ST      X, R18
//  918 //        m_apxAlarmDfa[DISCRETE_INPUTS_NUMBER + i] -> SetDiscreteStateIndex(i);
//  919     };
        INC     R17
        DEC     R16
        BRNE    ??ConfigurationInit_22
//  920 
//  921     // ¬осстановим  состо€ние устройства.
//  922     // —читаем во временный буфер блок Ѕƒ - "—осто€ние устройства хранимое в EEPROM".
//  923     CDataBase::ReadBlock(puiTempBuffer, TDataBase::DEVICE_STATE);
        LDI     R18, 10
        RCALL   ?Subroutine70
//  924     memcpy(reinterpret_cast<uint8_t*>(&m_xDeviceState),
//  925            puiTempBuffer,
//  926            sizeof(struct TDeviceState));
??CrossCallReturnLabel_152:
        LDI     R20, 8
        LDI     R21, 0
        LDI     R18, LOW(??m_auiIntermediateBuff)
        LDI     R19, (??m_auiIntermediateBuff) >> 8
        LDI     R16, LOW((??m_xModbusSettings + 11))
        LDI     R17, HIGH((??m_xModbusSettings + 11))
        RCALL   ?Subroutine51
//  927 
//  928 //    // —оздадим автоматы обработки ошибок.
//  929 //    uint8_t uiIndex = 0;
//  930 //
//  931 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
//  932 //    // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  933 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(IMD_ERROR);
//  934 //    // ”становим индекс источника состо€ни€ ошибки.
//  935 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(IMD_ERROR);
//  936 //    uiIndex++;
//  937 //
//  938 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
//  939 //    // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  940 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(OMD_ERROR);
//  941 //    // ”становим индекс источника состо€ни€ ошибки.
//  942 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(OMD_ERROR);
//  943 //    uiIndex++;
//  944 //
//  945 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
//  946 //    // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  947 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(CFG_ERROR);
//  948 //    // ”становим индекс источника состо€ни€ ошибки.
//  949 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(CFG_ERROR);
//  950 //    uiIndex++;
//  951 //
//  952 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
//  953 //    // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  954 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(DB_ERROR);
//  955 //    // ”становим индекс источника состо€ни€ ошибки.
//  956 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(DB_ERROR);
//  957 //    uiIndex++;
//  958 //
//  959 //    m_apxErrorAlarmDfa[uiIndex] = new CErrorAlarmDfa;
//  960 //    // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  961 //    m_apxErrorAlarmDfa[uiIndex] -> SetAlarmWindowIndex(MBS_ERROR);
//  962 //    // ”становим индекс источника состо€ни€ ошибки.
//  963 //    m_apxErrorAlarmDfa[uiIndex] -> SetDiscreteStateIndex(MBS_ERROR);
//  964 //    uiIndex++;
//  965 
//  966     // —оздадим автоматы обработки ошибок.
//  967     for (uint8_t i = 0;
??CrossCallReturnLabel_65:
        LDI     R25, 0
        LDI     R24, 2
//  968             i < HANDLED_ERROR_NUMBER;
//  969             i++)
//  970     {
//  971         m_apxErrorAlarmDfa[i] = new CErrorAlarmDfa;
??ConfigurationInit_23:
        CALL    `??new CErrorAlarmDfa`
        LDI     R18, 2
        MUL     R25, R18
        RCALL   ?Subroutine28
??CrossCallReturnLabel_18:
        STD     Z+7, R16
        STD     Z+8, R17
//  972         // ѕрив€жем окно сигнализации к созданному объекту сигнализации ошибки.
//  973         m_apxErrorAlarmDfa[i] -> SetAlarmWindowIndex(i);
        MOVW    R27:R26, R17:R16
        ADIW    R27:R26, 3
        ST      X, R25
//  974         // ”становим индекс источника состо€ни€ ошибки.
//  975         m_apxErrorAlarmDfa[i] -> SetDiscreteStateIndex(i);
        LDD     R16, Z+7
        LDD     R31, Z+8
        MOV     R30, R16
        STD     Z+4, R25
//  976     };
        INC     R25
        DEC     R24
        BRNE    ??ConfigurationInit_23
//  977 }
        RJMP    ?Subroutine91

        RSEG CODE:CODE:NOROOT(1)
?Subroutine51:
        JMP     memcpy

        RSEG CODE:CODE:NOROOT(1)
?Subroutine47:
        LDI     R18, 3
        REQUIRE ?Subroutine70
        ;               // Fall through to label ?Subroutine70

        RSEG CODE:CODE:NOROOT(1)
?Subroutine70:
        LDI     R16, LOW(??m_auiIntermediateBuff)
        LDI     R17, (??m_auiIntermediateBuff) >> 8
        REQUIRE ?Subroutine94
        ;               // Fall through to label ?Subroutine94

        RSEG CODE:CODE:NOROOT(1)
?Subroutine94:
        JMP     ??ReadBlock

        RSEG CODE:CODE:NOROOT(1)
?Subroutine43:
        MOVW    R17:R16, R27:R26
        RJMP    ?Subroutine94

        RSEG CODE:CODE:NOROOT(1)
?Subroutine39:
        LDI     R31, 0
        MOV     R30, R20
        SUBI    R30, LOW((-(??m_auiIntermediateBuff) & 0xFFFF))
        SBCI    R31, (-(??m_auiIntermediateBuff) & 0xFFFF) >> 8
        LD      R19, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine25:
        LDI     R16, 2
        MUL     R20, R16
        RCALL   ?Subroutine68
??CrossCallReturnLabel_85:
        REQUIRE ?Subroutine88
        ;               // Fall through to label ?Subroutine88

        RSEG CODE:CODE:NOROOT(1)
?Subroutine88:
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine68:
        MOVW    R31:R30, R1:R0
        SUBI    R30, LOW((-(??m_apxAlarmDfa) & 0xFFFF))
        SBCI    R31, (-(??m_apxAlarmDfa) & 0xFFFF) >> 8
        RET
//  978 
//  979 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  980 void CPss21::DiscreteOutputControlClear(void)
??DiscreteOutputControlClear:
//  981 {
        MOVW    R21:R20, R25:R24
//  982     // ѕриведение буферов управлени€ модул€ми дискретных выходов(реле) в исходное состо€ние.
//  983     for (int j = 0;
//  984             j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
//  985             j++)
//  986     {
//  987         // цикл выбора реле.
//  988         for (int k = 0;
        RCALL   ?Subroutine34
??CrossCallReturnLabel_42:
        LDI     R16, 8
        LDI     R17, 0
//  989                 k < MR_DISCRETE_OUTPUT_NUMBER;
//  990                 k++)
//  991         {
//  992             // —бросим флаг - новое нарушение.
//  993             m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiNewActivation = 0;
??DiscreteOutputControlClear_1:
        MOVW    R19:R18, R25:R24
        LSL     R18
        ROL     R19
        LDI     R30, LOW(??m_axDiscreteOutputControl)
        LDI     R31, (??m_axDiscreteOutputControl) >> 8
        ADD     R30, R18
        ADC     R31, R19
        ST      Z, R17
//  994             // —бросим флаг - требование включени€ реле.
//  995             m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 0;
        STD     Z+1, R17
//  996         }
        ADIW    R25:R24, 1
        DEC     R16
        BRNE    ??DiscreteOutputControlClear_1
//  997     }
//  998 }
        MOVW    R25:R24, R21:R20
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine34:
        LDI     R24, 0
        LDI     R25, 0
        RET
//  999 
// 1000 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1001 void CPss21::DiscreteOutputsSet(uint8_t *puiLinkedDiscreteOutputs, uint8_t uiNewViolation)
??DiscreteOutputsSet:
// 1002 {
        RCALL   ?Subroutine40
??CrossCallReturnLabel_55:
        MOVW    R23:R22, R17:R16
// 1003     // ƒискретный сигнал был активен на предыдущем шаге?
// 1004     if (!uiNewViolation)
        TST     R18
        LDI     R26, 0
        LDI     R27, 0
        LDI     R19, 1
        BRNE    ??DiscreteOutputsSet_1
// 1005     {
// 1006         // Ќе новое нарушение.
// 1007         // установим флаги - требовани€ включени€, дл€ запрограммированных реле,
// 1008         // в буфере выходов требований включени€ реле - блокировка.
// 1009         // цикл выбора модул€.
// 1010         for (int j = 0;
// 1011                 j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
// 1012                 j++)
// 1013         {
// 1014             // цикл выбора реле.
// 1015             for (int k = 0;
??DiscreteOutputsSet_2:
        RCALL   ?Subroutine34
??CrossCallReturnLabel_43:
        LDI     R18, 8
// 1016                     k < MR_DISCRETE_OUTPUT_NUMBER;
// 1017                     k++)
// 1018             {
// 1019                 // “екущий - (j, k) дискретный выход(реле) прив€зан?
// 1020                 if (puiLinkedDiscreteOutputs[j] & (0x01 << k))
??DiscreteOutputsSet_3:
        RCALL   ?Subroutine24
??CrossCallReturnLabel_175:
        BREQ    ??DiscreteOutputsSet_4
// 1021                 {
// 1022                     // установим флаг - требование включени€ реле.
// 1023                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 1;
        RCALL   ?Subroutine44
// 1024                 }
// 1025             }
??CrossCallReturnLabel_63:
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_axDiscreteOutputControl) & 0xFFFF))
        SBCI    R31, (-(??m_axDiscreteOutputControl) & 0xFFFF) >> 8
        LDI     R16, 1
        STD     Z+1, R16
??DiscreteOutputsSet_4:
        ADIW    R25:R24, 1
        DEC     R18
        BRNE    ??DiscreteOutputsSet_3
// 1026         }
        ADIW    R27:R26, 1
        DEC     R19
        BREQ    ??DiscreteOutputsSet_5
        RJMP    ??DiscreteOutputsSet_2
// 1027     }
// 1028     else
// 1029     {
// 1030         // новое нарушение.
// 1031         // установим флаги - новое нарушение, дл€ запрограммированных реле
// 1032         // в буфере выходов управлени€ реле - новое нарушение.
// 1033         // установим флаги - требовани€ включени€, дл€ запрограммированных реле,
// 1034         // в буфере выходов требований включени€ реле - блокировка.
// 1035         // цикл выбора модул€.
// 1036         for (int j = 0;
// 1037                 j < DISCRETE_OUTPUT_MODULE_MAX_NUMBER;
// 1038                 j++)
// 1039         {
// 1040             // цикл выбора реле.
// 1041             for (int k = 0;
??DiscreteOutputsSet_1:
        RCALL   ?Subroutine34
??CrossCallReturnLabel_44:
        LDI     R18, 8
// 1042                     k < MR_DISCRETE_OUTPUT_NUMBER;
// 1043                     k++)
// 1044             {
// 1045                 // “екущий - (j, k) дискретный выход(реле) прив€зан?
// 1046                 if (puiLinkedDiscreteOutputs[j] & (0x01 << k))
??DiscreteOutputsSet_6:
        RCALL   ?Subroutine24
??CrossCallReturnLabel_176:
        BREQ    ??DiscreteOutputsSet_7
// 1047                 {
// 1048                     // установим флаг - новое нарушение.
// 1049                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiNewActivation = 1;
        RCALL   ?Subroutine44
??CrossCallReturnLabel_64:
        LDI     R30, LOW(??m_axDiscreteOutputControl)
        LDI     R31, (??m_axDiscreteOutputControl) >> 8
        RCALL   ??Subroutine103_0
??CrossCallReturnLabel_197:
        RCALL   ?Subroutine26
// 1050                     // установим флаг - требование включени€ реле.
// 1051                     m_axDiscreteOutputControl[(j * MR_DISCRETE_OUTPUT_NUMBER) + k].uiRelayActivationRequest = 1;
??CrossCallReturnLabel_15:
        STD     Z+1, R16
// 1052                 }
// 1053             }
??DiscreteOutputsSet_7:
        ADIW    R25:R24, 1
        DEC     R18
        BRNE    ??DiscreteOutputsSet_6
// 1054         }
        ADIW    R27:R26, 1
        DEC     R19
        BRNE    ??DiscreteOutputsSet_1
// 1055     }
// 1056 }
??DiscreteOutputsSet_5:
        REQUIRE ?Subroutine91
        ;               // Fall through to label ?Subroutine91

        RSEG CODE:CODE:NOROOT(1)
?Subroutine91:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
?Subroutine44:
        LDI     R20, 3
        MOVW    R17:R16, R27:R26
        RCALL   ?Subroutine67
??CrossCallReturnLabel_178:
        ADD     R16, R24
        ADC     R17, R25
        LSL     R16
        ROL     R17
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine67:
        JMP     ?S_SHL_L02

        RSEG CODE:CODE:NOROOT(1)
?Subroutine40:
        JMP     ?PROLOGUE4_L09

        RSEG CODE:CODE:NOROOT(1)
?Subroutine24:
        MOVW    R31:R30, R23:R22
        ADD     R30, R26
        ADC     R31, R27
        LD      R21, Z
        MOV     R20, R24
        REQUIRE ??Subroutine98_0
        ;               // Fall through to label ??Subroutine98_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine98_0:
        LDI     R16, 1
        LDI     R17, 0
        RCALL   ?Subroutine67
??CrossCallReturnLabel_179:
        AND     R21, R16
        RET
// 1057 
// 1058 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1059 void CPss21::AlarmsProcessing(void)
??AlarmsProcessing:
// 1060 {
        ST      -Y, R25
        ST      -Y, R24
// 1061     // ќбработаем все дискретные сигналы.
// 1062     for (uint8_t i = 0;
        LDI     R25, 0
        LDI     R24, 96
// 1063             i < DISCRETE_SIGNALS_NUMBER;
// 1064             i++)
// 1065     {
// 1066         m_apxAlarmDfa[i] -> Fsm();
??AlarmsProcessing_1:
        LDI     R16, 2
        MUL     R25, R16
        RCALL   ?Subroutine68
// 1067     }
??CrossCallReturnLabel_84:
        LD      R18, Z
        LDD     R19, Z+1
        RCALL   ?Subroutine38
??CrossCallReturnLabel_49:
        BRNE    ??AlarmsProcessing_1
// 1068 }
        REQUIRE ?Subroutine78
        ;               // Fall through to label ?Subroutine78

        RSEG CODE:CODE:NOROOT(1)
?Subroutine78:
        LD      R24, Y+
        LD      R25, Y+
        RET
// 1069 
// 1070 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1071 void CPss21::ErrorAlarmsProcessing(void)
??ErrorAlarmsProcessing:
// 1072 {
        ST      -Y, R25
        ST      -Y, R24
// 1073     // ќбработаем все дискретные сигналы.
// 1074     for (uint8_t i = 0;
        LDI     R25, 0
        LDI     R24, 2
??ErrorAlarmsProcessing_1:
        LDI     R16, 2
        MUL     R25, R16
        RCALL   ?Subroutine28
// 1075             i < HANDLED_ERROR_NUMBER;
// 1076             i++)
// 1077     {
// 1078         m_apxErrorAlarmDfa[i] -> Fsm();
// 1079     }
??CrossCallReturnLabel_19:
        LDD     R18, Z+7
        LDD     R19, Z+8
        RCALL   ?Subroutine38
??CrossCallReturnLabel_50:
        BRNE    ??ErrorAlarmsProcessing_1
// 1080 }
        RJMP    ?Subroutine78

        RSEG CODE:CODE:NOROOT(1)
?Subroutine38:
        MOVW    R17:R16, R19:R18
        MOVW    R31:R30, R19:R18
        LDD     R18, Z+1
        LDD     R31, Z+2
        MOV     R30, R18
        RCALL   ?Subroutine66
??CrossCallReturnLabel_81:
        INC     R25
        DEC     R24
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine66:
        ADIW    R31:R30, 2
        LPM     R18, Z+
        LPM     R31, Z
        MOV     R30, R18
        IJMP

        RSEG CODE:CODE:NOROOT(1)
?Subroutine28:
        LDI     R30, LOW(??m_xModbusSettings)
        LDI     R31, (??m_xModbusSettings) >> 8
        RJMP    ??Subroutine99_0

        RSEG CODE:CODE:NOROOT(1)
?Subroutine65:
        MOVW    R31:R30, R27:R26
        REQUIRE ??Subroutine99_0
        ;               // Fall through to label ??Subroutine99_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine99_0:
        ADD     R30, R0
        ADC     R31, R1
        RET
// 1081 
// 1082 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1083 uint8_t CPss21::GetDiscreteInputState(uint8_t uiIndex)
??GetDiscreteInputState:
// 1084 {
// 1085 //    // Ќе вышли за границы массива дискретных сигналов?
// 1086 //    if ((uiIndex >= 0) &&
// 1087 //            (uiIndex < (DISCRETE_INPUTS_NUMBER + ALARM_WINDOWS_NUMBER)))
// 1088 //    {
// 1089 //        // ѕолучим состо€ние дискретного сигнала - дискретные входы модулей.
// 1090 //        return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET + uiIndex];
// 1091 //    }
// 1092 //    else
// 1093 //    {
// 1094 //        // ѕолучим состо€ние дискретного сигнала - дискретные входы модулей, вход 0.
// 1095 //        return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET];
// 1096 //    }
// 1097 
// 1098     if (uiIndex < DISCRETE_INPUTS_NUMBER)
// 1099     {
// 1100         // ѕолучим состо€ние дискретного сигнала - дискретные входы модулей.
// 1101         return m_aucRtuDiscreteDataArray[DISCRETE_INPUTS_BIT_ARRAY_OFFSET + uiIndex];
// 1102     }
// 1103     else
// 1104     {
// 1105         // ѕолучим состо€ние дискретного сигнала - состо€ние €чеек(coils Modbus).
// 1106         return m_aucRtuDiscreteDataArray[ALARM_WINDOWS_BIT_ARRAY_OFFSET + (uiIndex - DISCRETE_INPUTS_NUMBER)];
        LDI     R31, 0
        MOV     R30, R16
        SUBI    R30, LOW((-(??m_aucRtuDiscreteDataArray) & 0xFFFF))
        SBCI    R31, (-(??m_aucRtuDiscreteDataArray) & 0xFFFF) >> 8
        LDD     R16, Z+16
        RET
// 1107     }
// 1108 }
// 1109 
// 1110 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1111 void CPss21::SetErrorAlarmState(uint8_t uiIndex, uint8_t uiData)
??SetErrorAlarmState:
// 1112 {
// 1113     // ”становим состо€ние источника ошибки.
// 1114     m_auiErrorAlarmDataArray[uiIndex] = uiData;
        RCALL   ?Subroutine41
??CrossCallReturnLabel_57:
        ST      Z, R17
// 1115 }
        RET
// 1116 
// 1117 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1118 uint8_t CPss21::GetErrorAlarmState(uint8_t uiIndex)
??GetErrorAlarmState:
// 1119 {
// 1120     // ѕолучим состо€ние источника ошибки.
// 1121     return m_auiErrorAlarmDataArray[uiIndex];
        RCALL   ?Subroutine41
??CrossCallReturnLabel_58:
        RJMP    ?Subroutine88
// 1122 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine41:
        LDI     R31, 0
        MOV     R30, R16
        SUBI    R30, LOW((-(??m_xDeviceConfiguration + 60) & 0xFFFF))
        SBCI    R31, HIGH((-(??m_xDeviceConfiguration + 60) & 0xFFFF))
        RET
// 1123 
// 1124 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1125 void CPss21::AlarmTypeSet(uint8_t uiAlarmType)
??AlarmTypeSet:
// 1126 {
        ST      -Y, R24
        MOV     R24, R16
// 1127     m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(uiAlarmType);
        MOV     R18, R16
        RCALL   ?Subroutine60
// 1128     m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(uiAlarmType);
??CrossCallReturnLabel_206:
        MOV     R18, R24
        RCALL   ?Subroutine61
// 1129     m_xStatusLedNotifyerControl.AlarmSet(uiAlarmType);
??CrossCallReturnLabel_208:
        MOV     R18, R24
        RCALL   ?Subroutine62
// 1130     m_xBuzzerNotifyerControl.AlarmSet(uiAlarmType);
??CrossCallReturnLabel_210:
        MOV     R18, R24
        RCALL   ??Subroutine106_0
// 1131 }
??CrossCallReturnLabel_214:
        RJMP    ?Subroutine85
// 1132 
// 1133 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1134 void CPss21::AlarmTypeChange(void)
??AlarmTypeChange:
// 1135 {
// 1136     if (m_uiCommonAlarmType != m_uiCommonAlarmTypePrevious)
        RCALL   ?Subroutine31
??CrossCallReturnLabel_119:
        BREQ    ??CrossCallReturnLabel_185
// 1137     {
// 1138         m_uiCommonAlarmTypePrevious = m_uiCommonAlarmType;
        STD     Z+59, R16
// 1139         AlarmTypeSet(m_uiCommonAlarmType);
        RCALL   ??Subroutine100_0
// 1140     }
// 1141 }
??CrossCallReturnLabel_185:
        RET
// 1142 
// 1143 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1144 void CPss21::AlarmTypeErrorChange(void)
??AlarmTypeErrorChange:
// 1145 {
// 1146     if (m_uiCommonAlarmType != m_uiCommonAlarmTypePrevious)
        RCALL   ?Subroutine31
??CrossCallReturnLabel_120:
        BREQ    ??CrossCallReturnLabel_223
// 1147     {
// 1148         m_uiCommonAlarmTypePrevious = m_uiCommonAlarmType;
        STD     Z+59, R16
// 1149 
// 1150         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
        RCALL   ??Subroutine105_0
// 1151         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1152         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
// 1153         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
// 1154     }
// 1155 }
??CrossCallReturnLabel_223:
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine31:
        LDI     R30, LOW(??m_xDeviceConfiguration)
        LDI     R31, (??m_xDeviceConfiguration) >> 8
        LDD     R16, Z+58
        LDD     R17, Z+59
        RJMP    ?Subroutine84
// 1156 
// 1157 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1158 void CPss21::AlarmTypeReceipt(void)
??AlarmTypeReceipt:
// 1159 {
// 1160     m_uiCommonAlarmType = INDICATION;
        LDI     R16, 1
        REQUIRE ?Subroutine95
        ;               // Fall through to label ?Subroutine95
// 1161     m_uiCommonAlarmTypePrevious = INDICATION;
// 1162     AlarmTypeSet(INDICATION);
// 1163 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine95:
        RCALL   ?Subroutine55
??CrossCallReturnLabel_153:
        REQUIRE ??Subroutine100_0
        ;               // Fall through to label ??Subroutine100_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine100_0:
        RJMP    ??AlarmTypeSet
// 1164 
// 1165 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1166 void CPss21::AlarmTypeReset(void)
??AlarmTypeReset:
// 1167 {
// 1168     m_uiCommonAlarmType = NORMAL;
        LDI     R16, 0
        RJMP    ?Subroutine95
// 1169     m_uiCommonAlarmTypePrevious = NORMAL;
// 1170     AlarmTypeSet(NORMAL);
// 1171 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine55:
        STS     (??m_xDeviceConfiguration + 58), R16
        STS     (??m_xDeviceConfiguration + 59), R16
        RET
// 1172 
// 1173 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1174 void CPss21::NotifyersControlProcessing(void)
??NotifyersControlProcessing:
// 1175 {
// 1176     m_xPreventiveAlarmWindowNotifyerControl.Fsm();
        LDI     R16, LOW((??m_xDeviceConfiguration + 159))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 159))
        RCALL   ?Subroutine96
// 1177     m_xEmergencyAlarmWindowNotifyerControl.Fsm();
??CrossCallReturnLabel_156:
        LDI     R16, LOW((??m_xDeviceConfiguration + 171))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 171))
        RCALL   ?Subroutine96
// 1178     m_xStatusLedNotifyerControl.Fsm();
??CrossCallReturnLabel_155:
        LDI     R16, LOW((??m_xDeviceConfiguration + 183))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 183))
        RCALL   ?Subroutine96
// 1179     m_xBuzzerNotifyerControl.Fsm();
??CrossCallReturnLabel_154:
        LDI     R16, LOW((??m_xDeviceConfiguration + 195))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 195))
        REQUIRE ?Subroutine96
        ;               // Fall through to label ?Subroutine96
// 1180 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine96:
        JMP     ??Fsm
// 1181 
// 1182 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1183 void CPss21::SetAlarmWindowType(uint8_t uiAlarmWindowIndex, uint8_t uiAlarmType)
??SetAlarmWindowType:
// 1184 {
        MOV     R18, R17
// 1185     GetAlarmWindowControlPointer(uiAlarmWindowIndex) -> SetAlarmType(uiAlarmType);
        RCALL   ?Subroutine17
??CrossCallReturnLabel_193:
        MOVW    R31:R30, R17:R16
        SUBI    R30, LOW((-(??m_axAlarmWindowControl) & 0xFFFF))
        SBCI    R31, (-(??m_axAlarmWindowControl) & 0xFFFF) >> 8
        STD     Z+2, R18
// 1186 }
        RET
// 1187 
// 1188 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1189 void CPss21::SaveContextNotifyerControl(void)
??SaveContextNotifyerControl:
// 1190 {
// 1191 //    // —охраним текущее состо€ние автоматов управлени€ извещател€ми.
// 1192 //    m_xPreventiveAlarmWindowNotifyerControl.SetSavedFsmState(m_xPreventiveAlarmWindowNotifyerControl.GetFsmState());
// 1193 //    m_xEmergencyAlarmWindowNotifyerControl.SetSavedFsmState(m_xEmergencyAlarmWindowNotifyerControl.GetFsmState());
// 1194 //    m_xStatusLedNotifyerControl.SetSavedFsmState(m_xStatusLedNotifyerControl.GetFsmState());
// 1195 //    m_xBuzzerNotifyerControl.SetSavedFsmState(m_xBuzzerNotifyerControl.GetFsmState());
// 1196 
// 1197     // —охраним текущее состо€ние извещателей - окон сигнализации.
// 1198     for (uint8_t i = 0;
        RCALL   ??Subroutine101_0
// 1199             i < ALARM_WINDOWS_NUMBER;
// 1200             i++)
// 1201     {
// 1202         m_axAlarmWindowControl[i].SetSavedAlarmType(m_axAlarmWindowControl[i].GetAlarmType());
??CrossCallReturnLabel_191:
        RCALL   ?Subroutine64
??CrossCallReturnLabel_200:
        LDD     R16, Z+2
        STD     Z+3, R16
// 1203         m_axAlarmWindowControl[i].SetSavedActivityState(m_axAlarmWindowControl[i].GetActivityState());
        LD      R16, Z
        STD     Z+1, R16
// 1204     };
        RCALL   ?Subroutine29
??CrossCallReturnLabel_21:
        BRNE    ??CrossCallReturnLabel_191
// 1205 }
        RET
// 1206 
// 1207 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1208 void CPss21::RestoreContextNotifyerControl(void)
??RestoreContextNotifyerControl:
// 1209 {
// 1210 //    // ¬осстановим предыдущее состо€ние автоматов управлени€ извещател€ми.
// 1211 //    m_xPreventiveAlarmWindowNotifyerControl.SetFsmState(m_xPreventiveAlarmWindowNotifyerControl.GetSavedFsmState());
// 1212 //    m_xEmergencyAlarmWindowNotifyerControl.SetFsmState(m_xEmergencyAlarmWindowNotifyerControl.GetSavedFsmState());
// 1213 //    m_xStatusLedNotifyerControl.SetFsmState(m_xStatusLedNotifyerControl.GetSavedFsmState());
// 1214 //    m_xBuzzerNotifyerControl.SetFsmState(m_xBuzzerNotifyerControl.GetSavedFsmState());
// 1215     AlarmTypeSet(GetCommonAlarmType());
        LDS     R16, (??m_xDeviceConfiguration + 58)
        RCALL   ??Subroutine100_0
// 1216 
// 1217     // ¬осстановим предыдущее состо€ние извещателей - окон сигнализации.
// 1218     for (uint8_t i = 0;
??CrossCallReturnLabel_184:
        RCALL   ??Subroutine101_0
// 1219             i < ALARM_WINDOWS_NUMBER;
// 1220             i++)
// 1221     {
// 1222         m_axAlarmWindowControl[i].SetAlarmType(m_axAlarmWindowControl[i].GetSavedAlarmType());
??CrossCallReturnLabel_192:
        RCALL   ?Subroutine64
??CrossCallReturnLabel_201:
        LDD     R16, Z+3
        STD     Z+2, R16
// 1223         m_axAlarmWindowControl[i].SetActivityState(m_axAlarmWindowControl[i].GetSavedActivityState());
        LDD     R16, Z+1
        ST      Z, R16
// 1224     };
        RCALL   ?Subroutine29
??CrossCallReturnLabel_22:
        BRNE    ??CrossCallReturnLabel_192
// 1225 }
        RET
// 1226 
// 1227 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1228 void CPss21::DiscreteSignalsProcessing(void)
??DiscreteSignalsProcessing:
// 1229 {
// 1230     DiscreteOutputControlClear();
        RCALL   ??DiscreteOutputControlClear
// 1231     AlarmsProcessing();
        RCALL   ??AlarmsProcessing
// 1232     ErrorAlarmsProcessing();
        RCALL   ??ErrorAlarmsProcessing
// 1233     SetDiscreteSignalsReceipt(0);
        LDI     R16, 0
        STS     (??m_xDeviceConfiguration + 54), R16
// 1234     SetDiscreteSignalsReset(0);
        STS     (??m_xDeviceConfiguration + 55), R16
// 1235 }
        RET
// 1236 
// 1237 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1238 void CPss21::BoardWindowsUpdate(void)
??BoardWindowsUpdate:
// 1239 {
// 1240     CLightBoard::Set(m_axAlarmWindowControl);
        RJMP    ?Subroutine89
// 1241 }
// 1242 
// 1243 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1244 void CPss21::ActiveAlarmWindowOn(uint8_t uiAlarmType)
??ActiveAlarmWindowOn:
// 1245 {
        RCALL   ?Subroutine1
// 1246     for (uint8_t i = 0;
// 1247             i < ALARM_WINDOWS_NUMBER;
// 1248             i++)
// 1249     {
// 1250         // “ип сигнализации окна и тип сигнализации извещател€ совпадают?
// 1251         if (m_axAlarmWindowControl[i].GetAlarmType() == uiAlarmType)
??CrossCallReturnLabel_186:
        RCALL   ?Subroutine21
??CrossCallReturnLabel_12:
        BRNE    ??CrossCallReturnLabel_16
// 1252         {
// 1253             // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1254             m_axAlarmWindowControl[i].SetActivityState(1);
        RCALL   ?Subroutine26
// 1255         }
// 1256 
// 1257 //        CPss21::m_aucRtuHoldingRegistersArray[i] = m_axAlarmWindowControl[i].GetActivityState();
// 1258     };
??CrossCallReturnLabel_16:
        RCALL   ?Subroutine29
??CrossCallReturnLabel_23:
        BRNE    ??CrossCallReturnLabel_186
// 1259 
// 1260     BoardWindowsUpdate();
        RJMP    ?Subroutine89
// 1261 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine29:
        INC     R18
        DEC     R19
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine26:
        LDI     R16, 1
        ST      Z, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine1:
        MOV     R22, R16
        REQUIRE ??Subroutine101_0
        ;               // Fall through to label ??Subroutine101_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine101_0:
        LDI     R18, 0
        LDI     R19, 48
        LDI     R20, 6
        RET
// 1262 
// 1263 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1264 void CPss21::ActiveAlarmWindowOff(uint8_t uiAlarmType)
??ActiveAlarmWindowOff:
// 1265 {
        RCALL   ?Subroutine1
// 1266     for (uint8_t i = 0;
// 1267             i < ALARM_WINDOWS_NUMBER;
// 1268             i++)
// 1269     {
// 1270         // “ип сигнализации окна и тип сигнализации извещател€ совпадают?
// 1271         if (m_axAlarmWindowControl[i].GetAlarmType() == uiAlarmType)
??CrossCallReturnLabel_187:
        RCALL   ?Subroutine21
??CrossCallReturnLabel_13:
        BREQ    ??ActiveAlarmWindowOff_1
// 1272         {
// 1273             // ƒеактмвируем окно сигнализации, дл€ прекращени€ отображени€ извещателем.
// 1274             m_axAlarmWindowControl[i].SetActivityState(0);
// 1275         }
// 1276         else if (m_axAlarmWindowControl[i].GetAlarmType() == NORMAL)
        TST     R16
        BRNE    ??ActiveAlarmWindowOff_2
// 1277         {
// 1278             // ƒеактмвируем окно сигнализации, дл€ прекращени€ отображени€ извещателем.
// 1279             m_axAlarmWindowControl[i].SetActivityState(0);
??ActiveAlarmWindowOff_1:
        ST      Z, R21
// 1280         }
// 1281 
// 1282 //        CPss21::m_aucRtuHoldingRegistersArray[i] = m_axAlarmWindowControl[i].GetActivityState();
// 1283     };
??ActiveAlarmWindowOff_2:
        RCALL   ?Subroutine29
??CrossCallReturnLabel_24:
        BRNE    ??CrossCallReturnLabel_187
// 1284 
// 1285     BoardWindowsUpdate();
        REQUIRE ?Subroutine89
        ;               // Fall through to label ?Subroutine89
// 1286 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine89:
        RCALL   ?Subroutine75
??CrossCallReturnLabel_139:
        JMP     ??Set

        RSEG CODE:CODE:NOROOT(1)
?Subroutine21:
        RCALL   ?Subroutine64
??CrossCallReturnLabel_204:
        LDD     R16, Z+2
        CP      R16, R22
        RET
// 1287 
// 1288 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1289 void CPss21::AllAlarmWindowOn(uint8_t uiAlarmType)
??AllAlarmWindowOn:
// 1290 {
        RCALL   ?Subroutine1
// 1291 //    CAlarmWindow axAlarmWindowControl[ALARM_WINDOWS_NUMBER];
// 1292 
// 1293     for (uint8_t i = 0;
// 1294             i < ALARM_WINDOWS_NUMBER;
// 1295             i++)
// 1296     {
// 1297         // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1298         m_axAlarmWindowControl[i].SetAlarmType(uiAlarmType);
??CrossCallReturnLabel_188:
        RCALL   ?Subroutine64
??CrossCallReturnLabel_202:
        STD     Z+2, R22
// 1299         // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1300         m_axAlarmWindowControl[i].SetActivityState(1);
        RCALL   ?Subroutine26
// 1301     };
??CrossCallReturnLabel_17:
        RCALL   ?Subroutine29
??CrossCallReturnLabel_25:
        BRNE    ??CrossCallReturnLabel_188
// 1302 
// 1303     BoardWindowsUpdate();
        RJMP    ?Subroutine89
// 1304 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine64:
        MOV     R16, R18
        REQUIRE ?Subroutine73
        REQUIRE ??Subroutine102_0
        ;               // Fall through to label ??Subroutine102_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine102_0:
        LDI     R17, 0
        RCALL   ?Subroutine72
??CrossCallReturnLabel_195:
        REQUIRE ?Subroutine73
        ;               // Fall through to label ?Subroutine73

        RSEG CODE:CODE:NOROOT(1)
?Subroutine73:
        LDI     R30, LOW(??m_axAlarmWindowControl)
        LDI     R31, (??m_axAlarmWindowControl) >> 8
        REQUIRE ??Subroutine103_0
        ;               // Fall through to label ??Subroutine103_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine103_0:
        ADD     R30, R16
        ADC     R31, R17
        RET
// 1305 
// 1306 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1307 void CPss21::ErrorWindowOn(uint8_t uiIndex)
??ErrorWindowOn:
// 1308 {
        RCALL   ?Subroutine1
// 1309     // јктмвируем окна сигнализации - ошибка.
// 1310     for (uint8_t i = 0;
// 1311             i < ALARM_WINDOWS_NUMBER;
// 1312             i++)
// 1313     {
// 1314         if (m_auiErrorLedOn[i])
??CrossCallReturnLabel_189:
        MOV     R30, R18
        LDI     R31, 0
        SUBI    R30, LOW((-(??m_auiErrorLedOn) & 0xFFFF))
        SBCI    R31, (-(??m_auiErrorLedOn) & 0xFFFF) >> 8
        LPM     R16, Z
        TST     R16
        BREQ    ??ErrorWindowOn_1
// 1315         {
// 1316             // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1317             m_axAlarmWindowControl[i].SetAlarmType(INDICATION);
        RCALL   ?Subroutine64
??CrossCallReturnLabel_203:
        LDI     R16, 1
        STD     Z+2, R16
// 1318             m_axAlarmWindowControl[i].SetActivityState(1);
        ST      Z, R16
// 1319         }
// 1320     };
??ErrorWindowOn_1:
        RCALL   ?Subroutine29
??CrossCallReturnLabel_26:
        BRNE    ??CrossCallReturnLabel_189
// 1321 
// 1322     if (uiIndex < ALARM_WINDOWS_NUMBER)
        CPI     R22, 48
        BRCC    ??CrossCallReturnLabel_11
// 1323     {
// 1324         m_axAlarmWindowControl[uiIndex].SetAlarmType(NORMAL);
        MOV     R16, R22
        RCALL   ?Subroutine20
// 1325         m_axAlarmWindowControl[uiIndex].SetActivityState(0);
// 1326     }
// 1327 
// 1328     BoardWindowsUpdate();
??CrossCallReturnLabel_11:
        RJMP    ?Subroutine89
// 1329 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine20:
        RCALL   ??Subroutine102_0
??CrossCallReturnLabel_199:
        STD     Z+2, R21
// 1330 
// 1331 //-----------------------------------------------------------------------------------------------------
// 1332 void CPss21::AllAlarmWindowOff(void)
// 1333 {
// 1334     for (uint8_t i = 0;
// 1335             i < ALARM_WINDOWS_NUMBER;
// 1336             i++)
// 1337     {
// 1338         // ƒеактмвируем окно сигнализации, дл€ прекращени€ отображени€ извещателем.
// 1339         m_axAlarmWindowControl[i].SetAlarmType(NORMAL);
// 1340         // ƒеактмвируем окно сигнализации, дл€ прекращени€ отображени€ извещателем.
// 1341         m_axAlarmWindowControl[i].SetActivityState(0);
        ST      Z, R21
        RET
// 1342     };
// 1343 
// 1344     BoardWindowsUpdate();
// 1345 }
// 1346 
// 1347 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1348 void CPss21::TestMainCycle(void)
??TestMainCycle:
// 1349 {
// 1350     CPss21::m_xModbusRtuOne.Fsm();
        RCALL   ?Subroutine7
// 1351 
// 1352     CPss21::KeyStateProcessing();
// 1353 
// 1354     NotifyersControlProcessing();
// 1355 
// 1356     CPss21::ReceiptResetGlobalFlagsClear();
??CrossCallReturnLabel_0:
        REQUIRE ?Subroutine79
        ;               // Fall through to label ?Subroutine79
// 1357 
// 1358     CPlatform::WatchdogReset();
// 1359 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine79:
        RCALL   ?Subroutine53
??CrossCallReturnLabel_114:
        REQUIRE ??Subroutine104_0
        ;               // Fall through to label ??Subroutine104_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine104_0:
        WDR
        RET
// 1360 
// 1361 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1362 void CPss21::ErrorMainCycle(void)
??ErrorMainCycle:
// 1363 {
// 1364     CPss21::m_xModbusRtuOne.Fsm();
        RCALL   ?Subroutine58
// 1365 
// 1366     CPss21::KeyStateProcessing();
??CrossCallReturnLabel_78:
        RCALL   ??KeyStateProcessing
// 1367 
// 1368     // ≈сть команда - "квитировать"?
// 1369     if ((GetPanelReceipt()) ||
// 1370             (GetExternalReceipt()) ||
// 1371             (GetModbusReceipt()))
        RCALL   ?Subroutine32
??CrossCallReturnLabel_36:
        LDD     R16, Z+48
        TST     R16
        BRNE    ??ErrorMainCycle_1
        LDD     R16, Z+50
        TST     R16
        BRNE    ??ErrorMainCycle_1
        LDD     R16, Z+52
        TST     R16
        BREQ    ??CrossCallReturnLabel_213
// 1372     {
// 1373 //        m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1374 //        m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1375         m_xStatusLedNotifyerControl.AlarmSet(NORMAL);
??ErrorMainCycle_1:
        LDI     R18, 0
        RCALL   ?Subroutine62
// 1376         m_xBuzzerNotifyerControl.AlarmSet(NORMAL);
??CrossCallReturnLabel_211:
        LDI     R18, 0
        RCALL   ??Subroutine106_0
// 1377     }
// 1378 
// 1379     NotifyersControlProcessing();
??CrossCallReturnLabel_213:
        RCALL   ??NotifyersControlProcessing
// 1380 
// 1381     CPss21::ReceiptResetGlobalFlagsClear();
        RJMP    ?Subroutine79
// 1382 
// 1383     CPlatform::WatchdogReset();
// 1384 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine62:
        LDI     R16, LOW((??m_xDeviceConfiguration + 183))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 183))
        JMP     ??AlarmSet_3

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDeviceConfiguration:
        DS8 20
??m_xModbusRtuLinkControl:
        DS8 11
??m_aucRtuHoldingRegistersArray:
        DS8 16
??m_uiFsmState:
        DS8 1
??m_uiPanelReceipt:
        DS8 1
??m_uiPanelReset:
        DS8 1
??m_uiExternalReceipt:
        DS8 1
??m_uiExternalReset:
        DS8 1
??m_uiModbusReceipt:
        DS8 1
??m_uiModbusReset:
        DS8 1
??m_uiDiscreteSignalsReceipt:
        DS8 1
??m_uiDiscreteSignalsReset:
        DS8 1
??m_uiErrorCode:
        DS8 1
??m_uiModuleIndex:
        DS8 1
??m_uiCommonAlarmType:
        DS8 1
??m_uiCommonAlarmTypePrevious:
        DS8 1
??m_auiErrorAlarmDataArray:
        DS8 2
uiMapTestCounter:
        DS8 1
??m_aucRtuInputRegistersArray:
        DS8 16
??m_xReceiptKey:
        DS8 15
??m_xResetKey:
        DS8 15
??m_xCheckKey:
        DS8 15
??m_xExternalKey:
        DS8 15
??m_xEventUniteLogicAndOne:
        DS8 14
??m_xMainCycleTimer:
        DS8 6
??m_xPreventiveAlarmWindowNotifyerControl:
        DS8 12
??m_xEmergencyAlarmWindowNotifyerControl:
        DS8 12
??m_xStatusLedNotifyerControl:
        DS8 12
??m_xBuzzerNotifyerControl:
        DS8 12
??m_xDiscreteOutputDataBase:
        DS8 24

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_aucRtuDiscreteDataArray:
        DS8 120

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_auiReceiveMessageBuff:
        DS8 256

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_auiIntermediateBuff:
        DS8 256

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_auiSpiRxBuffer:
        DS8 64

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_auiSpiTxBuffer:
        DS8 64

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_uiType:
        DS8 1

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xDeviceConfigSearch:
        DS8 9
??m_apxDrivers:
        DS8 6

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xUart1:
        DS8 47

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_1:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xModbusRtuOne:
        DS8 49

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_3:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_5:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_7:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_9:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_11:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_13:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_15:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_17:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_19:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_21:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_23:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_25:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_xModbusSettings:
        DS8 7
??m_apxErrorAlarmDfa:
        DS8 4
??m_xDeviceState:
        DS8 8

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_apxAlarmDfa:
        DS8 192

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_axDiscreteOutputControl:
        DS8 16

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??m_axAlarmWindowControl:
        DS8 288

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
?_27:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
?Subroutine14:
        LDS     R16, (??m_xDeviceConfiguration + 56)
        DEC     R16
        RCALL   ??ErrorWindowOn
        LDI     R16, 0
        STS     (??m_xDeviceConfiguration + 56), R16
        REQUIRE ??Subroutine105_0
        ;               // Fall through to label ??Subroutine105_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine105_0:
        LDI     R18, 1
        RCALL   ?Subroutine60
??CrossCallReturnLabel_205:
        LDI     R18, 1
        RCALL   ?Subroutine61
??CrossCallReturnLabel_207:
        LDI     R18, 6
        RCALL   ?Subroutine62
??CrossCallReturnLabel_209:
        LDI     R18, 6
        REQUIRE ??Subroutine106_0
        ;               // Fall through to label ??Subroutine106_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine106_0:
        LDI     R16, LOW((??m_xDeviceConfiguration + 195))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 195))
        JMP     ??AlarmSet

        RSEG CODE:CODE:NOROOT(1)
?Subroutine61:
        LDI     R16, LOW((??m_xDeviceConfiguration + 171))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 171))
        JMP     ??AlarmSet_2

        RSEG CODE:CODE:NOROOT(1)
?Subroutine60:
        LDI     R16, LOW((??m_xDeviceConfiguration + 159))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 159))
        JMP     ??AlarmSet_1
// 1385 
// 1386 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1387 void CPss21::LinkControlErrorMainCycle(void)
??LinkControlErrorMainCycle:
// 1388 {
// 1389     CPss21::m_xModbusRtuOne.Fsm();
        RCALL   ?Subroutine5
// 1390     CPss21::m_xModbusRtuLinkControl.Fsm();
// 1391 
// 1392     CPss21::KeyStateProcessing();
// 1393 
// 1394     NotifyersControlProcessing();
// 1395 
// 1396     CPss21::ReceiptResetGlobalFlagsClear();
??CrossCallReturnLabel_86:
        RCALL   ?Subroutine53
// 1397 
// 1398     CDataStore::Fsm();
??CrossCallReturnLabel_113:
        RCALL   ?Subroutine57
// 1399 
// 1400     CPlatform::WatchdogReset();
??CrossCallReturnLabel_75:
        RJMP    ??Subroutine104_0
// 1401 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine53:
        RJMP    ??ReceiptResetGlobalFlagsClear
// 1402 uint8_t uiMapTestCounter = 0;
// 1403 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
// 1404 void CPss21::MainFsm(void)
??MainFsm:
// 1405 {
        RCALL   ?Subroutine40
// 1406     switch (GetFsmState())
??CrossCallReturnLabel_56:
        LDI     R26, LOW(??m_xDeviceConfiguration)
        LDI     R27, (??m_xDeviceConfiguration) >> 8
        LDS     R16, (??m_xDeviceConfiguration + 47)
        LDI     R30, LOW(`?<Jumptable for MainFsm>_0`)
        LDI     R31, (`?<Jumptable for MainFsm>_0`) >> 16
        OUT     0x3B, R31
        LDI     R31, HIGH(`?<Jumptable for MainFsm>_0`)
        JMP     ?CV_SWITCH_L06
// 1407     {
// 1408     case START:
// 1409         CPlatform::WatchdogEnable();
??MainFsm_1:
        WDR
        IN      R16, 0x21
        ORI     R16, 0x18
        OUT     0x21, R16
        IN      R16, 0x21
        ORI     R16, 0x07
        OUT     0x21, R16
// 1410         CPlatform::Init();
        CALL    ??Init_3
// 1411         CPss21::Init();
        RCALL   ??Init
// 1412         CBuzzer::Init();
        CALL    ??Init_4
// 1413         if (!(CDataBase::Check()))
        CALL    ??Check
        TST     R16
        BREQ    ??MainFsm_2
// 1414         {
// 1415             SetFsmState(ERROR_START);
// 1416         }
// 1417         else
// 1418         {
// 1419             CPss21::ConfigurationInit();
        RCALL   ??ConfigurationInit
// 1420             CPss21::ModbusInit();
        RCALL   ??ModbusInit
// 1421             CSpi::Init();
        CALL    ??Init_5
// 1422             CPss21::AddressBusInit();
        RCALL   ??AddressBusInit
// 1423             CPss21::SearchModules();
        RCALL   ??SearchModules
// 1424             CPss21::CreateDevices();
        RCALL   ??CreateDevices
// 1425             m_xBuzzerNotifyerControl.AlarmSet(BEEP_SIGNAL);
        LDI     R18, 7
        RCALL   ??Subroutine106_0
// 1426             SetFsmState(MAIN_CYCLE_START_WAITING);
??CrossCallReturnLabel_212:
        RJMP    ??MainFsm_3
// 1427         }
// 1428         break;
// 1429 
// 1430     case RESTART:
// 1431         break;
// 1432 
// 1433     case MAIN_CYCLE_START_WAITING:
// 1434         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_4:
        RCALL   ?Subroutine7
// 1435 
// 1436         CPss21::KeyStateProcessing();
// 1437 
// 1438         NotifyersControlProcessing();
// 1439 
// 1440         CDataStore::Fsm();
??CrossCallReturnLabel_1:
        RCALL   ?Subroutine9
// 1441 
// 1442         if (CPss21::m_xMainCycleTimer.IsOverflow())
??CrossCallReturnLabel_226:
        BRNE    $+2+2
        RJMP    ??CrossCallReturnLabel_73
// 1443         {
// 1444             CPss21::m_xMainCycleTimer.Reset();
        RCALL   ?Subroutine63
??CrossCallReturnLabel_239:
        CALL    ??Reset
// 1445             CPlatform::WatchdogReset();
        WDR
// 1446             SetModuleIndex(0);
        LDI     R16, 0
        STS     (??m_xDeviceConfiguration + 57), R16
// 1447             SetFsmState(MAIN_CYCLE_MODULES_INTERACTION);
        LDI     R16, 3
        RJMP    ??MainFsm_5
// 1448         }
// 1449 
// 1450         break;
// 1451 
// 1452     case MAIN_CYCLE_MODULES_INTERACTION:
// 1453         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_6:
        RCALL   ?Subroutine5
// 1454         CPss21::m_xModbusRtuLinkControl.Fsm();
// 1455 
// 1456         CPss21::KeyStateProcessing();
// 1457 
// 1458         NotifyersControlProcessing();
// 1459 
// 1460         CDataStore::Fsm();
??CrossCallReturnLabel_87:
        RCALL   ?Subroutine57
// 1461 
// 1462         if (CPss21::ModulesInteraction(GetModuleIndex()))
??CrossCallReturnLabel_74:
        LDS     R16, (??m_xDeviceConfiguration + 57)
        RCALL   ??ModulesInteraction
        TST     R16
        BREQ    ??MainFsm_7
// 1463         {
// 1464             SetFsmState(MAIN_CYCLE_DISCRETE_SIGNALS_PROCESSING);
        LDI     R16, 4
        RCALL   ?Subroutine52
// 1465         }
??CrossCallReturnLabel_69:
        RJMP    ??MainFsm_8
// 1466         else
// 1467         {
// 1468             SetModuleIndex(GetModuleIndex() + 1);
??MainFsm_7:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+57
        INC     R16
        STD     Z+57, R16
// 1469         }
// 1470 
// 1471         switch (GetErrorCode())
??MainFsm_8:
        LDS     R16, (??m_xDeviceConfiguration + 56)
        SUBI    R16, 3
        BREQ    ??MainFsm_2
        DEC     R16
        BREQ    ??MainFsm_2
        DEC     R16
        BREQ    ??MainFsm_9
        RJMP    ??CrossCallReturnLabel_73
// 1472         {
// 1473 //        case IMD_ERROR:
// 1474 //        case OMD_ERROR:
// 1475         case CFG_ERROR:
// 1476         case DB_ERROR:
// 1477             SetFsmState(ERROR_START);
??MainFsm_2:
        LDI     R16, 12
        RJMP    ??MainFsm_5
// 1478             break;
// 1479 
// 1480         case MBS_ERROR:
// 1481             SetFsmState(LINK_CONTROL_ERROR_START);
??MainFsm_9:
        LDI     R16, 14
        RJMP    ??MainFsm_5
// 1482             break;
// 1483 
// 1484         default:
// 1485             break;
// 1486         }
// 1487         break;
// 1488 
// 1489     case MAIN_CYCLE_DISCRETE_SIGNALS_PROCESSING:
// 1490         CPss21::DiscreteSignalsProcessing();
??MainFsm_10:
        RCALL   ??DiscreteSignalsProcessing
// 1491         SetFsmState(MAIN_CYCLE_END);
        LDI     R16, 5
        RJMP    ??MainFsm_5
// 1492         break;
// 1493 
// 1494     case MAIN_CYCLE_END:
// 1495         CPss21::ReceiptResetGlobalFlagsClear();
??MainFsm_11:
        RCALL   ?Subroutine53
// 1496         SetFsmState(MAIN_CYCLE_START_WAITING);
??CrossCallReturnLabel_112:
        RJMP    ??MainFsm_3
// 1497         break;
// 1498 
// 1499 //-----------------------------------------------------------------------------------------------------
// 1500     case MAP_CREATE_START:
// 1501         uiMapTestCounter = 0;
??MainFsm_12:
        LDI     R16, 0
        STS     (??m_xDeviceConfiguration + 62), R16
// 1502         SetFsmState(MAP_CREATE_WINDOW_ON);
        RJMP    ??MainFsm_13
// 1503 
// 1504         CPlatform::WatchdogReset();
// 1505         break;
// 1506 
// 1507     case MAP_CREATE_WINDOW_ON:
// 1508         CPss21::m_aucRtuHoldingRegistersArray[0] = uiMapTestCounter + 1;
??MainFsm_14:
        LDS     R16, (??m_xDeviceConfiguration + 62)
        MOV     R24, R16
        LDI     R25, 0
        ADIW    R25:R24, 1
        MOVW    R31:R30, R27:R26
        STD     Z+31, R24
        STD     Z+32, R25
// 1509         if (uiMapTestCounter != 48)
        CPI     R16, 48
        BREQ    ??MainFsm_15
// 1510         {
// 1511             CPss21::AllAlarmWindowOff();
        RCALL   ??AllAlarmWindowOff
// 1512             // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1513             m_axAlarmWindowControl[uiMapTestCounter].SetAlarmType(INDICATION);
        LDS     R16, (??m_xDeviceConfiguration + 62)
        RCALL   ?Subroutine17
??CrossCallReturnLabel_194:
        RCALL   ?Subroutine73
??CrossCallReturnLabel_198:
        LDI     R16, 1
        STD     Z+2, R16
// 1514             // јктмвизируем окно сигнализации, дл€ отображени€ извещателем.
// 1515             m_axAlarmWindowControl[uiMapTestCounter].SetActivityState(1);
        ST      Z, R16
// 1516             BoardWindowsUpdate();
        RCALL   ?Subroutine75
??CrossCallReturnLabel_136:
        CALL    ??Set
// 1517             SetFsmState(MAP_CREATE_ON);
        LDI     R16, 8
// 1518         }
        RJMP    ??MainFsm_16
// 1519         else
// 1520         {
// 1521             SetFsmState(MAP_CREATE_START);
??MainFsm_15:
        LDI     R16, 6
// 1522         }
        RJMP    ??MainFsm_16
// 1523 
// 1524         CPlatform::WatchdogReset();
// 1525         break;
// 1526 
// 1527     case MAP_CREATE_ON:
// 1528         TestMainCycle();
// 1529         break;
// 1530 
// 1531     case MAP_CREATE_NEXT_WINDOW:
// 1532         uiMapTestCounter++;
??MainFsm_17:
        ADIW    R27:R26, 62
        LD      R16, X
        INC     R16
        ST      X, R16
// 1533         SetFsmState(MAP_CREATE_WINDOW_ON);
??MainFsm_13:
        LDI     R16, 7
        RJMP    ??MainFsm_16
// 1534 
// 1535         CPlatform::WatchdogReset();
// 1536         break;
// 1537 
// 1538 
// 1539 //-----------------------------------------------------------------------------------------------------
// 1540     case TEST_START:
// 1541         SaveContextNotifyerControl();
??MainFsm_18:
        RCALL   ??SaveContextNotifyerControl
// 1542         AlarmTypeSet(PREVENTIVE);
        LDI     R16, 2
        RCALL   ??Subroutine100_0
// 1543         CPss21::AllAlarmWindowOn(PREVENTIVE);
??CrossCallReturnLabel_183:
        LDI     R16, 2
        RCALL   ??AllAlarmWindowOn
// 1544         CPss21::m_xMainCycleTimer.Set(TEST_ON_TIME());
        LDI     R18, 136
        LDI     R19, 19
        RCALL   ??Subroutine108_0
// 1545         SetFsmState(TEST_ON);
??CrossCallReturnLabel_235:
        LDI     R16, 11
        RJMP    ??MainFsm_16
// 1546 
// 1547         CPlatform::WatchdogReset();
// 1548         break;
// 1549 
// 1550     case TEST_ON:
// 1551         if (CPss21::m_xMainCycleTimer.IsOverflow())
??MainFsm_19:
        RCALL   ??Subroutine107_0
??CrossCallReturnLabel_228:
        BREQ    ??CrossCallReturnLabel_70
// 1552         {
// 1553             CPss21::AllAlarmWindowOff();
        RCALL   ?Subroutine6
// 1554             RestoreContextNotifyerControl();
// 1555             CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
// 1556             SetFsmState(MAIN_CYCLE_START_WAITING);
??CrossCallReturnLabel_237:
        LDI     R16, 2
        RCALL   ?Subroutine52
// 1557         }
// 1558 
// 1559         TestMainCycle();
??CrossCallReturnLabel_70:
        RCALL   ??TestMainCycle
// 1560         break;
        RJMP    ??CrossCallReturnLabel_73
// 1561 
// 1562 //-----------------------------------------------------------------------------------------------------
// 1563     case ERROR_START:
// 1564         // ”станавливаем настройки Modbus по умолчанию на текущую сессию.
// 1565         ModbusDefaultInit();
??MainFsm_20:
        RCALL   ??ModbusDefaultInit
// 1566         ErrorWindowOn(GetErrorCode() - 1);
        RCALL   ?Subroutine14
// 1567         SetErrorCode(0);
// 1568 
// 1569         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1570         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1571         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
// 1572         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
// 1573 
// 1574         SetFsmState(ERROR_ON);
??CrossCallReturnLabel_225:
        LDI     R16, 13
        RJMP    ??MainFsm_16
// 1575 
// 1576         CPlatform::WatchdogReset();
// 1577         break;
// 1578 
// 1579     case ERROR_ON:
// 1580         ErrorMainCycle();
??MainFsm_21:
        RCALL   ??ErrorMainCycle
// 1581         break;
        RJMP    ??CrossCallReturnLabel_73
// 1582 
// 1583 //-----------------------------------------------------------------------------------------------------
// 1584     case LINK_CONTROL_ERROR_START:
// 1585         SaveContextNotifyerControl();
??MainFsm_22:
        RCALL   ??SaveContextNotifyerControl
// 1586         ErrorWindowOn(GetErrorCode() - 1);
        RCALL   ?Subroutine14
// 1587         SetErrorCode(0);
// 1588 
// 1589         m_xPreventiveAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1590         m_xEmergencyAlarmWindowNotifyerControl.AlarmSet(INDICATION);
// 1591         m_xStatusLedNotifyerControl.AlarmSet(ERROR);
// 1592         m_xBuzzerNotifyerControl.AlarmSet(ERROR);
// 1593 
// 1594         CPlatform::WatchdogReset();
??CrossCallReturnLabel_224:
        WDR
// 1595         SetFsmState(LINK_CONTROL_ERROR_ON);
        LDI     R16, 15
        RJMP    ??MainFsm_5
// 1596         break;
// 1597 
// 1598     case LINK_CONTROL_ERROR_ON:
// 1599         LinkControlErrorMainCycle();
??MainFsm_23:
        RCALL   ??LinkControlErrorMainCycle
// 1600         break;
        RJMP    ??CrossCallReturnLabel_73
// 1601 
// 1602     case LINK_CONTROL_ERROR_OFF:
// 1603         CPss21::AllAlarmWindowOff();
??MainFsm_24:
        RCALL   ?Subroutine6
// 1604         RestoreContextNotifyerControl();
// 1605         CPss21::m_xMainCycleTimer.Set(MAIN_CYCLE_PERIOD_TIME);
// 1606 
// 1607         CPlatform::WatchdogReset();
??CrossCallReturnLabel_236:
        WDR
// 1608         SetFsmState(MAIN_CYCLE_START_WAITING);
??MainFsm_3:
        LDI     R16, 2
??MainFsm_5:
        RCALL   ?Subroutine52
// 1609         break;
??CrossCallReturnLabel_71:
        RJMP    ??CrossCallReturnLabel_73
// 1610 
// 1611 //-----------------------------------------------------------------------------------------------------
// 1612     case PROGRAMMING_START:
// 1613         // ѕосле приЄма последнего блока базы данных произойдЄт перезагрузка
// 1614         // через "PROGRAMMING_TIME + WDTO_2S", чтобы применить изменени€ конфигурации.
// 1615         CPss21::m_xMainCycleTimer.Set(PROGRAMMING_TIME);
??MainFsm_25:
        LDI     R18, 232
        LDI     R19, 3
        RCALL   ??Subroutine108_0
// 1616         SetFsmState(PROGRAMMING_ON);
??CrossCallReturnLabel_234:
        LDI     R16, 18
        RJMP    ??MainFsm_16
// 1617 
// 1618         CPlatform::WatchdogReset();
// 1619         break;
// 1620 
// 1621     case PROGRAMMING_ON:
// 1622         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_26:
        RCALL   ?Subroutine58
// 1623 
// 1624         CDataStore::Fsm();
??CrossCallReturnLabel_79:
        RCALL   ?Subroutine9
// 1625 
// 1626         if (CPss21::m_xMainCycleTimer.IsOverflow())
??CrossCallReturnLabel_227:
        BREQ    ??CrossCallReturnLabel_72
// 1627         {
// 1628             SetFsmState(REBOOT);
        LDI     R16, 19
??MainFsm_16:
        RCALL   ?Subroutine52
// 1629         }
// 1630 
// 1631         CPlatform::WatchdogReset();
??CrossCallReturnLabel_72:
        WDR
// 1632         break;
        RJMP    ??CrossCallReturnLabel_73
// 1633 
// 1634     case REBOOT:
// 1635         // „ерез "WDTO_2S" - перезагрузка, чтобы применить изменени€ конфигурации.
// 1636         CPss21::m_xModbusRtuOne.Fsm();
??MainFsm_27:
        RCALL   ?Subroutine58
// 1637 
// 1638         CDataStore::Fsm();
??CrossCallReturnLabel_80:
        RCALL   ?Subroutine57
// 1639         break;
// 1640 
// 1641 //-----------------------------------------------------------------------------------------------------
// 1642     default:
// 1643         break;
// 1644     }
// 1645 }
??CrossCallReturnLabel_73:
        RJMP    ?Subroutine91
        REQUIRE _A_WDTCR

        RSEG CODE:CODE:NOROOT(1)
?Subroutine57:
        JMP     ??Fsm_3

        RSEG CODE:CODE:NOROOT(1)
?Subroutine52:
        STS     (??m_xDeviceConfiguration + 47), R16
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine17:
        LDI     R17, 0
        LDI     R20, 6
        REQUIRE ?Subroutine72
        ;               // Fall through to label ?Subroutine72

        RSEG CODE:CODE:NOROOT(1)
?Subroutine72:
        LDI     R21, 0
        RJMP    ?Subroutine92

        RSEG CODE:CODE:NOROOT(1)
?Subroutine58:
        LDI     R16, LOW(??m_xModbusRtuOne)
        LDI     R17, (??m_xModbusRtuOne) >> 8
        JMP     ??Fsm_1

        RSEG CODE:CODE:NOROOT(1)
?Subroutine9:
        CALL    ??Fsm_3
        REQUIRE ??Subroutine107_0
        ;               // Fall through to label ??Subroutine107_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine107_0:
        RCALL   ?Subroutine63
??CrossCallReturnLabel_240:
        CALL    ??IsOverflow
        RJMP    ?Subroutine87

        RSEG CODE:CODE:NOROOT(1)
?Subroutine63:
        LDI     R16, LOW((??m_xDeviceConfiguration + 153))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 153))
        RET

        RSEG CODE:CODE:NOROOT(1)
?Subroutine7:
        RCALL   ?Subroutine58
??CrossCallReturnLabel_77:
        RJMP    ?Subroutine71

        RSEG CODE:CODE:NOROOT(1)
?Subroutine6:
        RCALL   ??AllAlarmWindowOff
        RCALL   ??RestoreContextNotifyerControl
        LDI     R18, 100
        LDI     R19, 0
        REQUIRE ??Subroutine108_0
        ;               // Fall through to label ??Subroutine108_0

        RSEG CODE:CODE:NOROOT(1)
??Subroutine108_0:
        RCALL   ?Subroutine63
??CrossCallReturnLabel_241:
        JMP     ??Set_1

        RSEG CODE:CODE:NOROOT(1)
?Subroutine5:
        RCALL   ?Subroutine58
??CrossCallReturnLabel_76:
        LDI     R16, LOW((??m_xDeviceConfiguration + 20))
        LDI     R17, HIGH((??m_xDeviceConfiguration + 20))
        CALL    ??Fsm_2
        REQUIRE ?Subroutine71
        ;               // Fall through to label ?Subroutine71

        RSEG CODE:CODE:NOROOT(1)
?Subroutine71:
        RCALL   ??KeyStateProcessing
        RJMP    ??NotifyersControlProcessing

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyOneState()
??KeyOneState:
        LDI     R16, 0
        SBIC    0x13, 0x02
        LDI     R16, 1
??KeyOneState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyTwoState()
??KeyTwoState:
        LDI     R16, 0
        SBIC    0x13, 0x01
        LDI     R16, 1
??KeyTwoState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::KeyThreeState()
??KeyThreeState:
        LDI     R16, 0
        SBIC    0x13, 0x00
        LDI     R16, 1
??KeyThreeState_1:
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PINC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CPlatform::ExternalKeyState()
??ExternalKeyState:
        LDS     R17, _A_PING
        ANDI    R17, 0x01
        MOV     R16, R17
        LDI     R17, 1
        EOR     R16, R17
        RET
        REQUIRE _A_PING

        ASEGN ABSOLUTE:DATA:NOROOT,01cH
__?EECR:

        ASEGN ABSOLUTE:DATA:NOROOT,01dH
__?EEDR:

        ASEGN ABSOLUTE:DATA:NOROOT,01eH
__?EEARL:

        ASEGN ABSOLUTE:DATA:NOROOT,01fH
__?EEARH:

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_Z>`:
        DC16    SFE(NEAR_Z) - SFB(NEAR_Z)
        DC16    SFB(NEAR_Z)
        DP      0
        REQUIRE ?need_segment_init

        RSEG NEAR_ID:CODE:ROOT(0)
`?<Initializer for >`:
        DC16 ?_1, ??m_xUart1, `?<Unnamed 0>`/2
`?<Initializer for >_1`:
        DC16 ?_3, ??m_xModbusRtuOne, `?<Unnamed 1>`/2
`?<Initializer for >_2`:
        DC16 ?_5, ??m_xReceiptKey, `?<Unnamed 2>`/2
`?<Initializer for >_3`:
        DC16 ?_7, ??m_xResetKey, `?<Unnamed 2>`/2
`?<Initializer for >_4`:
        DC16 ?_9, ??m_xCheckKey, `?<Unnamed 2>`/2
`?<Initializer for >_5`:
        DC16 ?_11, ??m_xExternalKey, `?<Unnamed 2>`/2
`?<Initializer for >_6`:
        DC16 ?_13, ??m_xEventUniteLogicAndOne, `?<Unnamed 3>`/2
`?<Initializer for >_7`:
        DC16 ?_15, ??m_xMainCycleTimer, `?<Unnamed 4>`/2
`?<Initializer for >_8`:
        DC16 ?_17, ??m_xPreventiveAlarmWindowNotifyerControl, `?<Unnamed 5>`/2
`?<Initializer for >_9`:
        DC16 ?_19, ??m_xEmergencyAlarmWindowNotifyerControl, `?<Unnamed 6>`/2
`?<Initializer for >_10`:
        DC16 ?_21, ??m_xStatusLedNotifyerControl, `?<Unnamed 7>`/2
`?<Initializer for >_11`:
        DC16 ?_23, ??m_xBuzzerNotifyerControl, `?<Unnamed 8>`/2
`?<Initializer for >_12`:
        DC16 ?_25, ??m_xModbusRtuLinkControl, `?<Unnamed 9>`/2
`?<Initializer for >_13`:
        DC16 ?_27, 0H, `?<Unnamed 10>`/2

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_I>`:
        DC16    SFE(NEAR_I) - SFB(NEAR_I)
        DC16    SFB(NEAR_I)
        DP      SFB(NEAR_ID)
        REQUIRE ?need_segment_init

        RSEG DIFUNCT:CODE:ROOT(0)
        REQUIRE ?call_ctors
        DW      ??__sti__routine/2

        RSEG SWITCH:CODE:NOROOT(1)
`?<Jumptable for MainFsm>_0`:
        DB      0
        DB      0
        DW      (??CrossCallReturnLabel_73) /2
        DW      20
        DW      (??MainFsm_1) /2
        DW      (??CrossCallReturnLabel_73) /2
        DW      (??MainFsm_4) /2
        DW      (??MainFsm_6) /2
        DW      (??MainFsm_10) /2
        DW      (??MainFsm_11) /2
        DW      (??MainFsm_12) /2
        DW      (??MainFsm_14) /2
        DW      (??CrossCallReturnLabel_70) /2
        DW      (??MainFsm_17) /2
        DW      (??MainFsm_18) /2
        DW      (??MainFsm_19) /2
        DW      (??MainFsm_20) /2
        DW      (??MainFsm_21) /2
        DW      (??MainFsm_22) /2
        DW      (??MainFsm_23) /2
        DW      (??MainFsm_24) /2
        DW      (??MainFsm_25) /2
        DW      (??MainFsm_26) /2
        DW      (??MainFsm_27) /2

        END
// 1646 
// 
//   105 bytes in segment ABSOLUTE
// 3 528 bytes in segment CODE
//     2 bytes in segment DIFUNCT
//    14 bytes in segment INITTAB
//    70 bytes in segment NEAR_F
//    84 bytes in segment NEAR_I
//    84 bytes in segment NEAR_ID
// 1 646 bytes in segment NEAR_Z
//    46 bytes in segment SWITCH
// 
// 3 680 bytes of CODE memory (+  64 bytes shared)
// 1 730 bytes of DATA memory (+ 105 bytes shared)
//
//Errors: none
//Warnings: 7
