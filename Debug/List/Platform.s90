///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR          15/Oct/2024  00:52:54
// Copyright 1996-2018 IAR Systems AB.
//
//    Source file  =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Platform.cpp
//    Command line =  
//        -f C:\Users\Admin\AppData\Local\Temp\EW7840.tmp
//        (--string_literals_in_flash
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Platform.cpp
//        --cpu=m128a -ms -o
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
//        --initializers_in_flash --root_variables --no_cse --no_inline
//        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
//        -DENABLE_BIT_DEFINITIONS -e -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
//        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
//        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -On
//        --eec++)
//    Locale       =  Russian_RUS.1251
//    List file    =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\Platform.s90
//
///////////////////////////////////////////////////////////////////////////////

        NAME Platform

        RSEG CSTACK:DATA:NOROOT(0)
        RSEG RSTACK:DATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?EPILOGUE_B10_L09
        EXTERN ?EPILOGUE_B16_L09
        EXTERN ?EPILOGUE_B4_L09
        EXTERN ?EPILOGUE_B5_L09
        EXTERN ?EPILOGUE_B6_L09
        EXTERN ?EPILOGUE_B8_L09
        EXTERN ?L_EC_MUL_L03
        EXTERN ?PROLOGUE10_L09
        EXTERN ?PROLOGUE16_L09
        EXTERN ?PROLOGUE4_L09
        EXTERN ?PROLOGUE5_L09
        EXTERN ?PROLOGUE6_L09
        EXTERN ?PROLOGUE8_L09
        EXTERN ?Register_R10_is_cg_reg
        EXTERN ?Register_R11_is_cg_reg
        EXTERN ?Register_R12_is_cg_reg
        EXTERN ?Register_R13_is_cg_reg
        EXTERN ?Register_R14_is_cg_reg
        EXTERN ?Register_R15_is_cg_reg
        EXTERN ?Register_R4_is_cg_reg
        EXTERN ?Register_R5_is_cg_reg
        EXTERN ?Register_R6_is_cg_reg
        EXTERN ?Register_R7_is_cg_reg
        EXTERN ?Register_R8_is_cg_reg
        EXTERN ?Register_R9_is_cg_reg
        EXTERN ?S_SHL_L02
        EXTERN ?UL_DIVMOD_L03
        EXTERN ?UL_SHR_L03
        EXTERN ?need_segment_init

        PUBWEAK `?<Segment init: NEAR_Z>`
        PUBLIC ??BuzzerTimerFrequencySet
        PUBLIC ??BuzzerTimerStop
        PUBLIC ??CEeprom
        PUBLIC ??CPlatform
        PUBLIC ??CSpi
        PUBLIC ??CUart
        PUBLIC ??CUart_1
        PUBLIC ??Close
        PUBLIC ??Disable
        PUBLIC ??Disable_1
        PUBLIC ??EEPROM_EE_READY
        PUBWEAK `??EEPROM_EE_READY::??INTVEC 88`
        PUBLIC ??Enable
        PUBLIC ??Enable_1
        PUBLIC ??Exchange
        PUBLIC ??Exchange_1
        PUBWEAK ??ExternalKeySetPinInput
        PUBWEAK ??GetAddress
        PUBWEAK ??GetBlockLength
        PUBWEAK ??GetBlockOffset
        PUBWEAK ??GetBlockPointer
        PUBWEAK ??GetBufferByteCounter
        PUBWEAK ??GetBufferPointer
        PUBWEAK ??GetLength
        PUBWEAK ??IncrementSystemTick
        PUBLIC ??Init
        PUBLIC ??Init_1
        PUBLIC ??Init_2
        PUBWEAK ??InterruptDisable
        PUBWEAK ??InterruptEnable
        PUBWEAK ??KeyOneSetPinInput
        PUBWEAK ??KeyThreeSetPinInput
        PUBWEAK ??KeyTwoSetPinInput
        PUBLIC ??Open
        PUBLIC ??Read
        PUBLIC ??ReadBlock
        PUBLIC ??ReadByte
        PUBLIC ??Read_1
        PUBLIC ??Read_2
        PUBLIC ??Read_3
        PUBWEAK ??ReadyInterruptDisaable
        PUBLIC ??ReadyInterruptHandler
        PUBLIC ??RecvInterruptHandler
        PUBLIC ??Reset
        PUBLIC ??Rs485RtsOff
        PUBLIC ??Rs485RtsOn
        PUBLIC ??SIG_UART1_DATA
        PUBWEAK `??SIG_UART1_DATA::??INTVEC 124`
        PUBLIC ??SIG_UART1_RECV
        PUBWEAK `??SIG_UART1_RECV::??INTVEC 120`
        PUBLIC ??SIG_UART1_TXC
        PUBWEAK `??SIG_UART1_TXC::??INTVEC 128`
        PUBWEAK ??SetAddress
        PUBWEAK ??SetBufferByteCounter
        PUBWEAK ??SetBufferIsWrited
        PUBWEAK ??SetBufferPointer
        PUBWEAK ??SetErrorCode
        PUBWEAK ??SetLength
        PUBWEAK ??StatusLedSetPinOutput
        PUBLIC ??SystemTickInit
        PUBLIC ??SystemTickInterrupt
        PUBWEAK `??SystemTickInterrupt::??INTVEC 36`
        PUBLIC ??TransmitDisable
        PUBLIC ??TransmitEnable
        PUBWEAK ??TxLedOff
        PUBWEAK ??TxLedSetPinOutput
        PUBLIC ??TxcInterruptHandler
        PUBLIC ??UdreInterruptHandler
        PUBWEAK ??WatchdogReset
        PUBLIC ??Write
        PUBLIC ??WriteByte
        PUBLIC ??WriteInterrupt
        PUBLIC ??Write_1
        PUBWEAK ??__vtbl
        PUBWEAK ??__vtbl_1
        PUBWEAK ??__vtbl_2
        PUBWEAK ??__vtbl_6
        PUBLIC ??axDataBaseBlocksPositionData
        PUBLIC ??delay_mins
        PUBLIC ??delay_ms
        PUBLIC ??delay_s
        PUBLIC ??m_bBufferIsWrited
        PUBLIC ??m_nuiBufferByteCounter
        PUBLIC ??m_puiBuffer
        PUBLIC ??m_pxUart1
        PUBLIC ??m_uiAddress
        PUBLIC ??m_uiLength
        PUBLIC ??m_uiSystemTick
        PUBLIC ??m_uiWatchDogStepID
        PUBLIC `??new CEeprom`
        PUBLIC `??new CPlatform`
        PUBLIC `??new CSpi`
        PUBLIC `??new CUart`
        PUBLIC `??new CUart_1`
        PUBLIC ??xMainDataBase
        PUBLIC `?~CEeprom`
        PUBLIC `?~CPlatform`
        PUBLIC `?~CSpi`
        PUBLIC `?~CUart`
        PUBWEAK _A_ACSR
        PUBWEAK _A_ADC
        PUBWEAK _A_ADCSRA
        PUBWEAK _A_ADMUX
        PUBWEAK _A_ASSR
        PUBWEAK _A_DDRA
        PUBWEAK _A_DDRB
        PUBWEAK _A_DDRC
        PUBWEAK _A_DDRD
        PUBWEAK _A_DDRE
        PUBWEAK _A_DDRF
        PUBWEAK _A_DDRG
        PUBWEAK _A_EEAR
        PUBWEAK _A_EECR
        PUBWEAK _A_EEDR
        PUBWEAK _A_EICRA
        PUBWEAK _A_EICRB
        PUBWEAK _A_EIFR
        PUBWEAK _A_EIMSK
        PUBWEAK _A_ETIFR
        PUBWEAK _A_ETIMSK
        PUBWEAK _A_ICR1
        PUBWEAK _A_ICR3
        PUBWEAK _A_MCUCR
        PUBWEAK _A_MCUCSR
        PUBWEAK _A_OCDR
        PUBWEAK _A_OCR0
        PUBWEAK _A_OCR1A
        PUBWEAK _A_OCR1B
        PUBWEAK _A_OCR1C
        PUBWEAK _A_OCR2
        PUBWEAK _A_OCR3A
        PUBWEAK _A_OCR3B
        PUBWEAK _A_OCR3C
        PUBWEAK _A_OSCCAL
        PUBWEAK _A_PINA
        PUBWEAK _A_PINB
        PUBWEAK _A_PINC
        PUBWEAK _A_PIND
        PUBWEAK _A_PINE
        PUBWEAK _A_PINF
        PUBWEAK _A_PING
        PUBWEAK _A_PORTA
        PUBWEAK _A_PORTB
        PUBWEAK _A_PORTC
        PUBWEAK _A_PORTD
        PUBWEAK _A_PORTE
        PUBWEAK _A_PORTF
        PUBWEAK _A_PORTG
        PUBWEAK _A_RAMPZ
        PUBWEAK _A_SFIOR
        PUBWEAK _A_SP
        PUBWEAK _A_SPCR
        PUBWEAK _A_SPDR
        PUBWEAK _A_SPMCSR
        PUBWEAK _A_SPSR
        PUBWEAK _A_SREG
        PUBWEAK _A_TCCR0
        PUBWEAK _A_TCCR1A
        PUBWEAK _A_TCCR1B
        PUBWEAK _A_TCCR1C
        PUBWEAK _A_TCCR2
        PUBWEAK _A_TCCR3A
        PUBWEAK _A_TCCR3B
        PUBWEAK _A_TCCR3C
        PUBWEAK _A_TCNT0
        PUBWEAK _A_TCNT1
        PUBWEAK _A_TCNT2
        PUBWEAK _A_TCNT3
        PUBWEAK _A_TIFR
        PUBWEAK _A_TIMSK
        PUBWEAK _A_TWAR
        PUBWEAK _A_TWBR
        PUBWEAK _A_TWCR
        PUBWEAK _A_TWDR
        PUBWEAK _A_TWSR
        PUBWEAK _A_UBRR0H
        PUBWEAK _A_UBRR0L
        PUBWEAK _A_UBRR1H
        PUBWEAK _A_UBRR1L
        PUBWEAK _A_UCSR0A
        PUBWEAK _A_UCSR0B
        PUBWEAK _A_UCSR0C
        PUBWEAK _A_UCSR1A
        PUBWEAK _A_UCSR1B
        PUBWEAK _A_UCSR1C
        PUBWEAK _A_UDR0
        PUBWEAK _A_UDR1
        PUBWEAK _A_WDTCR
        PUBWEAK _A_XDIV
        PUBWEAK _A_XMCRA
        PUBWEAK _A_XMCRB
        PUBWEAK __?EEARH
        PUBWEAK __?EEARL
        PUBWEAK __?EECR
        PUBWEAK __?EEDR
        PUBLIC uiInterruptCounter

`?<Name CPss21 0>`  SYMBOL "CPss21"
??m_uiErrorCode     SYMBOL "m_uiErrorCode", `?<Name CPss21 0>`
??m_xModbusSettings SYMBOL "m_xModbusSettings", `?<Name CPss21 0>`
`?<Name CPlatform 10>` SYMBOL "CPlatform"
`?<Name CEeprom 18>` SYMBOL "CEeprom"
`?<Name CSpi 23>`   SYMBOL "CSpi"
`?<Name CUart 26>`  SYMBOL "CUart"

`??EEPROM_EE_READY::??INTVEC 88` SYMBOL "??INTVEC 88", ??EEPROM_EE_READY
`?<Name CFlash 69>` SYMBOL "CFlash"

`??SIG_UART1_DATA::??INTVEC 124` SYMBOL "??INTVEC 124", ??SIG_UART1_DATA

`??SIG_UART1_RECV::??INTVEC 120` SYMBOL "??INTVEC 120", ??SIG_UART1_RECV

`??SIG_UART1_TXC::??INTVEC 128` SYMBOL "??INTVEC 128", ??SIG_UART1_TXC

`??SystemTickInterrupt::??INTVEC 36` SYMBOL "??INTVEC 36", ??SystemTickInterrupt
??__vtbl            SYMBOL "__vtbl", `?<Name CUart 26>`
??__vtbl_1          SYMBOL "__vtbl", `?<Name CEeprom 18>`
??__vtbl_2          SYMBOL "__vtbl", `?<Name CPlatform 10>`
??__vtbl_6          SYMBOL "__vtbl", `?<Name CSpi 23>`
??axDataBaseBlocksPositionData SYMBOL "axDataBaseBlocksPositionData", `?<Name CFlash 69>`
??m_bBufferIsWrited SYMBOL "m_bBufferIsWrited", `?<Name CEeprom 18>`
??m_nuiBufferByteCounter SYMBOL "m_nuiBufferByteCounter", `?<Name CEeprom 18>`
??m_puiBuffer       SYMBOL "m_puiBuffer", `?<Name CEeprom 18>`
??m_pxUart1         SYMBOL "m_pxUart1", `?<Name CPlatform 10>`
??m_uiAddress       SYMBOL "m_uiAddress", `?<Name CEeprom 18>`
??m_uiLength        SYMBOL "m_uiLength", `?<Name CEeprom 18>`
??m_uiSystemTick    SYMBOL "m_uiSystemTick", `?<Name CPlatform 10>`
??m_uiWatchDogStepID SYMBOL "m_uiWatchDogStepID", `?<Name CPlatform 10>`
??xMainDataBase     SYMBOL "xMainDataBase", `?<Name CFlash 69>`

        EXTERN ??m_uiErrorCode
        EXTERN ??m_xModbusSettings
        EXTERN `??operator delete`
        EXTERN `??operator new`
        EXTERN ??usCrc16

// D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Platform.cpp
//    1 //-----------------------------------------------------------------------------------------------------
//    2 //  Source      : FileName.cpp
//    3 //  Created     : 01.06.2022
//    4 //  Author      : Alexandr Volvenkin
//    5 //  email       : aav-36@mail.ru
//    6 //  GitHub      : https://github.com/AlexandrVolvenkin
//    7 //-----------------------------------------------------------------------------------------------------
//    8 #include <cstddef>
//    9 
//   10 #include "Platform.h"

        ASEGN ABSOLUTE:DATA:ROOT,09dH
// union <unnamed> volatile __io _A_UCSR1C
_A_UCSR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09cH
// union <unnamed> volatile __io _A_UDR1
_A_UDR1:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09bH
// union <unnamed> volatile __io _A_UCSR1A
_A_UCSR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09aH
// union <unnamed> volatile __io _A_UCSR1B
_A_UCSR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,099H
// union <unnamed> volatile __io _A_UBRR1L
_A_UBRR1L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,098H
// union <unnamed> volatile __io _A_UBRR1H
_A_UBRR1H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,095H
// union <unnamed> volatile __io _A_UCSR0C
_A_UCSR0C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,090H
// union <unnamed> volatile __io _A_UBRR0H
_A_UBRR0H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08cH
// union <unnamed> volatile __io _A_TCCR3C
_A_TCCR3C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08bH
// union <unnamed> volatile __io _A_TCCR3A
_A_TCCR3A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08aH
// union <unnamed> volatile __io _A_TCCR3B
_A_TCCR3B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,088H
// union <unnamed> volatile __io _A_TCNT3
_A_TCNT3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,086H
// union <unnamed> volatile __io _A_OCR3A
_A_OCR3A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,084H
// union <unnamed> volatile __io _A_OCR3B
_A_OCR3B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,082H
// union <unnamed> volatile __io _A_OCR3C
_A_OCR3C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,080H
// union <unnamed> volatile __io _A_ICR3
_A_ICR3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,07dH
// union <unnamed> volatile __io _A_ETIMSK
_A_ETIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07cH
// union <unnamed> volatile __io _A_ETIFR
_A_ETIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07aH
// union <unnamed> volatile __io _A_TCCR1C
_A_TCCR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,078H
// union <unnamed> volatile __io _A_OCR1C
_A_OCR1C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,074H
// union <unnamed> volatile __io _A_TWCR
_A_TWCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,073H
// union <unnamed> volatile __io _A_TWDR
_A_TWDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,072H
// union <unnamed> volatile __io _A_TWAR
_A_TWAR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,071H
// union <unnamed> volatile __io _A_TWSR
_A_TWSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,070H
// union <unnamed> volatile __io _A_TWBR
_A_TWBR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06fH
// union <unnamed> volatile __io _A_OSCCAL
_A_OSCCAL:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06dH
// union <unnamed> volatile __io _A_XMCRA
_A_XMCRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06cH
// union <unnamed> volatile __io _A_XMCRB
_A_XMCRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06aH
// union <unnamed> volatile __io _A_EICRA
_A_EICRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,068H
// union <unnamed> volatile __io _A_SPMCSR
_A_SPMCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,065H
// union <unnamed> volatile __io _A_PORTG
_A_PORTG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,064H
// union <unnamed> volatile __io _A_DDRG
_A_DDRG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,063H
// union <unnamed> volatile __io _A_PING
_A_PING:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,062H
// union <unnamed> volatile __io _A_PORTF
_A_PORTF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,061H
// union <unnamed> volatile __io _A_DDRF
_A_DDRF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05fH
// union <unnamed> volatile __io _A_SREG
_A_SREG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05dH
// union <unnamed> volatile __io _A_SP
_A_SP:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,05cH
// union <unnamed> volatile __io _A_XDIV
_A_XDIV:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05bH
// union <unnamed> volatile __io _A_RAMPZ
_A_RAMPZ:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05aH
// union <unnamed> volatile __io _A_EICRB
_A_EICRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,059H
// union <unnamed> volatile __io _A_EIMSK
_A_EIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,058H
// union <unnamed> volatile __io _A_EIFR
_A_EIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,057H
// union <unnamed> volatile __io _A_TIMSK
_A_TIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,056H
// union <unnamed> volatile __io _A_TIFR
_A_TIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,055H
// union <unnamed> volatile __io _A_MCUCR
_A_MCUCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,054H
// union <unnamed> volatile __io _A_MCUCSR
_A_MCUCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,053H
// union <unnamed> volatile __io _A_TCCR0
_A_TCCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,052H
// union <unnamed> volatile __io _A_TCNT0
_A_TCNT0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,051H
// union <unnamed> volatile __io _A_OCR0
_A_OCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,050H
// union <unnamed> volatile __io _A_ASSR
_A_ASSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04fH
// union <unnamed> volatile __io _A_TCCR1A
_A_TCCR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04eH
// union <unnamed> volatile __io _A_TCCR1B
_A_TCCR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04cH
// union <unnamed> volatile __io _A_TCNT1
_A_TCNT1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,04aH
// union <unnamed> volatile __io _A_OCR1A
_A_OCR1A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,048H
// union <unnamed> volatile __io _A_OCR1B
_A_OCR1B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,046H
// union <unnamed> volatile __io _A_ICR1
_A_ICR1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,045H
// union <unnamed> volatile __io _A_TCCR2
_A_TCCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,044H
// union <unnamed> volatile __io _A_TCNT2
_A_TCNT2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,043H
// union <unnamed> volatile __io _A_OCR2
_A_OCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,042H
// union <unnamed> volatile __io _A_OCDR
_A_OCDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,041H
// union <unnamed> volatile __io _A_WDTCR
_A_WDTCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,040H
// union <unnamed> volatile __io _A_SFIOR
_A_SFIOR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03eH
// union <unnamed> volatile __io _A_EEAR
_A_EEAR:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,03dH
// union <unnamed> volatile __io _A_EEDR
_A_EEDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03cH
// union <unnamed> volatile __io _A_EECR
_A_EECR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03bH
// union <unnamed> volatile __io _A_PORTA
_A_PORTA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03aH
// union <unnamed> volatile __io _A_DDRA
_A_DDRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,039H
// union <unnamed> volatile __io _A_PINA
_A_PINA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,038H
// union <unnamed> volatile __io _A_PORTB
_A_PORTB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,037H
// union <unnamed> volatile __io _A_DDRB
_A_DDRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,036H
// union <unnamed> volatile __io _A_PINB
_A_PINB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,035H
// union <unnamed> volatile __io _A_PORTC
_A_PORTC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,034H
// union <unnamed> volatile __io _A_DDRC
_A_DDRC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,033H
// union <unnamed> volatile __io _A_PINC
_A_PINC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,032H
// union <unnamed> volatile __io _A_PORTD
_A_PORTD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,031H
// union <unnamed> volatile __io _A_DDRD
_A_DDRD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,030H
// union <unnamed> volatile __io _A_PIND
_A_PIND:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02fH
// union <unnamed> volatile __io _A_SPDR
_A_SPDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02eH
// union <unnamed> volatile __io _A_SPSR
_A_SPSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02dH
// union <unnamed> volatile __io _A_SPCR
_A_SPCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02cH
// union <unnamed> volatile __io _A_UDR0
_A_UDR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02bH
// union <unnamed> volatile __io _A_UCSR0A
_A_UCSR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02aH
// union <unnamed> volatile __io _A_UCSR0B
_A_UCSR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,029H
// union <unnamed> volatile __io _A_UBRR0L
_A_UBRR0L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,028H
// union <unnamed> volatile __io _A_ACSR
_A_ACSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,027H
// union <unnamed> volatile __io _A_ADMUX
_A_ADMUX:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,026H
// union <unnamed> volatile __io _A_ADCSRA
_A_ADCSRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,024H
// union <unnamed> volatile __io _A_ADC
_A_ADC:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,023H
// union <unnamed> volatile __io _A_PORTE
_A_PORTE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,022H
// union <unnamed> volatile __io _A_DDRE
_A_DDRE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,021H
// union <unnamed> volatile __io _A_PINE
_A_PINE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,020H
// union <unnamed> volatile __io _A_PINF
_A_PINF:
        DS8 1
//   11 #include "Pss21.h"
//   12 #include "Crc.h"
//   13 
//   14 
//   15 // ATMega128a
//   16 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   17 CUart::CUart()
??CUart:
//   18 {
        LDI     R18, LOW(??__vtbl)
        LDI     R19, (??__vtbl) >> 8
        MOVW    R31:R30, R17:R16
        SUBI    R30, 99
        SBCI    R31, 255
        ST      Z, R18
        STD     Z+1, R19
//   19 
//   20 }
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CUart &CUart::new CUart()
`??new CUart`:
        LDI     R16, 159
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CUart_2`
        RCALL   ??CUart
        RET
`??new CUart_2`:
        LDI     R16, 0
        LDI     R17, 0
        RET
//   21 
//   22 //    uint16_t CUart::m_nuiRxBuffByteCounter;
//   23 //    uint8_t CUart::m_auiIntermediateBuff[UART_INTERMEDIATE_BUFF_LENGTH];
//   24 //    bool CUart::m_bfByteIsReceived;
//   25 //    bool CUart::m_bfRxBuffOverflow;
//   26 
//   27 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   28 CUart::CUart(volatile uint8_t *ubrrh, volatile uint8_t *ubrrl,
??CUart_1:
//   29              volatile uint8_t *ucsra, volatile uint8_t *ucsrb,
//   30              volatile uint8_t *ucsrc, volatile uint8_t *udr,
//   31              volatile uint8_t *rs485DirectionPort, volatile uint8_t rs485DirectionPin,
//   32              volatile uint8_t *rs485OutputPort, volatile uint8_t rs485OutputPin) :
        CALL    ?PROLOGUE10_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R9:R8, R19:R18
        MOVW    R7:R6, R21:R20
        MOVW    R5:R4, R23:R22
        LDD     R24, Y+10
        LDD     R25, Y+11
        LDD     R2, Y+12
        LDD     R3, Y+13
        LDD     R0, Y+14
        LDD     R1, Y+15
        LDD     R22, Y+16
        LDD     R23, Y+17
        LDD     R18, Y+19
        LDD     R19, Y+20
        LDI     R20, LOW(??__vtbl)
        LDI     R21, (??__vtbl) >> 8
        MOVW    R31:R30, R27:R26
        SUBI    R30, 99
        SBCI    R31, 255
        ST      Z, R20
        STD     Z+1, R21
//   33     m_UBRRH(ubrrh), m_UBRRL(ubrrl), m_UCSRA(ucsra),
        MOVW    R31:R30, R27:R26
        ST      Z, R8
        STD     Z+1, R9
        MOVW    R31:R30, R27:R26
        STD     Z+2, R6
        STD     Z+3, R7
        MOVW    R31:R30, R27:R26
        STD     Z+4, R4
        STD     Z+5, R5
//   34     m_UCSRB(ucsrb), m_UCSRC(ucsrc), m_UDR(udr),
        MOVW    R31:R30, R27:R26
        STD     Z+6, R24
        STD     Z+7, R25
        MOVW    R31:R30, R27:R26
        STD     Z+8, R2
        STD     Z+9, R3
        MOVW    R31:R30, R27:R26
        STD     Z+10, R0
        STD     Z+11, R1
//   35     m_rs485DirectionPort(rs485DirectionPort), m_rs485DirectionPin(rs485DirectionPin), m_rs485OutputPort(rs485OutputPort), m_rs485OutputPin(rs485OutputPin)
        MOVW    R31:R30, R27:R26
        STD     Z+12, R22
        STD     Z+13, R23
        LDD     R16, Y+18
        MOVW    R31:R30, R27:R26
        STD     Z+14, R16
        MOVW    R31:R30, R27:R26
        STD     Z+15, R18
        STD     Z+16, R19
        LDD     R16, Y+21
        MOVW    R31:R30, R27:R26
        STD     Z+17, R16
//   36 {
//   37     if (m_rs485DirectionPort)
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+12
        LDD     R17, Z+13
        OR      R16, R17
        BREQ    ??CUart_2
//   38     {
//   39         uint8_t uiData = m_rs485DirectionPin;
        MOVW    R31:R30, R27:R26
        LDD     R21, Z+14
//   40         *m_rs485DirectionPort |= _BV(uiData);
        LDI     R16, 1
        LDI     R17, 0
        MOV     R20, R21
        CALL    ?S_SHL_L02
        MOV     R20, R16
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+12
        LDD     R17, Z+13
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        OR      R16, R20
        ST      Z, R16
//   41         uiData = m_rs485OutputPin;
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+17
        MOV     R21, R16
//   42         *m_rs485OutputPort &= ~(_BV(uiData));
        LDI     R16, 1
        LDI     R17, 0
        MOV     R20, R21
        CALL    ?S_SHL_L02
        MOV     R20, R16
        COM     R20
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+15
        LDD     R17, Z+16
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        AND     R16, R20
        ST      Z, R16
//   43     }
//   44 }
??CUart_2:
        MOVW    R17:R16, R27:R26
        LDI     R30, 22
        JMP     ?EPILOGUE_B10_L09

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CUart &CUart::new CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
`??new CUart_1`:
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R11:R10, R17:R16
        MOVW    R15:R14, R19:R18
        MOVW    R13:R12, R21:R20
        MOVW    R9:R8, R23:R22
        LDD     R6, Y+16
        LDD     R7, Y+17
        LDD     R4, Y+18
        LDD     R5, Y+19
        LDD     R26, Y+20
        LDD     R27, Y+21
        LDD     R24, Y+23
        LDD     R25, Y+24
        LDI     R16, 159
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CUart_3`
        LDD     R18, Y+25
        ST      -Y, R18
        ST      -Y, R25
        ST      -Y, R24
        LDD     R18, Y+25
        ST      -Y, R18
        ST      -Y, R27
        ST      -Y, R26
        ST      -Y, R5
        ST      -Y, R4
        ST      -Y, R7
        ST      -Y, R6
        ST      -Y, R9
        ST      -Y, R8
        MOVW    R23:R22, R13:R12
        MOVW    R21:R20, R15:R14
        MOVW    R19:R18, R11:R10
        RCALL   ??CUart_1
        RJMP    `??new CUart_4`
`??new CUart_3`:
        LDI     R16, 0
        LDI     R17, 0
`??new CUart_4`:
        LDI     R30, 26
        JMP     ?EPILOGUE_B16_L09
//   45 
//   46 //-----------------------------------------------------------------------------------------------------
//   47 CUart::~CUart()
//   48 {
//   49 
//   50 }
//   51 
//   52 //-----------------------------------------------------------------------------------------------------
//   53 void CUart::Init(uint32_t ulBaudRate,
//   54                  uint8_t ucParity,
//   55                  uint8_t uiDataBits,
//   56                  uint8_t ucStopBit,
//   57                  uint8_t *puiRxBuffer,
//   58                  uint8_t *puiTxBuffer)
//   59 {
//   60 //    m_puiRxBuffer = puiRxBuffer;
//   61 //    m_puiTxBuffer = puiTxBuffer;
//   62 
//   63     /* Set the baud rate */
//   64     uint16_t uiBaudRateTemp = static_cast<uint16_t>((F_CPU / (ulBaudRate * 16UL) - 1));
//   65 //    uint16_t uiBaudRateTemp = static_cast<uint16_t>(CPss21::m_xModbusSettings.BaudRate);//(F_CPU / (ulBaudRate * 16UL) - 1);//
//   66     *m_UBRRL = static_cast<uint8_t>(uiBaudRateTemp);
//   67     *m_UBRRH = static_cast<uint8_t>(uiBaudRateTemp >> 8);
//   68 
//   69     *m_UCSRC = (CPss21::m_xModbusSettings.LinkParam &	// 2 стоп-бита, 8 бит данных
//   70                 (BIT(UPM11)|BIT(UPM10)|BIT(USBS1))) |
//   71                (BIT(UCSZ11)|BIT(UCSZ10));
//   72 
//   73 //    /* Set data bits (7, 8 bits) */
//   74 //    switch (uiDataBits)
//   75 //    {
//   76 //    case 8:
//   77 //        *m_UCSRC |= (1 << UCSZ00) | (1 << UCSZ01);
//   78 //        break;
//   79 //    case 7:
//   80 //        *m_UCSRC |= (1 << UCSZ01);
//   81 //        break;
//   82 //    }
//   83 //
//   84 //    /* Set parity */
//   85 //    if (ucParity == 'N')
//   86 //    {
//   87 //        /* None */
//   88 //    }
//   89 //    else if (ucParity == 'E')
//   90 //    {
//   91 //        /* Even */
//   92 //        *m_UCSRC |= (1 << UPM01);
//   93 //    }
//   94 //    else
//   95 //    {
//   96 //        /* Odd */
//   97 //        *m_UCSRC |= (1 << UPM01) | (1 << UPM00);
//   98 //    }
//   99 //
//  100 //    /* Stop bit (1 or 2) */
//  101 //    if (ucStopBit == 1)
//  102 //    {
//  103 //        *m_UCSRC &= ~(1 << USBS0);
//  104 //    }
//  105 //    else if (ucStopBit == 2) /* 2 */
//  106 //    {
//  107 //        *m_UCSRC |= (1 << USBS0);
//  108 //    }
//  109 }
//  110 
//  111 //-----------------------------------------------------------------------------------------------------
//  112 void CUart::Reset(void)
//  113 {
//  114     m_nuiRxBuffByteCounter = 0;
//  115     m_bfByteIsReceived = 0;
//  116     m_bfFrameIsSended = 0;
//  117     m_bfRxBuffOverflow = 0;
//  118 }
//  119 
//  120 //-----------------------------------------------------------------------------------------------------
//  121 void CUart::Open(void)
//  122 {
//  123     *m_UCSRA |= (1 << RXC0) | (1 << TXC0);
//  124     *m_UCSRB |= (1 << RXEN0) | (1 << TXEN0);
//  125 }
//  126 
//  127 //-----------------------------------------------------------------------------------------------------
//  128 void CUart::Close(void)
//  129 {
//  130     *m_UCSRB &= ~((1 << RXEN0) | (1 << RXCIE0));
//  131     *m_UCSRB &= ~((1 << TXEN0) | (1 << TXCIE0));
//  132     *m_UCSRB &= ~((1 << UDRIE0));
//  133 }
//  134 
//  135 //-----------------------------------------------------------------------------------------------------
//  136 void CUart::Enable(void)
//  137 {
//  138     *m_UCSRA |= (1 << RXC0);
//  139     *m_UCSRB |= (1 << RXEN0) | (1 << RXCIE0);
//  140 }
//  141 
//  142 //-----------------------------------------------------------------------------------------------------
//  143 void CUart::Disable(void)
//  144 {
//  145     *m_UCSRB &= ~((1 << RXEN0) | (1 << RXCIE0));
//  146 }
//  147 
//  148 //-----------------------------------------------------------------------------------------------------
//  149 void CUart::Rs485RtsOn(void)
//  150 {
//  151     uint8_t uiData = m_rs485OutputPin;
//  152     *m_rs485OutputPort |= (1 << uiData);
//  153 }
//  154 
//  155 //-----------------------------------------------------------------------------------------------------
//  156 void CUart::Rs485RtsOff(void)
//  157 {
//  158     uint8_t uiData = m_rs485OutputPin;
//  159     *m_rs485OutputPort &= ~(1 << uiData);
//  160 }
//  161 
//  162 //-----------------------------------------------------------------------------------------------------
//  163 void CUart::TransmitEnable(void)
//  164 {
//  165     if (m_rs485DirectionPort)
//  166     {
//  167         Rs485RtsOn();
//  168     }
//  169 
//  170     *m_UCSRA |= (1 << TXC0) | (1 << UDRE0);
//  171     *m_UCSRB |= (1 << TXEN0) | (1 << UDRIE0);
//  172 
//  173 }
//  174 
//  175 //-----------------------------------------------------------------------------------------------------
//  176 void CUart::TransmitDisable(void)
//  177 {
//  178     *m_UCSRB &= ~((1 << TXEN0) | (1 << TXCIE0) | (1 << UDRIE0));
//  179 
//  180     if (m_rs485DirectionPort)
//  181     {
//  182         Rs485RtsOff();
//  183     }
//  184 }
//  185 
//  186 //-----------------------------------------------------------------------------------------------------
//  187 int16_t CUart::Write(uint8_t *puiSource, uint16_t uiLength)
//  188 {
//  189     m_puiTxBuffer = (uint8_t*)puiSource;
//  190     m_nuiTxBuffByteCounter = uiLength;
//  191 
//  192     return 1;
//  193 }
//  194 
//  195 //-----------------------------------------------------------------------------------------------------
//  196 int16_t CUart::Read(uint8_t *puiDestination, uint16_t uiLength)
//  197 {
//  198     m_bfByteIsReceived = 0;
//  199 
//  200     if (m_bfRxBuffOverflow)
//  201     {
//  202         return -1;
//  203     }
//  204 
//  205     if (uiLength <= m_nuiRxBuffByteCounter)
//  206     {
//  207         return -1;
//  208     }
//  209     else if (m_nuiRxBuffByteCounter)
//  210     {
//  211         CPlatform::InterruptDisable();
//  212 
//  213         for (int16_t i = 0; i < m_nuiRxBuffByteCounter; i++)
//  214         {
//  215             puiDestination[i] = m_auiIntermediateBuff[i];
//  216         }
//  217 
//  218         uint8_t uiCounter = m_nuiRxBuffByteCounter;
//  219         m_nuiRxBuffByteCounter = 0;
//  220 
//  221         CPlatform::InterruptEnable();
//  222 
//  223         return uiCounter;
//  224     }
//  225     else if (0 == m_nuiRxBuffByteCounter)
//  226     {
//  227         return 0;
//  228     }
//  229     return 0;
//  230 }
//  231 
//  232 //-----------------------------------------------------------------------------------------------------
//  233 void CUart::UdreInterruptHandler(void)
//  234 {
//  235     if (m_nuiTxBuffByteCounter == 0)
//  236     {
//  237         *m_UCSRB &= ~((1 << UDRIE0));
//  238         *m_UCSRA |= (1 << TXC0);
//  239         *m_UCSRB |= (1 << TXCIE0);
//  240         return;
//  241     }
//  242     *m_UDR = *m_puiTxBuffer++;
//  243     m_nuiTxBuffByteCounter--;
//  244 }
//  245 
//  246 //-----------------------------------------------------------------------------------------------------
//  247 void CUart::TxcInterruptHandler(void)
//  248 {
//  249     *m_UCSRB &= ~((1 << TXCIE0));
//  250     TransmitDisable();
//  251     m_bfFrameIsSended = 1;
//  252     return;
//  253 }
//  254 

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  255 uint8_t uiInterruptCounter = 0;
uiInterruptCounter:
        DS8 1
//  256 //-----------------------------------------------------------------------------------------------------
//  257 void CUart::RecvInterruptHandler(void)
//  258 {
//  259     uiInterruptCounter++;
//  260     // промежуточный буфер приёма переполнен?
//  261     if (m_nuiRxBuffByteCounter >=
//  262             UART_INTERMEDIATE_BUFF_LENGTH)
//  263     {
//  264         m_bfRxBuffOverflow = 1;
//  265         m_bfByteIsReceived = 1;
//  266     }
//  267     else
//  268     {
//  269         m_auiIntermediateBuff[m_nuiRxBuffByteCounter++] = *m_UDR;
//  270         m_bfByteIsReceived = 1;
//  271     }
//  272 }
//  273 
//  274 ////-----------------------------------------------------------------------------------------------------
//  275 //// Прерывание по пустому регистру данных UDR
//  276 //#pragma vector = USART0_UDRE_vect
//  277 //__interrupt void SIG_UART0_DATA(void)
//  278 //{
//  279 //    CPlatform::m_pxUart0 -> UdreInterruptHandler();
//  280 //}
//  281 //
//  282 ////-----------------------------------------------------------------------------------------------------
//  283 //// Прерывание по завершению передачи UART
//  284 //#pragma vector = USART0_TX_vect
//  285 //__interrupt void SIG_UART0_TXC(void)
//  286 //{
//  287 //    CPlatform::m_pxUart0 -> TxcInterruptHandler();
//  288 //}
//  289 //
//  290 ////-----------------------------------------------------------------------------------------------------
//  291 //// Прерывание по завершению приема UART
//  292 //#pragma vector = USART0_RX_vect
//  293 //__interrupt void SIG_UART0_RECV(void)
//  294 //{
//  295 //    CPlatform::m_pxUart0 -> RecvInterruptHandler();
//  296 //}
//  297 
//  298 //-----------------------------------------------------------------------------------------------------
//  299 // Прерывание по пустому регистру данных UDR
//  300 #pragma vector = USART1_UDRE_vect
//  301 __interrupt void SIG_UART1_DATA(void)
//  302 {
//  303     CPlatform::m_pxUart1 -> UdreInterruptHandler();
//  304 }
//  305 
//  306 //-----------------------------------------------------------------------------------------------------
//  307 // Прерывание по завершению передачи UART
//  308 #pragma vector = USART1_TX_vect
//  309 __interrupt void SIG_UART1_TXC(void)
//  310 {
//  311     CPlatform::m_pxUart1 -> TxcInterruptHandler();
//  312 }
//  313 
//  314 //-----------------------------------------------------------------------------------------------------
//  315 // Прерывание по завершению приема UART
//  316 #pragma vector = USART1_RX_vect
//  317 __interrupt void SIG_UART1_RECV(void)
//  318 {
//  319     CPlatform::m_pxUart1 -> RecvInterruptHandler();
//  320 }
//  321 
//  322 //-----------------------------------------------------------------------------------------------------
//  323 
//  324 
//  325 
//  326 //----------------------------------------- EEPROM ----------------------------------------------------------------

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  327 uint8_t* CEeprom::m_puiBuffer;
??m_puiBuffer:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  328 uint16_t CEeprom::m_uiAddress;
??m_uiAddress:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  329 uint16_t CEeprom::m_nuiBufferByteCounter;
??m_nuiBufferByteCounter:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  330 uint16_t CEeprom::m_uiLength;
??m_uiLength:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  331 bool CEeprom::m_bBufferIsWrited;
??m_bBufferIsWrited:
        DS8 1
//  332 
//  333 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  334 CEeprom::CEeprom()
??CEeprom:
//  335 {
        LDI     R18, LOW(??__vtbl_1)
        LDI     R19, (??__vtbl_1) >> 8
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        STD     Z+1, R19
//  336 
//  337 }
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CEeprom &CEeprom::new CEeprom()
`??new CEeprom`:
        LDI     R16, 2
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CEeprom_1`
        RCALL   ??CEeprom
        RET
`??new CEeprom_1`:
        LDI     R16, 0
        LDI     R17, 0
        RET

        RSEG NEAR_F:CODE:ROOT(0)
// __vtbl_entry const __flash CUart::__vtbl[1]
??__vtbl:
        DC16 `?~CUart`/2

        RSEG NEAR_F:CODE:ROOT(0)
// __vtbl_entry const __flash CEeprom::__vtbl[1]
??__vtbl_1:
        DC16 `?~CEeprom`/2

        RSEG NEAR_F:CODE:ROOT(0)
// __vtbl_entry const __flash CPlatform::__vtbl[1]
??__vtbl_2:
        DC16 `?~CPlatform`/2

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
// __vtbl_entry const __flash CSpi::__vtbl[1]
??__vtbl_6:
        DC16 `?~CSpi`/2
//  338 
//  339 //-----------------------------------------------------------------------------------------------------
//  340 CEeprom::~CEeprom()
//  341 {
//  342 
//  343 }
//  344 
//  345 //-----------------------------------------------------------------------------------------------------
//  346 uint8_t CEeprom::Read(uint8_t *puiDestination, uint16_t uiSource, uint16_t uiLength)
//  347 {
//  348     while (uiLength != 0)
//  349     {
//  350         *puiDestination++ = ReadByte(uiSource++);
//  351         uiLength--;
//  352     }
//  353     return 1;
//  354 }
//  355 
//  356 //-----------------------------------------------------------------------------------------------------
//  357 uint8_t CEeprom::Write(uint16_t uiDestination, uint8_t *puiSource, uint16_t uiLength)
//  358 {
//  359     while (uiLength != 0)
//  360     {
//  361         WriteByte((uiDestination++), (*puiSource++));
//  362         uiLength--;
//  363     }
//  364     return 1;
//  365 }
//  366 
//  367 //-----------------------------------------------------------------------------------------------------
//  368 uint8_t CEeprom::ReadByte(uint16_t uiSource)
//  369 {
//  370     __watchdog_reset();
//  371     while (BitIsSet(EECR, EEWE))
//  372     {
//  373         __watchdog_reset();
//  374     }
//  375     __disable_interrupt();
//  376     EEAR = uiSource;
//  377     SetBit(EECR, EERE);
//  378     __enable_interrupt();
//  379     return EEDR;
//  380 }
//  381 
//  382 //-----------------------------------------------------------------------------------------------------
//  383 void CEeprom::WriteByte(uint16_t uiDestination, uint8_t uiData)
//  384 {
//  385     if (ReadByte(uiDestination) != uiData)
//  386     {
//  387         __watchdog_reset();
//  388         while (BitIsSet(EECR, EEWE))
//  389         {
//  390             __watchdog_reset();
//  391         }
//  392         __disable_interrupt();
//  393         EEAR = uiDestination;
//  394         EEDR = uiData;
//  395         EECR |= (1<<EEMWE);
//  396         EECR |= (1<<EEWE);
//  397         __enable_interrupt();
//  398     }
//  399 }
//  400 
//  401 //-----------------------------------------------------------------------------------------------------
//  402 void CEeprom::WriteInterrupt(uint16_t uiDestination, uint8_t *puiSource, uint16_t uiLength)
//  403 {
//  404     SetAddress(uiDestination);
//  405     SetBufferPointer(puiSource);
//  406     SetLength(uiLength);
//  407     SetBufferByteCounter(0);
//  408 }
//  409 
//  410 //-----------------------------------------------------------------------------------------------------
//  411 // Прерывание по завершению записи.
//  412 void CEeprom::ReadyInterruptHandler(void)
//  413 {
//  414     if (GetBufferByteCounter() < GetLength())
//  415     {
//  416         EEAR = GetAddress();
//  417         SetAddress(GetAddress() + 1);
//  418         EECR |= BIT(EERE);
//  419 
//  420         if (EEDR != GetBufferPointer()[GetBufferByteCounter()])
//  421         {
//  422             EEDR = GetBufferPointer()[GetBufferByteCounter()];
//  423             EECR |= BIT(EEMWE);
//  424             EECR |= BIT(EEWE);
//  425         }
//  426 
//  427         SetBufferByteCounter(GetBufferByteCounter() + 1);
//  428     }
//  429     else
//  430     {
//  431         ReadyInterruptDisaable();
//  432         EEAR   = 0x0000;			// Обнуляем для безопасности
//  433         SetBufferIsWrited(true);
//  434     }
//  435 }
//  436 
//  437 //-----------------------------------------------------------------------------------------------------
//  438 // Прерывание по завершению записи.
//  439 #pragma vector = EE_READY_vect
//  440 __interrupt void EEPROM_EE_READY(void)
//  441 {
//  442     CEeprom::ReadyInterruptHandler();
//  443 }
//  444 
//  445 //-----------------------------------------------------------------------------------------------------
//  446 
//  447 
//  448 
//  449 
//  450 
//  451 
//  452 
//  453 
//  454 //-----------------------------------------------------------------------------------------------------
//  455 // Основной блок БД прибора

        RSEG NEAR_F:CODE:ROOT(0)
//  456 TDataBase __flash CFlash::xMainDataBase =
??xMainDataBase:
        DC8 2, 1, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC16 2671
        DC8 1, 47, 8, 115, 6, 0, 0
        DC16 6935
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC16 61630
        DC8 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18
        DC8 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35
        DC8 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC16 23289
        DC8 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3
        DC8 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2
        DC8 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2
        DC16 16697
        DC8 62, 62, 62, 62, 60, 60, 60, 60, 255, 255, 255, 255, 255, 255, 255
        DC8 255, 255, 255, 255, 255, 255, 255, 255, 255
        DC16 28491
        DC8 1, 2, 4, 8, 16, 32, 64, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        DC16 59545
        DC8 1, 1, 2
        DC16 16
        DC8 32, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0
        DC16 57891
        DC8 1, 1, 5
        DC16 0
        DC8 255, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0
        DC16 40059
        DC8 1, 1, 5
        DC16 1
        DC8 255, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0, 0, 0
        DC16 0
        DC8 0
        DC16 27899
        DC8 0, 0, 0, 0, 0, 0, 0, 0
        DC16 2880
        DC8 0, 0, 0, 0, 0, 0, 0, 0
        DC16 2880
//  457 {
//  458     {
//  459         2,1,48,false,false,false,false,0,0,{ 0,0,0,0,0,0,0,0,0,0,0,0 }
//  460     },0x0A6F,
//  461 
//  462 //    {
//  463 //        2,1,48,false,false,0,{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0 }
//  464 //    },0x0A6F,
//  465 
//  466     {
//  467         1,47,BIT(USBS1),0x73,BIT(CS02)|BIT(CS01),0x00,0x00
//  468     },0x1B17,
//  469 
//  470     {
//  471         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  472         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//  473     },0xF0BE,
//  474 
//  475     {
//  476         0, 1, 2, 3, 4, 5, 6, 7,
//  477         8, 9, 10, 11, 12, 13, 14, 15,
//  478         16, 17, 18, 19, 20, 21, 22, 23,
//  479         24, 25, 26, 27, 28, 29, 30, 31,
//  480         32, 33, 34, 35, 36, 37, 38, 39,
//  481         40, 41, 42, 43, 44, 45, 46, 47,
//  482         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  483         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  484         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  485         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  486         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  487         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  488         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  489         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  490         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
//  491         0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
//  492     },0x5AF9,
//  493 
//  494     {
//  495         0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
//  496         0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
//  497         0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
//  498         0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
//  499         0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
//  500         0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
//  501         0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
//  502         0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02
//  503     },0x4139,
//  504 
//  505     {
//  506         { 0x3E,0x3E,0x3E,0x3E,0x3C,0x3C,0x3C,0x3C },
//  507         { 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF },
//  508         { 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF }
//  509     },0x6F4B,
//  510 
//  511     {
//  512         0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,
//  513         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  514         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  515         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  516         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  517         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  518         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  519         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  520         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  521         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  522         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  523         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  524         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  525         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  526         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  527         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//  528     },0xE899,
//  529 
//  530     {
//  531         1,
//  532         {
//  533             {
//  534                 1,0x02,0x0010,0x20
//  535             },
//  536             {
//  537                 0,0,0,0
//  538             },
//  539             {
//  540                 0,0,0,0
//  541             },
//  542             {
//  543                 0,0,0,0
//  544             },
//  545             {
//  546                 0,0,0,0
//  547             },
//  548             {
//  549                 0,0,0,0
//  550             },
//  551             {
//  552                 0,0,0,0
//  553             },
//  554             {
//  555                 0,0,0,0
//  556             },
//  557             {
//  558                 0,0,0,0
//  559             },
//  560             {
//  561                 0,0,0,0
//  562             },
//  563             {
//  564                 0,0,0,0
//  565             },
//  566             {
//  567                 0,0,0,0
//  568             },
//  569             {
//  570                 0,0,0,0
//  571             },
//  572             {
//  573                 0,0,0,0
//  574             },
//  575             {
//  576                 0,0,0,0
//  577             },
//  578             {
//  579                 0,0,0,0
//  580             }
//  581         }
//  582     },0xE223,
//  583 
//  584     {
//  585         1,
//  586         {
//  587             {
//  588                 1,0x05,0x0000,0xFF
//  589             },
//  590             {
//  591                 0,0,0,0
//  592             },
//  593             {
//  594                 0,0,0,0
//  595             },
//  596             {
//  597                 0,0,0,0
//  598             },
//  599             {
//  600                 0,0,0,0
//  601             },
//  602             {
//  603                 0,0,0,0
//  604             },
//  605             {
//  606                 0,0,0,0
//  607             },
//  608             {
//  609                 0,0,0,0
//  610             },
//  611             {
//  612                 0,0,0,0
//  613             },
//  614             {
//  615                 0,0,0,0
//  616             },
//  617             {
//  618                 0,0,0,0
//  619             },
//  620             {
//  621                 0,0,0,0
//  622             },
//  623             {
//  624                 0,0,0,0
//  625             },
//  626             {
//  627                 0,0,0,0
//  628             },
//  629             {
//  630                 0,0,0,0
//  631             },
//  632             {
//  633                 0,0,0,0
//  634             }
//  635         }
//  636     },0x9C7B,
//  637 
//  638     {
//  639         1,
//  640         {
//  641             {
//  642                 1,0x05,0x0001,0xFF
//  643             },
//  644             {
//  645                 0,0,0,0
//  646             },
//  647             {
//  648                 0,0,0,0
//  649             },
//  650             {
//  651                 0,0,0,0
//  652             },
//  653             {
//  654                 0,0,0,0
//  655             },
//  656             {
//  657                 0,0,0,0
//  658             },
//  659             {
//  660                 0,0,0,0
//  661             },
//  662             {
//  663                 0,0,0,0
//  664             },
//  665             {
//  666                 0,0,0,0
//  667             },
//  668             {
//  669                 0,0,0,0
//  670             },
//  671             {
//  672                 0,0,0,0
//  673             },
//  674             {
//  675                 0,0,0,0
//  676             },
//  677             {
//  678                 0,0,0,0
//  679             },
//  680             {
//  681                 0,0,0,0
//  682             },
//  683             {
//  684                 0,0,0,0
//  685             },
//  686             {
//  687                 0,0,0,0
//  688             }
//  689         }
//  690     },0x6CFB,
//  691 
//  692     {
//  693         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//  694     },0x0B40,
//  695 
//  696     false, {0,0,0,0,0,0,0},0x0B40,
//  697 };
//  698 
//  699 //-----------------------------------------------------------------------------------------------------

        RSEG NEAR_F:CODE:ROOT(0)
//  700 TDataBaseBlockPositionData __flash CFlash::axDataBaseBlocksPositionData[] =
??axDataBaseBlocksPositionData:
        DC8 0, 20
        DC16 0
        DC8 1, 7
        DC16 22
        DC8 2, 16
        DC16 31
        DC8 3, 128
        DC16 49
        DC8 4, 64
        DC16 179
        DC8 5, 24
        DC16 245
        DC8 6, 128
        DC16 271
        DC8 7, 81
        DC16 401
        DC8 8, 81
        DC16 484
        DC8 9, 81
        DC16 567
        DC8 10, 8
        DC16 650
        DC8 11, 8
        DC16 660
//  701 {
//  702     { 0, sizeof(xMainDataBase.DevConfig),	  offsetof(TDataBase,DevConfig)	 	},
//  703     { 1, sizeof(xMainDataBase.MBSet),	  offsetof(TDataBase,MBSet)	 	},
//  704     { 2, sizeof(xMainDataBase.ActivityLevel),	  offsetof(TDataBase,ActivityLevel)		},
//  705     { 3, sizeof(xMainDataBase.AlarmWindowIndex),	  offsetof(TDataBase,AlarmWindowIndex)	 	},
//  706     { 4, sizeof(xMainDataBase.AlarmType), offsetof(TDataBase,AlarmType) 	},
//  707     { 5, sizeof(xMainDataBase.OutConfig),	  offsetof(TDataBase,OutConfig)  	},
//  708     { 6, sizeof(xMainDataBase.Relay),	  offsetof(TDataBase,Relay)       	},
//  709     { 7, sizeof(xMainDataBase.InputList),	  offsetof(TDataBase,InputList)  	},
//  710     { 8, sizeof(xMainDataBase.ReceiptList), offsetof(TDataBase,ReceiptList)	},
//  711     { 9, sizeof(xMainDataBase.UnsetList),	  offsetof(TDataBase,UnsetList)  	},
//  712     { 10, sizeof(xMainDataBase.NamurInputs),	  offsetof(TDataBase,NamurInputs)  	},
//  713     { 11, sizeof(xMainDataBase.DeviceState),	  offsetof(TDataBase,DeviceState)  	}
//  714 //    { 10, sizeof(xMainDataBase.DeviceState),	  offsetof(TDataBase,DeviceState)  	}
//  715 };
//  716 
//  717 //----------------------------------------- Flash ----------------------------------------------------------------
//  718 //CFlash::CFlash()
//  719 //{
//  720 //
//  721 //}
//  722 //
//  723 ////-----------------------------------------------------------------------------------------------------
//  724 //CFlash::~CFlash()
//  725 //{
//  726 //
//  727 //}
//  728 
//  729 //-----------------------------------------------------------------------------------------------------
//  730 uint8_t CFlash::Read(uint8_t *puiDestination, uint8_t __farflash *uiSource, uint16_t uiLength)
//  731 {
//  732     // Скопируем данные из флеш в буфер Ram.
//  733     for (uint16_t i = 0; i < uiLength; i++)
//  734     {
//  735         puiDestination[i] = uiSource[i];
//  736     }
//  737     return 1;
//  738 }
//  739 
//  740 //-----------------------------------------------------------------------------------------------------
//  741 uint16_t CFlash::ReadBlock(uint8_t *puiDestination, uint8_t uiBlock)
//  742 {
//  743     // Прочитаем блок из флеш вместе с Crc.
//  744     Read(puiDestination,
//  745          GetBlockPointer(uiBlock),
//  746          (GetBlockLength(uiBlock) + CRC_LENGTH));
//  747 
//  748     // Получим контрольную сумму блока во флеш.
//  749     uint16_t uiCrc = static_cast<uint16_t>(puiDestination[GetBlockLength(uiBlock)]);
//  750     uiCrc |= (static_cast<uint16_t>(puiDestination[GetBlockLength(uiBlock) + 1]) << 8);
//  751     // Вычислим контрольную сумму блока.
//  752     // Блок не повреждён?
//  753     if (uiCrc == usCrc16(puiDestination, GetBlockLength(uiBlock)))
//  754     {
//  755         return GetBlockLength(uiBlock);
//  756     }
//  757     else
//  758     {
//  759         CPss21::SetErrorCode(DB_ERROR);
//  760         // Нет данных.
//  761         return 0;
//  762     }
//  763 }
//  764 
//  765 //-----------------------------------------------------------------------------------------------------
//  766 
//  767 
//  768 
//  769 
//  770 
//  771 
//  772 
//  773 
//  774 //----------------------------------------- CSpi ----------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  775 CSpi::CSpi()
??CSpi:
//  776 {
        LDI     R18, LOW(??__vtbl_6)
        LDI     R19, (??__vtbl_6) >> 8
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        STD     Z+1, R19
//  777 
//  778 }
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CSpi &CSpi::new CSpi()
`??new CSpi`:
        LDI     R16, 2
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CSpi_1`
        RCALL   ??CSpi
        RET
`??new CSpi_1`:
        LDI     R16, 0
        LDI     R17, 0
        RET
//  779 
//  780 //-----------------------------------------------------------------------------------------------------
//  781 CSpi::~CSpi()
//  782 {
//  783 
//  784 }
//  785 
//  786 //-----------------------------------------------------------------------------------------------------
//  787 void CSpi::Init(void)
//  788 {
//  789     // Master mode.
//  790 //    SPCR = (BIT(MSTR) | BIT(SPR1));		// master,  115200.
//  791     SPCR = (BIT(MSTR) | BIT(SPR1) | BIT(SPR0));		// master,  57600.
//  792 
//  793     DDRB |= (Bit(MOSI) | Bit(SCK));
//  794     PORTB |= (Bit(MOSI) | Bit(SCK));
//  795 };
//  796 
//  797 //-----------------------------------------------------------------------------------------------------
//  798 void CSpi::Enable(void)
//  799 {
//  800     // разрешим SPI.
//  801     SPCR  |= BIT(SPE);
//  802 }
//  803 
//  804 //-----------------------------------------------------------------------------------------------------
//  805 void CSpi::Disable(void)
//  806 {
//  807     SPCR &= ~BIT(SPE);
//  808 }
//  809 
//  810 //-----------------------------------------------------------------------------------------------------
//  811 uint8_t CSpi::Exchange(uint8_t uiData)
//  812 {
//  813     SPDR = uiData;
//  814 
//  815     uint8_t uiGuardCounter = 0;
//  816 
//  817     while(!(SPSR & BIT(SPIF)))		// Ожидание конца передачи
//  818     {
//  819         CPlatform::WatchdogReset();
//  820 
//  821         if (uiGuardCounter < 200)
//  822         {
//  823             uiGuardCounter++;
//  824         }
//  825         else
//  826         {
//  827             return  SPDR;
//  828         }
//  829     };
//  830 
//  831     delay_us(100);
//  832 
//  833     return  SPDR;
//  834 }
//  835 
//  836 //-----------------------------------------------------------------------------------------------------
//  837 uint8_t CSpi::Exchange(uint8_t *puiDestination, uint8_t *pucSource, uint16_t uiLength)
//  838 {
//  839     if (uiLength > BUFFER_LENGTH)
//  840     {
//  841         return 0;
//  842     }
//  843 
//  844     for (uint16_t i = 0; i < uiLength; i++)
//  845     {
//  846         puiDestination[i] = Exchange(pucSource[i]);
//  847     }
//  848     return 1;
//  849 }
//  850 
//  851 //-----------------------------------------------------------------------------------------------------
//  852 uint8_t CSpi::Read(uint8_t *puiDestination, uint16_t uiLength)
//  853 {
//  854 
//  855     return 1;
//  856 }
//  857 //-----------------------------------------------------------------------------------------------------
//  858 
//  859 
//  860 
//  861 
//  862 
//  863 
//  864 
//  865 //-----------------------------------------------------------------------------------------------------
//  866 // delay
//  867 void delay_ms(uint16_t millisecs)
//  868 {
//  869     while(millisecs--)
//  870     {
//  871         delay_us(1000);
//  872     }
//  873 }
//  874 void delay_s(uint16_t secs)
//  875 {
//  876     while(secs--)
//  877     {
//  878         __delay_cycles(F_CPU);
//  879     }
//  880 }
//  881 void delay_mins(uint16_t minutes)
//  882 {
//  883     while(minutes--)
//  884     {
//  885         __delay_cycles(60*F_CPU);
//  886     }
//  887 }
//  888 
//  889 //-----------------------------------------------------------------------------------------------------

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  890 uint16_t CPlatform::m_uiSystemTick;
??m_uiSystemTick:
        DS8 2

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  891 uint8_t CPlatform::m_uiWatchDogStepID;
??m_uiWatchDogStepID:
        DS8 1
//  892 //CUart* CPlatform::m_pxUart0;

        RSEG NEAR_Z:DATA:ROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
//  893 CUart* CPlatform::m_pxUart1;
??m_pxUart1:
        DS8 2

        RSEG CODE:CODE:NOROOT(1)
??CPlatform:
        LDI     R18, LOW(??__vtbl_2)
        LDI     R19, (??__vtbl_2) >> 8
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        STD     Z+1, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CPlatform &CPlatform::new CPlatform()
`??new CPlatform`:
        LDI     R16, 2
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CPlatform_1`
        RCALL   ??CPlatform
        RET
`??new CPlatform_1`:
        LDI     R16, 0
        LDI     R17, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
`?~CUart`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        MOV     R16, R24
        OR      R16, R25
        BREQ    `?~CUart_1`
        BST     R18, 0
        BRTC    `?~CUart_1`
        MOVW    R17:R16, R25:R24
        CALL    `??operator delete`
`?~CUart_1`:
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??Init:
        CALL    ?PROLOGUE8_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R25:R24, R21:R20
        MOVW    R27:R26, R23:R22
        MOV     R7, R18
        MOV     R6, R19
        MOVW    R17:R16, R25:R24
        MOVW    R19:R18, R27:R26
        LDI     R20, 16
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?L_EC_MUL_L03
        MOVW    R21:R20, R17:R16
        MOVW    R23:R22, R19:R18
        LDI     R16, 0
        LDI     R17, 128
        LDI     R18, 112
        LDI     R19, 0
        CALL    ?UL_DIVMOD_L03
        MOVW    R19:R18, R17:R16
        SUBI    R18, 1
        SBCI    R19, 0
        MOV     R20, R18
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOVW    R31:R30, R17:R16
        ST      Z, R20
        MOVW    R17:R16, R19:R18
        MOV     R16, R17
        LDI     R17, 0
        MOV     R20, R16
        MOVW    R31:R30, R5:R4
        LD      R16, Z
        LDD     R17, Z+1
        MOVW    R31:R30, R17:R16
        ST      Z, R20
        LDS     R20, (??m_xModbusSettings + 2)
        ANDI    R20, 0x38
        ORI     R20, 0x06
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+8
        LDD     R17, Z+9
        MOVW    R31:R30, R17:R16
        ST      Z, R20
        LDI     R30, 13
        JMP     ?EPILOGUE_B8_L09

        RSEG CODE:CODE:NOROOT(1)
??Reset:
        MOVW    R31:R30, R17:R16
        LDI     R18, 0
        STD     Z+24, R18
        LDI     R18, 0
        STD     Z+25, R18
        MOVW    R31:R30, R17:R16
        SUBI    R30, 102
        SBCI    R31, 255
        LDI     R18, 0
        ST      Z, R18
        MOVW    R31:R30, R17:R16
        SUBI    R30, 101
        SBCI    R31, 255
        LDI     R18, 0
        ST      Z, R18
        MOVW    R31:R30, R17:R16
        SUBI    R30, 100
        SBCI    R31, 255
        LDI     R18, 0
        ST      Z, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
??Open:
        MOV     R19, R27
        MOV     R20, R26
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+4
        LDD     R27, Z+5
        LD      R18, X
        ORI     R18, 0xC0
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ORI     R18, 0x18
        ST      X, R18
        MOV     R26, R20
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??Close:
        MOV     R19, R27
        MOV     R20, R26
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ANDI    R18, 0x6F
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ANDI    R18, 0xB7
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ANDI    R18, 0xDF
        ST      X, R18
        MOV     R26, R20
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??Enable:
        MOV     R19, R27
        MOV     R20, R26
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+4
        LDD     R27, Z+5
        LD      R18, X
        ORI     R18, 0x80
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ORI     R18, 0x90
        ST      X, R18
        MOV     R26, R20
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??Disable:
        MOV     R19, R27
        MOV     R20, R26
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ANDI    R18, 0x6F
        ST      X, R18
        MOV     R26, R20
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??Rs485RtsOn:
        MOV     R19, R27
        MOV     R22, R26
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+17
        LDI     R16, 1
        LDI     R17, 0
        MOV     R20, R18
        CALL    ?S_SHL_L02
        LDD     R26, Z+15
        LDD     R27, Z+16
        LD      R17, X
        OR      R17, R16
        ST      X, R17
        MOV     R26, R22
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??Rs485RtsOff:
        MOV     R19, R27
        MOV     R22, R26
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+17
        LDI     R16, 1
        LDI     R17, 0
        MOV     R20, R18
        CALL    ?S_SHL_L02
        COM     R16
        LDD     R26, Z+15
        LDD     R27, Z+16
        LD      R17, X
        AND     R17, R16
        ST      X, R17
        MOV     R26, R22
        MOV     R27, R19
        RET

        RSEG CODE:CODE:NOROOT(1)
??TransmitEnable:
        MOV     R21, R27
        MOV     R0, R26
        MOVW    R27:R26, R17:R16
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+12
        LDD     R17, Z+13
        OR      R16, R17
        BREQ    ??TransmitEnable_1
        MOVW    R17:R16, R27:R26
        RCALL   ??Rs485RtsOn
??TransmitEnable_1:
        ADIW    R27:R26, 4
        LD      R30, X+
        LD      R31, X
        SBIW    R27:R26, 5
        LD      R16, Z
        ORI     R16, 0x60
        ST      Z, R16
        ADIW    R27:R26, 6
        LD      R30, X+
        LD      R31, X
        SBIW    R27:R26, 7
        LD      R16, Z
        ORI     R16, 0x28
        ST      Z, R16
        MOV     R26, R0
        MOV     R27, R21
        RET

        RSEG CODE:CODE:NOROOT(1)
??TransmitDisable:
        MOV     R21, R27
        MOV     R0, R26
        MOVW    R27:R26, R17:R16
        ADIW    R27:R26, 6
        LD      R30, X+
        LD      R31, X
        SBIW    R27:R26, 7
        LD      R16, Z
        ANDI    R16, 0x97
        ST      Z, R16
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+12
        LDD     R17, Z+13
        OR      R16, R17
        BREQ    ??TransmitDisable_1
        MOVW    R17:R16, R27:R26
        RCALL   ??Rs485RtsOff
??TransmitDisable_1:
        MOV     R26, R0
        MOV     R27, R21
        RET

        RSEG CODE:CODE:NOROOT(1)
??Write:
        MOVW    R31:R30, R17:R16
        STD     Z+18, R18
        STD     Z+19, R19
        STD     Z+20, R20
        STD     Z+21, R21
        LDI     R16, 1
        LDI     R17, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
??Read:
        CALL    ?PROLOGUE8_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R25:R24, R19:R18
        MOVW    R5:R4, R21:R20
        MOVW    R31:R30, R27:R26
        SUBI    R30, 102
        SBCI    R31, 255
        LDI     R16, 0
        ST      Z, R16
        MOVW    R31:R30, R27:R26
        SUBI    R30, 100
        SBCI    R31, 255
        LD      R16, Z
        TST     R16
        BREQ    ??Read_4
        LDI     R16, 255
        LDI     R17, 255
        RJMP    ??Read_5
??Read_4:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+24
        LDD     R17, Z+25
        CP      R16, R4
        CPC     R17, R5
        BRCS    ??Read_6
        LDI     R16, 255
        LDI     R17, 255
        RJMP    ??Read_5
??Read_6:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+24
        LDD     R17, Z+25
        OR      R16, R17
        BREQ    ??Read_7
        CALL    ??InterruptDisable
        LDI     R16, 0
        LDI     R17, 0
??Read_8:
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+24
        LDD     R19, Z+25
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??Read_9
        MOVW    R31:R30, R27:R26
        ADD     R30, R16
        ADC     R31, R17
        LDD     R18, Z+26
        MOVW    R31:R30, R25:R24
        ADD     R30, R16
        ADC     R31, R17
        ST      Z, R18
        SUBI    R16, 255
        SBCI    R17, 255
        RJMP    ??Read_8
??Read_9:
        MOVW    R31:R30, R27:R26
        LDD     R6, Z+24
        LDD     R7, Z+25
        MOVW    R31:R30, R27:R26
        LDI     R16, 0
        STD     Z+24, R16
        LDI     R16, 0
        STD     Z+25, R16
        CALL    ??InterruptEnable
        MOV     R16, R6
        LDI     R17, 0
        RJMP    ??Read_5
??Read_7:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+24
        LDD     R17, Z+25
        OR      R16, R17
        BRNE    ??Read_10
        LDI     R16, 0
        LDI     R17, 0
        RJMP    ??Read_5
??Read_10:
        LDI     R16, 0
        LDI     R17, 0
??Read_5:
        LDI     R30, 8
        JMP     ?EPILOGUE_B8_L09

        RSEG CODE:CODE:NOROOT(1)
??UdreInterruptHandler:
        MOVW    R21:R20, R27:R26
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+20
        LDD     R19, Z+21
        OR      R18, R19
        BRNE    ??UdreInterruptHandler_1
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ANDI    R18, 0xDF
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+4
        LDD     R27, Z+5
        LD      R18, X
        ORI     R18, 0x40
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+6
        LDD     R27, Z+7
        LD      R18, X
        ORI     R18, 0x40
        ST      X, R18
        RJMP    ??UdreInterruptHandler_2
??UdreInterruptHandler_1:
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+18
        LDD     R27, Z+19
        MOVW    R19:R18, R27:R26
        SUBI    R18, 255
        SBCI    R19, 255
        MOVW    R31:R30, R17:R16
        STD     Z+18, R18
        STD     Z+19, R19
        LD      R18, X
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+10
        LDD     R27, Z+11
        ST      X, R18
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+20
        LDD     R19, Z+21
        SUBI    R18, 1
        SBCI    R19, 0
        STD     Z+20, R18
        STD     Z+21, R19
??UdreInterruptHandler_2:
        MOVW    R27:R26, R21:R20
        RET

        RSEG CODE:CODE:NOROOT(1)
??TxcInterruptHandler:
        MOV     R23, R27
        MOV     R2, R26
        MOVW    R27:R26, R17:R16
        ADIW    R27:R26, 6
        LD      R30, X+
        LD      R31, X
        SBIW    R27:R26, 7
        LD      R16, Z
        ANDI    R16, 0xBF
        ST      Z, R16
        MOVW    R17:R16, R27:R26
        RCALL   ??TransmitDisable
        MOVW    R31:R30, R27:R26
        SUBI    R30, 101
        SBCI    R31, 255
        LDI     R16, 1
        ST      Z, R16
        MOV     R26, R2
        MOV     R27, R23
        RET

        RSEG CODE:CODE:NOROOT(1)
??RecvInterruptHandler:
        CALL    ?PROLOGUE4_L09
        LDS     R18, uiInterruptCounter
        INC     R18
        STS     uiInterruptCounter, R18
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+24
        LDD     R19, Z+25
        CPI     R18, 128
        LDI     R20, 0
        CPC     R19, R20
        BRCS    ??RecvInterruptHandler_1
        MOVW    R31:R30, R17:R16
        SUBI    R30, 100
        SBCI    R31, 255
        LDI     R18, 1
        ST      Z, R18
        MOVW    R31:R30, R17:R16
        SUBI    R30, 102
        SBCI    R31, 255
        LDI     R18, 1
        ST      Z, R18
        RJMP    ??RecvInterruptHandler_2
??RecvInterruptHandler_1:
        MOVW    R31:R30, R17:R16
        LDD     R18, Z+24
        LDD     R19, Z+25
        MOVW    R25:R24, R19:R18
        ADIW    R25:R24, 1
        MOVW    R31:R30, R17:R16
        STD     Z+24, R24
        STD     Z+25, R25
        MOVW    R31:R30, R17:R16
        LDD     R26, Z+10
        LDD     R27, Z+11
        LD      R20, X
        MOVW    R31:R30, R17:R16
        ADD     R30, R18
        ADC     R31, R19
        STD     Z+26, R20
        MOVW    R31:R30, R17:R16
        SUBI    R30, 102
        SBCI    R31, 255
        LDI     R18, 1
        ST      Z, R18
??RecvInterruptHandler_2:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
        CALL_GRAPH_ROOT ??SIG_UART1_DATA, "interrupt"
??SIG_UART1_DATA:
        ST      -Y, R31
        ST      -Y, R30
        ST      -Y, R23
        ST      -Y, R22
        ST      -Y, R21
        ST      -Y, R20
        ST      -Y, R19
        ST      -Y, R18
        ST      -Y, R17
        ST      -Y, R16
        IN      R22, 0x3F
        IN      R23, 0x3B
        LDS     R16, ??m_pxUart1
        LDS     R17, (??m_pxUart1 + 1)
        RCALL   ??UdreInterruptHandler
        OUT     0x3B, R23
        OUT     0x3F, R22
        LD      R16, Y+
        LD      R17, Y+
        LD      R18, Y+
        LD      R19, Y+
        LD      R20, Y+
        LD      R21, Y+
        LD      R22, Y+
        LD      R23, Y+
        LD      R30, Y+
        LD      R31, Y+
        RETI

        RSEG CODE:CODE:NOROOT(1)
        CALL_GRAPH_ROOT ??SIG_UART1_TXC, "interrupt"
??SIG_UART1_TXC:
        ST      -Y, R31
        ST      -Y, R30
        ST      -Y, R3
        ST      -Y, R2
        ST      -Y, R1
        ST      -Y, R0
        ST      -Y, R23
        ST      -Y, R22
        ST      -Y, R21
        ST      -Y, R20
        ST      -Y, R19
        ST      -Y, R18
        ST      -Y, R17
        ST      -Y, R16
        IN      R1, 0x3F
        IN      R3, 0x3B
        LDS     R16, ??m_pxUart1
        LDS     R17, (??m_pxUart1 + 1)
        RCALL   ??TxcInterruptHandler
        OUT     0x3B, R3
        OUT     0x3F, R1
        LD      R16, Y+
        LD      R17, Y+
        LD      R18, Y+
        LD      R19, Y+
        LD      R20, Y+
        LD      R21, Y+
        LD      R22, Y+
        LD      R23, Y+
        LD      R0, Y+
        LD      R1, Y+
        LD      R2, Y+
        LD      R3, Y+
        LD      R30, Y+
        LD      R31, Y+
        RETI

        RSEG CODE:CODE:NOROOT(1)
        CALL_GRAPH_ROOT ??SIG_UART1_RECV, "interrupt"
??SIG_UART1_RECV:
        ST      -Y, R31
        ST      -Y, R30
        ST      -Y, R0
        ST      -Y, R22
        ST      -Y, R21
        ST      -Y, R20
        ST      -Y, R19
        ST      -Y, R18
        ST      -Y, R17
        ST      -Y, R16
        IN      R21, 0x3F
        IN      R22, 0x3B
        LDS     R16, ??m_pxUart1
        LDS     R17, (??m_pxUart1 + 1)
        RCALL   ??RecvInterruptHandler
        OUT     0x3B, R22
        OUT     0x3F, R21
        LD      R16, Y+
        LD      R17, Y+
        LD      R18, Y+
        LD      R19, Y+
        LD      R20, Y+
        LD      R21, Y+
        LD      R22, Y+
        LD      R0, Y+
        LD      R30, Y+
        LD      R31, Y+
        RETI

        RSEG CODE:CODE:NOROOT(1)
`?~CEeprom`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        MOV     R16, R24
        OR      R16, R25
        BREQ    `?~CEeprom_1`
        BST     R18, 0
        BRTC    `?~CEeprom_1`
        MOVW    R17:R16, R25:R24
        CALL    `??operator delete`
`?~CEeprom_1`:
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ReadByte:
        MOVW    R19:R18, R17:R16
        WDR
??ReadByte_1:
        SBIS    0x1C, 0x01
        RJMP    ??ReadByte_2
        WDR
        RJMP    ??ReadByte_1
??ReadByte_2:
        CLI
        OUT     0x1F, R19
        OUT     0x1E, R18
        SBI     0x1C, 0x00
        SEI
        IN      R16, 0x1D
        RET
        REQUIRE _A_EECR
        REQUIRE _A_EEAR
        REQUIRE _A_EEDR

        RSEG CODE:CODE:NOROOT(1)
??Read_1:
        MOV     R23, R25
        MOV     R0, R24
        MOVW    R31:R30, R17:R16
        MOVW    R25:R24, R19:R18
??Read_11:
        MOV     R16, R20
        OR      R16, R21
        BREQ    ??Read_12
        MOVW    R17:R16, R25:R24
        RCALL   ??ReadByte
        ADIW    R25:R24, 1
        ST      Z, R16
        ADIW    R31:R30, 1
        SUBI    R20, 1
        SBCI    R21, 0
        RJMP    ??Read_11
??Read_12:
        LDI     R16, 1
        MOV     R24, R0
        MOV     R25, R23
        RET

        RSEG CODE:CODE:NOROOT(1)
??WriteByte:
        MOVW    R21:R20, R17:R16
        MOV     R22, R18
        MOVW    R17:R16, R21:R20
        RCALL   ??ReadByte
        CP      R16, R22
        BREQ    ??WriteByte_1
        WDR
??WriteByte_2:
        SBIS    0x1C, 0x01
        RJMP    ??WriteByte_3
        WDR
        RJMP    ??WriteByte_2
??WriteByte_3:
        CLI
        OUT     0x1F, R21
        OUT     0x1E, R20
        OUT     0x1D, R22
        SBI     0x1C, 0x02
        SBI     0x1C, 0x01
        SEI
??WriteByte_1:
        RET
        REQUIRE _A_EECR
        REQUIRE _A_EEAR
        REQUIRE _A_EEDR

        RSEG CODE:CODE:NOROOT(1)
??Write_1:
        CALL    ?PROLOGUE4_L09
        MOVW    R1:R0, R17:R16
        MOVW    R31:R30, R19:R18
        MOVW    R25:R24, R21:R20
??Write_2:
        MOV     R16, R24
        OR      R16, R25
        BREQ    ??Write_3
        MOVW    R27:R26, R31:R30
        MOVW    R31:R30, R27:R26
        ADIW    R31:R30, 1
        LD      R18, X
        MOVW    R17:R16, R1:R0
        RCALL   ??WriteByte
        LDI     R16, 1
        ADD     R0, R16
        LDI     R16, 0
        ADC     R1, R16
        SBIW    R25:R24, 1
        RJMP    ??Write_2
??Write_3:
        LDI     R16, 1
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
??WriteInterrupt:
        CALL    ?PROLOGUE6_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        MOVW    R25:R24, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R27:R26, R21:R20
        MOVW    R17:R16, R25:R24
        CALL    ??SetAddress
        MOVW    R17:R16, R5:R4
        CALL    ??SetBufferPointer
        MOVW    R17:R16, R27:R26
        CALL    ??SetLength
        LDI     R16, 0
        LDI     R17, 0
        CALL    ??SetBufferByteCounter
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09

        RSEG CODE:CODE:NOROOT(1)
??ReadyInterruptHandler:
        CALL    ?PROLOGUE4_L09
        CALL    ??GetBufferByteCounter
        MOVW    R25:R24, R17:R16
        CALL    ??GetLength
        CP      R24, R16
        CPC     R25, R17
        BRCC    ??ReadyInterruptHandler_1
        CALL    ??GetAddress
        OUT     0x1F, R17
        OUT     0x1E, R16
        CALL    ??GetAddress
        SUBI    R16, 255
        SBCI    R17, 255
        CALL    ??SetAddress
        SBI     0x1C, 0x00
        IN      R24, 0x1D
        CALL    ??GetBufferPointer
        MOVW    R27:R26, R17:R16
        CALL    ??GetBufferByteCounter
        ADD     R26, R16
        ADC     R27, R17
        LD      R16, X
        CP      R24, R16
        BREQ    ??ReadyInterruptHandler_2
        CALL    ??GetBufferPointer
        MOVW    R27:R26, R17:R16
        CALL    ??GetBufferByteCounter
        ADD     R26, R16
        ADC     R27, R17
        LD      R16, X
        OUT     0x1D, R16
        SBI     0x1C, 0x02
        SBI     0x1C, 0x01
??ReadyInterruptHandler_2:
        CALL    ??GetBufferByteCounter
        SUBI    R16, 255
        SBCI    R17, 255
        CALL    ??SetBufferByteCounter
        RJMP    ??ReadyInterruptHandler_3
??ReadyInterruptHandler_1:
        CALL    ??ReadyInterruptDisaable
        LDI     R16, 0
        LDI     R17, 0
        OUT     0x1F, R17
        OUT     0x1E, R16
        LDI     R16, 1
        CALL    ??SetBufferIsWrited
??ReadyInterruptHandler_3:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
        REQUIRE _A_EEAR
        REQUIRE _A_EECR
        REQUIRE _A_EEDR

        RSEG CODE:CODE:NOROOT(1)
        CALL_GRAPH_ROOT ??EEPROM_EE_READY, "interrupt"
??EEPROM_EE_READY:
        ST      -Y, R25
        ST      -Y, R24
        ST      -Y, R31
        ST      -Y, R30
        ST      -Y, R3
        ST      -Y, R2
        ST      -Y, R1
        ST      -Y, R0
        ST      -Y, R23
        ST      -Y, R22
        ST      -Y, R21
        ST      -Y, R20
        ST      -Y, R19
        ST      -Y, R18
        ST      -Y, R17
        ST      -Y, R16
        IN      R24, 0x3F
        IN      R25, 0x3B
        RCALL   ??ReadyInterruptHandler
        OUT     0x3B, R25
        OUT     0x3F, R24
        LD      R16, Y+
        LD      R17, Y+
        LD      R18, Y+
        LD      R19, Y+
        LD      R20, Y+
        LD      R21, Y+
        LD      R22, Y+
        LD      R23, Y+
        LD      R0, Y+
        LD      R1, Y+
        LD      R2, Y+
        LD      R3, Y+
        LD      R30, Y+
        LD      R31, Y+
        LD      R24, Y+
        LD      R25, Y+
        RETI

        RSEG CODE:CODE:NOROOT(1)
??Read_2:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R1:R0, R17:R16
        MOVW    R3:R2, R19:R18
        LDI     R24, 0
        LDI     R25, 0
??Read_13:
        CP      R24, R2
        CPC     R25, R3
        BRCC    ??Read_14
        MOVW    R31:R30, R21:R20
        MOV     R19, R22
        ADD     R30, R24
        ADC     R31, R25
        OUT     0x3B, R19
        ELPM    R16, Z
        MOVW    R31:R30, R1:R0
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
        RJMP    ??Read_13
??Read_14:
        LDI     R16, 1
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??ReadBlock:
        CALL    ?PROLOGUE5_L09
        REQUIRE ?Register_R4_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOV     R4, R18
        MOV     R16, R4
        CALL    ??GetBlockLength
        MOVW    R25:R24, R17:R16
        MOV     R16, R4
        CALL    ??GetBlockPointer
        MOVW    R21:R20, R17:R16
        MOV     R22, R18
        ADIW    R25:R24, 2
        MOVW    R19:R18, R25:R24
        MOVW    R17:R16, R27:R26
        RCALL   ??Read_2
        MOV     R16, R4
        CALL    ??GetBlockLength
        MOVW    R31:R30, R27:R26
        ADD     R30, R16
        ADC     R31, R17
        LD      R24, Z
        LDI     R25, 0
        MOV     R16, R4
        CALL    ??GetBlockLength
        MOVW    R31:R30, R27:R26
        ADD     R30, R16
        ADC     R31, R17
        LDD     R17, Z+1
        LDI     R16, 0
        OR      R24, R16
        OR      R25, R17
        MOV     R16, R4
        CALL    ??GetBlockLength
        MOVW    R19:R18, R17:R16
        MOVW    R17:R16, R27:R26
        CALL    ??usCrc16
        CP      R24, R16
        CPC     R25, R17
        BRNE    ??ReadBlock_1
        MOV     R16, R4
        CALL    ??GetBlockLength
        RJMP    ??ReadBlock_2
??ReadBlock_1:
        LDI     R16, 4
        CALL    ??SetErrorCode
        LDI     R16, 0
        LDI     R17, 0
??ReadBlock_2:
        LDI     R30, 5
        JMP     ?EPILOGUE_B5_L09

        RSEG CODE:CODE:NOROOT(1)
`?~CSpi`:
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        MOV     R16, R24
        OR      R16, R25
        BREQ    `?~CSpi_1`
        BST     R18, 0
        BRTC    `?~CSpi_1`
        MOVW    R17:R16, R25:R24
        CALL    `??operator delete`
`?~CSpi_1`:
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??Init_1:
        LDI     R16, 19
        OUT     0x0D, R16
        IN      R16, 0x17
        ORI     R16, 0x06
        OUT     0x17, R16
        IN      R16, 0x18
        ORI     R16, 0x06
        OUT     0x18, R16
        RET
        REQUIRE _A_SPCR
        REQUIRE _A_DDRB
        REQUIRE _A_PORTB

        RSEG CODE:CODE:NOROOT(1)
??Enable_1:
        SBI     0x0D, 0x06
        RET
        REQUIRE _A_SPCR

        RSEG CODE:CODE:NOROOT(1)
??Disable_1:
        CBI     0x0D, 0x06
        RET
        REQUIRE _A_SPCR

        RSEG CODE:CODE:NOROOT(1)
??Exchange:
        ST      -Y, R25
        ST      -Y, R24
        MOV     R25, R16
        OUT     0x0F, R25
        LDI     R24, 0
??Exchange_2:
        SBIC    0x0E, 0x07
        RJMP    ??Exchange_3
        CALL    ??WatchdogReset
        CPI     R24, 200
        BRCC    ??Exchange_4
        INC     R24
        RJMP    ??Exchange_2
??Exchange_4:
        IN      R16, 0x0F
        RJMP    ??Exchange_5
??Exchange_3:
        LDI     R16, 233
        DEC     R16
        BRNE    $-2
        NOP
        IN      R16, 0x0F
??Exchange_5:
        LD      R24, Y+
        LD      R25, Y+
        RET
        REQUIRE _A_SPDR
        REQUIRE _A_SPSR

        RSEG CODE:CODE:NOROOT(1)
??Exchange_1:
        CALL    ?PROLOGUE8_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        MOVW    R7:R6, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R27:R26, R21:R20
        CPI     R26, 65
        LDI     R16, 0
        CPC     R27, R16
        BRCS    ??Exchange_6
        LDI     R16, 0
        RJMP    ??Exchange_7
??Exchange_6:
        LDI     R24, 0
        LDI     R25, 0
??Exchange_8:
        CP      R24, R26
        CPC     R25, R27
        BRCC    ??Exchange_9
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LD      R16, Z
        RCALL   ??Exchange
        MOVW    R31:R30, R7:R6
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
        RJMP    ??Exchange_8
??Exchange_9:
        LDI     R16, 1
??Exchange_7:
        LDI     R30, 8
        JMP     ?EPILOGUE_B8_L09

        RSEG CODE:CODE:NOROOT(1)
??Read_3:
        MOVW    R21:R20, R17:R16
        LDI     R16, 1
        RET

        RSEG CODE:CODE:NOROOT(1)
??delay_ms:
??delay_ms_1:
        MOVW    R19:R18, R17:R16
        MOVW    R17:R16, R19:R18
        SUBI    R16, 1
        SBCI    R17, 0
        OR      R18, R19
        BREQ    ??delay_ms_2
        LDI     R18, 213
        LDI     R19, 6
        SUBI    R18, 1
        SBCI    R19, 0
        BRNE    $-4
        RJMP    $+2
        NOP
        RJMP    ??delay_ms_1
??delay_ms_2:
        RET

        RSEG CODE:CODE:NOROOT(1)
??delay_s:
??delay_s_1:
        MOVW    R19:R18, R17:R16
        MOVW    R17:R16, R19:R18
        SUBI    R16, 1
        SBCI    R17, 0
        OR      R18, R19
        BREQ    ??delay_s_2
        LDI     R20, 255
        LDI     R21, 127
        LDI     R22, 22
        SUBI    R20, 1
        SBCI    R21, 0
        SBCI    R22, 0
        BRNE    $-6
        RJMP    $+2
        NOP
        RJMP    ??delay_s_1
??delay_s_2:
        RET

        RSEG CODE:CODE:NOROOT(1)
??delay_mins:
??delay_mins_1:
        MOVW    R19:R18, R17:R16
        MOVW    R17:R16, R19:R18
        SUBI    R16, 1
        SBCI    R17, 0
        OR      R18, R19
        BREQ    ??delay_mins_2
        LDI     R20, 255
        LDI     R21, 255
        LDI     R22, 100
        LDI     R23, 4
        SUBI    R20, 1
        SBCI    R21, 0
        SBCI    R22, 0
        SBCI    R23, 0
        BRNE    $-8
        RJMP    $+2
        NOP
        RJMP    ??delay_mins_1
??delay_mins_2:
        RET
//  894 
//  895 //-----------------------------------------------------------------------------------------------------
//  896 CPlatform::CPlatform()
//  897 {
//  898 
//  899 }
//  900 
//  901 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  902 CPlatform::~CPlatform()
`?~CPlatform`:
//  903 {
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
        MOV     R16, R24
        OR      R16, R25
        BREQ    `?~CPlatform_1`
        BST     R18, 0
        BRTC    `?~CPlatform_1`
//  904 
//  905 }
        MOVW    R17:R16, R25:R24
        CALL    `??operator delete`
`?~CPlatform_1`:
        LD      R24, Y+
        LD      R25, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
??SystemTickInit:
        LDI     R16, 204
        LDI     R17, 28
        LDI     R18, 0
        LDI     R19, 0
        LDI     R20, 6
        CALL    ?UL_SHR_L03
        SUBI    R16, 1
        SBCI    R17, 0
        SBCI    R18, 0
        SBCI    R19, 0
        MOVW    R23:R22, R17:R16
        OUT     0x23, R22
        LDI     R21, 11
        OUT     0x25, R21
        IN      R20, 0x37
        MOV     R21, R20
        ORI     R21, 0x80
        OUT     0x37, R21
        RET
        REQUIRE _A_OCR2
        REQUIRE _A_TCCR2
        REQUIRE _A_TIMSK
//  906 
//  907 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  908 void CPlatform::Init(void)
??Init_2:
//  909 {
//  910     SystemTickInit();
        RCALL   ??SystemTickInit
//  911     StatusLedSetPinOutput();
        CALL    ??StatusLedSetPinOutput
//  912     TxLedSetPinOutput();
        CALL    ??TxLedSetPinOutput
//  913     TxLedOff();
        CALL    ??TxLedOff
//  914     KeyOneSetPinInput();
        CALL    ??KeyOneSetPinInput
//  915     KeyTwoSetPinInput();
        CALL    ??KeyTwoSetPinInput
//  916     KeyThreeSetPinInput();
        CALL    ??KeyThreeSetPinInput
//  917     ExternalKeySetPinInput();
        CALL    ??ExternalKeySetPinInput
//  918     CPlatform::InterruptEnable();
        CALL    ??InterruptEnable
//  919 }
        RET
//  920 
//  921 // Сирена
//  922 ////-----------------------------------------------------------------------------------------------------
//  923 //void CPlatform::BuzzerTimerFrequencySet(uint16_t uiFrequency)
//  924 //{
//  925 //    unsigned short usCompareMatch;
//  926 //
//  927 //    // half-period time.
//  928 //    usCompareMatch = ((F_CPU / (2UL * uiFrequency)) - 1UL);
//  929 //    // Срабатывает по Top совпадению значения в ICR3.
//  930 //    // Если Top по совпадению значения в OCR3A, то нельзя использовать COM3A вывод.
//  931 //    ICR3 = usCompareMatch * 2;
//  932 //    OCR3A = usCompareMatch;
//  933 //    OCR3B = usCompareMatch;
//  934 //
//  935 //    // Fast PWM Mode Top OCRn, prescaller - 1,
//  936 //    // Clear OC3B on compare match (set output to low level).
//  937 //    // Set OC3A on compare match (set output to high level).
//  938 //    TCCR3A = (1 << COM3B1) | (1 << COM3A1) | (1 << COM3A0) | (1 << WGM31);
//  939 //    TCCR3B = (1 << WGM33) | (1 << WGM32) | (1 << CS30);
//  940 //};
//  941 //
//  942 ////-----------------------------------------------------------------------------------------------------
//  943 //void CPlatform::BuzzerTimerStop(void)
//  944 //{
//  945 //    // timer off.
//  946 //    TCCR3A &= ~((1 << COM3B1) | (1 << COM3A1) | (1 << COM3A0) | (1 << WGM31));
//  947 //    TCCR3B &= ~((1 << WGM33) | (1 << WGM32) | (1 << CS30));
//  948 //};
//  949 
//  950 // color variant

        RSEG CODE:CODE:NOROOT(1)
//  951 void CPlatform::BuzzerTimerFrequencySet(uint16_t uiFrequency)
??BuzzerTimerFrequencySet:
//  952 {
        CALL    ?PROLOGUE4_L09
        MOVW    R25:R24, R17:R16
//  953     unsigned short usCompareMatch;
//  954 
//  955     // half-period time.
//  956     usCompareMatch = ((F_CPU / (2UL * uiFrequency)) - 1UL);
        MOVW    R21:R20, R25:R24
        LDI     R22, 0
        LDI     R23, 0
        LSL     R20
        ROL     R21
        ROL     R22
        ROL     R23
        LDI     R16, 0
        LDI     R17, 128
        LDI     R18, 112
        LDI     R19, 0
        CALL    ?UL_DIVMOD_L03
        SUBI    R16, 1
        SBCI    R17, 0
        MOVW    R27:R26, R17:R16
//  957 
//  958     OCR3A = usCompareMatch * 2;
        MOVW    R17:R16, R27:R26
        LSL     R16
        ROL     R17
        STS     (_A_OCR3A + 1), R17
        STS     _A_OCR3A, R16
//  959     OCR3B = usCompareMatch;
        STS     (_A_OCR3B + 1), R27
        STS     _A_OCR3B, R26
//  960     OCR3C = usCompareMatch;
        STS     (_A_OCR3C + 1), R27
        STS     _A_OCR3C, R26
//  961 
//  962     // Fast PWM Mode, prescaller - 1,
//  963     // Clear OC3B on compare match (set output to low level).
//  964     // Set OC3C on compare match (set output to high level).
//  965     TCCR3A = (1 << COM3B1) | (1 << COM3C1) | (1 << COM3C0) | (1 << WGM31) | (1 << WGM30);
        LDI     R16, 47
        STS     _A_TCCR3A, R16
//  966     TCCR3B = (1 << WGM33) | (1 << WGM32) | (1 << CS30);
        LDI     R16, 25
        STS     _A_TCCR3B, R16
//  967 }
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
        REQUIRE _A_OCR3A
        REQUIRE _A_OCR3B
        REQUIRE _A_OCR3C
        REQUIRE _A_TCCR3A
        REQUIRE _A_TCCR3B
//  968 

        RSEG CODE:CODE:NOROOT(1)
//  969 void CPlatform::BuzzerTimerStop(void)
??BuzzerTimerStop:
//  970 {
//  971     // timer off.
//  972     TCCR3A &= ~((1 << COM3B1) | (1 << COM3C1) | (1 << COM3C0) | (1 << WGM31) | (1 << WGM30));
        LDS     R16, _A_TCCR3A
        ANDI    R16, 0xD0
        STS     _A_TCCR3A, R16
//  973     TCCR3B &= ~((1 << WGM33) | (1 << WGM32) | (1 << CS30));
        LDS     R16, _A_TCCR3B
        ANDI    R16, 0xE6
        STS     _A_TCCR3B, R16
//  974 }
        RET
        REQUIRE _A_TCCR3A
        REQUIRE _A_TCCR3B
//  975 
//  976 //-----------------------------------------------------------------------------------------------------
//  977 void CPlatform::SystemTickInit(void)
//  978 {
//  979 #define MAIN_TIMER_TICK_RATE_HZ 1000
//  980 
//  981 //#define TIMER1_INTERRUPT
//  982 #define TIMER2_INTERRUPT
//  983 
//  984 
//  985 #ifdef TIMER2_INTERRUPT
//  986     /* Hardware constants for timer 2. */
//  987 #define portCLEAR_COUNTER_ON_MATCH              ( ( unsigned char ) _BV(WGM21) )
//  988 #define portPRESCALE_64                         ( ( unsigned char ) (_BV(CS21) | _BV(CS20)) )
//  989 #define portCLOCK_PRESCALER                     ( ( unsigned long ) 64 )
//  990 #define portCOMPARE_MATCH_A_INTERRUPT_ENABLE    ( ( unsigned char ) _BV(OCIE2) )
//  991 #endif //TIMER2_INTERRUPT
//  992 
//  993 #ifdef TIMER1_INTERRUPT
//  994     /* Hardware constants for timer 1. */
//  995 #define portCLEAR_COUNTER_ON_MATCH              ( ( unsigned char ) _BV(WGM12) )
//  996 #define portPRESCALE_64                         ( ( unsigned char ) (_BV(CS11) | _BV(CS10)) )
//  997 #define portCLOCK_PRESCALER                     ( ( unsigned long ) 64 )
//  998 #define portCOMPARE_MATCH_A_INTERRUPT_ENABLE    ( ( unsigned char ) _BV(OCIE1A) )
//  999 #endif //TIMER1_INTERRUPT
// 1000 
// 1001 #ifdef TIMER2_INTERRUPT
// 1002 
// 1003     /*
// 1004      * Setup timer 2 compare match A to generate a tick interrupt.
// 1005      */
// 1006 //  TMR2 mega128a
// 1007     unsigned long ulCompareMatch;
// 1008     unsigned char ucLowByte;
// 1009 
// 1010     /* Using 16bit timer 1 to generate the tick.  Correct fuses must be
// 1011     selected for the configCPU_CLOCK_HZ clock. */
// 1012 
// 1013 //ulCompareMatch  = (configCPU_CLOCK_HZ / prescaller) / period
// 1014 
// 1015     ulCompareMatch = F_CPU / MAIN_TIMER_TICK_RATE_HZ;
// 1016 
// 1017     /* We only have 16 bits so have to scale to get our required tick rate. */
// 1018     ulCompareMatch /= portCLOCK_PRESCALER;
// 1019 
// 1020     /* Adjust for correct value. */
// 1021     ulCompareMatch -= ( unsigned long ) 1;
// 1022 
// 1023     /* Setup compare match value for compare match A.  Interrupts are disabled
// 1024     before this is called so we need not worry here. */
// 1025     OCR2 = ulCompareMatch;
// 1026 
// 1027     /* Setup clock Source and compare match behaviour. */
// 1028     ucLowByte = portCLEAR_COUNTER_ON_MATCH | portPRESCALE_64;
// 1029     TCCR2 = ucLowByte;
// 1030 
// 1031     /* Enable the interrupt - this is okay as interrupt are currently globally
// 1032     disabled. */
// 1033     ucLowByte = TIMSK;
// 1034     ucLowByte |= portCOMPARE_MATCH_A_INTERRUPT_ENABLE;
// 1035     TIMSK = ucLowByte;
// 1036 
// 1037 #endif //TIMER2_INTERRUPT
// 1038 
// 1039 #ifdef TIMER1_INTERRUPT
// 1040 
// 1041 // mega128a
// 1042     unsigned long ulCompareMatch;
// 1043     unsigned char ucLowByte;
// 1044 
// 1045     /* Using 16bit timer 1 to generate the tick.  Correct fuses must be
// 1046     selected for the configCPU_CLOCK_HZ clock. */
// 1047 
// 1048     ulCompareMatch = CPlatform::F_CPU / MAIN_TIMER_TICK_RATE_HZ;
// 1049 
// 1050     /* We only have 16 bits so have to scale to get our required tick rate. */
// 1051     ulCompareMatch /= portCLOCK_PRESCALER;
// 1052 
// 1053     /* Adjust for correct value. */
// 1054     ulCompareMatch -= ( unsigned long ) 1;
// 1055 
// 1056     /* Setup compare match value for compare match A.  Interrupts are disabled
// 1057     before this is called so we need not worry here. */
// 1058     OCR1A = ulCompareMatch;
// 1059 
// 1060     /* Setup clock Source and compare match behaviour. */
// 1061     TCCR1A &= ~(_BV(WGM11) | _BV(WGM10));
// 1062     ucLowByte = portCLEAR_COUNTER_ON_MATCH | portPRESCALE_64;
// 1063     TCCR1B = ucLowByte;
// 1064 
// 1065     /* Enable the interrupt - this is okay as interrupt are currently globally
// 1066     disabled. */
// 1067     ucLowByte = TIMSK;
// 1068     ucLowByte |= portCOMPARE_MATCH_A_INTERRUPT_ENABLE;
// 1069     TIMSK = ucLowByte;
// 1070 
// 1071 #endif //TIMER1_INTERRUPT
// 1072 
// 1073 }
// 1074 
// 1075 //-----------------------------------------------------------------------------------------------------
// 1076 #ifdef TIMER1_INTERRUPT
// 1077 // Прерывание TIMER1_COMPA_vect
// 1078 __interrupt void SystemTickInterrupt(void)
// 1079 {
// 1080     CPlatform::IncrementSystemTick();
// 1081 }
// 1082 #endif //TIMER1_INTERRUPT
// 1083 //-----------------------------------------------------------------------------------------------------
// 1084 #ifdef TIMER2_INTERRUPT
// 1085 // Прерывание TIMER2_COMP_vect
// 1086 #pragma vector = TIMER2_COMP_vect	// Прерывание по совпадению TMR2 с OCR2

        RSEG CODE:CODE:NOROOT(1)
        CALL_GRAPH_ROOT ??SystemTickInterrupt, "interrupt"
// 1087 __interrupt void SystemTickInterrupt(void)
??SystemTickInterrupt:
// 1088 {
        ST      -Y, R25
        ST      -Y, R24
        ST      -Y, R31
        ST      -Y, R30
        ST      -Y, R3
        ST      -Y, R2
        ST      -Y, R1
        ST      -Y, R0
        ST      -Y, R23
        ST      -Y, R22
        ST      -Y, R21
        ST      -Y, R20
        ST      -Y, R19
        ST      -Y, R18
        ST      -Y, R17
        ST      -Y, R16
        IN      R24, 0x3F
        IN      R25, 0x3B
// 1089     CPlatform::IncrementSystemTick();
        CALL    ??IncrementSystemTick
// 1090 }
        OUT     0x3B, R25
        OUT     0x3F, R24
        LD      R16, Y+
        LD      R17, Y+
        LD      R18, Y+
        LD      R19, Y+
        LD      R20, Y+
        LD      R21, Y+
        LD      R22, Y+
        LD      R23, Y+
        LD      R0, Y+
        LD      R1, Y+
        LD      R2, Y+
        LD      R3, Y+
        LD      R30, Y+
        LD      R31, Y+
        LD      R24, Y+
        LD      R25, Y+
        RETI

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::ReadyInterruptDisaable()
??ReadyInterruptDisaable:
        CBI     0x1C, 0x03
        RET
        REQUIRE _A_EECR

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t *CEeprom::GetBufferPointer()
??GetBufferPointer:
        LDI     R30, LOW(??m_puiBuffer)
        LDI     R31, (??m_puiBuffer) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::SetBufferPointer(uint8_t *)
??SetBufferPointer:
        LDI     R30, LOW(??m_puiBuffer)
        LDI     R31, (??m_puiBuffer) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::SetAddress(uint16_t)
??SetAddress:
        LDI     R30, LOW(??m_uiAddress)
        LDI     R31, (??m_uiAddress) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CEeprom::GetAddress()
??GetAddress:
        LDI     R30, LOW(??m_uiAddress)
        LDI     R31, (??m_uiAddress) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::SetBufferByteCounter(uint16_t)
??SetBufferByteCounter:
        LDI     R30, LOW(??m_nuiBufferByteCounter)
        LDI     R31, (??m_nuiBufferByteCounter) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CEeprom::GetBufferByteCounter()
??GetBufferByteCounter:
        LDI     R30, LOW(??m_nuiBufferByteCounter)
        LDI     R31, (??m_nuiBufferByteCounter) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::SetLength(uint16_t)
??SetLength:
        LDI     R30, LOW(??m_uiLength)
        LDI     R31, (??m_uiLength) >> 8
        ST      Z, R16
        STD     Z+1, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CEeprom::GetLength()
??GetLength:
        LDI     R30, LOW(??m_uiLength)
        LDI     R31, (??m_uiLength) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CEeprom::SetBufferIsWrited(bool)
??SetBufferIsWrited:
        STS     ??m_bBufferIsWrited, R16
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CFlash::GetBlockLength(uint8_t)
??GetBlockLength:
        MOV     R30, R16
        LDI     R31, 0
        LSL     R30
        ROL     R31
        LSL     R30
        ROL     R31
        SUBI    R30, LOW((-(??axDataBaseBlocksPositionData + 1) & 0xFFFF))
        SBCI    R31, HIGH((-(??axDataBaseBlocksPositionData + 1) & 0xFFFF))
        LPM     R16, Z
        LDI     R17, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CFlash::GetBlockOffset(uint8_t)
??GetBlockOffset:
        MOV     R30, R16
        LDI     R31, 0
        LSL     R30
        ROL     R31
        LSL     R30
        ROL     R31
        SUBI    R30, LOW((-(??axDataBaseBlocksPositionData + 2) & 0xFFFF))
        SBCI    R31, HIGH((-(??axDataBaseBlocksPositionData + 2) & 0xFFFF))
        LPM     R16, Z+
        LPM     R17, Z
        SBIW    R31:R30, 1
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t __farflash *CFlash::GetBlockPointer(uint8_t)
??GetBlockPointer:
        CALL    ?PROLOGUE4_L09
        MOV     R24, R16
        LDI     R26, LOW(??xMainDataBase)
        LDI     R27, (??xMainDataBase) >> 8
        LDI     R25, 0
        MOV     R16, R24
        CALL    ??GetBlockOffset
        MOVW    R21:R20, R17:R16
        MOVW    R17:R16, R27:R26
        MOV     R18, R25
        ADD     R16, R20
        ADC     R17, R21
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::WatchdogReset()
??WatchdogReset:
        WDR
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::InterruptEnable()
??InterruptEnable:
        SEI
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::InterruptDisable()
??InterruptDisable:
        CLI
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::IncrementSystemTick()
??IncrementSystemTick:
        LDI     R30, LOW(??m_uiSystemTick)
        LDI     R31, (??m_uiSystemTick) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        SUBI    R16, 255
        SBCI    R17, 255
        ST      Z, R16
        STD     Z+1, R17
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::StatusLedSetPinOutput()
??StatusLedSetPinOutput:
        SBI     0x1A, 0x04
        RET
        REQUIRE _A_DDRA

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::TxLedSetPinOutput()
??TxLedSetPinOutput:
        SBI     0x1A, 0x03
        RET
        REQUIRE _A_DDRA

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::TxLedOff()
??TxLedOff:
        SBI     0x1B, 0x03
        RET
        REQUIRE _A_PORTA

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::KeyOneSetPinInput()
??KeyOneSetPinInput:
        CBI     0x14, 0x02
        RET
        REQUIRE _A_DDRC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::KeyTwoSetPinInput()
??KeyTwoSetPinInput:
        CBI     0x14, 0x01
        RET
        REQUIRE _A_DDRC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::KeyThreeSetPinInput()
??KeyThreeSetPinInput:
        CBI     0x14, 0x00
        RET
        REQUIRE _A_DDRC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPlatform::ExternalKeySetPinInput()
??ExternalKeySetPinInput:
        CBI     0x14, 0x04
        RET
        REQUIRE _A_DDRC

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetErrorCode(uint8_t)
??SetErrorCode:
        STS     ??m_uiErrorCode, R16
        RET

        ASEGN ABSOLUTE:DATA:NOROOT,01cH
__?EECR:

        ASEGN ABSOLUTE:DATA:NOROOT,01dH
__?EEDR:

        ASEGN ABSOLUTE:DATA:NOROOT,01eH
__?EEARL:

        ASEGN ABSOLUTE:DATA:NOROOT,01fH
__?EEARH:

        COMMON INTVEC:CODE:ROOT(1)
        ORG 36
`??SystemTickInterrupt::??INTVEC 36`:
        JMP     ??SystemTickInterrupt

        COMMON INTVEC:CODE:ROOT(1)
        ORG 88
`??EEPROM_EE_READY::??INTVEC 88`:
        JMP     ??EEPROM_EE_READY

        COMMON INTVEC:CODE:ROOT(1)
        ORG 120
`??SIG_UART1_RECV::??INTVEC 120`:
        JMP     ??SIG_UART1_RECV

        COMMON INTVEC:CODE:ROOT(1)
        ORG 124
`??SIG_UART1_DATA::??INTVEC 124`:
        JMP     ??SIG_UART1_DATA

        COMMON INTVEC:CODE:ROOT(1)
        ORG 128
`??SIG_UART1_TXC::??INTVEC 128`:
        JMP     ??SIG_UART1_TXC

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_Z>`:
        DC16    SFE(NEAR_Z) - SFB(NEAR_Z)
        DC16    SFB(NEAR_Z)
        DP      0
        REQUIRE ?need_segment_init

        END
// 1091 #endif //TIMER2_INTERRUPT
// 1092 
// 1093 
// 1094 
// 
//   105 bytes in segment ABSOLUTE
// 2 886 bytes in segment CODE
//     7 bytes in segment INITTAB
//    20 bytes in segment INTVEC
//   748 bytes in segment NEAR_F
//    15 bytes in segment NEAR_Z
// 
// 3 392 bytes of CODE memory (+ 269 bytes shared)
//    15 bytes of DATA memory (+ 105 bytes shared)
//
//Errors: none
//Warnings: 8
