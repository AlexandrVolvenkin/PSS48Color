###############################################################################
#
# IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR           29/Jun/2023  11:26:06
# Copyright 1996-2018 IAR Systems AB.
#
#    Source file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Mvsn21.cpp
#    Command line =  
#        -f C:\Users\Admin\AppData\Local\Temp\EWC529.tmp
#        (--string_literals_in_flash
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Mvsn21.cpp
#        --cpu=m128a -ms -o
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
#        --initializers_in_flash --root_variables --no_cse --no_inline
#        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
#        -DENABLE_BIT_DEFINITIONS -e -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
#        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -On
#        --eec++)
#    Locale       =  Russian_RUS.1251
#    List file    =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\Mvsn21.lst
#    Object file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj\Mvsn21.r90
#
###############################################################################

D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\Mvsn21.cpp
      1          //-----------------------------------------------------------------------------------------------------
      2          //  Source      : FileName.cpp
      3          //  Created     : 01.06.2022
      4          //  Author      : Alexandr Volvenkin
      5          //  email       : aav-36@mail.ru
      6          //  GitHub      : https://github.com/AlexandrVolvenkin
      7          //-----------------------------------------------------------------------------------------------------
      8          #include "Mvsn21.h"

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CDriver::SetErrorAlarmData(uint8_t)
   \                     ??SetErrorAlarmData:
   \   00000000   01AD               MOVW    R21:R20, R27:R26
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   81A7               LDD     R26, Z+7
   \   00000006   85B0               LDD     R27, Z+8
   \   00000008   932C               ST      X, R18
   \   0000000A   01DA               MOVW    R27:R26, R21:R20
   \   0000000C   9508               RET
      9          #include "Platform.h"

   \                                 In  segment ABSOLUTE, at 0x9d, root
   \   union <unnamed> volatile __io _A_UCSR1C
   \                     _A_UCSR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9c, root
   \   union <unnamed> volatile __io _A_UDR1
   \                     _A_UDR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9b, root
   \   union <unnamed> volatile __io _A_UCSR1A
   \                     _A_UCSR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9a, root
   \   union <unnamed> volatile __io _A_UCSR1B
   \                     _A_UCSR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x99, root
   \   union <unnamed> volatile __io _A_UBRR1L
   \                     _A_UBRR1L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x98, root
   \   union <unnamed> volatile __io _A_UBRR1H
   \                     _A_UBRR1H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x95, root
   \   union <unnamed> volatile __io _A_UCSR0C
   \                     _A_UCSR0C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x90, root
   \   union <unnamed> volatile __io _A_UBRR0H
   \                     _A_UBRR0H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8c, root
   \   union <unnamed> volatile __io _A_TCCR3C
   \                     _A_TCCR3C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8b, root
   \   union <unnamed> volatile __io _A_TCCR3A
   \                     _A_TCCR3A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8a, root
   \   union <unnamed> volatile __io _A_TCCR3B
   \                     _A_TCCR3B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x88, root
   \   union <unnamed> volatile __io _A_TCNT3
   \                     _A_TCNT3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x86, root
   \   union <unnamed> volatile __io _A_OCR3A
   \                     _A_OCR3A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x84, root
   \   union <unnamed> volatile __io _A_OCR3B
   \                     _A_OCR3B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x82, root
   \   union <unnamed> volatile __io _A_OCR3C
   \                     _A_OCR3C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x80, root
   \   union <unnamed> volatile __io _A_ICR3
   \                     _A_ICR3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x7d, root
   \   union <unnamed> volatile __io _A_ETIMSK
   \                     _A_ETIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7c, root
   \   union <unnamed> volatile __io _A_ETIFR
   \                     _A_ETIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7a, root
   \   union <unnamed> volatile __io _A_TCCR1C
   \                     _A_TCCR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x78, root
   \   union <unnamed> volatile __io _A_OCR1C
   \                     _A_OCR1C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x74, root
   \   union <unnamed> volatile __io _A_TWCR
   \                     _A_TWCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x73, root
   \   union <unnamed> volatile __io _A_TWDR
   \                     _A_TWDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x72, root
   \   union <unnamed> volatile __io _A_TWAR
   \                     _A_TWAR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x71, root
   \   union <unnamed> volatile __io _A_TWSR
   \                     _A_TWSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x70, root
   \   union <unnamed> volatile __io _A_TWBR
   \                     _A_TWBR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6f, root
   \   union <unnamed> volatile __io _A_OSCCAL
   \                     _A_OSCCAL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6d, root
   \   union <unnamed> volatile __io _A_XMCRA
   \                     _A_XMCRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6c, root
   \   union <unnamed> volatile __io _A_XMCRB
   \                     _A_XMCRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6a, root
   \   union <unnamed> volatile __io _A_EICRA
   \                     _A_EICRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x68, root
   \   union <unnamed> volatile __io _A_SPMCSR
   \                     _A_SPMCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x65, root
   \   union <unnamed> volatile __io _A_PORTG
   \                     _A_PORTG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x64, root
   \   union <unnamed> volatile __io _A_DDRG
   \                     _A_DDRG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x63, root
   \   union <unnamed> volatile __io _A_PING
   \                     _A_PING:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x62, root
   \   union <unnamed> volatile __io _A_PORTF
   \                     _A_PORTF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x61, root
   \   union <unnamed> volatile __io _A_DDRF
   \                     _A_DDRF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5f, root
   \   union <unnamed> volatile __io _A_SREG
   \                     _A_SREG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5d, root
   \   union <unnamed> volatile __io _A_SP
   \                     _A_SP:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x5c, root
   \   union <unnamed> volatile __io _A_XDIV
   \                     _A_XDIV:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5b, root
   \   union <unnamed> volatile __io _A_RAMPZ
   \                     _A_RAMPZ:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5a, root
   \   union <unnamed> volatile __io _A_EICRB
   \                     _A_EICRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x59, root
   \   union <unnamed> volatile __io _A_EIMSK
   \                     _A_EIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x58, root
   \   union <unnamed> volatile __io _A_EIFR
   \                     _A_EIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x57, root
   \   union <unnamed> volatile __io _A_TIMSK
   \                     _A_TIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x56, root
   \   union <unnamed> volatile __io _A_TIFR
   \                     _A_TIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x55, root
   \   union <unnamed> volatile __io _A_MCUCR
   \                     _A_MCUCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x54, root
   \   union <unnamed> volatile __io _A_MCUCSR
   \                     _A_MCUCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x53, root
   \   union <unnamed> volatile __io _A_TCCR0
   \                     _A_TCCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x52, root
   \   union <unnamed> volatile __io _A_TCNT0
   \                     _A_TCNT0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x51, root
   \   union <unnamed> volatile __io _A_OCR0
   \                     _A_OCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x50, root
   \   union <unnamed> volatile __io _A_ASSR
   \                     _A_ASSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4f, root
   \   union <unnamed> volatile __io _A_TCCR1A
   \                     _A_TCCR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4e, root
   \   union <unnamed> volatile __io _A_TCCR1B
   \                     _A_TCCR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4c, root
   \   union <unnamed> volatile __io _A_TCNT1
   \                     _A_TCNT1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x4a, root
   \   union <unnamed> volatile __io _A_OCR1A
   \                     _A_OCR1A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x48, root
   \   union <unnamed> volatile __io _A_OCR1B
   \                     _A_OCR1B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x46, root
   \   union <unnamed> volatile __io _A_ICR1
   \                     _A_ICR1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x45, root
   \   union <unnamed> volatile __io _A_TCCR2
   \                     _A_TCCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x44, root
   \   union <unnamed> volatile __io _A_TCNT2
   \                     _A_TCNT2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x43, root
   \   union <unnamed> volatile __io _A_OCR2
   \                     _A_OCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x42, root
   \   union <unnamed> volatile __io _A_OCDR
   \                     _A_OCDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x41, root
   \   union <unnamed> volatile __io _A_WDTCR
   \                     _A_WDTCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x40, root
   \   union <unnamed> volatile __io _A_SFIOR
   \                     _A_SFIOR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3e, root
   \   union <unnamed> volatile __io _A_EEAR
   \                     _A_EEAR:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x3d, root
   \   union <unnamed> volatile __io _A_EEDR
   \                     _A_EEDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3c, root
   \   union <unnamed> volatile __io _A_EECR
   \                     _A_EECR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3b, root
   \   union <unnamed> volatile __io _A_PORTA
   \                     _A_PORTA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3a, root
   \   union <unnamed> volatile __io _A_DDRA
   \                     _A_DDRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x39, root
   \   union <unnamed> volatile __io _A_PINA
   \                     _A_PINA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x38, root
   \   union <unnamed> volatile __io _A_PORTB
   \                     _A_PORTB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x37, root
   \   union <unnamed> volatile __io _A_DDRB
   \                     _A_DDRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x36, root
   \   union <unnamed> volatile __io _A_PINB
   \                     _A_PINB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x35, root
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x34, root
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x33, root
   \   union <unnamed> volatile __io _A_PINC
   \                     _A_PINC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x32, root
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x31, root
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x30, root
   \   union <unnamed> volatile __io _A_PIND
   \                     _A_PIND:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2f, root
   \   union <unnamed> volatile __io _A_SPDR
   \                     _A_SPDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2e, root
   \   union <unnamed> volatile __io _A_SPSR
   \                     _A_SPSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2d, root
   \   union <unnamed> volatile __io _A_SPCR
   \                     _A_SPCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2c, root
   \   union <unnamed> volatile __io _A_UDR0
   \                     _A_UDR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2b, root
   \   union <unnamed> volatile __io _A_UCSR0A
   \                     _A_UCSR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a, root
   \   union <unnamed> volatile __io _A_UCSR0B
   \                     _A_UCSR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x29, root
   \   union <unnamed> volatile __io _A_UBRR0L
   \                     _A_UBRR0L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x28, root
   \   union <unnamed> volatile __io _A_ACSR
   \                     _A_ACSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27, root
   \   union <unnamed> volatile __io _A_ADMUX
   \                     _A_ADMUX:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x26, root
   \   union <unnamed> volatile __io _A_ADCSRA
   \                     _A_ADCSRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x24, root
   \   union <unnamed> volatile __io _A_ADC
   \                     _A_ADC:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x23, root
   \   union <unnamed> volatile __io _A_PORTE
   \                     _A_PORTE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x22, root
   \   union <unnamed> volatile __io _A_DDRE
   \                     _A_DDRE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x21, root
   \   union <unnamed> volatile __io _A_PINE
   \                     _A_PINE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x20, root
   \   union <unnamed> volatile __io _A_PINF
   \                     _A_PINF:
   \   00000000                      DS8 1

      static __flash TDataBase CFlash::xMainDataBase;
                               ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",368  Warning[Pe427]: 
          qualified name is not allowed in member declaration

      static __flash TDataBaseBlockPositionData CFlash::axDataBaseBlocksPositionData[];
                                                ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",369  Warning[Pe427]: 
          qualified name is not allowed in member declaration
     10          //#include "Config.h"
     11          #include "Pss21.h"

      virtual bool IsSolved(void) {};
                                   ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Task.h",20  Warning[Pe940]: 
          missing return statement at end of non-void function
          "CTaskInterface::IsSolved"

      virtual bool IsSourceStateActive(void) {};
                                              ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Task.h",23  Warning[Pe940]: 
          missing return statement at end of non-void function
          "CTaskInterface::IsSourceStateActive"

      bool IsSolved(void) {};
                           ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Task.h",58  Warning[Pe940]: 
          missing return statement at end of non-void function
          "CIsRegularButtonPressedInterface::IsSolved"

      virtual bool IsSourceStateActive(void) {};
                                              ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Task.h",61  Warning[Pe940]: 
          missing return statement at end of non-void function
          "CIsRegularButtonPressedInterface::IsSourceStateActive"

      virtual uint16_t KEY_PRESSED_TIME(void) {};
                                               ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Task.h",63  Warning[Pe940]: 
          missing return statement at end of non-void function
          "CIsRegularButtonPressedInterface::KEY_PRESSED_TIME"
     12          #include "Crc.h"
     13          
     14          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     15          CMvsn21Driver::CMvsn21Driver(uint8_t uiType)
   \                     ??CMvsn21Driver:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   2F82               MOV     R24, R18
     16          {
   \   00000008   018D               MOVW    R17:R16, R27:R26
   \   0000000A   5F05               SUBI    R16, 245
   \   0000000C   4F1F               SBCI    R17, 255
   \   0000000E   ........           CALL    ??CDfa
   \   00000012   ....               LDI     R16, LOW(??__vtbl_3)
   \   00000014   ....               LDI     R17, (??__vtbl_3) >> 8
   \   00000016   01FD               MOVW    R31:R30, R27:R26
   \   00000018   8701               STD     Z+9, R16
   \   0000001A   8712               STD     Z+10, R17
   \   0000001C   ....               LDI     R16, LOW(??__vtbl_CDfa)
   \   0000001E   ....               LDI     R17, (??__vtbl_CDfa) >> 8
   \   00000020   01FD               MOVW    R31:R30, R27:R26
   \   00000022   8704               STD     Z+12, R16
   \   00000024   8715               STD     Z+13, R17
     17              m_uiType = uiType;
   \   00000026   938C               ST      X, R24
     18          }
   \   00000028   018D               MOVW    R17:R16, R27:R26
   \   0000002A   E0E4               LDI     R30, 4
   \   0000002C   ........           JMP     ?EPILOGUE_B4_L09
     19          
     20          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     21          CMvsn21Driver::~CMvsn21Driver()
   \                     `?~CMvsn21Driver`:
     22          {
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01C8               MOVW    R25:R24, R17:R16
   \   00000006   01D9               MOVW    R27:R26, R19:R18
   \   00000008   2F08               MOV     R16, R24
   \   0000000A   2B09               OR      R16, R25
   \   0000000C   F061               BREQ    `?~CMvsn21Driver_1`
     23          
     24          }
   \   0000000E   E020               LDI     R18, 0
   \   00000010   E030               LDI     R19, 0
   \   00000012   018C               MOVW    R17:R16, R25:R24
   \   00000014   5F05               SUBI    R16, 245
   \   00000016   4F1F               SBCI    R17, 255
   \   00000018   ........           CALL    `?~CDfa`
   \   0000001C   FBA0               BST     R26, 0
   \   0000001E   F41E               BRTC    `?~CMvsn21Driver_1`
   \   00000020   018C               MOVW    R17:R16, R25:R24
   \   00000022   ........           CALL    `??operator delete`
   \                     `?~CMvsn21Driver_1`:
   \   00000026   E0E4               LDI     R30, 4
   \   00000028   ........           JMP     ?EPILOGUE_B4_L09
     25          
     26          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     27          void CMvsn21Driver::Allocate(TMemoryAllocationConext &xMemoryAllocationConext)
   \                     ??Allocate:
     28          {
   \   00000000   01BD               MOVW    R23:R22, R27:R26
   \   00000002   01D8               MOVW    R27:R26, R17:R16
     29              m_uiAddress = xMemoryAllocationConext.uiAddress;
   \   00000004   01F9               MOVW    R31:R30, R19:R18
   \   00000006   8100               LD      R16, Z
   \   00000008   01FD               MOVW    R31:R30, R27:R26
   \   0000000A   8B00               STD     Z+16, R16
     30              m_puiRxBuffer = xMemoryAllocationConext.puiRxBuffer;
   \   0000000C   01F9               MOVW    R31:R30, R19:R18
   \   0000000E   8101               LDD     R16, Z+1
   \   00000010   8112               LDD     R17, Z+2
   \   00000012   01FD               MOVW    R31:R30, R27:R26
   \   00000014   8B01               STD     Z+17, R16
   \   00000016   8B12               STD     Z+18, R17
     31              m_puiTxBuffer = xMemoryAllocationConext.puiTxBuffer;
   \   00000018   01F9               MOVW    R31:R30, R19:R18
   \   0000001A   8103               LDD     R16, Z+3
   \   0000001C   8114               LDD     R17, Z+4
   \   0000001E   01FD               MOVW    R31:R30, R27:R26
   \   00000020   8B03               STD     Z+19, R16
   \   00000022   8B14               STD     Z+20, R17
     32              m_puiErrorCode = xMemoryAllocationConext.puiErrorCode;
   \   00000024   01F9               MOVW    R31:R30, R19:R18
   \   00000026   8105               LDD     R16, Z+5
   \   00000028   8116               LDD     R17, Z+6
   \   0000002A   01FD               MOVW    R31:R30, R27:R26
   \   0000002C   8305               STD     Z+5, R16
   \   0000002E   8316               STD     Z+6, R17
     33              // Получим указатель на место в массиве дискретных входов для текущего модуля.
     34              m_puiDiscreteInputs =
     35                  &xMemoryAllocationConext.
     36                  puiDiscreteInputs[xMemoryAllocationConext.uiUsedDiscreteInputs];
   \   00000030   01F9               MOVW    R31:R30, R19:R18
   \   00000032   8147               LDD     R20, Z+7
   \   00000034   8550               LDD     R21, Z+8
   \   00000036   01F9               MOVW    R31:R30, R19:R18
   \   00000038   8501               LDD     R16, Z+9
   \   0000003A   E010               LDI     R17, 0
   \   0000003C   0F40               ADD     R20, R16
   \   0000003E   1F51               ADC     R21, R17
   \   00000040   01FD               MOVW    R31:R30, R27:R26
   \   00000042   8B45               STD     Z+21, R20
   \   00000044   8B56               STD     Z+22, R21
     37              // Увеличим общий объём выделенной памяти.
     38              xMemoryAllocationConext.
     39              uiUsedDiscreteInputs +=
     40                  MVSN21_DISCRETE_INPUTS_NUMBER;
   \   00000046   01F9               MOVW    R31:R30, R19:R18
   \   00000048   8501               LDD     R16, Z+9
   \   0000004A   5E08               SUBI    R16, 232
   \   0000004C   8701               STD     Z+9, R16
     41          
     42              // Получим указатель на место в массиве состояний ошибок для текущего модуля.
     43              m_puiErrorAlarmDataArray =
     44                  &xMemoryAllocationConext.
     45                  puiErrorAlarmDataArray[DISCRETE_INPUT_MODULE_FAILURE];
   \   0000004E   01F9               MOVW    R31:R30, R19:R18
   \   00000050   8903               LDD     R16, Z+19
   \   00000052   8914               LDD     R17, Z+20
   \   00000054   01FD               MOVW    R31:R30, R27:R26
   \   00000056   8307               STD     Z+7, R16
   \   00000058   8710               STD     Z+8, R17
     46          
     47              m_uiBadAnswerCounter = 0;
   \   0000005A   01FD               MOVW    R31:R30, R27:R26
   \   0000005C   E000               LDI     R16, 0
   \   0000005E   8B07               STD     Z+23, R16
     48          }
   \   00000060   01DB               MOVW    R27:R26, R23:R22
   \   00000062   9508               RET
     49          
     50          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     51          uint8_t CMvsn21Driver::DataExchange(void)
   \                     ??DataExchange:
     52          {
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
     53              m_puiTxBuffer[0] = DATA_EXCHANGE_COMMAND;
   \   00000006   9653               ADIW    R27:R26, 19
   \   00000008   91ED               LD      R30, X+
   \   0000000A   91FC               LD      R31, X
   \   0000000C   9754               SBIW    R27:R26, 20
   \   0000000E   E402               LDI     R16, 66
   \   00000010   8300               ST      Z, R16
     54          
     55              CPss21::ConnectDevice(m_uiAddress);
   \   00000012   01FD               MOVW    R31:R30, R27:R26
   \   00000014   8900               LDD     R16, Z+16
   \   00000016   ........           CALL    ??ConnectDevice
     56              delay_us(500);
   \   0000001A   E60A               LDI     R16, 106
   \   0000001C   E013               LDI     R17, 3
   \   0000001E   5001               SUBI    R16, 1
   \   00000020   4010               SBCI    R17, 0
   \   00000022   F7E9               BRNE    $-4
   \   00000024   C000               RJMP    $+2
   \   00000026   0000               NOP
     57              CSpi::Exchange(m_puiRxBuffer,
     58                             m_puiTxBuffer,
     59                             (PRIAMBLE_LENGTH +
     60                              DATA_EXCHANGE_COMMAND_ANSWER_LENGTH +
     61                              ONE_BYTE_CRC_LENGTH));
   \   00000028   E049               LDI     R20, 9
   \   0000002A   E050               LDI     R21, 0
   \   0000002C   01FD               MOVW    R31:R30, R27:R26
   \   0000002E   8923               LDD     R18, Z+19
   \   00000030   8934               LDD     R19, Z+20
   \   00000032   01FD               MOVW    R31:R30, R27:R26
   \   00000034   8901               LDD     R16, Z+17
   \   00000036   8912               LDD     R17, Z+18
   \   00000038   ........           CALL    ??Exchange
     62              CPss21::DisconnectDevice();
   \   0000003C   ........           CALL    ??DisconnectDevice
     63          
     64              // что ответил модуль?
     65              switch(m_puiRxBuffer[COMMAND_BYTE_OFFSET])
   \   00000040   9651               ADIW    R27:R26, 17
   \   00000042   91ED               LD      R30, X+
   \   00000044   91FC               LD      R31, X
   \   00000046   9752               SBIW    R27:R26, 18
   \   00000048   8101               LDD     R16, Z+1
   \   0000004A   5204               SUBI    R16, 36
   \   0000004C   F409               BRNE    $+2+2
   \   0000004E   C040               RJMP    ??DataExchange_1
   \   00000050   510E               SUBI    R16, 30
   \   00000052   F5F1               BRNE    ??DataExchange_1
     66              {
     67              case DATA_READY:
     68                  // данные не повреждены?
     69                  if ((iCrcSummOneByteCompare(&m_puiRxBuffer[COMMAND_BYTE_OFFSET],
     70                                              (COMMAND_BYTE_LENGTH +
     71                                               DATA_EXCHANGE_COMMAND_ANSWER_LENGTH)) > 0))
   \   00000054   E027               LDI     R18, 7
   \   00000056   E030               LDI     R19, 0
   \   00000058   01FD               MOVW    R31:R30, R27:R26
   \   0000005A   8901               LDD     R16, Z+17
   \   0000005C   8912               LDD     R17, Z+18
   \   0000005E   5F0F               SUBI    R16, 255
   \   00000060   4F1F               SBCI    R17, 255
   \   00000062   ........           CALL    ??iCrcSummOneByteCompare
   \   00000066   3001               CPI     R16, 1
   \   00000068   4010               SBCI    R17, 0
   \   0000006A   F194               BRLT    ??DataExchange_1
     72                  {
     73                      m_uiBadAnswerCounter = 0;
   \   0000006C   01FD               MOVW    R31:R30, R27:R26
   \   0000006E   E000               LDI     R16, 0
   \   00000070   8B07               STD     Z+23, R16
     74                      SetErrorAlarmData(0);
   \   00000072   E020               LDI     R18, 0
   \   00000074   018D               MOVW    R17:R16, R27:R26
   \   00000076   ........           CALL    ??SetErrorAlarmData
     75                      // отправим полученные от модуля данные в рабочий массив прибора.
     76                      uint8_t *puiDestination = m_puiDiscreteInputs;
   \   0000007A   01FD               MOVW    R31:R30, R27:R26
   \   0000007C   8985               LDD     R24, Z+21
   \   0000007E   8996               LDD     R25, Z+22
     77                      for (uint8_t i = 0; i < DISCRETE_INPUT_BYTE_QUANTITY; i++)
   \   00000080   E060               LDI     R22, 0
   \                     ??DataExchange_2:
   \   00000082   3066               CPI     R22, 6
   \   00000084   F518               BRCC    ??DataExchange_3
     78                      {
     79                          uint8_t uiData = (m_puiRxBuffer[DATA_BYTE_OFFSET + i]);
   \   00000086   01FD               MOVW    R31:R30, R27:R26
   \   00000088   8901               LDD     R16, Z+17
   \   0000008A   8912               LDD     R17, Z+18
   \   0000008C   E070               LDI     R23, 0
   \   0000008E   0F06               ADD     R16, R22
   \   00000090   1F17               ADC     R17, R23
   \   00000092   01F8               MOVW    R31:R30, R17:R16
   \   00000094   8132               LDD     R19, Z+2
     80          
     81                          for (uint8_t j = 0; j < DISCRETE_INPUT_BITS_IN_BYTE_QUANTITY; j++)
   \   00000096   E020               LDI     R18, 0
   \                     ??DataExchange_4:
   \   00000098   3028               CPI     R18, 8
   \   0000009A   F4B0               BRCC    ??DataExchange_5
     82                          {
     83                              // четные биты (D0,D2,D4,D6) = 0 - разомкнуто (OFF), = 1 - замкнуто (ON)
     84                              // нечетные биты (D1,D3,D5,D7) = 0 - достоверно, = 1 - недостоверно
     85                              // бит нечётный?
     86                              if (j & 0x01)
   \   0000009C   FB20               BST     R18, 0
   \   0000009E   F096               BRTS    ??DataExchange_6
     87                              {
     88                                  //                            // бит достоверен? 0 - достоверно, 1 - недостоверно.
     89          //                            *puiDestination2++ = ((uiData & (1 << j)) ? 1 : 0);
     90                              }
     91                              else
     92                              {
     93                                  //контакты замкнуты?  0 - разомкнуто (OFF), 1 - замкнуто (ON)
     94                                  if ((uiData & (1 << j)))
   \   000000A0   E001               LDI     R16, 1
   \   000000A2   E010               LDI     R17, 0
   \   000000A4   2F42               MOV     R20, R18
   \   000000A6   ........           CALL    ?S_SHL_L02
   \   000000AA   2F13               MOV     R17, R19
   \   000000AC   2310               AND     R17, R16
   \   000000AE   2311               TST     R17
   \   000000B0   F029               BREQ    ??DataExchange_7
     95                                  {
     96                                      *puiDestination++ = 1;
   \   000000B2   01FC               MOVW    R31:R30, R25:R24
   \   000000B4   E001               LDI     R16, 1
   \   000000B6   8300               ST      Z, R16
   \   000000B8   9601               ADIW    R25:R24, 1
   \   000000BA   C004               RJMP    ??DataExchange_6
     97                                  }
     98                                  else
     99                                  {
    100                                      *puiDestination++ = 0;
   \                     ??DataExchange_7:
   \   000000BC   01FC               MOVW    R31:R30, R25:R24
   \   000000BE   E000               LDI     R16, 0
   \   000000C0   8300               ST      Z, R16
   \   000000C2   9601               ADIW    R25:R24, 1
    101                                  }
    102                              }
    103                          }
   \                     ??DataExchange_6:
   \   000000C4   9523               INC     R18
   \   000000C6   CFE8               RJMP    ??DataExchange_4
    104                      }
   \                     ??DataExchange_5:
   \   000000C8   9563               INC     R22
   \   000000CA   CFDB               RJMP    ??DataExchange_2
    105                      return 1;
   \                     ??DataExchange_3:
   \   000000CC   E001               LDI     R16, 1
   \   000000CE   C015               RJMP    ??DataExchange_8
    106                  }
    107                  break;
    108          
    109              case DATA_NOT_READY:
    110                  break;
    111          
    112              default:
    113                  break;
    114              };
    115          
    116              // модуль не признан неисправным?
    117              if (m_uiBadAnswerCounter < BAD_MODULE_CYCLE_COUNT_DEFAULT)
   \                     ??DataExchange_1:
   \   000000D0   01FD               MOVW    R31:R30, R27:R26
   \   000000D2   8907               LDD     R16, Z+23
   \   000000D4   3104               CPI     R16, 20
   \   000000D6   F430               BRCC    ??DataExchange_9
    118              {
    119                  // увеличим значение счётчика - "количество сеансов связи с модулем без ответа".
    120                  m_uiBadAnswerCounter++;
   \   000000D8   01FD               MOVW    R31:R30, R27:R26
   \   000000DA   8907               LDD     R16, Z+23
   \   000000DC   9503               INC     R16
   \   000000DE   8B07               STD     Z+23, R16
    121                  return 0;
   \   000000E0   E000               LDI     R16, 0
   \   000000E2   C00B               RJMP    ??DataExchange_8
    122              }
    123              else
    124              {
    125                  // модуль признан неисправным.
    126                  *m_puiErrorCode = IMD_ERROR;
   \                     ??DataExchange_9:
   \   000000E4   9615               ADIW    R27:R26, 5
   \   000000E6   91ED               LD      R30, X+
   \   000000E8   91FC               LD      R31, X
   \   000000EA   9716               SBIW    R27:R26, 6
   \   000000EC   E001               LDI     R16, 1
   \   000000EE   8300               ST      Z, R16
    127                  SetErrorAlarmData(1);
   \   000000F0   E021               LDI     R18, 1
   \   000000F2   018D               MOVW    R17:R16, R27:R26
   \   000000F4   ........           CALL    ??SetErrorAlarmData
    128                  return 0;
   \   000000F8   E000               LDI     R16, 0
   \                     ??DataExchange_8:
   \   000000FA   E0E4               LDI     R30, 4
   \   000000FC   ........           JMP     ?EPILOGUE_B4_L09
    129              }
    130          }

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CMvsn21Driver &CMvsn21Driver::new CMvsn21Driver(uint8_t)
   \                     `??new CMvsn21Driver`:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
   \   00000004   E108               LDI     R16, 24
   \   00000006   E010               LDI     R17, 0
   \   00000008   ........           CALL    `??operator new`
   \   0000000C   2F20               MOV     R18, R16
   \   0000000E   2B21               OR      R18, R17
   \   00000010   F019               BREQ    `??new CMvsn21Driver_1`
   \   00000012   2F28               MOV     R18, R24
   \   00000014   ....               RCALL   ??CMvsn21Driver
   \   00000016   C002               RJMP    `??new CMvsn21Driver_2`
   \                     `??new CMvsn21Driver_1`:
   \   00000018   E000               LDI     R16, 0
   \   0000001A   E010               LDI     R17, 0
   \                     `??new CMvsn21Driver_2`:
   \   0000001C   9189               LD      R24, Y+
   \   0000001E   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CMvsn21Driver::~CMvsn21Driver for CDfaLite/-11/()
   \                     `?~CMvsn21Driver for CDfaLite/-11/`:
   \   00000000   500B               SUBI    R16, 11
   \   00000002   4010               SBCI    R17, 0
   \   00000004   ....               RJMP    `?~CMvsn21Driver`

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      0      2   CDriver::SetErrorAlarmData(uint8_t)
      0      2   CMvsn21Driver::Allocate(TMemoryAllocationConext &)
      4      2   CMvsn21Driver::CMvsn21Driver(uint8_t)
        4      2   -> CDfa::CDfa()
      4      2   CMvsn21Driver::DataExchange()
        4      2   -> CDriver::SetErrorAlarmData(uint8_t)
        4      2   -> CPss21::ConnectDevice(uint8_t)
        4      2   -> CPss21::DisconnectDevice()
        4      2   -> CSpi::Exchange(uint8_t *, uint8_t *, uint16_t)
        4      2   -> iCrcSummOneByteCompare(unsigned char *, unsigned int)
        4      2 ?S_SHL_L02
      1      2   CMvsn21Driver::new CMvsn21Driver(uint8_t)
        1      2   -> CMvsn21Driver::CMvsn21Driver(uint8_t)
        1      2   -> operator new(unsigned int)
      0      2   CMvsn21Driver::~CMvsn21Driver for CDfaLite/-11/()
        0      2   -> CMvsn21Driver::~CMvsn21Driver()
      4      2   CMvsn21Driver::~CMvsn21Driver()
        4      2   -> CDfa::~CDfa()
        4      2   -> operator delete(void *)


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      14  CDriver::SetErrorAlarmData(uint8_t)
     100  CMvsn21Driver::Allocate(TMemoryAllocationConext &)
      48  CMvsn21Driver::CMvsn21Driver(uint8_t)
     256  CMvsn21Driver::DataExchange()
      32  CMvsn21Driver::new CMvsn21Driver(uint8_t)
       6  CMvsn21Driver::~CMvsn21Driver for CDfaLite/-11/()
      44  CMvsn21Driver::~CMvsn21Driver()
       1  _A_ACSR
       2  _A_ADC
       1  _A_ADCSRA
       1  _A_ADMUX
       1  _A_ASSR
       1  _A_DDRA
       1  _A_DDRB
       1  _A_DDRC
       1  _A_DDRD
       1  _A_DDRE
       1  _A_DDRF
       1  _A_DDRG
       2  _A_EEAR
       1  _A_EECR
       1  _A_EEDR
       1  _A_EICRA
       1  _A_EICRB
       1  _A_EIFR
       1  _A_EIMSK
       1  _A_ETIFR
       1  _A_ETIMSK
       2  _A_ICR1
       2  _A_ICR3
       1  _A_MCUCR
       1  _A_MCUCSR
       1  _A_OCDR
       1  _A_OCR0
       2  _A_OCR1A
       2  _A_OCR1B
       2  _A_OCR1C
       1  _A_OCR2
       2  _A_OCR3A
       2  _A_OCR3B
       2  _A_OCR3C
       1  _A_OSCCAL
       1  _A_PINA
       1  _A_PINB
       1  _A_PINC
       1  _A_PIND
       1  _A_PINE
       1  _A_PINF
       1  _A_PING
       1  _A_PORTA
       1  _A_PORTB
       1  _A_PORTC
       1  _A_PORTD
       1  _A_PORTE
       1  _A_PORTF
       1  _A_PORTG
       1  _A_RAMPZ
       1  _A_SFIOR
       2  _A_SP
       1  _A_SPCR
       1  _A_SPDR
       1  _A_SPMCSR
       1  _A_SPSR
       1  _A_SREG
       1  _A_TCCR0
       1  _A_TCCR1A
       1  _A_TCCR1B
       1  _A_TCCR1C
       1  _A_TCCR2
       1  _A_TCCR3A
       1  _A_TCCR3B
       1  _A_TCCR3C
       1  _A_TCNT0
       2  _A_TCNT1
       1  _A_TCNT2
       2  _A_TCNT3
       1  _A_TIFR
       1  _A_TIMSK
       1  _A_TWAR
       1  _A_TWBR
       1  _A_TWCR
       1  _A_TWDR
       1  _A_TWSR
       1  _A_UBRR0H
       1  _A_UBRR0L
       1  _A_UBRR1H
       1  _A_UBRR1L
       1  _A_UCSR0A
       1  _A_UCSR0B
       1  _A_UCSR0C
       1  _A_UCSR1A
       1  _A_UCSR1B
       1  _A_UCSR1C
       1  _A_UDR0
       1  _A_UDR1
       1  _A_WDTCR
       1  _A_XDIV
       1  _A_XMCRA
       1  _A_XMCRB
      32  -- Other

 
 105 bytes in segment ABSOLUTE
 500 bytes in segment CODE
  32 bytes in segment NEAR_F
 
 512 bytes of CODE memory (+  20 bytes shared)
   0 bytes of DATA memory (+ 105 bytes shared)

Errors: none
Warnings: 7
