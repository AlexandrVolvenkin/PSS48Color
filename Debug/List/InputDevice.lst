###############################################################################
#
# IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR           13/Sep/2024  00:53:28
# Copyright 1996-2018 IAR Systems AB.
#
#    Source file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
#    Command line =  
#        -f C:\Users\Admin\AppData\Local\Temp\EW8AE2.tmp
#        (--string_literals_in_flash
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
#        --cpu=m128a -ms -o
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
#        --initializers_in_flash --root_variables --no_cse --no_inline
#        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
#        -DENABLE_BIT_DEFINITIONS -e -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
#        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -On
#        --eec++)
#    Locale       =  Russian_RUS.1251
#    List file    =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\InputDevice.lst
#    Object file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj\InputDevice.r90
#
###############################################################################

D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
      1          //-----------------------------------------------------------------------------------------------------
      2          //  Source      : FileName.cpp
      3          //  Created     : 01.06.2022
      4          //  Author      : Alexandr Volvenkin
      5          //  email       : aav-36@mail.ru
      6          //  GitHub      : https://github.com/AlexandrVolvenkin
      7          //-----------------------------------------------------------------------------------------------------
      8          #include "InputDevice.h"

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CDfaLite::SetFsmState(uint8_t)
   \                     ??SetFsmState:
   \   00000000   01F8               MOVW    R31:R30, R17:R16
   \   00000002   8320               ST      Z, R18
   \   00000004   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint8_t CDfaLite::GetFsmState()
   \                     ??GetFsmState:
   \   00000000   01F8               MOVW    R31:R30, R17:R16
   \   00000002   8100               LD      R16, Z
   \   00000004   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint16_t CMultiFunctionKey::KEY_PRESSED_TIME_RECEIPT()
   \                     ??KEY_PRESSED_TIME_RECEIPT:
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   E604               LDI     R16, 100
   \   00000004   E010               LDI     R17, 0
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint16_t CMultiFunctionKey::KEY_PRESSED_TIME_RESET()
   \                     ??KEY_PRESSED_TIME_RESET:
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   ED0C               LDI     R16, 220
   \   00000004   E015               LDI     R17, 5
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint16_t CMultiFunctionKey::KEY_PRESSED_TIME_CHECK()
   \                     ??KEY_PRESSED_TIME_CHECK:
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   EB08               LDI     R16, 184
   \   00000004   E01B               LDI     R17, 11
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint16_t CMultiFunctionKey::KEY_PRESSED_TIME_SET_DEFAULT()
   \                     ??KEY_PRESSED_TIME_SET_DEFAULT:
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   E808               LDI     R16, 136
   \   00000004   E113               LDI     R17, 19
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 uint16_t CMultiFunctionKey::KEY_PRESSED_CHECK_REPEAT_TIME()
   \                     ??KEY_PRESSED_CHECK_REPEAT_TIME:
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   E302               LDI     R16, 50
   \   00000004   E010               LDI     R17, 0
   \   00000006   9508               RET
      9          #include "Platform.h"

   \                                 In  segment ABSOLUTE, at 0x9d, root
   \   union <unnamed> volatile __io _A_UCSR1C
   \                     _A_UCSR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9c, root
   \   union <unnamed> volatile __io _A_UDR1
   \                     _A_UDR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9b, root
   \   union <unnamed> volatile __io _A_UCSR1A
   \                     _A_UCSR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9a, root
   \   union <unnamed> volatile __io _A_UCSR1B
   \                     _A_UCSR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x99, root
   \   union <unnamed> volatile __io _A_UBRR1L
   \                     _A_UBRR1L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x98, root
   \   union <unnamed> volatile __io _A_UBRR1H
   \                     _A_UBRR1H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x95, root
   \   union <unnamed> volatile __io _A_UCSR0C
   \                     _A_UCSR0C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x90, root
   \   union <unnamed> volatile __io _A_UBRR0H
   \                     _A_UBRR0H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8c, root
   \   union <unnamed> volatile __io _A_TCCR3C
   \                     _A_TCCR3C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8b, root
   \   union <unnamed> volatile __io _A_TCCR3A
   \                     _A_TCCR3A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8a, root
   \   union <unnamed> volatile __io _A_TCCR3B
   \                     _A_TCCR3B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x88, root
   \   union <unnamed> volatile __io _A_TCNT3
   \                     _A_TCNT3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x86, root
   \   union <unnamed> volatile __io _A_OCR3A
   \                     _A_OCR3A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x84, root
   \   union <unnamed> volatile __io _A_OCR3B
   \                     _A_OCR3B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x82, root
   \   union <unnamed> volatile __io _A_OCR3C
   \                     _A_OCR3C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x80, root
   \   union <unnamed> volatile __io _A_ICR3
   \                     _A_ICR3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x7d, root
   \   union <unnamed> volatile __io _A_ETIMSK
   \                     _A_ETIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7c, root
   \   union <unnamed> volatile __io _A_ETIFR
   \                     _A_ETIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7a, root
   \   union <unnamed> volatile __io _A_TCCR1C
   \                     _A_TCCR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x78, root
   \   union <unnamed> volatile __io _A_OCR1C
   \                     _A_OCR1C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x74, root
   \   union <unnamed> volatile __io _A_TWCR
   \                     _A_TWCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x73, root
   \   union <unnamed> volatile __io _A_TWDR
   \                     _A_TWDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x72, root
   \   union <unnamed> volatile __io _A_TWAR
   \                     _A_TWAR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x71, root
   \   union <unnamed> volatile __io _A_TWSR
   \                     _A_TWSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x70, root
   \   union <unnamed> volatile __io _A_TWBR
   \                     _A_TWBR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6f, root
   \   union <unnamed> volatile __io _A_OSCCAL
   \                     _A_OSCCAL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6d, root
   \   union <unnamed> volatile __io _A_XMCRA
   \                     _A_XMCRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6c, root
   \   union <unnamed> volatile __io _A_XMCRB
   \                     _A_XMCRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6a, root
   \   union <unnamed> volatile __io _A_EICRA
   \                     _A_EICRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x68, root
   \   union <unnamed> volatile __io _A_SPMCSR
   \                     _A_SPMCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x65, root
   \   union <unnamed> volatile __io _A_PORTG
   \                     _A_PORTG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x64, root
   \   union <unnamed> volatile __io _A_DDRG
   \                     _A_DDRG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x63, root
   \   union <unnamed> volatile __io _A_PING
   \                     _A_PING:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x62, root
   \   union <unnamed> volatile __io _A_PORTF
   \                     _A_PORTF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x61, root
   \   union <unnamed> volatile __io _A_DDRF
   \                     _A_DDRF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5f, root
   \   union <unnamed> volatile __io _A_SREG
   \                     _A_SREG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5d, root
   \   union <unnamed> volatile __io _A_SP
   \                     _A_SP:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x5c, root
   \   union <unnamed> volatile __io _A_XDIV
   \                     _A_XDIV:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5b, root
   \   union <unnamed> volatile __io _A_RAMPZ
   \                     _A_RAMPZ:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5a, root
   \   union <unnamed> volatile __io _A_EICRB
   \                     _A_EICRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x59, root
   \   union <unnamed> volatile __io _A_EIMSK
   \                     _A_EIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x58, root
   \   union <unnamed> volatile __io _A_EIFR
   \                     _A_EIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x57, root
   \   union <unnamed> volatile __io _A_TIMSK
   \                     _A_TIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x56, root
   \   union <unnamed> volatile __io _A_TIFR
   \                     _A_TIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x55, root
   \   union <unnamed> volatile __io _A_MCUCR
   \                     _A_MCUCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x54, root
   \   union <unnamed> volatile __io _A_MCUCSR
   \                     _A_MCUCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x53, root
   \   union <unnamed> volatile __io _A_TCCR0
   \                     _A_TCCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x52, root
   \   union <unnamed> volatile __io _A_TCNT0
   \                     _A_TCNT0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x51, root
   \   union <unnamed> volatile __io _A_OCR0
   \                     _A_OCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x50, root
   \   union <unnamed> volatile __io _A_ASSR
   \                     _A_ASSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4f, root
   \   union <unnamed> volatile __io _A_TCCR1A
   \                     _A_TCCR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4e, root
   \   union <unnamed> volatile __io _A_TCCR1B
   \                     _A_TCCR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4c, root
   \   union <unnamed> volatile __io _A_TCNT1
   \                     _A_TCNT1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x4a, root
   \   union <unnamed> volatile __io _A_OCR1A
   \                     _A_OCR1A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x48, root
   \   union <unnamed> volatile __io _A_OCR1B
   \                     _A_OCR1B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x46, root
   \   union <unnamed> volatile __io _A_ICR1
   \                     _A_ICR1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x45, root
   \   union <unnamed> volatile __io _A_TCCR2
   \                     _A_TCCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x44, root
   \   union <unnamed> volatile __io _A_TCNT2
   \                     _A_TCNT2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x43, root
   \   union <unnamed> volatile __io _A_OCR2
   \                     _A_OCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x42, root
   \   union <unnamed> volatile __io _A_OCDR
   \                     _A_OCDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x41, root
   \   union <unnamed> volatile __io _A_WDTCR
   \                     _A_WDTCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x40, root
   \   union <unnamed> volatile __io _A_SFIOR
   \                     _A_SFIOR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3e, root
   \   union <unnamed> volatile __io _A_EEAR
   \                     _A_EEAR:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x3d, root
   \   union <unnamed> volatile __io _A_EEDR
   \                     _A_EEDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3c, root
   \   union <unnamed> volatile __io _A_EECR
   \                     _A_EECR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3b, root
   \   union <unnamed> volatile __io _A_PORTA
   \                     _A_PORTA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3a, root
   \   union <unnamed> volatile __io _A_DDRA
   \                     _A_DDRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x39, root
   \   union <unnamed> volatile __io _A_PINA
   \                     _A_PINA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x38, root
   \   union <unnamed> volatile __io _A_PORTB
   \                     _A_PORTB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x37, root
   \   union <unnamed> volatile __io _A_DDRB
   \                     _A_DDRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x36, root
   \   union <unnamed> volatile __io _A_PINB
   \                     _A_PINB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x35, root
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x34, root
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x33, root
   \   union <unnamed> volatile __io _A_PINC
   \                     _A_PINC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x32, root
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x31, root
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x30, root
   \   union <unnamed> volatile __io _A_PIND
   \                     _A_PIND:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2f, root
   \   union <unnamed> volatile __io _A_SPDR
   \                     _A_SPDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2e, root
   \   union <unnamed> volatile __io _A_SPSR
   \                     _A_SPSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2d, root
   \   union <unnamed> volatile __io _A_SPCR
   \                     _A_SPCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2c, root
   \   union <unnamed> volatile __io _A_UDR0
   \                     _A_UDR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2b, root
   \   union <unnamed> volatile __io _A_UCSR0A
   \                     _A_UCSR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a, root
   \   union <unnamed> volatile __io _A_UCSR0B
   \                     _A_UCSR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x29, root
   \   union <unnamed> volatile __io _A_UBRR0L
   \                     _A_UBRR0L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x28, root
   \   union <unnamed> volatile __io _A_ACSR
   \                     _A_ACSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27, root
   \   union <unnamed> volatile __io _A_ADMUX
   \                     _A_ADMUX:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x26, root
   \   union <unnamed> volatile __io _A_ADCSRA
   \                     _A_ADCSRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x24, root
   \   union <unnamed> volatile __io _A_ADC
   \                     _A_ADC:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x23, root
   \   union <unnamed> volatile __io _A_PORTE
   \                     _A_PORTE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x22, root
   \   union <unnamed> volatile __io _A_DDRE
   \                     _A_DDRE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x21, root
   \   union <unnamed> volatile __io _A_PINE
   \                     _A_PINE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x20, root
   \   union <unnamed> volatile __io _A_PINF
   \                     _A_PINF:
   \   00000000                      DS8 1

      static __flash TDataBase CFlash::xMainDataBase;
                               ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",368  Warning[Pe427]: 
          qualified name is not allowed in member declaration

      static __flash TDataBaseBlockPositionData CFlash::axDataBaseBlocksPositionData[];
                                                ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",369  Warning[Pe427]: 
          qualified name is not allowed in member declaration
     10          
     11          ////-----------------------------------------------------------------------------------------------------
     12          //CInputDevice::CInputDevice()
     13          //{
     14          //
     15          //}
     16          //
     17          ////-----------------------------------------------------------------------------------------------------
     18          //CInputDevice::CInputDevice(uint8_t (*fpuiEventSource)(void)) :
     19          //    m_fpuiEventSource(fpuiEventSource)
     20          //{
     21          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
     22          //    SetFsmState(KEY_EVENT_UNPRESSED);
     23          //}
     24          //
     25          ////-----------------------------------------------------------------------------------------------------
     26          //CInputDevice::~CInputDevice()
     27          //{
     28          //
     29          //}
     30          //
     31          ////-----------------------------------------------------------------------------------------------------
     32          //void CInputDevice::SetCapabilities(uint8_t (*fpuiEventSource)(void))
     33          //{
     34          //    m_fpuiEventSource = fpuiEventSource;
     35          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
     36          //    SetFsmState(KEY_EVENT_UNPRESSED);
     37          //}
     38          //
     39          ////-----------------------------------------------------------------------------------------------------
     40          //uint8_t CInputDevice::EventHappened(void)
     41          //{
     42          //    if (m_fpuiEventSource())
     43          //    {
     44          //        return 1;
     45          //    }
     46          //    else
     47          //    {
     48          //        return 0;
     49          //    }
     50          //
     51          //}
     52          //
     53          ////-----------------------------------------------------------------------------------------------------
     54          //uint8_t CInputDevice::KeyEventHappened(uint8_t uiCode)
     55          //{
     56          //    Fsm();
     57          //
     58          //    if (m_uiEventCode == uiCode)
     59          //    {
     60          //        m_uiEventCode = KEY_EVENT_UNPRESSED;
     61          //        m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
     62          //        return 1;
     63          //    }
     64          //    else
     65          //    {
     66          //        return 0;
     67          //    }
     68          //
     69          //}
     70          //
     71          ////-----------------------------------------------------------------------------------------------------
     72          //void CInputDevice::Fsm(void)
     73          //{
     74          //    // какое событие обрабатываем?
     75          //    switch (GetFsmState())
     76          //    {
     77          //    case KEY_EVENT_UNPRESSED:
     78          //        SetFsmState(KEY_EVENT_WAITING_PRESSED);
     79          //        break;
     80          //
     81          //    case KEY_EVENT_WAITING_PRESSED:
     82          //        // кнопка нажата?
     83          //        if (EventHappened())
     84          //        {
     85          //            m_xTimer.Set(KEY_PRESSED_TIME_PUSH());
     86          //            SetFsmState(KEY_EVENT_PRESSED_PUSH);
     87          //        }
     88          //        break;
     89          //    case KEY_EVENT_PRESSED_PUSH:
     90          //        // кнопка нажата?
     91          //        if (EventHappened())
     92          //        {
     93          //            if (m_xTimer.IsOverflow())
     94          //            {
     95          //                m_xTimer.Set(KEY_PRESSED_TIME_HOLD());
     96          //                m_uiEventCode = KEY_EVENT_PRESSED_PUSH;
     97          //                SetFsmState(KEY_EVENT_PRESSED_HOLD);
     98          //
     99          //            }
    100          //        }
    101          //        else
    102          //        {
    103          //            SetFsmState(KEY_EVENT_UNPRESSED);
    104          //        }
    105          //        break;
    106          //    case KEY_EVENT_PRESSED_HOLD:
    107          //        // кнопка нажата?
    108          //        if (EventHappened())
    109          //        {
    110          //            if (m_xTimer.IsOverflow())
    111          //            {
    112          //                m_xTimer.Set(KEY_PRESSED_HOLD_REPEAT_TIME());
    113          //                m_uiEventCode = KEY_EVENT_PRESSED_HOLD;
    114          //                SetFsmState(KEY_EVENT_PRESSED_REPEAT);
    115          //
    116          //            }
    117          //        }
    118          //        else
    119          //        {
    120          //            SetFsmState(KEY_EVENT_UNPRESSED);
    121          //        }
    122          //        break;
    123          //
    124          //    case KEY_EVENT_PRESSED_REPEAT:
    125          //        // кнопка нажата?
    126          //        if (EventHappened())
    127          //        {
    128          //            if (m_xTimer.IsOverflow())
    129          //            {
    130          //                m_xTimer.Set(KEY_PRESSED_HOLD_REPEAT_TIME());
    131          //                m_uiEventCode = KEY_EVENT_PRESSED_REPEAT;
    132          //            }
    133          //        }
    134          //        else
    135          //        {
    136          //            SetFsmState(KEY_EVENT_UNPRESSED);
    137          //        }
    138          //        break;
    139          //    default:
    140          //        break;
    141          //    }
    142          //}
    143          ////-----------------------------------------------------------------------------------------------------
    144          
    145          
    146          
    147          
    148          
    149          
    150          ////-----------------------------------------------------------------------------------------------------
    151          //CRegularButton::CRegularButton()
    152          //{
    153          //
    154          //}
    155          //
    156          ////-----------------------------------------------------------------------------------------------------
    157          //CRegularButton::~CRegularButton()
    158          //{
    159          //
    160          //}
    161          //
    162          ////-----------------------------------------------------------------------------------------------------
    163          //bool CRegularButton::IsPressed(void)
    164          //{
    165          //
    166          //
    167          //}
    168          //
    169          ////-----------------------------------------------------------------------------------------------------
    170          //void CRegularButton::Fsm(void)
    171          //{
    172          //    // какое событие обрабатываем?
    173          //    switch (GetFsmState())
    174          //    {
    175          //    case KEY_STATE_UNPRESSED:
    176          //        m_uiEventCode = m_uiPreliminaryEventCode;
    177          //        SetFsmState(KEY_STATE_WAITING_PRESSED);
    178          //        break;
    179          //
    180          //    case KEY_STATE_WAITING_PRESSED:
    181          //        // кнопка нажата?
    182          //        if (IsActiveState())
    183          //        {
    184          //            m_xTimer.Set(KEY_PRESSED_TIME_RECEIPT());
    185          //            SetFsmState(KEY_STATE_PRESSED_RECEIPT);
    186          //        }
    187          //        break;
    188          //    case KEY_STATE_PRESSED_RECEIPT:
    189          //        // кнопка нажата?
    190          //        if (IsActiveState())
    191          //        {
    192          //            if (m_xTimer.IsOverflow())
    193          //            {
    194          //                m_xTimer.Set(KEY_PRESSED_TIME_RESET());
    195          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RECEIPT;
    196          //                m_uiEventCode = m_uiPreliminaryEventCode;
    197          //                SetFsmState(KEY_STATE_PRESSED_RESET);
    198          //            }
    199          //        }
    200          //        else
    201          //        {
    202          //            m_uiEventCode = m_uiPreliminaryEventCode;
    203          //            SetFsmState(KEY_STATE_UNPRESSED);
    204          //        }
    205          //        break;
    206          //    case KEY_STATE_PRESSED_RESET:
    207          //        // кнопка нажата?
    208          //        if (IsActiveState())
    209          //        {
    210          //            if (m_xTimer.IsOverflow())
    211          //            {
    212          //                m_xTimer.Set(KEY_PRESSED_TIME_CHECK());
    213          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RESET;
    214          //                SetFsmState(KEY_STATE_PRESSED_CHECK);
    215          //
    216          //            }
    217          //        }
    218          //        else
    219          //        {
    220          //            m_uiEventCode = m_uiPreliminaryEventCode;
    221          //            SetFsmState(KEY_STATE_UNPRESSED);
    222          //        }
    223          //        break;
    224          //
    225          //    case KEY_STATE_PRESSED_CHECK:
    226          //        // кнопка нажата?
    227          //        if (IsActiveState())
    228          //        {
    229          //            if (m_xTimer.IsOverflow())
    230          //            {
    231          //                m_xTimer.Set(KEY_PRESSED_TIME_SET_DEFAULT());
    232          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_CHECK;
    233          //                SetFsmState(KEY_STATE_PRESSED_SET_DEFAULT);
    234          //
    235          //            }
    236          //        }
    237          //        else
    238          //        {
    239          //            m_uiEventCode = m_uiPreliminaryEventCode;
    240          //            SetFsmState(KEY_STATE_UNPRESSED);
    241          //        }
    242          //        break;
    243          //
    244          //    case KEY_STATE_PRESSED_SET_DEFAULT:
    245          //        // кнопка нажата?
    246          //        if (IsActiveState())
    247          //        {
    248          //            if (m_xTimer.IsOverflow())
    249          //            {
    250          //                m_xTimer.Set(KEY_PRESSED_CHECK_REPEAT_TIME());
    251          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_SET_DEFAULT;
    252          //                m_uiEventCode = m_uiPreliminaryEventCode;
    253          //                SetFsmState(KEY_STATE_UNPRESSED_WAITING);
    254          //
    255          //            }
    256          //        }
    257          //        else
    258          //        {
    259          //            SetFsmState(KEY_STATE_UNPRESSED);
    260          //        }
    261          //        break;
    262          //
    263          //    case KEY_STATE_UNPRESSED_WAITING:
    264          //        // кнопка не нажата?
    265          //        if (!(IsActiveState()))
    266          //        {
    267          //            SetFsmState(KEY_STATE_UNPRESSED);
    268          //        }
    269          //        break;
    270          //
    271          //
    272          //    default:
    273          //        break;
    274          //    }
    275          //}
    276          ////-----------------------------------------------------------------------------------------------------
    277          //
    278          //
    279          //
    280          //
    281          //
    282          //
    283          ////-----------------------------------------------------------------------------------------------------
    284          //CReceiptKey::CReceiptKey()
    285          //{
    286          //    m_fpuiEventSource = CPlatform::KeyOneState;
    287          //    m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
    288          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
    289          //    SetFsmState(KEY_STATE_UNPRESSED);
    290          //}
    291          //
    292          ////-----------------------------------------------------------------------------------------------------
    293          //CReceiptKey::~CReceiptKey()
    294          //{
    295          //
    296          //}
    297          //
    298          ////-----------------------------------------------------------------------------------------------------
    299          //bool CReceiptKey::IsReceipt(void)
    300          //{
    301          //
    302          //
    303          //}
    304          //
    305          ////-----------------------------------------------------------------------------------------------------
    306          //void CReceiptKey::Fsm(void)
    307          //{
    308          //
    309          //
    310          //}
    311          ////-----------------------------------------------------------------------------------------------------
    312          //
    313          //
    314          //
    315          //
    316          //
    317          //
    318          ////-----------------------------------------------------------------------------------------------------
    319          //CResetKey::CResetKey()
    320          //{
    321          //    m_fpuiEventSource = CPlatform::KeyTwoState;
    322          //}
    323          //
    324          ////-----------------------------------------------------------------------------------------------------
    325          //CResetKey::~CResetKey()
    326          //{
    327          //
    328          //}
    329          //
    330          ////-----------------------------------------------------------------------------------------------------
    331          //bool CResetKey::IsReset(void)
    332          //{
    333          //
    334          //
    335          //}
    336          //
    337          ////-----------------------------------------------------------------------------------------------------
    338          //void CResetKey::Fsm(void)
    339          //{
    340          //
    341          //
    342          //}
    343          ////-----------------------------------------------------------------------------------------------------
    344          //
    345          //
    346          //
    347          //
    348          //
    349          //
    350          ////-----------------------------------------------------------------------------------------------------
    351          //CCheckKey::CCheckKey()
    352          //{
    353          //    m_fpuiEventSource = CPlatform::KeyThreeState;
    354          //}
    355          //
    356          ////-----------------------------------------------------------------------------------------------------
    357          //CCheckKey::~CCheckKey()
    358          //{
    359          //
    360          //}
    361          //
    362          ////-----------------------------------------------------------------------------------------------------
    363          //bool CCheckKey::IsSetDefault(void)
    364          //{
    365          //
    366          //
    367          //}
    368          //
    369          ////-----------------------------------------------------------------------------------------------------
    370          //void CCheckKey::Fsm(void)
    371          //{
    372          //
    373          //
    374          //}
    375          ////-----------------------------------------------------------------------------------------------------
    376          //
    377          //
    378          //
    379          //
    380          //
    381          //
    382          //
    383          ////-----------------------------------------------------------------------------------------------------
    384          //CSetDefaultKey::CSetDefaultKey()
    385          //{
    386          //    m_fpuiEventSource = CPlatform::ExternalKeyState;
    387          //}
    388          //
    389          ////-----------------------------------------------------------------------------------------------------
    390          //CSetDefaultKey::~CSetDefaultKey()
    391          //{
    392          //
    393          //}
    394          //
    395          ////-----------------------------------------------------------------------------------------------------
    396          //bool CSetDefaultKey::IsSetDefault(void)
    397          //{
    398          //
    399          //
    400          //}
    401          //
    402          ////-----------------------------------------------------------------------------------------------------
    403          //void CSetDefaultKey::Fsm(void)
    404          //{
    405          //
    406          //
    407          //}
    408          ////-----------------------------------------------------------------------------------------------------
    409          
    410          
    411          
    412          
    413          
    414          
    415          
    416          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    417          CMultiFunctionKey::CMultiFunctionKey()
   \                     ??CMultiFunctionKey:
   \   00000000   93BA               ST      -Y, R27
   \   00000002   93AA               ST      -Y, R26
   \   00000004   01D8               MOVW    R27:R26, R17:R16
    418          {
   \   00000006   018D               MOVW    R17:R16, R27:R26
   \   00000008   ........           CALL    ??CDfa
   \   0000000C   ....               LDI     R16, LOW(??__vtbl)
   \   0000000E   ....               LDI     R17, (??__vtbl) >> 8
   \   00000010   01FD               MOVW    R31:R30, R27:R26
   \   00000012   8301               STD     Z+1, R16
   \   00000014   8312               STD     Z+2, R17
   \   00000016   018D               MOVW    R17:R16, R27:R26
   \   00000018   5F07               SUBI    R16, 247
   \   0000001A   4F1F               SBCI    R17, 255
   \   0000001C   ........           CALL    ??CTimer
    419          
    420          }
   \   00000020   018D               MOVW    R17:R16, R27:R26
   \   00000022   91A9               LD      R26, Y+
   \   00000024   91B9               LD      R27, Y+
   \   00000026   9508               RET
    421          
    422          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    423          CMultiFunctionKey::CMultiFunctionKey(uint8_t (*fpuiEventSource)(void))
   \                     ??CMultiFunctionKey_1:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    424          {
   \   00000008   018D               MOVW    R17:R16, R27:R26
   \   0000000A   ........           CALL    ??CDfa
   \   0000000E   ....               LDI     R16, LOW(??__vtbl)
   \   00000010   ....               LDI     R17, (??__vtbl) >> 8
   \   00000012   01FD               MOVW    R31:R30, R27:R26
   \   00000014   8301               STD     Z+1, R16
   \   00000016   8312               STD     Z+2, R17
   \   00000018   018D               MOVW    R17:R16, R27:R26
   \   0000001A   5F07               SUBI    R16, 247
   \   0000001C   4F1F               SBCI    R17, 255
   \   0000001E   ........           CALL    ??CTimer
    425              m_fpuiEventSource = fpuiEventSource;
   \   00000022   01FD               MOVW    R31:R30, R27:R26
   \   00000024   8385               STD     Z+5, R24
   \   00000026   8396               STD     Z+6, R25
    426              m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
   \   00000028   01FD               MOVW    R31:R30, R27:R26
   \   0000002A   E000               LDI     R16, 0
   \   0000002C   8700               STD     Z+8, R16
    427              m_uiEventCode = KEY_EVENT_UNPRESSED;
   \   0000002E   01FD               MOVW    R31:R30, R27:R26
   \   00000030   E000               LDI     R16, 0
   \   00000032   8307               STD     Z+7, R16
    428              SetFsmState(KEY_EVENT_UNPRESSED);
   \   00000034   E020               LDI     R18, 0
   \   00000036   018D               MOVW    R17:R16, R27:R26
   \   00000038   ........           CALL    ??SetFsmState
    429          }
   \   0000003C   018D               MOVW    R17:R16, R27:R26
   \   0000003E   E0E4               LDI     R30, 4
   \   00000040   ........           JMP     ?EPILOGUE_B4_L09
    430          
    431          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    432          CMultiFunctionKey::~CMultiFunctionKey()
   \                     `?~CMultiFunctionKey`:
    433          {
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
   \   00000008   2F0A               MOV     R16, R26
   \   0000000A   2B0B               OR      R16, R27
   \   0000000C   F0B1               BREQ    `?~CMultiFunctionKey_1`
   \   0000000E   ....               LDI     R16, LOW(??__vtbl)
   \   00000010   ....               LDI     R17, (??__vtbl) >> 8
   \   00000012   01FD               MOVW    R31:R30, R27:R26
   \   00000014   8301               STD     Z+1, R16
   \   00000016   8312               STD     Z+2, R17
    434          
    435          }
   \   00000018   E022               LDI     R18, 2
   \   0000001A   E030               LDI     R19, 0
   \   0000001C   018D               MOVW    R17:R16, R27:R26
   \   0000001E   5F07               SUBI    R16, 247
   \   00000020   4F1F               SBCI    R17, 255
   \   00000022   ........           CALL    `?~CTimer`
   \   00000026   E020               LDI     R18, 0
   \   00000028   E030               LDI     R19, 0
   \   0000002A   018D               MOVW    R17:R16, R27:R26
   \   0000002C   ........           CALL    `?~CDfa`
   \   00000030   FB80               BST     R24, 0
   \   00000032   F41E               BRTC    `?~CMultiFunctionKey_1`
   \   00000034   018D               MOVW    R17:R16, R27:R26
   \   00000036   ........           CALL    `??operator delete`
   \                     `?~CMultiFunctionKey_1`:
   \   0000003A   E0E4               LDI     R30, 4
   \   0000003C   ........           JMP     ?EPILOGUE_B4_L09
    436          
    437          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    438          void CMultiFunctionKey::SetCapabilities(uint8_t (*fpuiEventSource)(void))
   \                     ??SetCapabilities:
    439          {
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    440              m_fpuiEventSource = fpuiEventSource;
   \   00000008   01FD               MOVW    R31:R30, R27:R26
   \   0000000A   8385               STD     Z+5, R24
   \   0000000C   8396               STD     Z+6, R25
    441              m_uiEventCode = KEY_EVENT_UNPRESSED;
   \   0000000E   01FD               MOVW    R31:R30, R27:R26
   \   00000010   E000               LDI     R16, 0
   \   00000012   8307               STD     Z+7, R16
    442              SetFsmState(KEY_EVENT_UNPRESSED);
   \   00000014   E020               LDI     R18, 0
   \   00000016   018D               MOVW    R17:R16, R27:R26
   \   00000018   ........           CALL    ??SetFsmState
    443          }
   \   0000001C   E0E4               LDI     R30, 4
   \   0000001E   ........           JMP     ?EPILOGUE_B4_L09
    444          
    445          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    446          uint8_t CMultiFunctionKey::EventHappened(void)
   \                     ??EventHappened:
    447          {
   \   00000000   93BA               ST      -Y, R27
   \   00000002   93AA               ST      -Y, R26
   \   00000004   01D8               MOVW    R27:R26, R17:R16
    448              if (m_fpuiEventSource())
   \   00000006   9615               ADIW    R27:R26, 5
   \   00000008   91ED               LD      R30, X+
   \   0000000A   91FC               LD      R31, X
   \   0000000C   9716               SBIW    R27:R26, 6
   \   0000000E   9509               ICALL
   \   00000010   2300               TST     R16
   \   00000012   F011               BREQ    ??EventHappened_1
    449              {
    450                  return 1;
   \   00000014   E001               LDI     R16, 1
   \   00000016   C001               RJMP    ??EventHappened_2
    451              }
    452              else
    453              {
    454                  return 0;
   \                     ??EventHappened_1:
   \   00000018   E000               LDI     R16, 0
   \                     ??EventHappened_2:
   \   0000001A   91A9               LD      R26, Y+
   \   0000001C   91B9               LD      R27, Y+
   \   0000001E   9508               RET
    455              }
    456          
    457          }
    458          
    459          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    460          uint8_t CMultiFunctionKey::KeyEventHappened(uint8_t uiCode)
   \                     ??KeyEventHappened:
    461          {
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   2F82               MOV     R24, R18
    462              Fsm();
   \   00000008   018D               MOVW    R17:R16, R27:R26
   \   0000000A   01FD               MOVW    R31:R30, R27:R26
   \   0000000C   8121               LDD     R18, Z+1
   \   0000000E   8132               LDD     R19, Z+2
   \   00000010   01F9               MOVW    R31:R30, R19:R18
   \   00000012   9632               ADIW    R31:R30, 2
   \   00000014   9125               LPM     R18, Z+
   \   00000016   9134               LPM     R19, Z
   \   00000018   9733               SBIW    R31:R30, 3
   \   0000001A   01F9               MOVW    R31:R30, R19:R18
   \   0000001C   9509               ICALL
    463          
    464              if (m_uiEventCode == uiCode)
   \   0000001E   01FD               MOVW    R31:R30, R27:R26
   \   00000020   8107               LDD     R16, Z+7
   \   00000022   1708               CP      R16, R24
   \   00000024   F441               BRNE    ??KeyEventHappened_1
    465              {
    466                  m_uiEventCode = KEY_EVENT_UNPRESSED;
   \   00000026   01FD               MOVW    R31:R30, R27:R26
   \   00000028   E000               LDI     R16, 0
   \   0000002A   8307               STD     Z+7, R16
    467                  m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
   \   0000002C   01FD               MOVW    R31:R30, R27:R26
   \   0000002E   E000               LDI     R16, 0
   \   00000030   8700               STD     Z+8, R16
    468                  return 1;
   \   00000032   E001               LDI     R16, 1
   \   00000034   C001               RJMP    ??KeyEventHappened_2
    469              }
    470              else
    471              {
    472                  return 0;
   \                     ??KeyEventHappened_1:
   \   00000036   E000               LDI     R16, 0
   \                     ??KeyEventHappened_2:
   \   00000038   E0E4               LDI     R30, 4
   \   0000003A   ........           JMP     ?EPILOGUE_B4_L09
    473              }
    474          
    475          }
    476          
    477          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    478          void CMultiFunctionKey::Fsm(void)
   \                     ??Fsm:
    479          {
   \   00000000   93BA               ST      -Y, R27
   \   00000002   93AA               ST      -Y, R26
   \   00000004   01D8               MOVW    R27:R26, R17:R16
    480              // какое событие обрабатываем?
    481              switch (GetFsmState())
   \   00000006   018D               MOVW    R17:R16, R27:R26
   \   00000008   ........           CALL    ??GetFsmState
   \   0000000C   5000               SUBI    R16, 0
   \   0000000E   F089               BREQ    ??Fsm_1
   \   00000010   950A               DEC     R16
   \   00000012   F0C1               BREQ    ??Fsm_2
   \   00000014   950A               DEC     R16
   \   00000016   F141               BREQ    ??Fsm_3
   \   00000018   950A               DEC     R16
   \   0000001A   F409               BRNE    $+2+2
   \   0000001C   C04E               RJMP    ??Fsm_4
   \   0000001E   950A               DEC     R16
   \   00000020   F409               BRNE    $+2+2
   \   00000022   C074               RJMP    ??Fsm_5
   \   00000024   950A               DEC     R16
   \   00000026   F409               BRNE    $+2+2
   \   00000028   C09A               RJMP    ??Fsm_6
   \   0000002A   5002               SUBI    R16, 2
   \   0000002C   F409               BRNE    $+2+2
   \   0000002E   C0BC               RJMP    ??Fsm_7
   \   00000030   C0C3               RJMP    ??Fsm_8
    482              {
    483              case KEY_EVENT_UNPRESSED:
    484                  m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_1:
   \   00000032   01FD               MOVW    R31:R30, R27:R26
   \   00000034   8500               LDD     R16, Z+8
   \   00000036   01FD               MOVW    R31:R30, R27:R26
   \   00000038   8307               STD     Z+7, R16
    485                  SetFsmState(KEY_EVENT_WAITING_PRESSED);
   \   0000003A   E021               LDI     R18, 1
   \   0000003C   018D               MOVW    R17:R16, R27:R26
   \   0000003E   ........           CALL    ??SetFsmState
    486                  break;
   \   00000042   C0BA               RJMP    ??Fsm_8
    487          
    488              case KEY_EVENT_WAITING_PRESSED:
    489                  // кнопка нажата?
    490                  if (EventHappened())
   \                     ??Fsm_2:
   \   00000044   018D               MOVW    R17:R16, R27:R26
   \   00000046   ....               RCALL   ??EventHappened
   \   00000048   2300               TST     R16
   \   0000004A   F069               BREQ    ??Fsm_9
    491                  {
    492                      m_xTimer.Set(KEY_PRESSED_TIME_RECEIPT());
   \   0000004C   018D               MOVW    R17:R16, R27:R26
   \   0000004E   ........           CALL    ??KEY_PRESSED_TIME_RECEIPT
   \   00000052   0198               MOVW    R19:R18, R17:R16
   \   00000054   018D               MOVW    R17:R16, R27:R26
   \   00000056   5F07               SUBI    R16, 247
   \   00000058   4F1F               SBCI    R17, 255
   \   0000005A   ........           CALL    ??Set
    493                      SetFsmState(KEY_EVENT_PRESSED_RECEIPT);
   \   0000005E   E022               LDI     R18, 2
   \   00000060   018D               MOVW    R17:R16, R27:R26
   \   00000062   ........           CALL    ??SetFsmState
    494                  }
    495                  break;
   \                     ??Fsm_9:
   \   00000066   C0A8               RJMP    ??Fsm_8
    496              case KEY_EVENT_PRESSED_RECEIPT:
    497                  // кнопка нажата?
    498                  if (EventHappened())
   \                     ??Fsm_3:
   \   00000068   018D               MOVW    R17:R16, R27:R26
   \   0000006A   ....               RCALL   ??EventHappened
   \   0000006C   2300               TST     R16
   \   0000006E   F0E1               BREQ    ??Fsm_10
    499                  {
    500                      if (m_xTimer.IsOverflow())
   \   00000070   018D               MOVW    R17:R16, R27:R26
   \   00000072   5F07               SUBI    R16, 247
   \   00000074   4F1F               SBCI    R17, 255
   \   00000076   ........           CALL    ??IsOverflow
   \   0000007A   2300               TST     R16
   \   0000007C   F0E9               BREQ    ??Fsm_11
    501                      {
    502                          m_xTimer.Set(KEY_PRESSED_TIME_RESET());
   \   0000007E   018D               MOVW    R17:R16, R27:R26
   \   00000080   ........           CALL    ??KEY_PRESSED_TIME_RESET
   \   00000084   0198               MOVW    R19:R18, R17:R16
   \   00000086   018D               MOVW    R17:R16, R27:R26
   \   00000088   5F07               SUBI    R16, 247
   \   0000008A   4F1F               SBCI    R17, 255
   \   0000008C   ........           CALL    ??Set
    503                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RECEIPT;
   \   00000090   01FD               MOVW    R31:R30, R27:R26
   \   00000092   E002               LDI     R16, 2
   \   00000094   8700               STD     Z+8, R16
    504                          m_uiEventCode = m_uiPreliminaryEventCode;
   \   00000096   01FD               MOVW    R31:R30, R27:R26
   \   00000098   8500               LDD     R16, Z+8
   \   0000009A   01FD               MOVW    R31:R30, R27:R26
   \   0000009C   8307               STD     Z+7, R16
    505                          SetFsmState(KEY_EVENT_PRESSED_RESET);
   \   0000009E   E023               LDI     R18, 3
   \   000000A0   018D               MOVW    R17:R16, R27:R26
   \   000000A2   ........           CALL    ??SetFsmState
   \   000000A6   C088               RJMP    ??Fsm_8
    506                      }
    507                  }
    508                  else
    509                  {
    510                      m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_10:
   \   000000A8   01FD               MOVW    R31:R30, R27:R26
   \   000000AA   8500               LDD     R16, Z+8
   \   000000AC   01FD               MOVW    R31:R30, R27:R26
   \   000000AE   8307               STD     Z+7, R16
    511                      SetFsmState(KEY_EVENT_UNPRESSED);
   \   000000B0   E020               LDI     R18, 0
   \   000000B2   018D               MOVW    R17:R16, R27:R26
   \   000000B4   ........           CALL    ??SetFsmState
    512                  }
    513                  break;
   \                     ??Fsm_11:
   \   000000B8   C07F               RJMP    ??Fsm_8
    514              case KEY_EVENT_PRESSED_RESET:
    515                  // кнопка нажата?
    516                  if (EventHappened())
   \                     ??Fsm_4:
   \   000000BA   018D               MOVW    R17:R16, R27:R26
   \   000000BC   ....               RCALL   ??EventHappened
   \   000000BE   2300               TST     R16
   \   000000C0   F0E1               BREQ    ??Fsm_12
    517                  {
    518                      if (m_xTimer.IsOverflow())
   \   000000C2   018D               MOVW    R17:R16, R27:R26
   \   000000C4   5F07               SUBI    R16, 247
   \   000000C6   4F1F               SBCI    R17, 255
   \   000000C8   ........           CALL    ??IsOverflow
   \   000000CC   2300               TST     R16
   \   000000CE   F0E9               BREQ    ??Fsm_13
    519                      {
    520                          m_xTimer.Set(KEY_PRESSED_TIME_CHECK());
   \   000000D0   018D               MOVW    R17:R16, R27:R26
   \   000000D2   ........           CALL    ??KEY_PRESSED_TIME_CHECK
   \   000000D6   0198               MOVW    R19:R18, R17:R16
   \   000000D8   018D               MOVW    R17:R16, R27:R26
   \   000000DA   5F07               SUBI    R16, 247
   \   000000DC   4F1F               SBCI    R17, 255
   \   000000DE   ........           CALL    ??Set
    521                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RESET;
   \   000000E2   01FD               MOVW    R31:R30, R27:R26
   \   000000E4   E003               LDI     R16, 3
   \   000000E6   8700               STD     Z+8, R16
    522                          m_uiEventCode = m_uiPreliminaryEventCode;
   \   000000E8   01FD               MOVW    R31:R30, R27:R26
   \   000000EA   8500               LDD     R16, Z+8
   \   000000EC   01FD               MOVW    R31:R30, R27:R26
   \   000000EE   8307               STD     Z+7, R16
    523                          SetFsmState(KEY_EVENT_PRESSED_CHECK);
   \   000000F0   E024               LDI     R18, 4
   \   000000F2   018D               MOVW    R17:R16, R27:R26
   \   000000F4   ........           CALL    ??SetFsmState
   \   000000F8   C05F               RJMP    ??Fsm_8
    524          
    525                      }
    526                  }
    527                  else
    528                  {
    529                      m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_12:
   \   000000FA   01FD               MOVW    R31:R30, R27:R26
   \   000000FC   8500               LDD     R16, Z+8
   \   000000FE   01FD               MOVW    R31:R30, R27:R26
   \   00000100   8307               STD     Z+7, R16
    530                      SetFsmState(KEY_EVENT_UNPRESSED);
   \   00000102   E020               LDI     R18, 0
   \   00000104   018D               MOVW    R17:R16, R27:R26
   \   00000106   ........           CALL    ??SetFsmState
    531                  }
    532                  break;
   \                     ??Fsm_13:
   \   0000010A   C056               RJMP    ??Fsm_8
    533          
    534              case KEY_EVENT_PRESSED_CHECK:
    535                  // кнопка нажата?
    536                  if (EventHappened())
   \                     ??Fsm_5:
   \   0000010C   018D               MOVW    R17:R16, R27:R26
   \   0000010E   ....               RCALL   ??EventHappened
   \   00000110   2300               TST     R16
   \   00000112   F0E1               BREQ    ??Fsm_14
    537                  {
    538                      if (m_xTimer.IsOverflow())
   \   00000114   018D               MOVW    R17:R16, R27:R26
   \   00000116   5F07               SUBI    R16, 247
   \   00000118   4F1F               SBCI    R17, 255
   \   0000011A   ........           CALL    ??IsOverflow
   \   0000011E   2300               TST     R16
   \   00000120   F0E9               BREQ    ??Fsm_15
    539                      {
    540                          m_xTimer.Set(KEY_PRESSED_TIME_SET_DEFAULT());
   \   00000122   018D               MOVW    R17:R16, R27:R26
   \   00000124   ........           CALL    ??KEY_PRESSED_TIME_SET_DEFAULT
   \   00000128   0198               MOVW    R19:R18, R17:R16
   \   0000012A   018D               MOVW    R17:R16, R27:R26
   \   0000012C   5F07               SUBI    R16, 247
   \   0000012E   4F1F               SBCI    R17, 255
   \   00000130   ........           CALL    ??Set
    541                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_CHECK;
   \   00000134   01FD               MOVW    R31:R30, R27:R26
   \   00000136   E004               LDI     R16, 4
   \   00000138   8700               STD     Z+8, R16
    542                          m_uiEventCode = m_uiPreliminaryEventCode;
   \   0000013A   01FD               MOVW    R31:R30, R27:R26
   \   0000013C   8500               LDD     R16, Z+8
   \   0000013E   01FD               MOVW    R31:R30, R27:R26
   \   00000140   8307               STD     Z+7, R16
    543          //                SetFsmState(KEY_EVENT_PRESSED_SET_DEFAULT);
    544                          SetFsmState(KEY_EVENT_UNPRESSED_WAITING);
   \   00000142   E027               LDI     R18, 7
   \   00000144   018D               MOVW    R17:R16, R27:R26
   \   00000146   ........           CALL    ??SetFsmState
   \   0000014A   C036               RJMP    ??Fsm_8
    545          
    546                      }
    547                  }
    548                  else
    549                  {
    550                      m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_14:
   \   0000014C   01FD               MOVW    R31:R30, R27:R26
   \   0000014E   8500               LDD     R16, Z+8
   \   00000150   01FD               MOVW    R31:R30, R27:R26
   \   00000152   8307               STD     Z+7, R16
    551                      SetFsmState(KEY_EVENT_UNPRESSED);
   \   00000154   E020               LDI     R18, 0
   \   00000156   018D               MOVW    R17:R16, R27:R26
   \   00000158   ........           CALL    ??SetFsmState
    552                  }
    553                  break;
   \                     ??Fsm_15:
   \   0000015C   C02D               RJMP    ??Fsm_8
    554          
    555              case KEY_EVENT_PRESSED_SET_DEFAULT:
    556                  // кнопка нажата?
    557                  if (EventHappened())
   \                     ??Fsm_6:
   \   0000015E   018D               MOVW    R17:R16, R27:R26
   \   00000160   ....               RCALL   ??EventHappened
   \   00000162   2300               TST     R16
   \   00000164   F0E1               BREQ    ??Fsm_16
    558                  {
    559                      if (m_xTimer.IsOverflow())
   \   00000166   018D               MOVW    R17:R16, R27:R26
   \   00000168   5F07               SUBI    R16, 247
   \   0000016A   4F1F               SBCI    R17, 255
   \   0000016C   ........           CALL    ??IsOverflow
   \   00000170   2300               TST     R16
   \   00000172   F111               BREQ    ??Fsm_8
    560                      {
    561                          m_xTimer.Set(KEY_PRESSED_CHECK_REPEAT_TIME());
   \   00000174   018D               MOVW    R17:R16, R27:R26
   \   00000176   ........           CALL    ??KEY_PRESSED_CHECK_REPEAT_TIME
   \   0000017A   0198               MOVW    R19:R18, R17:R16
   \   0000017C   018D               MOVW    R17:R16, R27:R26
   \   0000017E   5F07               SUBI    R16, 247
   \   00000180   4F1F               SBCI    R17, 255
   \   00000182   ........           CALL    ??Set
    562                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_SET_DEFAULT;
   \   00000186   01FD               MOVW    R31:R30, R27:R26
   \   00000188   E005               LDI     R16, 5
   \   0000018A   8700               STD     Z+8, R16
    563                          m_uiEventCode = m_uiPreliminaryEventCode;
   \   0000018C   01FD               MOVW    R31:R30, R27:R26
   \   0000018E   8500               LDD     R16, Z+8
   \   00000190   01FD               MOVW    R31:R30, R27:R26
   \   00000192   8307               STD     Z+7, R16
    564                          SetFsmState(KEY_EVENT_UNPRESSED_WAITING);
   \   00000194   E027               LDI     R18, 7
   \   00000196   018D               MOVW    R17:R16, R27:R26
   \   00000198   ........           CALL    ??SetFsmState
   \   0000019C   C00D               RJMP    ??Fsm_8
    565          
    566                      }
    567                  }
    568                  else
    569                  {
    570                      SetFsmState(KEY_EVENT_UNPRESSED);
   \                     ??Fsm_16:
   \   0000019E   E020               LDI     R18, 0
   \   000001A0   018D               MOVW    R17:R16, R27:R26
   \   000001A2   ........           CALL    ??SetFsmState
    571                  }
    572                  break;
   \   000001A6   C008               RJMP    ??Fsm_8
    573          
    574              case KEY_EVENT_UNPRESSED_WAITING:
    575                  // кнопка не нажата?
    576                  if (!(EventHappened()))
   \                     ??Fsm_7:
   \   000001A8   018D               MOVW    R17:R16, R27:R26
   \   000001AA   ....               RCALL   ??EventHappened
   \   000001AC   2300               TST     R16
   \   000001AE   F421               BRNE    ??Fsm_8
    577                  {
    578                      SetFsmState(KEY_EVENT_UNPRESSED);
   \   000001B0   E020               LDI     R18, 0
   \   000001B2   018D               MOVW    R17:R16, R27:R26
   \   000001B4   ........           CALL    ??SetFsmState
    579                  }
    580                  break;
    581          
    582          
    583              default:
    584                  break;
    585              }
    586          }
   \                     ??Fsm_8:
   \   000001B8   91A9               LD      R26, Y+
   \   000001BA   91B9               LD      R27, Y+
   \   000001BC   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CMultiFunctionKey &CMultiFunctionKey::new CMultiFunctionKey()
   \                     `??new CMultiFunctionKey`:
   \   00000000   E00F               LDI     R16, 15
   \   00000002   E010               LDI     R17, 0
   \   00000004   ........           CALL    `??operator new`
   \   00000008   2F20               MOV     R18, R16
   \   0000000A   2B21               OR      R18, R17
   \   0000000C   F011               BREQ    `??new CMultiFunctionKey_2`
   \   0000000E   ....               RCALL   ??CMultiFunctionKey
   \   00000010   9508               RET
   \                     `??new CMultiFunctionKey_2`:
   \   00000012   E000               LDI     R16, 0
   \   00000014   E010               LDI     R17, 0
   \   00000016   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CMultiFunctionKey &CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
   \                     `??new CMultiFunctionKey_1`:
   \   00000000   939A               ST      -Y, R25
   \   00000002   938A               ST      -Y, R24
   \   00000004   01C8               MOVW    R25:R24, R17:R16
   \   00000006   E00F               LDI     R16, 15
   \   00000008   E010               LDI     R17, 0
   \   0000000A   ........           CALL    `??operator new`
   \   0000000E   2F20               MOV     R18, R16
   \   00000010   2B21               OR      R18, R17
   \   00000012   F019               BREQ    `??new CMultiFunctionKey_3`
   \   00000014   019C               MOVW    R19:R18, R25:R24
   \   00000016   ....               RCALL   ??CMultiFunctionKey_1
   \   00000018   C002               RJMP    `??new CMultiFunctionKey_4`
   \                     `??new CMultiFunctionKey_3`:
   \   0000001A   E000               LDI     R16, 0
   \   0000001C   E010               LDI     R17, 0
   \                     `??new CMultiFunctionKey_4`:
   \   0000001E   9189               LD      R24, Y+
   \   00000020   9199               LD      R25, Y+
   \   00000022   9508               RET

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      0      2   CDfaLite::GetFsmState()
      0      2   CDfaLite::SetFsmState(uint8_t)
      2      2   CMultiFunctionKey::CMultiFunctionKey()
        2      2   -> CDfa::CDfa()
        2      2   -> CTimer::CTimer()
      4      2   CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
        4      2   -> CDfa::CDfa()
        4      2   -> CDfaLite::SetFsmState(uint8_t)
        4      2   -> CTimer::CTimer()
      2      2   CMultiFunctionKey::EventHappened()
        2      2   -- Indirect call
      2      2   CMultiFunctionKey::Fsm()
        2      2   -> CDfaLite::GetFsmState()
        2      2   -> CDfaLite::SetFsmState(uint8_t)
        2      2   -> CMultiFunctionKey::EventHappened()
        2      2   -> CMultiFunctionKey::KEY_PRESSED_CHECK_REPEAT_TIME()
        2      2   -> CMultiFunctionKey::KEY_PRESSED_TIME_CHECK()
        2      2   -> CMultiFunctionKey::KEY_PRESSED_TIME_RECEIPT()
        2      2   -> CMultiFunctionKey::KEY_PRESSED_TIME_RESET()
        2      2   -> CMultiFunctionKey::KEY_PRESSED_TIME_SET_DEFAULT()
        2      2   -> CTimer::IsOverflow()
        2      2   -> CTimer::Set(uint16_t)
      0      2   CMultiFunctionKey::KEY_PRESSED_CHECK_REPEAT_TIME()
      0      2   CMultiFunctionKey::KEY_PRESSED_TIME_CHECK()
      0      2   CMultiFunctionKey::KEY_PRESSED_TIME_RECEIPT()
      0      2   CMultiFunctionKey::KEY_PRESSED_TIME_RESET()
      0      2   CMultiFunctionKey::KEY_PRESSED_TIME_SET_DEFAULT()
      4      2   CMultiFunctionKey::KeyEventHappened(uint8_t)
        4      2   -- Indirect call
      4      2   CMultiFunctionKey::SetCapabilities(uint8_t (*)())
        4      2   -> CDfaLite::SetFsmState(uint8_t)
      0      2   CMultiFunctionKey::new CMultiFunctionKey()
        0      2   -> CMultiFunctionKey::CMultiFunctionKey()
        0      2   -> operator new(unsigned int)
      2      2   CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
        2      2   -> CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
        2      2   -> operator new(unsigned int)
      4      2   CMultiFunctionKey::~CMultiFunctionKey()
        4      2   -> CDfa::~CDfa()
        4      2   -> CTimer::~CTimer()
        4      2   -> operator delete(void *)


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  CDfaLite::GetFsmState()
       6  CDfaLite::SetFsmState(uint8_t)
      40  CMultiFunctionKey::CMultiFunctionKey()
      68  CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
      32  CMultiFunctionKey::EventHappened()
     446  CMultiFunctionKey::Fsm()
       8  CMultiFunctionKey::KEY_PRESSED_CHECK_REPEAT_TIME()
       8  CMultiFunctionKey::KEY_PRESSED_TIME_CHECK()
       8  CMultiFunctionKey::KEY_PRESSED_TIME_RECEIPT()
       8  CMultiFunctionKey::KEY_PRESSED_TIME_RESET()
       8  CMultiFunctionKey::KEY_PRESSED_TIME_SET_DEFAULT()
      62  CMultiFunctionKey::KeyEventHappened(uint8_t)
      34  CMultiFunctionKey::SetCapabilities(uint8_t (*)())
      24  CMultiFunctionKey::new CMultiFunctionKey()
      36  CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
      64  CMultiFunctionKey::~CMultiFunctionKey()
       1  _A_ACSR
       2  _A_ADC
       1  _A_ADCSRA
       1  _A_ADMUX
       1  _A_ASSR
       1  _A_DDRA
       1  _A_DDRB
       1  _A_DDRC
       1  _A_DDRD
       1  _A_DDRE
       1  _A_DDRF
       1  _A_DDRG
       2  _A_EEAR
       1  _A_EECR
       1  _A_EEDR
       1  _A_EICRA
       1  _A_EICRB
       1  _A_EIFR
       1  _A_EIMSK
       1  _A_ETIFR
       1  _A_ETIMSK
       2  _A_ICR1
       2  _A_ICR3
       1  _A_MCUCR
       1  _A_MCUCSR
       1  _A_OCDR
       1  _A_OCR0
       2  _A_OCR1A
       2  _A_OCR1B
       2  _A_OCR1C
       1  _A_OCR2
       2  _A_OCR3A
       2  _A_OCR3B
       2  _A_OCR3C
       1  _A_OSCCAL
       1  _A_PINA
       1  _A_PINB
       1  _A_PINC
       1  _A_PIND
       1  _A_PINE
       1  _A_PINF
       1  _A_PING
       1  _A_PORTA
       1  _A_PORTB
       1  _A_PORTC
       1  _A_PORTD
       1  _A_PORTE
       1  _A_PORTF
       1  _A_PORTG
       1  _A_RAMPZ
       1  _A_SFIOR
       2  _A_SP
       1  _A_SPCR
       1  _A_SPDR
       1  _A_SPMCSR
       1  _A_SPSR
       1  _A_SREG
       1  _A_TCCR0
       1  _A_TCCR1A
       1  _A_TCCR1B
       1  _A_TCCR1C
       1  _A_TCCR2
       1  _A_TCCR3A
       1  _A_TCCR3B
       1  _A_TCCR3C
       1  _A_TCNT0
       2  _A_TCNT1
       1  _A_TCNT2
       2  _A_TCNT3
       1  _A_TIFR
       1  _A_TIMSK
       1  _A_TWAR
       1  _A_TWBR
       1  _A_TWCR
       1  _A_TWDR
       1  _A_TWSR
       1  _A_UBRR0H
       1  _A_UBRR0L
       1  _A_UBRR1H
       1  _A_UBRR1L
       1  _A_UCSR0A
       1  _A_UCSR0B
       1  _A_UCSR0C
       1  _A_UCSR1A
       1  _A_UCSR1B
       1  _A_UCSR1C
       1  _A_UDR0
       1  _A_UDR1
       1  _A_WDTCR
       1  _A_XDIV
       1  _A_XMCRA
       1  _A_XMCRB
       4  -- Other

 
 105 bytes in segment ABSOLUTE
 858 bytes in segment CODE
   4 bytes in segment NEAR_F
 
 806 bytes of CODE memory (+  56 bytes shared)
   0 bytes of DATA memory (+ 105 bytes shared)

Errors: none
Warnings: 2
