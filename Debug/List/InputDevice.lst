###############################################################################
#
# IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR           30/May/2023  07:56:23
# Copyright 1996-2018 IAR Systems AB.
#
#    Source file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
#    Command line =  
#        -f C:\Users\Admin\AppData\Local\Temp\EW3CE6.tmp
#        (--string_literals_in_flash
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
#        --cpu=m128a -ms -o
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
#        --initializers_in_flash --root_variables --debug
#        -DENABLE_BIT_DEFINITIONS -e -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
#        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -Ohz
#        --eec++)
#    Locale       =  Russian_RUS.1251
#    List file    =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\InputDevice.lst
#    Object file  =  
#        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj\InputDevice.r90
#
###############################################################################

D:\Projects\CurrentProjects\CautoProjects\PSS48Color\src\InputDevice.cpp
      1          //-----------------------------------------------------------------------------------------------------
      2          //  Source      : FileName.cpp
      3          //  Created     : 01.06.2022
      4          //  Author      : Alexandr Volvenkin
      5          //  email       : aav-36@mail.ru
      6          //  GitHub      : https://github.com/AlexandrVolvenkin
      7          //-----------------------------------------------------------------------------------------------------
      8          #include "InputDevice.h"
      9          #include "Platform.h"

   \                                 In  segment ABSOLUTE, at 0x9d, root
   \   union <unnamed> volatile __io _A_UCSR1C
   \                     _A_UCSR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9c, root
   \   union <unnamed> volatile __io _A_UDR1
   \                     _A_UDR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9b, root
   \   union <unnamed> volatile __io _A_UCSR1A
   \                     _A_UCSR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x9a, root
   \   union <unnamed> volatile __io _A_UCSR1B
   \                     _A_UCSR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x99, root
   \   union <unnamed> volatile __io _A_UBRR1L
   \                     _A_UBRR1L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x98, root
   \   union <unnamed> volatile __io _A_UBRR1H
   \                     _A_UBRR1H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x95, root
   \   union <unnamed> volatile __io _A_UCSR0C
   \                     _A_UCSR0C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x90, root
   \   union <unnamed> volatile __io _A_UBRR0H
   \                     _A_UBRR0H:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8c, root
   \   union <unnamed> volatile __io _A_TCCR3C
   \                     _A_TCCR3C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8b, root
   \   union <unnamed> volatile __io _A_TCCR3A
   \                     _A_TCCR3A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8a, root
   \   union <unnamed> volatile __io _A_TCCR3B
   \                     _A_TCCR3B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x88, root
   \   union <unnamed> volatile __io _A_TCNT3
   \                     _A_TCNT3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x86, root
   \   union <unnamed> volatile __io _A_OCR3A
   \                     _A_OCR3A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x84, root
   \   union <unnamed> volatile __io _A_OCR3B
   \                     _A_OCR3B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x82, root
   \   union <unnamed> volatile __io _A_OCR3C
   \                     _A_OCR3C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x80, root
   \   union <unnamed> volatile __io _A_ICR3
   \                     _A_ICR3:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x7d, root
   \   union <unnamed> volatile __io _A_ETIMSK
   \                     _A_ETIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7c, root
   \   union <unnamed> volatile __io _A_ETIFR
   \                     _A_ETIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7a, root
   \   union <unnamed> volatile __io _A_TCCR1C
   \                     _A_TCCR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x78, root
   \   union <unnamed> volatile __io _A_OCR1C
   \                     _A_OCR1C:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x74, root
   \   union <unnamed> volatile __io _A_TWCR
   \                     _A_TWCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x73, root
   \   union <unnamed> volatile __io _A_TWDR
   \                     _A_TWDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x72, root
   \   union <unnamed> volatile __io _A_TWAR
   \                     _A_TWAR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x71, root
   \   union <unnamed> volatile __io _A_TWSR
   \                     _A_TWSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x70, root
   \   union <unnamed> volatile __io _A_TWBR
   \                     _A_TWBR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6f, root
   \   union <unnamed> volatile __io _A_OSCCAL
   \                     _A_OSCCAL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6d, root
   \   union <unnamed> volatile __io _A_XMCRA
   \                     _A_XMCRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6c, root
   \   union <unnamed> volatile __io _A_XMCRB
   \                     _A_XMCRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6a, root
   \   union <unnamed> volatile __io _A_EICRA
   \                     _A_EICRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x68, root
   \   union <unnamed> volatile __io _A_SPMCSR
   \                     _A_SPMCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x65, root
   \   union <unnamed> volatile __io _A_PORTG
   \                     _A_PORTG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x64, root
   \   union <unnamed> volatile __io _A_DDRG
   \                     _A_DDRG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x63, root
   \   union <unnamed> volatile __io _A_PING
   \                     _A_PING:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x62, root
   \   union <unnamed> volatile __io _A_PORTF
   \                     _A_PORTF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x61, root
   \   union <unnamed> volatile __io _A_DDRF
   \                     _A_DDRF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5f, root
   \   union <unnamed> volatile __io _A_SREG
   \                     _A_SREG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5d, root
   \   union <unnamed> volatile __io _A_SP
   \                     _A_SP:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x5c, root
   \   union <unnamed> volatile __io _A_XDIV
   \                     _A_XDIV:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5b, root
   \   union <unnamed> volatile __io _A_RAMPZ
   \                     _A_RAMPZ:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5a, root
   \   union <unnamed> volatile __io _A_EICRB
   \                     _A_EICRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x59, root
   \   union <unnamed> volatile __io _A_EIMSK
   \                     _A_EIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x58, root
   \   union <unnamed> volatile __io _A_EIFR
   \                     _A_EIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x57, root
   \   union <unnamed> volatile __io _A_TIMSK
   \                     _A_TIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x56, root
   \   union <unnamed> volatile __io _A_TIFR
   \                     _A_TIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x55, root
   \   union <unnamed> volatile __io _A_MCUCR
   \                     _A_MCUCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x54, root
   \   union <unnamed> volatile __io _A_MCUCSR
   \                     _A_MCUCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x53, root
   \   union <unnamed> volatile __io _A_TCCR0
   \                     _A_TCCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x52, root
   \   union <unnamed> volatile __io _A_TCNT0
   \                     _A_TCNT0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x51, root
   \   union <unnamed> volatile __io _A_OCR0
   \                     _A_OCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x50, root
   \   union <unnamed> volatile __io _A_ASSR
   \                     _A_ASSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4f, root
   \   union <unnamed> volatile __io _A_TCCR1A
   \                     _A_TCCR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4e, root
   \   union <unnamed> volatile __io _A_TCCR1B
   \                     _A_TCCR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4c, root
   \   union <unnamed> volatile __io _A_TCNT1
   \                     _A_TCNT1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x4a, root
   \   union <unnamed> volatile __io _A_OCR1A
   \                     _A_OCR1A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x48, root
   \   union <unnamed> volatile __io _A_OCR1B
   \                     _A_OCR1B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x46, root
   \   union <unnamed> volatile __io _A_ICR1
   \                     _A_ICR1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x45, root
   \   union <unnamed> volatile __io _A_TCCR2
   \                     _A_TCCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x44, root
   \   union <unnamed> volatile __io _A_TCNT2
   \                     _A_TCNT2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x43, root
   \   union <unnamed> volatile __io _A_OCR2
   \                     _A_OCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x42, root
   \   union <unnamed> volatile __io _A_OCDR
   \                     _A_OCDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x41, root
   \   union <unnamed> volatile __io _A_WDTCR
   \                     _A_WDTCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x40, root
   \   union <unnamed> volatile __io _A_SFIOR
   \                     _A_SFIOR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3e, root
   \   union <unnamed> volatile __io _A_EEAR
   \                     _A_EEAR:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x3d, root
   \   union <unnamed> volatile __io _A_EEDR
   \                     _A_EEDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3c, root
   \   union <unnamed> volatile __io _A_EECR
   \                     _A_EECR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3b, root
   \   union <unnamed> volatile __io _A_PORTA
   \                     _A_PORTA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3a, root
   \   union <unnamed> volatile __io _A_DDRA
   \                     _A_DDRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x39, root
   \   union <unnamed> volatile __io _A_PINA
   \                     _A_PINA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x38, root
   \   union <unnamed> volatile __io _A_PORTB
   \                     _A_PORTB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x37, root
   \   union <unnamed> volatile __io _A_DDRB
   \                     _A_DDRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x36, root
   \   union <unnamed> volatile __io _A_PINB
   \                     _A_PINB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x35, root
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x34, root
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x33, root
   \   union <unnamed> volatile __io _A_PINC
   \                     _A_PINC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x32, root
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x31, root
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x30, root
   \   union <unnamed> volatile __io _A_PIND
   \                     _A_PIND:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2f, root
   \   union <unnamed> volatile __io _A_SPDR
   \                     _A_SPDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2e, root
   \   union <unnamed> volatile __io _A_SPSR
   \                     _A_SPSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2d, root
   \   union <unnamed> volatile __io _A_SPCR
   \                     _A_SPCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2c, root
   \   union <unnamed> volatile __io _A_UDR0
   \                     _A_UDR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2b, root
   \   union <unnamed> volatile __io _A_UCSR0A
   \                     _A_UCSR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a, root
   \   union <unnamed> volatile __io _A_UCSR0B
   \                     _A_UCSR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x29, root
   \   union <unnamed> volatile __io _A_UBRR0L
   \                     _A_UBRR0L:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x28, root
   \   union <unnamed> volatile __io _A_ACSR
   \                     _A_ACSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27, root
   \   union <unnamed> volatile __io _A_ADMUX
   \                     _A_ADMUX:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x26, root
   \   union <unnamed> volatile __io _A_ADCSRA
   \                     _A_ADCSRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x24, root
   \   union <unnamed> volatile __io _A_ADC
   \                     _A_ADC:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x23, root
   \   union <unnamed> volatile __io _A_PORTE
   \                     _A_PORTE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x22, root
   \   union <unnamed> volatile __io _A_DDRE
   \                     _A_DDRE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x21, root
   \   union <unnamed> volatile __io _A_PINE
   \                     _A_PINE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x20, root
   \   union <unnamed> volatile __io _A_PINF
   \                     _A_PINF:
   \   00000000                      DS8 1

      static __flash TDataBase CFlash::xMainDataBase;
                               ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",368  Warning[Pe427]: 
          qualified name is not allowed in member declaration

      static __flash TDataBaseBlockPositionData CFlash::axDataBaseBlocksPositionData[];
                                                ^
"D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\Platform.h",369  Warning[Pe427]: 
          qualified name is not allowed in member declaration
     10          
     11          ////-----------------------------------------------------------------------------------------------------
     12          //CInputDevice::CInputDevice()
     13          //{
     14          //
     15          //}
     16          //
     17          ////-----------------------------------------------------------------------------------------------------
     18          //CInputDevice::CInputDevice(uint8_t (*fpuiEventSource)(void)) :
     19          //    m_fpuiEventSource(fpuiEventSource)
     20          //{
     21          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
     22          //    SetFsmState(KEY_EVENT_UNPRESSED);
     23          //}
     24          //
     25          ////-----------------------------------------------------------------------------------------------------
     26          //CInputDevice::~CInputDevice()
     27          //{
     28          //
     29          //}
     30          //
     31          ////-----------------------------------------------------------------------------------------------------
     32          //void CInputDevice::SetCapabilities(uint8_t (*fpuiEventSource)(void))
     33          //{
     34          //    m_fpuiEventSource = fpuiEventSource;
     35          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
     36          //    SetFsmState(KEY_EVENT_UNPRESSED);
     37          //}
     38          //
     39          ////-----------------------------------------------------------------------------------------------------
     40          //uint8_t CInputDevice::EventHappened(void)
     41          //{
     42          //    if (m_fpuiEventSource())
     43          //    {
     44          //        return 1;
     45          //    }
     46          //    else
     47          //    {
     48          //        return 0;
     49          //    }
     50          //
     51          //}
     52          //
     53          ////-----------------------------------------------------------------------------------------------------
     54          //uint8_t CInputDevice::KeyEventHappened(uint8_t uiCode)
     55          //{
     56          //    Fsm();
     57          //
     58          //    if (m_uiEventCode == uiCode)
     59          //    {
     60          //        m_uiEventCode = KEY_EVENT_UNPRESSED;
     61          //        m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
     62          //        return 1;
     63          //    }
     64          //    else
     65          //    {
     66          //        return 0;
     67          //    }
     68          //
     69          //}
     70          //
     71          ////-----------------------------------------------------------------------------------------------------
     72          //void CInputDevice::Fsm(void)
     73          //{
     74          //    // какое событие обрабатываем?
     75          //    switch (GetFsmState())
     76          //    {
     77          //    case KEY_EVENT_UNPRESSED:
     78          //        SetFsmState(KEY_EVENT_WAITING_PRESSED);
     79          //        break;
     80          //
     81          //    case KEY_EVENT_WAITING_PRESSED:
     82          //        // кнопка нажата?
     83          //        if (EventHappened())
     84          //        {
     85          //            m_xTimer.Set(KEY_PRESSED_TIME_PUSH());
     86          //            SetFsmState(KEY_EVENT_PRESSED_PUSH);
     87          //        }
     88          //        break;
     89          //    case KEY_EVENT_PRESSED_PUSH:
     90          //        // кнопка нажата?
     91          //        if (EventHappened())
     92          //        {
     93          //            if (m_xTimer.IsOverflow())
     94          //            {
     95          //                m_xTimer.Set(KEY_PRESSED_TIME_HOLD());
     96          //                m_uiEventCode = KEY_EVENT_PRESSED_PUSH;
     97          //                SetFsmState(KEY_EVENT_PRESSED_HOLD);
     98          //
     99          //            }
    100          //        }
    101          //        else
    102          //        {
    103          //            SetFsmState(KEY_EVENT_UNPRESSED);
    104          //        }
    105          //        break;
    106          //    case KEY_EVENT_PRESSED_HOLD:
    107          //        // кнопка нажата?
    108          //        if (EventHappened())
    109          //        {
    110          //            if (m_xTimer.IsOverflow())
    111          //            {
    112          //                m_xTimer.Set(KEY_PRESSED_HOLD_REPEAT_TIME());
    113          //                m_uiEventCode = KEY_EVENT_PRESSED_HOLD;
    114          //                SetFsmState(KEY_EVENT_PRESSED_REPEAT);
    115          //
    116          //            }
    117          //        }
    118          //        else
    119          //        {
    120          //            SetFsmState(KEY_EVENT_UNPRESSED);
    121          //        }
    122          //        break;
    123          //
    124          //    case KEY_EVENT_PRESSED_REPEAT:
    125          //        // кнопка нажата?
    126          //        if (EventHappened())
    127          //        {
    128          //            if (m_xTimer.IsOverflow())
    129          //            {
    130          //                m_xTimer.Set(KEY_PRESSED_HOLD_REPEAT_TIME());
    131          //                m_uiEventCode = KEY_EVENT_PRESSED_REPEAT;
    132          //            }
    133          //        }
    134          //        else
    135          //        {
    136          //            SetFsmState(KEY_EVENT_UNPRESSED);
    137          //        }
    138          //        break;
    139          //    default:
    140          //        break;
    141          //    }
    142          //}
    143          ////-----------------------------------------------------------------------------------------------------
    144          
    145          
    146          
    147          
    148          
    149          
    150          ////-----------------------------------------------------------------------------------------------------
    151          //CRegularButton::CRegularButton()
    152          //{
    153          //
    154          //}
    155          //
    156          ////-----------------------------------------------------------------------------------------------------
    157          //CRegularButton::~CRegularButton()
    158          //{
    159          //
    160          //}
    161          //
    162          ////-----------------------------------------------------------------------------------------------------
    163          //bool CRegularButton::IsPressed(void)
    164          //{
    165          //
    166          //
    167          //}
    168          //
    169          ////-----------------------------------------------------------------------------------------------------
    170          //void CRegularButton::Fsm(void)
    171          //{
    172          //    // какое событие обрабатываем?
    173          //    switch (GetFsmState())
    174          //    {
    175          //    case KEY_STATE_UNPRESSED:
    176          //        m_uiEventCode = m_uiPreliminaryEventCode;
    177          //        SetFsmState(KEY_STATE_WAITING_PRESSED);
    178          //        break;
    179          //
    180          //    case KEY_STATE_WAITING_PRESSED:
    181          //        // кнопка нажата?
    182          //        if (IsActiveState())
    183          //        {
    184          //            m_xTimer.Set(KEY_PRESSED_TIME_RECEIPT());
    185          //            SetFsmState(KEY_STATE_PRESSED_RECEIPT);
    186          //        }
    187          //        break;
    188          //    case KEY_STATE_PRESSED_RECEIPT:
    189          //        // кнопка нажата?
    190          //        if (IsActiveState())
    191          //        {
    192          //            if (m_xTimer.IsOverflow())
    193          //            {
    194          //                m_xTimer.Set(KEY_PRESSED_TIME_RESET());
    195          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RECEIPT;
    196          //                m_uiEventCode = m_uiPreliminaryEventCode;
    197          //                SetFsmState(KEY_STATE_PRESSED_RESET);
    198          //            }
    199          //        }
    200          //        else
    201          //        {
    202          //            m_uiEventCode = m_uiPreliminaryEventCode;
    203          //            SetFsmState(KEY_STATE_UNPRESSED);
    204          //        }
    205          //        break;
    206          //    case KEY_STATE_PRESSED_RESET:
    207          //        // кнопка нажата?
    208          //        if (IsActiveState())
    209          //        {
    210          //            if (m_xTimer.IsOverflow())
    211          //            {
    212          //                m_xTimer.Set(KEY_PRESSED_TIME_CHECK());
    213          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RESET;
    214          //                SetFsmState(KEY_STATE_PRESSED_CHECK);
    215          //
    216          //            }
    217          //        }
    218          //        else
    219          //        {
    220          //            m_uiEventCode = m_uiPreliminaryEventCode;
    221          //            SetFsmState(KEY_STATE_UNPRESSED);
    222          //        }
    223          //        break;
    224          //
    225          //    case KEY_STATE_PRESSED_CHECK:
    226          //        // кнопка нажата?
    227          //        if (IsActiveState())
    228          //        {
    229          //            if (m_xTimer.IsOverflow())
    230          //            {
    231          //                m_xTimer.Set(KEY_PRESSED_TIME_SET_DEFAULT());
    232          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_CHECK;
    233          //                SetFsmState(KEY_STATE_PRESSED_SET_DEFAULT);
    234          //
    235          //            }
    236          //        }
    237          //        else
    238          //        {
    239          //            m_uiEventCode = m_uiPreliminaryEventCode;
    240          //            SetFsmState(KEY_STATE_UNPRESSED);
    241          //        }
    242          //        break;
    243          //
    244          //    case KEY_STATE_PRESSED_SET_DEFAULT:
    245          //        // кнопка нажата?
    246          //        if (IsActiveState())
    247          //        {
    248          //            if (m_xTimer.IsOverflow())
    249          //            {
    250          //                m_xTimer.Set(KEY_PRESSED_CHECK_REPEAT_TIME());
    251          //                m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_SET_DEFAULT;
    252          //                m_uiEventCode = m_uiPreliminaryEventCode;
    253          //                SetFsmState(KEY_STATE_UNPRESSED_WAITING);
    254          //
    255          //            }
    256          //        }
    257          //        else
    258          //        {
    259          //            SetFsmState(KEY_STATE_UNPRESSED);
    260          //        }
    261          //        break;
    262          //
    263          //    case KEY_STATE_UNPRESSED_WAITING:
    264          //        // кнопка не нажата?
    265          //        if (!(IsActiveState()))
    266          //        {
    267          //            SetFsmState(KEY_STATE_UNPRESSED);
    268          //        }
    269          //        break;
    270          //
    271          //
    272          //    default:
    273          //        break;
    274          //    }
    275          //}
    276          ////-----------------------------------------------------------------------------------------------------
    277          //
    278          //
    279          //
    280          //
    281          //
    282          //
    283          ////-----------------------------------------------------------------------------------------------------
    284          //CReceiptKey::CReceiptKey()
    285          //{
    286          //    m_fpuiEventSource = CPlatform::KeyOneState;
    287          //    m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
    288          //    m_uiEventCode = KEY_EVENT_UNPRESSED;
    289          //    SetFsmState(KEY_STATE_UNPRESSED);
    290          //}
    291          //
    292          ////-----------------------------------------------------------------------------------------------------
    293          //CReceiptKey::~CReceiptKey()
    294          //{
    295          //
    296          //}
    297          //
    298          ////-----------------------------------------------------------------------------------------------------
    299          //bool CReceiptKey::IsReceipt(void)
    300          //{
    301          //
    302          //
    303          //}
    304          //
    305          ////-----------------------------------------------------------------------------------------------------
    306          //void CReceiptKey::Fsm(void)
    307          //{
    308          //
    309          //
    310          //}
    311          ////-----------------------------------------------------------------------------------------------------
    312          //
    313          //
    314          //
    315          //
    316          //
    317          //
    318          ////-----------------------------------------------------------------------------------------------------
    319          //CResetKey::CResetKey()
    320          //{
    321          //    m_fpuiEventSource = CPlatform::KeyTwoState;
    322          //}
    323          //
    324          ////-----------------------------------------------------------------------------------------------------
    325          //CResetKey::~CResetKey()
    326          //{
    327          //
    328          //}
    329          //
    330          ////-----------------------------------------------------------------------------------------------------
    331          //bool CResetKey::IsReset(void)
    332          //{
    333          //
    334          //
    335          //}
    336          //
    337          ////-----------------------------------------------------------------------------------------------------
    338          //void CResetKey::Fsm(void)
    339          //{
    340          //
    341          //
    342          //}
    343          ////-----------------------------------------------------------------------------------------------------
    344          //
    345          //
    346          //
    347          //
    348          //
    349          //
    350          ////-----------------------------------------------------------------------------------------------------
    351          //CCheckKey::CCheckKey()
    352          //{
    353          //    m_fpuiEventSource = CPlatform::KeyThreeState;
    354          //}
    355          //
    356          ////-----------------------------------------------------------------------------------------------------
    357          //CCheckKey::~CCheckKey()
    358          //{
    359          //
    360          //}
    361          //
    362          ////-----------------------------------------------------------------------------------------------------
    363          //bool CCheckKey::IsSetDefault(void)
    364          //{
    365          //
    366          //
    367          //}
    368          //
    369          ////-----------------------------------------------------------------------------------------------------
    370          //void CCheckKey::Fsm(void)
    371          //{
    372          //
    373          //
    374          //}
    375          ////-----------------------------------------------------------------------------------------------------
    376          //
    377          //
    378          //
    379          //
    380          //
    381          //
    382          //
    383          ////-----------------------------------------------------------------------------------------------------
    384          //CSetDefaultKey::CSetDefaultKey()
    385          //{
    386          //    m_fpuiEventSource = CPlatform::ExternalKeyState;
    387          //}
    388          //
    389          ////-----------------------------------------------------------------------------------------------------
    390          //CSetDefaultKey::~CSetDefaultKey()
    391          //{
    392          //
    393          //}
    394          //
    395          ////-----------------------------------------------------------------------------------------------------
    396          //bool CSetDefaultKey::IsSetDefault(void)
    397          //{
    398          //
    399          //
    400          //}
    401          //
    402          ////-----------------------------------------------------------------------------------------------------
    403          //void CSetDefaultKey::Fsm(void)
    404          //{
    405          //
    406          //
    407          //}
    408          ////-----------------------------------------------------------------------------------------------------
    409          
    410          
    411          
    412          
    413          
    414          
    415          
    416          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    417          CMultiFunctionKey::CMultiFunctionKey()
   \                     ??CMultiFunctionKey:
   \   00000000   ....               RCALL   ?Subroutine4
    418          {
   \                     ??CrossCallReturnLabel_9:
   \   00000002   ....               RCALL   ?Subroutine2
    419          
    420          }
   \                     ??CrossCallReturnLabel_5:
   \   00000004   018D               MOVW    R17:R16, R27:R26
   \   00000006                      REQUIRE ?Subroutine11
   \   00000006                      ;               // Fall through to label ?Subroutine11

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine11:
   \   00000000   91A9               LD      R26, Y+
   \   00000002   91B9               LD      R27, Y+
   \   00000004   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine2:
   \   00000000   ........           CALL    ??CDfa
   \   00000004   ....               RCALL   ?Subroutine10
   \                     ??CrossCallReturnLabel_23:
   \   00000006   ....               RCALL   ?Subroutine9
   \                     ??CrossCallReturnLabel_19:
   \   00000008   ........           JMP     ??CTimer

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine10:
   \   00000000   ....               LDI     R16, LOW(??__vtbl)
   \   00000002   ....               LDI     R17, (??__vtbl) >> 8
   \   00000004   01FD               MOVW    R31:R30, R27:R26
   \   00000006   8301               STD     Z+1, R16
   \   00000008   8312               STD     Z+2, R17
   \   0000000A   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine4:
   \   00000000   93BA               ST      -Y, R27
   \   00000002   93AA               ST      -Y, R26
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine9:
   \   00000000   018D               MOVW    R17:R16, R27:R26
   \   00000002   5F07               SUBI    R16, 247
   \   00000004   4F1F               SBCI    R17, 255
   \   00000006   9508               RET
    421          
    422          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    423          CMultiFunctionKey::CMultiFunctionKey(uint8_t (*fpuiEventSource)(void))
   \                     ??CMultiFunctionKey_1:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    424          {
   \   00000008   ....               RCALL   ?Subroutine2
    425              m_fpuiEventSource = fpuiEventSource;
   \                     ??CrossCallReturnLabel_4:
   \   0000000A   01FD               MOVW    R31:R30, R27:R26
   \   0000000C   8385               STD     Z+5, R24
   \   0000000E   8396               STD     Z+6, R25
    426              m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
   \   00000010   E000               LDI     R16, 0
   \   00000012   ....               RCALL   ?Subroutine7
    427              m_uiEventCode = KEY_EVENT_UNPRESSED;
    428              SetFsmState(KEY_EVENT_UNPRESSED);
   \                     ??CrossCallReturnLabel_13:
   \   00000014   930C               ST      X, R16
    429          }
   \   00000016   018D               MOVW    R17:R16, R27:R26
   \   00000018                      REQUIRE ?Subroutine13
   \   00000018                      ;               // Fall through to label ?Subroutine13

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine13:
   \   00000000   E0E4               LDI     R30, 4
   \   00000002   ........           JMP     ?EPILOGUE_B4_L09

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine7:
   \   00000000   8700               STD     Z+8, R16
   \   00000002   8307               STD     Z+7, R16
   \   00000004   9508               RET
    430          
    431          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    432          CMultiFunctionKey::~CMultiFunctionKey()
   \                     `?~CMultiFunctionKey`:
    433          {
   \   00000000   ....               RCALL   ?Subroutine6
   \                     ??CrossCallReturnLabel_11:
   \   00000002   2B0B               OR      R16, R27
   \   00000004   F079               BREQ    `?~CMultiFunctionKey_1`
   \   00000006   ....               RCALL   ?Subroutine10
    434          
    435          }
   \                     ??CrossCallReturnLabel_22:
   \   00000008   E022               LDI     R18, 2
   \   0000000A   ....               RCALL   ?Subroutine8
   \                     ??CrossCallReturnLabel_20:
   \   0000000C   ........           CALL    `?~CTimer`
   \   00000010   E020               LDI     R18, 0
   \   00000012   E030               LDI     R19, 0
   \   00000014   018D               MOVW    R17:R16, R27:R26
   \   00000016   ........           CALL    `?~CDfa`
   \   0000001A   FB80               BST     R24, 0
   \   0000001C   F41E               BRTC    `?~CMultiFunctionKey_1`
   \   0000001E   018D               MOVW    R17:R16, R27:R26
   \   00000020   ........           CALL    `??operator delete`
   \                     `?~CMultiFunctionKey_1`:
   \   00000024   ....               RJMP    ?Subroutine13

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine6:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
   \   00000006   2F82               MOV     R24, R18
   \   00000008   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine8:
   \   00000000   E030               LDI     R19, 0
   \   00000002                      REQUIRE ?Subroutine9
   \   00000002                      ;               // Fall through to label ?Subroutine9
    436          
    437          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    438          void CMultiFunctionKey::SetCapabilities(uint8_t (*fpuiEventSource)(void))
   \                     ??SetCapabilities:
    439          {
    440              m_fpuiEventSource = fpuiEventSource;
   \   00000000   01F8               MOVW    R31:R30, R17:R16
   \   00000002   8325               STD     Z+5, R18
   \   00000004   8336               STD     Z+6, R19
    441              m_uiEventCode = KEY_EVENT_UNPRESSED;
   \   00000006   E020               LDI     R18, 0
   \   00000008   8327               STD     Z+7, R18
    442              SetFsmState(KEY_EVENT_UNPRESSED);
   \   0000000A   8320               ST      Z, R18
    443          }
   \   0000000C   9508               RET
    444          
    445          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    446          uint8_t CMultiFunctionKey::EventHappened(void)
   \                     ??EventHappened:
    447          {
   \   00000000   ....               RCALL   ?Subroutine4
    448              if (m_fpuiEventSource())
   \                     ??CrossCallReturnLabel_8:
   \   00000002   9615               ADIW    R27:R26, 5
   \   00000004   91ED               LD      R30, X+
   \   00000006   91FC               LD      R31, X
   \   00000008   9509               ICALL
   \   0000000A   2300               TST     R16
   \   0000000C   F011               BREQ    ??EventHappened_1
    449              {
    450                  return 1;
   \   0000000E   E001               LDI     R16, 1
   \   00000010   C001               RJMP    ??EventHappened_2
    451              }
    452              else
    453              {
    454                  return 0;
   \                     ??EventHappened_1:
   \   00000012   E000               LDI     R16, 0
    455              }
   \                     ??EventHappened_2:
   \   00000014   ....               RJMP    ?Subroutine11
    456          
    457          }
    458          
    459          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    460          uint8_t CMultiFunctionKey::KeyEventHappened(uint8_t uiCode)
   \                     ??KeyEventHappened:
    461          {
   \   00000000   ....               RCALL   ?Subroutine6
    462              Fsm();
   \                     ??CrossCallReturnLabel_12:
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   8121               LDD     R18, Z+1
   \   00000006   81F2               LDD     R31, Z+2
   \   00000008   2FE2               MOV     R30, R18
   \   0000000A   9632               ADIW    R31:R30, 2
   \   0000000C   9125               LPM     R18, Z+
   \   0000000E   91F4               LPM     R31, Z
   \   00000010   2FE2               MOV     R30, R18
   \   00000012   9509               ICALL
    463          
    464              if (m_uiEventCode == uiCode)
   \   00000014   01FD               MOVW    R31:R30, R27:R26
   \   00000016   8107               LDD     R16, Z+7
   \   00000018   1708               CP      R16, R24
   \   0000001A   E000               LDI     R16, 0
   \   0000001C   F419               BRNE    ??KeyEventHappened_1
    465              {
    466                  m_uiEventCode = KEY_EVENT_UNPRESSED;
   \   0000001E   8307               STD     Z+7, R16
    467                  m_uiPreliminaryEventCode = KEY_EVENT_UNPRESSED;
   \   00000020   8700               STD     Z+8, R16
    468                  return 1;
   \   00000022   E001               LDI     R16, 1
    469              }
    470              else
    471              {
    472                  return 0;
   \                     ??KeyEventHappened_1:
   \   00000024   ....               RJMP    ?Subroutine13
    473              }
    474          
    475          }
    476          
    477          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    478          void CMultiFunctionKey::Fsm(void)
   \                     ??Fsm:
    479          {
   \   00000000   ....               RCALL   ?Subroutine4
    480              // какое событие обрабатываем?
    481              switch (GetFsmState())
   \                     ??CrossCallReturnLabel_10:
   \   00000002   910C               LD      R16, X
   \   00000004   2300               TST     R16
   \   00000006   F069               BREQ    ??Fsm_1
   \   00000008   950A               DEC     R16
   \   0000000A   F081               BREQ    ??Fsm_2
   \   0000000C   950A               DEC     R16
   \   0000000E   F0B1               BREQ    ??Fsm_3
   \   00000010   950A               DEC     R16
   \   00000012   F0F9               BREQ    ??Fsm_4
   \   00000014   950A               DEC     R16
   \   00000016   F141               BREQ    ??Fsm_5
   \   00000018   950A               DEC     R16
   \   0000001A   F199               BREQ    ??Fsm_6
   \   0000001C   5002               SUBI    R16, 2
   \   0000001E   F1E1               BREQ    ??Fsm_7
   \   00000020   C03F               RJMP    ??Fsm_8
    482              {
    483              case KEY_EVENT_UNPRESSED:
    484                  m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_1:
   \   00000022   01FD               MOVW    R31:R30, R27:R26
   \   00000024   8500               LDD     R16, Z+8
   \   00000026   8307               STD     Z+7, R16
    485                  SetFsmState(KEY_EVENT_WAITING_PRESSED);
   \   00000028   E001               LDI     R16, 1
   \   0000002A   C039               RJMP    ??Fsm_9
    486                  break;
    487          
    488              case KEY_EVENT_WAITING_PRESSED:
    489                  // кнопка нажата?
    490                  if (EventHappened())
   \                     ??Fsm_2:
   \   0000002C   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_28:
   \   0000002E   F1C1               BREQ    ??Fsm_8
    491                  {
    492                      m_xTimer.Set(KEY_PRESSED_TIME_RECEIPT());
   \   00000030   E624               LDI     R18, 100
   \   00000032   ....               RCALL   ?Subroutine8
   \                     ??CrossCallReturnLabel_21:
   \   00000034   ........           CALL    ??Set
    493                      SetFsmState(KEY_EVENT_PRESSED_RECEIPT);
   \   00000038   E002               LDI     R16, 2
   \   0000003A   C031               RJMP    ??Fsm_9
    494                  }
    495                  break;
    496              case KEY_EVENT_PRESSED_RECEIPT:
    497                  // кнопка нажата?
    498                  if (EventHappened())
   \                     ??Fsm_3:
   \   0000003C   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_29:
   \   0000003E   F0E9               BREQ    ??Fsm_10
    499                  {
    500                      if (m_xTimer.IsOverflow())
   \   00000040   ....               RCALL   ?Subroutine1
   \                     ??CrossCallReturnLabel_24:
   \   00000042   F171               BREQ    ??Fsm_8
    501                      {
    502                          m_xTimer.Set(KEY_PRESSED_TIME_RESET());
   \   00000044   ED2C               LDI     R18, 220
   \   00000046   E035               LDI     R19, 5
   \   00000048   ....               RCALL   ?Subroutine0
    503                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RECEIPT;
   \                     ??CrossCallReturnLabel_0:
   \   0000004A   E002               LDI     R16, 2
   \   0000004C   ....               RCALL   ?Subroutine7
    504                          m_uiEventCode = m_uiPreliminaryEventCode;
    505                          SetFsmState(KEY_EVENT_PRESSED_RESET);
   \                     ??CrossCallReturnLabel_14:
   \   0000004E   E003               LDI     R16, 3
   \   00000050   C026               RJMP    ??Fsm_9
    506                      }
    507                  }
    508                  else
    509                  {
    510                      m_uiEventCode = m_uiPreliminaryEventCode;
    511                      SetFsmState(KEY_EVENT_UNPRESSED);
    512                  }
    513                  break;
    514              case KEY_EVENT_PRESSED_RESET:
    515                  // кнопка нажата?
    516                  if (EventHappened())
   \                     ??Fsm_4:
   \   00000052   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_30:
   \   00000054   F091               BREQ    ??Fsm_10
    517                  {
    518                      if (m_xTimer.IsOverflow())
   \   00000056   ....               RCALL   ?Subroutine1
   \                     ??CrossCallReturnLabel_25:
   \   00000058   F119               BREQ    ??Fsm_8
    519                      {
    520                          m_xTimer.Set(KEY_PRESSED_TIME_CHECK());
   \   0000005A   EB28               LDI     R18, 184
   \   0000005C   E03B               LDI     R19, 11
   \   0000005E   ....               RCALL   ?Subroutine0
    521                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_RESET;
   \                     ??CrossCallReturnLabel_1:
   \   00000060   E003               LDI     R16, 3
   \   00000062   ....               RCALL   ?Subroutine7
    522                          m_uiEventCode = m_uiPreliminaryEventCode;
    523                          SetFsmState(KEY_EVENT_PRESSED_CHECK);
   \                     ??CrossCallReturnLabel_15:
   \   00000064   E004               LDI     R16, 4
   \   00000066   C01B               RJMP    ??Fsm_9
    524          
    525                      }
    526                  }
    527                  else
    528                  {
    529                      m_uiEventCode = m_uiPreliminaryEventCode;
    530                      SetFsmState(KEY_EVENT_UNPRESSED);
    531                  }
    532                  break;
    533          
    534              case KEY_EVENT_PRESSED_CHECK:
    535                  // кнопка нажата?
    536                  if (EventHappened())
   \                     ??Fsm_5:
   \   00000068   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_31:
   \   0000006A   F039               BREQ    ??Fsm_10
    537                  {
    538                      if (m_xTimer.IsOverflow())
   \   0000006C   ....               RCALL   ?Subroutine1
   \                     ??CrossCallReturnLabel_26:
   \   0000006E   F0C1               BREQ    ??Fsm_8
    539                      {
    540                          m_xTimer.Set(KEY_PRESSED_TIME_SET_DEFAULT());
    541                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_CHECK;
    542                          m_uiEventCode = m_uiPreliminaryEventCode;
    543          //                SetFsmState(KEY_EVENT_PRESSED_SET_DEFAULT);
    544                          SetFsmState(KEY_EVENT_UNPRESSED_WAITING);
    545          
    546                      }
    547                  }
   \   00000070   E828               LDI     R18, 136
   \   00000072   E133               LDI     R19, 19
   \   00000074   ....               RCALL   ?Subroutine0
   \                     ??CrossCallReturnLabel_2:
   \   00000076   E004               LDI     R16, 4
   \   00000078   C00C               RJMP    ??Fsm_11
    548                  else
    549                  {
    550                      m_uiEventCode = m_uiPreliminaryEventCode;
   \                     ??Fsm_10:
   \   0000007A   01FD               MOVW    R31:R30, R27:R26
   \   0000007C   8500               LDD     R16, Z+8
   \   0000007E   8307               STD     Z+7, R16
    551                      SetFsmState(KEY_EVENT_UNPRESSED);
   \   00000080   C00D               RJMP    ??Fsm_12
    552                  }
    553                  break;
    554          
    555              case KEY_EVENT_PRESSED_SET_DEFAULT:
    556                  // кнопка нажата?
    557                  if (EventHappened())
   \                     ??Fsm_6:
   \   00000082   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_32:
   \   00000084   F059               BREQ    ??Fsm_12
    558                  {
    559                      if (m_xTimer.IsOverflow())
   \   00000086   ....               RCALL   ?Subroutine1
   \                     ??CrossCallReturnLabel_27:
   \   00000088   F059               BREQ    ??Fsm_8
    560                      {
    561                          m_xTimer.Set(KEY_PRESSED_CHECK_REPEAT_TIME());
   \   0000008A   E322               LDI     R18, 50
   \   0000008C   E030               LDI     R19, 0
   \   0000008E   ....               RCALL   ?Subroutine0
    562                          m_uiPreliminaryEventCode = KEY_EVENT_PRESSED_SET_DEFAULT;
   \                     ??CrossCallReturnLabel_3:
   \   00000090   E005               LDI     R16, 5
   \                     ??Fsm_11:
   \   00000092   ....               RCALL   ?Subroutine7
    563                          m_uiEventCode = m_uiPreliminaryEventCode;
    564                          SetFsmState(KEY_EVENT_UNPRESSED_WAITING);
   \                     ??CrossCallReturnLabel_16:
   \   00000094   E007               LDI     R16, 7
   \   00000096   C003               RJMP    ??Fsm_9
    565          
    566                      }
    567                  }
    568                  else
    569                  {
    570                      SetFsmState(KEY_EVENT_UNPRESSED);
    571                  }
    572                  break;
    573          
    574              case KEY_EVENT_UNPRESSED_WAITING:
    575                  // кнопка не нажата?
    576                  if (!(EventHappened()))
   \                     ??Fsm_7:
   \   00000098   ....               RCALL   ?Subroutine5
   \                     ??CrossCallReturnLabel_33:
   \   0000009A   F411               BRNE    ??Fsm_8
    577                  {
    578                      SetFsmState(KEY_EVENT_UNPRESSED);
   \                     ??Fsm_12:
   \   0000009C   E000               LDI     R16, 0
   \                     ??Fsm_9:
   \   0000009E   930C               ST      X, R16
    579                  }
    580                  break;
    581          
    582          
    583              default:
    584                  break;
    585              }
    586          }
   \                     ??Fsm_8:
   \   000000A0   ....               RJMP    ?Subroutine11

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine5:
   \   00000000   2F0A               MOV     R16, R26
   \   00000002   ....               RCALL   ??EventHappened
   \   00000004                      REQUIRE ?Subroutine12
   \   00000004                      ;               // Fall through to label ?Subroutine12

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine12:
   \   00000000   2300               TST     R16
   \   00000002   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine1:
   \   00000000   ....               RCALL   ?Subroutine9
   \                     ??CrossCallReturnLabel_18:
   \   00000002   ........           CALL    ??IsOverflow
   \   00000006   ....               RJMP    ?Subroutine12

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine0:
   \   00000000   ....               RCALL   ?Subroutine9
   \                     ??CrossCallReturnLabel_17:
   \   00000002   ........           CALL    ??Set
   \   00000006   01FD               MOVW    R31:R30, R27:R26
   \   00000008   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CMultiFunctionKey &CMultiFunctionKey::new CMultiFunctionKey()
   \                     `??new CMultiFunctionKey`:
   \   00000000   ....               RCALL   ?Subroutine3
   \                     ??CrossCallReturnLabel_6:
   \   00000002   F009               BREQ    `??new CMultiFunctionKey_2`
   \   00000004   ....               RJMP    ??CMultiFunctionKey
   \                     `??new CMultiFunctionKey_2`:
   \   00000006   E000               LDI     R16, 0
   \   00000008   E010               LDI     R17, 0
   \   0000000A   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CMultiFunctionKey &CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
   \                     `??new CMultiFunctionKey_1`:
   \   00000000   939A               ST      -Y, R25
   \   00000002   938A               ST      -Y, R24
   \   00000004   01C8               MOVW    R25:R24, R17:R16
   \   00000006   ....               RCALL   ?Subroutine3
   \                     ??CrossCallReturnLabel_7:
   \   00000008   F019               BREQ    `??new CMultiFunctionKey_3`
   \   0000000A   019C               MOVW    R19:R18, R25:R24
   \   0000000C   ....               RCALL   ??CMultiFunctionKey_1
   \   0000000E   C002               RJMP    `??new CMultiFunctionKey_4`
   \                     `??new CMultiFunctionKey_3`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \                     `??new CMultiFunctionKey_4`:
   \   00000014   9189               LD      R24, Y+
   \   00000016   9199               LD      R25, Y+
   \   00000018   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \                     ?Subroutine3:
   \   00000000   E00F               LDI     R16, 15
   \   00000002   E010               LDI     R17, 0
   \   00000004   ........           CALL    `??operator new`
   \   00000008   2F20               MOV     R18, R16
   \   0000000A   2B21               OR      R18, R17
   \   0000000C   9508               RET

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      2      2   CMultiFunctionKey::CMultiFunctionKey()
        2      4   -> CDfa::CDfa()
        2      2   -> CTimer::CTimer()
      4      2   CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
        4      4   -> CDfa::CDfa()
        4      2   -> CTimer::CTimer()
      2      2   CMultiFunctionKey::EventHappened()
        2      2   -- Indirect call
      2      2   CMultiFunctionKey::Fsm()
        2      4   -> CMultiFunctionKey::EventHappened()
        2      4   -> CTimer::IsOverflow()
        2      2   -> CTimer::Set(uint16_t)
        2      4   -> CTimer::Set(uint16_t)
      4      2   CMultiFunctionKey::KeyEventHappened(uint8_t)
        4      2   -- Indirect call
      0      2   CMultiFunctionKey::SetCapabilities(uint8_t (*)())
      0      2   CMultiFunctionKey::new CMultiFunctionKey()
        0      2   -> CMultiFunctionKey::CMultiFunctionKey()
        0      4   -> operator new(unsigned int)
      2      2   CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
        2      2   -> CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
        2      4   -> operator new(unsigned int)
      4      2   CMultiFunctionKey::~CMultiFunctionKey()
        4      2   -> CDfa::~CDfa()
        4      2   -> CTimer::~CTimer()
        4      2   -> operator delete(void *)


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      10  ?Subroutine0
       8  ?Subroutine1
      12  ?Subroutine10
       6  ?Subroutine11
       4  ?Subroutine12
       6  ?Subroutine13
      12  ?Subroutine2
      14  ?Subroutine3
       8  ?Subroutine4
       4  ?Subroutine5
      10  ?Subroutine6
       6  ?Subroutine7
       2  ?Subroutine8
       8  ?Subroutine9
       6  CMultiFunctionKey::CMultiFunctionKey()
      24  CMultiFunctionKey::CMultiFunctionKey(uint8_t (*)())
      22  CMultiFunctionKey::EventHappened()
     162  CMultiFunctionKey::Fsm()
      38  CMultiFunctionKey::KeyEventHappened(uint8_t)
      14  CMultiFunctionKey::SetCapabilities(uint8_t (*)())
      12  CMultiFunctionKey::new CMultiFunctionKey()
      26  CMultiFunctionKey::new CMultiFunctionKey(uint8_t (*)())
      38  CMultiFunctionKey::~CMultiFunctionKey()
       1  _A_ACSR
       2  _A_ADC
       1  _A_ADCSRA
       1  _A_ADMUX
       1  _A_ASSR
       1  _A_DDRA
       1  _A_DDRB
       1  _A_DDRC
       1  _A_DDRD
       1  _A_DDRE
       1  _A_DDRF
       1  _A_DDRG
       2  _A_EEAR
       1  _A_EECR
       1  _A_EEDR
       1  _A_EICRA
       1  _A_EICRB
       1  _A_EIFR
       1  _A_EIMSK
       1  _A_ETIFR
       1  _A_ETIMSK
       2  _A_ICR1
       2  _A_ICR3
       1  _A_MCUCR
       1  _A_MCUCSR
       1  _A_OCDR
       1  _A_OCR0
       2  _A_OCR1A
       2  _A_OCR1B
       2  _A_OCR1C
       1  _A_OCR2
       2  _A_OCR3A
       2  _A_OCR3B
       2  _A_OCR3C
       1  _A_OSCCAL
       1  _A_PINA
       1  _A_PINB
       1  _A_PINC
       1  _A_PIND
       1  _A_PINE
       1  _A_PINF
       1  _A_PING
       1  _A_PORTA
       1  _A_PORTB
       1  _A_PORTC
       1  _A_PORTD
       1  _A_PORTE
       1  _A_PORTF
       1  _A_PORTG
       1  _A_RAMPZ
       1  _A_SFIOR
       2  _A_SP
       1  _A_SPCR
       1  _A_SPDR
       1  _A_SPMCSR
       1  _A_SPSR
       1  _A_SREG
       1  _A_TCCR0
       1  _A_TCCR1A
       1  _A_TCCR1B
       1  _A_TCCR1C
       1  _A_TCCR2
       1  _A_TCCR3A
       1  _A_TCCR3B
       1  _A_TCCR3C
       1  _A_TCNT0
       2  _A_TCNT1
       1  _A_TCNT2
       2  _A_TCNT3
       1  _A_TIFR
       1  _A_TIMSK
       1  _A_TWAR
       1  _A_TWBR
       1  _A_TWCR
       1  _A_TWDR
       1  _A_TWSR
       1  _A_UBRR0H
       1  _A_UBRR0L
       1  _A_UBRR1H
       1  _A_UBRR1L
       1  _A_UCSR0A
       1  _A_UCSR0B
       1  _A_UCSR0C
       1  _A_UCSR1A
       1  _A_UCSR1B
       1  _A_UCSR1C
       1  _A_UDR0
       1  _A_UDR1
       1  _A_WDTCR
       1  _A_XDIV
       1  _A_XMCRA
       1  _A_XMCRB
       4  -- Other

 
 105 bytes in segment ABSOLUTE
 452 bytes in segment CODE
   4 bytes in segment NEAR_F
 
 452 bytes of CODE memory (+   4 bytes shared)
   0 bytes of DATA memory (+ 105 bytes shared)

Errors: none
Warnings: 2
