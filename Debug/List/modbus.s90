///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR          29/Jun/2023  11:26:06
// Copyright 1996-2018 IAR Systems AB.
//
//    Source file  =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\modbus.cpp
//    Command line =  
//        -f C:\Users\Admin\AppData\Local\Temp\EWC4E8.tmp
//        (--string_literals_in_flash
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\modbus.cpp
//        --cpu=m128a -ms -o
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\Obj -lC
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -lB
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List -y
//        --initializers_in_flash --root_variables --no_cse --no_inline
//        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
//        -DENABLE_BIT_DEFINITIONS -e -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\ -I
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\include\
//        --eeprom_size 4096 --dlib --dlib_config "C:\Program Files (x86)\IAR
//        Systems\Embedded Workbench 8.0\avr\LIB\DLIB\dlAVR-3s-ec_mul-n.h" -On
//        --eec++)
//    Locale       =  Russian_RUS.1251
//    List file    =  
//        D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Debug\List\modbus.s90
//
///////////////////////////////////////////////////////////////////////////////

        NAME modbus

        RSEG CSTACK:DATA:NOROOT(0)
        RSEG RSTACK:DATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?CV_SWITCH_L06
        EXTERN ?EPILOGUE_B10_L09
        EXTERN ?EPILOGUE_B12_L09
        EXTERN ?EPILOGUE_B14_L09
        EXTERN ?EPILOGUE_B15_L09
        EXTERN ?EPILOGUE_B16_L09
        EXTERN ?EPILOGUE_B4_L09
        EXTERN ?EPILOGUE_B6_L09
        EXTERN ?EPILOGUE_B7_L09
        EXTERN ?EPILOGUE_B8_L09
        EXTERN ?EPILOGUE_B9_L09
        EXTERN ?PROLOGUE10_L09
        EXTERN ?PROLOGUE12_L09
        EXTERN ?PROLOGUE14_L09
        EXTERN ?PROLOGUE15_L09
        EXTERN ?PROLOGUE16_L09
        EXTERN ?PROLOGUE4_L09
        EXTERN ?PROLOGUE6_L09
        EXTERN ?PROLOGUE7_L09
        EXTERN ?PROLOGUE8_L09
        EXTERN ?PROLOGUE9_L09
        EXTERN ?Register_R10_is_cg_reg
        EXTERN ?Register_R11_is_cg_reg
        EXTERN ?Register_R12_is_cg_reg
        EXTERN ?Register_R13_is_cg_reg
        EXTERN ?Register_R14_is_cg_reg
        EXTERN ?Register_R15_is_cg_reg
        EXTERN ?Register_R4_is_cg_reg
        EXTERN ?Register_R5_is_cg_reg
        EXTERN ?Register_R6_is_cg_reg
        EXTERN ?Register_R7_is_cg_reg
        EXTERN ?Register_R8_is_cg_reg
        EXTERN ?Register_R9_is_cg_reg
        EXTERN ?SS_DIVMOD_L02
        EXTERN ?S_SHL_L02
        EXTERN ?US_SHR_L02

        PUBLIC ??ByteToBitPack
        PUBLIC ??CModbus
        PUBWEAK ??CRC_LENGTH
        PUBWEAK ??GetBlocksNumber
        PUBLIC ??GetByteFromBits
        PUBLIC ??GetFloat
        PUBWEAK ??GetFsmEvent
        PUBWEAK ??GetFsmState
        PUBWEAK ??HEADER_LENGTH
        PUBLIC ??MessengerIsReady
        PUBLIC ??PollProgramming
        PUBLIC ??Programming
        PUBLIC ??ReadCoils
        PUBLIC ??ReadDiscreteInputs
        PUBLIC ??ReadDiscreteInputsReceive
        PUBLIC ??ReadDiscreteInputsRequest
        PUBLIC ??ReadExceptionStatus
        PUBLIC ??ReadHoldingRegisters
        PUBLIC ??ReadInputRegisters
        PUBLIC ??ReceiveMessage
        PUBLIC ??Reply
        PUBLIC ??ReportSlaveID
        PUBLIC ??ResponseException
        PUBLIC ??ResponseIsReceived
        PUBLIC ??SendMessage
        PUBLIC ??SetByteFromBits
        PUBLIC ??SetBytesFromBits
        PUBLIC ??SetFloat
        PUBWEAK ??SetFsmState
        PUBWEAK ??SetFsmState_1
        PUBLIC ??SlaveSet
        PUBLIC ??WriteAndReadRegisters
        PUBLIC ??WriteMultipleCoils
        PUBLIC ??WriteMultipleRegisters
        PUBLIC ??WriteSingleCoil
        PUBLIC ??WriteSingleRegister
        PUBWEAK ??__vtbl
        PUBLIC `??new CModbus`
        PUBLIC `?~CModbus`
        PUBWEAK _A_ACSR
        PUBWEAK _A_ADC
        PUBWEAK _A_ADCSRA
        PUBWEAK _A_ADMUX
        PUBWEAK _A_ASSR
        PUBWEAK _A_DDRA
        PUBWEAK _A_DDRB
        PUBWEAK _A_DDRC
        PUBWEAK _A_DDRD
        PUBWEAK _A_DDRE
        PUBWEAK _A_DDRF
        PUBWEAK _A_DDRG
        PUBWEAK _A_EEAR
        PUBWEAK _A_EECR
        PUBWEAK _A_EEDR
        PUBWEAK _A_EICRA
        PUBWEAK _A_EICRB
        PUBWEAK _A_EIFR
        PUBWEAK _A_EIMSK
        PUBWEAK _A_ETIFR
        PUBWEAK _A_ETIMSK
        PUBWEAK _A_ICR1
        PUBWEAK _A_ICR3
        PUBWEAK _A_MCUCR
        PUBWEAK _A_MCUCSR
        PUBWEAK _A_OCDR
        PUBWEAK _A_OCR0
        PUBWEAK _A_OCR1A
        PUBWEAK _A_OCR1B
        PUBWEAK _A_OCR1C
        PUBWEAK _A_OCR2
        PUBWEAK _A_OCR3A
        PUBWEAK _A_OCR3B
        PUBWEAK _A_OCR3C
        PUBWEAK _A_OSCCAL
        PUBWEAK _A_PINA
        PUBWEAK _A_PINB
        PUBWEAK _A_PINC
        PUBWEAK _A_PIND
        PUBWEAK _A_PINE
        PUBWEAK _A_PINF
        PUBWEAK _A_PING
        PUBWEAK _A_PORTA
        PUBWEAK _A_PORTB
        PUBWEAK _A_PORTC
        PUBWEAK _A_PORTD
        PUBWEAK _A_PORTE
        PUBWEAK _A_PORTF
        PUBWEAK _A_PORTG
        PUBWEAK _A_RAMPZ
        PUBWEAK _A_SFIOR
        PUBWEAK _A_SP
        PUBWEAK _A_SPCR
        PUBWEAK _A_SPDR
        PUBWEAK _A_SPMCSR
        PUBWEAK _A_SPSR
        PUBWEAK _A_SREG
        PUBWEAK _A_TCCR0
        PUBWEAK _A_TCCR1A
        PUBWEAK _A_TCCR1B
        PUBWEAK _A_TCCR1C
        PUBWEAK _A_TCCR2
        PUBWEAK _A_TCCR3A
        PUBWEAK _A_TCCR3B
        PUBWEAK _A_TCCR3C
        PUBWEAK _A_TCNT0
        PUBWEAK _A_TCNT1
        PUBWEAK _A_TCNT2
        PUBWEAK _A_TCNT3
        PUBWEAK _A_TIFR
        PUBWEAK _A_TIMSK
        PUBWEAK _A_TWAR
        PUBWEAK _A_TWBR
        PUBWEAK _A_TWCR
        PUBWEAK _A_TWDR
        PUBWEAK _A_TWSR
        PUBWEAK _A_UBRR0H
        PUBWEAK _A_UBRR0L
        PUBWEAK _A_UBRR1H
        PUBWEAK _A_UBRR1L
        PUBWEAK _A_UCSR0A
        PUBWEAK _A_UCSR0B
        PUBWEAK _A_UCSR0C
        PUBWEAK _A_UCSR1A
        PUBWEAK _A_UCSR1B
        PUBWEAK _A_UCSR1C
        PUBWEAK _A_UDR0
        PUBWEAK _A_UDR1
        PUBWEAK _A_WDTCR
        PUBWEAK _A_XDIV
        PUBWEAK _A_XMCRA
        PUBWEAK _A_XMCRB
        PUBWEAK __?EEARH
        PUBWEAK __?EEARL
        PUBWEAK __?EECR
        PUBWEAK __?EEDR

`?<Name CPss21 17>` SYMBOL "CPss21"
`?<Name CDataStore 27>` SYMBOL "CDataStore"
??m_uiFsmEvent      SYMBOL "m_uiFsmEvent", `?<Name CDataStore 27>`
??m_uiFsmState      SYMBOL "m_uiFsmState", `?<Name CPss21 17>`
??m_xDeviceConfigSearch SYMBOL "m_xDeviceConfigSearch", `?<Name CPss21 17>`
`?<Name CModbus 39>` SYMBOL "CModbus"
??__vtbl            SYMBOL "__vtbl", `?<Name CModbus 39>`

        EXTERN ??CDfa
        EXTERN ??Fsm
        EXTERN ??GetBlockLength
        EXTERN ??ModbusDeviceControl
        EXTERN ??ModbusDeviceControl_1
        EXTERN ??ReadBlock
        EXTERN ??SignatureCreate
        EXTERN ??WriteBlock
        EXTERN ??m_uiFsmEvent
        EXTERN ??m_uiFsmState
        EXTERN ??m_xDeviceConfigSearch
        EXTERN `??operator delete`
        EXTERN `??operator new`
        EXTERN `?~CDfa`
        EXTERN __pure_virtual_called
        EXTERN memcpy

// D:\Projects\CurrentProjects\CautoProjects\PSS48Color\Modbus\modbus.cpp
//    1 //-----------------------------------------------------------------------------------------------------
//    2 //  Source      : FileName.cpp
//    3 //  Created     : 01.06.2022
//    4 //  Author      : Alexandr Volvenkin
//    5 //  email       : aav-36@mail.ru
//    6 //  GitHub      : https://github.com/AlexandrVolvenkin
//    7 //-----------------------------------------------------------------------------------------------------
//    8 
//    9 #include "Modbus.h"

        ASEGN ABSOLUTE:DATA:ROOT,09dH
// union <unnamed> volatile __io _A_UCSR1C
_A_UCSR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09cH
// union <unnamed> volatile __io _A_UDR1
_A_UDR1:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09bH
// union <unnamed> volatile __io _A_UCSR1A
_A_UCSR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,09aH
// union <unnamed> volatile __io _A_UCSR1B
_A_UCSR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,099H
// union <unnamed> volatile __io _A_UBRR1L
_A_UBRR1L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,098H
// union <unnamed> volatile __io _A_UBRR1H
_A_UBRR1H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,095H
// union <unnamed> volatile __io _A_UCSR0C
_A_UCSR0C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,090H
// union <unnamed> volatile __io _A_UBRR0H
_A_UBRR0H:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08cH
// union <unnamed> volatile __io _A_TCCR3C
_A_TCCR3C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08bH
// union <unnamed> volatile __io _A_TCCR3A
_A_TCCR3A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,08aH
// union <unnamed> volatile __io _A_TCCR3B
_A_TCCR3B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,088H
// union <unnamed> volatile __io _A_TCNT3
_A_TCNT3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,086H
// union <unnamed> volatile __io _A_OCR3A
_A_OCR3A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,084H
// union <unnamed> volatile __io _A_OCR3B
_A_OCR3B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,082H
// union <unnamed> volatile __io _A_OCR3C
_A_OCR3C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,080H
// union <unnamed> volatile __io _A_ICR3
_A_ICR3:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,07dH
// union <unnamed> volatile __io _A_ETIMSK
_A_ETIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07cH
// union <unnamed> volatile __io _A_ETIFR
_A_ETIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,07aH
// union <unnamed> volatile __io _A_TCCR1C
_A_TCCR1C:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,078H
// union <unnamed> volatile __io _A_OCR1C
_A_OCR1C:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,074H
// union <unnamed> volatile __io _A_TWCR
_A_TWCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,073H
// union <unnamed> volatile __io _A_TWDR
_A_TWDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,072H
// union <unnamed> volatile __io _A_TWAR
_A_TWAR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,071H
// union <unnamed> volatile __io _A_TWSR
_A_TWSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,070H
// union <unnamed> volatile __io _A_TWBR
_A_TWBR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06fH
// union <unnamed> volatile __io _A_OSCCAL
_A_OSCCAL:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06dH
// union <unnamed> volatile __io _A_XMCRA
_A_XMCRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06cH
// union <unnamed> volatile __io _A_XMCRB
_A_XMCRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,06aH
// union <unnamed> volatile __io _A_EICRA
_A_EICRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,068H
// union <unnamed> volatile __io _A_SPMCSR
_A_SPMCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,065H
// union <unnamed> volatile __io _A_PORTG
_A_PORTG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,064H
// union <unnamed> volatile __io _A_DDRG
_A_DDRG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,063H
// union <unnamed> volatile __io _A_PING
_A_PING:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,062H
// union <unnamed> volatile __io _A_PORTF
_A_PORTF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,061H
// union <unnamed> volatile __io _A_DDRF
_A_DDRF:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05fH
// union <unnamed> volatile __io _A_SREG
_A_SREG:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05dH
// union <unnamed> volatile __io _A_SP
_A_SP:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,05cH
// union <unnamed> volatile __io _A_XDIV
_A_XDIV:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05bH
// union <unnamed> volatile __io _A_RAMPZ
_A_RAMPZ:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,05aH
// union <unnamed> volatile __io _A_EICRB
_A_EICRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,059H
// union <unnamed> volatile __io _A_EIMSK
_A_EIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,058H
// union <unnamed> volatile __io _A_EIFR
_A_EIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,057H
// union <unnamed> volatile __io _A_TIMSK
_A_TIMSK:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,056H
// union <unnamed> volatile __io _A_TIFR
_A_TIFR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,055H
// union <unnamed> volatile __io _A_MCUCR
_A_MCUCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,054H
// union <unnamed> volatile __io _A_MCUCSR
_A_MCUCSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,053H
// union <unnamed> volatile __io _A_TCCR0
_A_TCCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,052H
// union <unnamed> volatile __io _A_TCNT0
_A_TCNT0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,051H
// union <unnamed> volatile __io _A_OCR0
_A_OCR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,050H
// union <unnamed> volatile __io _A_ASSR
_A_ASSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04fH
// union <unnamed> volatile __io _A_TCCR1A
_A_TCCR1A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04eH
// union <unnamed> volatile __io _A_TCCR1B
_A_TCCR1B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,04cH
// union <unnamed> volatile __io _A_TCNT1
_A_TCNT1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,04aH
// union <unnamed> volatile __io _A_OCR1A
_A_OCR1A:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,048H
// union <unnamed> volatile __io _A_OCR1B
_A_OCR1B:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,046H
// union <unnamed> volatile __io _A_ICR1
_A_ICR1:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,045H
// union <unnamed> volatile __io _A_TCCR2
_A_TCCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,044H
// union <unnamed> volatile __io _A_TCNT2
_A_TCNT2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,043H
// union <unnamed> volatile __io _A_OCR2
_A_OCR2:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,042H
// union <unnamed> volatile __io _A_OCDR
_A_OCDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,041H
// union <unnamed> volatile __io _A_WDTCR
_A_WDTCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,040H
// union <unnamed> volatile __io _A_SFIOR
_A_SFIOR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03eH
// union <unnamed> volatile __io _A_EEAR
_A_EEAR:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,03dH
// union <unnamed> volatile __io _A_EEDR
_A_EEDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03cH
// union <unnamed> volatile __io _A_EECR
_A_EECR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03bH
// union <unnamed> volatile __io _A_PORTA
_A_PORTA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,03aH
// union <unnamed> volatile __io _A_DDRA
_A_DDRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,039H
// union <unnamed> volatile __io _A_PINA
_A_PINA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,038H
// union <unnamed> volatile __io _A_PORTB
_A_PORTB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,037H
// union <unnamed> volatile __io _A_DDRB
_A_DDRB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,036H
// union <unnamed> volatile __io _A_PINB
_A_PINB:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,035H
// union <unnamed> volatile __io _A_PORTC
_A_PORTC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,034H
// union <unnamed> volatile __io _A_DDRC
_A_DDRC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,033H
// union <unnamed> volatile __io _A_PINC
_A_PINC:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,032H
// union <unnamed> volatile __io _A_PORTD
_A_PORTD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,031H
// union <unnamed> volatile __io _A_DDRD
_A_DDRD:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,030H
// union <unnamed> volatile __io _A_PIND
_A_PIND:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02fH
// union <unnamed> volatile __io _A_SPDR
_A_SPDR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02eH
// union <unnamed> volatile __io _A_SPSR
_A_SPSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02dH
// union <unnamed> volatile __io _A_SPCR
_A_SPCR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02cH
// union <unnamed> volatile __io _A_UDR0
_A_UDR0:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02bH
// union <unnamed> volatile __io _A_UCSR0A
_A_UCSR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,02aH
// union <unnamed> volatile __io _A_UCSR0B
_A_UCSR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,029H
// union <unnamed> volatile __io _A_UBRR0L
_A_UBRR0L:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,028H
// union <unnamed> volatile __io _A_ACSR
_A_ACSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,027H
// union <unnamed> volatile __io _A_ADMUX
_A_ADMUX:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,026H
// union <unnamed> volatile __io _A_ADCSRA
_A_ADCSRA:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,024H
// union <unnamed> volatile __io _A_ADC
_A_ADC:
        DS8 2

        ASEGN ABSOLUTE:DATA:ROOT,023H
// union <unnamed> volatile __io _A_PORTE
_A_PORTE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,022H
// union <unnamed> volatile __io _A_DDRE
_A_DDRE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,021H
// union <unnamed> volatile __io _A_PINE
_A_PINE:
        DS8 1

        ASEGN ABSOLUTE:DATA:ROOT,020H
// union <unnamed> volatile __io _A_PINF
_A_PINF:
        DS8 1
//   10 #include "Platform.h"
//   11 #include "Pss21.h"
//   12 #include "DataBase.h"
//   13 
//   14 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   15 CModbus::CModbus()
??CModbus:
        ST      -Y, R27
        ST      -Y, R26
        MOVW    R27:R26, R17:R16
//   16 {
        MOVW    R17:R16, R27:R26
        CALL    ??CDfa
        LDI     R16, LOW(??__vtbl)
        LDI     R17, (??__vtbl) >> 8
        MOVW    R31:R30, R27:R26
        STD     Z+1, R16
        STD     Z+2, R17
//   17     //ctor
//   18 }
        MOVW    R17:R16, R27:R26
        LD      R26, Y+
        LD      R27, Y+
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 CModbus &CModbus::new CModbus()
`??new CModbus`:
        LDI     R16, 34
        LDI     R17, 0
        CALL    `??operator new`
        MOV     R18, R16
        OR      R18, R17
        BREQ    `??new CModbus_1`
        RCALL   ??CModbus
        RET
`??new CModbus_1`:
        LDI     R16, 0
        LDI     R17, 0
        RET
//   19 
//   20 ////-----------------------------------------------------------------------------------------------------
//   21 //CModbus::CModbus(CUart* pxDevice,
//   22 //                 uint32_t uiBaudRate,
//   23 //                 char cParity,
//   24 //                 uint8_t uiDataBit,
//   25 //                 uint8_t uiStopBit,
//   26 //                 uint8_t *puiRxBuffer,
//   27 //                 uint8_t *puiTxBuffer) :
//   28 //    pxDevice(pxDevice),
//   29 //    uiBaudRate(uiBaudRate),
//   30 //    cParity(cParity),
//   31 //    uiDataBit(uiDataBit),
//   32 //    uiStopBit(uiStopBit),
//   33 //    m_puiRxBuffer(puiRxBuffer),
//   34 //    m_puiTxBuffer(puiTxBuffer)
//   35 //{
//   36 //    SetFsmState(MODBUS_IDDLE);
//   37 //}
//   38 
//   39 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   40 CModbus::~CModbus()
`?~CModbus`:
//   41 {
        CALL    ?PROLOGUE4_L09
        MOVW    R25:R24, R17:R16
        MOVW    R27:R26, R19:R18
        MOV     R16, R24
        OR      R16, R25
        BREQ    `?~CModbus_1`
//   42 
//   43 }
        LDI     R18, 0
        LDI     R19, 0
        MOVW    R17:R16, R25:R24
        CALL    `?~CDfa`
        BST     R26, 0
        BRTC    `?~CModbus_1`
        MOVW    R17:R16, R25:R24
        CALL    `??operator delete`
`?~CModbus_1`:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
//   44 
//   45 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   46 void CModbus::SlaveSet(uint8_t uiSlave)
??SlaveSet:
//   47 {
//   48     m_uiOwnAddress = uiSlave;
        MOVW    R31:R30, R17:R16
        STD     Z+5, R18
//   49 }
        RET
//   50 
//   51 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   52 int8_t CModbus::MessengerIsReady(void)
??MessengerIsReady:
//   53 {
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
//   54     if (GetFsmState() == IDDLE)
        MOVW    R17:R16, R25:R24
        CALL    ??GetFsmState
        TST     R16
        BRNE    ??MessengerIsReady_1
//   55     {
//   56         return 1;
        LDI     R16, 1
        RJMP    ??MessengerIsReady_2
//   57     }
//   58     else
//   59     {
//   60         return 0;
??MessengerIsReady_1:
        LDI     R16, 0
??MessengerIsReady_2:
        LD      R24, Y+
        LD      R25, Y+
        RET
//   61     }
//   62 }
//   63 
//   64 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   65 int16_t CModbus::SendMessage(uint8_t *puiMessage, uint16_t uiLength)
??SendMessage:
//   66 {
        CALL    ?PROLOGUE6_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R25:R24, R19:R18
        MOVW    R27:R26, R21:R20
//   67     uiLength = Tail(puiMessage, uiLength);
        MOVW    R21:R20, R27:R26
        MOVW    R19:R18, R25:R24
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 6
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 7
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R27:R26, R17:R16
//   68     return Send(puiMessage, uiLength);
        MOVW    R21:R20, R27:R26
        MOVW    R19:R18, R25:R24
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 12
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 13
        MOVW    R31:R30, R23:R22
        ICALL
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09
//   69 }
//   70 
//   71 //-----------------------------------------------------------------------------------------------------
//   72 /* Build the exception response */

        RSEG CODE:CODE:NOROOT(1)
//   73 int16_t CModbus::ResponseException(uint8_t uiSlave, uint8_t uiFunctionCode, uint8_t uiExceptionCode, uint8_t *puiResponse)
??ResponseException:
//   74 {
        CALL    ?PROLOGUE9_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOV     R7, R18
        MOV     R6, R19
        MOV     R8, R20
        MOVW    R25:R24, R23:R22
//   75     int16_t uiLength;
//   76 
//   77     uiLength = ResponseBasis(uiSlave, (uiFunctionCode | 0x80), puiResponse);
        MOVW    R21:R20, R25:R24
        MOV     R19, R6
        ORI     R19, 0x80
        MOV     R18, R7
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R5:R4, R17:R16
//   78     /* Positive exception code */
//   79     puiResponse[uiLength++] = uiExceptionCode;
        MOVW    R31:R30, R25:R24
        ADD     R30, R4
        ADC     R31, R5
        ST      Z, R8
        LDI     R16, 1
        ADD     R4, R16
        LDI     R16, 0
        ADC     R5, R16
//   80 
//   81     return uiLength;
        MOVW    R17:R16, R5:R4
        LDI     R30, 9
        JMP     ?EPILOGUE_B9_L09
//   82 }
//   83 
//   84 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   85 uint8_t CModbus::ResponseIsReceived(void)
??ResponseIsReceived:
//   86 {
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R25:R24, R17:R16
//   87     if (GetFsmState() == IDDLE)
        MOVW    R17:R16, R25:R24
        CALL    ??GetFsmState
        TST     R16
        BRNE    ??ResponseIsReceived_1
//   88     {
//   89         return 1;
        LDI     R16, 1
        RJMP    ??ResponseIsReceived_2
//   90     }
//   91     else
//   92     {
//   93         return 0;
??ResponseIsReceived_1:
        LDI     R16, 0
??ResponseIsReceived_2:
        LD      R24, Y+
        LD      R25, Y+
        RET
//   94     }
//   95 };
//   96 
//   97 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//   98 int16_t CModbus::ByteToBitPack(uint16_t uiAddress,
??ByteToBitPack:
//   99                                uint16_t uiNumberB,
//  100                                uint8_t *m_puiCoils,
//  101                                uint8_t *puiResponse,
//  102                                uint16_t uiLength)
//  103 {
        CALL    ?PROLOGUE10_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R1:R0, R21:R20
        LDD     R2, Y+10
        LDD     R3, Y+11
        LDD     R24, Y+12
        LDD     R25, Y+13
//  104     uint8_t uiData = 0;
        LDI     R21, 0
//  105     uint8_t uiShift = 0;
        CLR     R6
//  106     for (uint16_t i = 0; i < uiNumberB; i++)
        LDI     R26, 0
        LDI     R27, 0
??ByteToBitPack_1:
        CP      R26, R0
        CPC     R27, R1
        BRCC    ??ByteToBitPack_2
//  107     {
//  108         if (m_puiCoils[uiAddress++])
        MOVW    R9:R8, R19:R18
        MOVW    R19:R18, R9:R8
        SUBI    R18, 255
        SBCI    R19, 255
        MOVW    R31:R30, R23:R22
        ADD     R30, R8
        ADC     R31, R9
        LD      R16, Z
        TST     R16
        BREQ    ??ByteToBitPack_3
//  109         {
//  110             uiData |= (1 << uiShift);
        LDI     R16, 1
        LDI     R17, 0
        MOV     R20, R6
        CALL    ?S_SHL_L02
        OR      R21, R16
//  111         }
//  112         // Byte is full?
//  113         if (uiShift == 7)
??ByteToBitPack_3:
        LDI     R16, 7
        CP      R6, R16
        BRNE    ??ByteToBitPack_4
//  114         {
//  115             puiResponse[uiLength++] = uiData;
        MOVW    R31:R30, R3:R2
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R21
        ADIW    R25:R24, 1
//  116             uiData = 0;
        LDI     R21, 0
//  117             uiShift = 0;
        CLR     R6
        RJMP    ??ByteToBitPack_5
//  118         }
//  119         else
//  120         {
//  121             uiShift++;
??ByteToBitPack_4:
        INC     R6
//  122         }
//  123     }
??ByteToBitPack_5:
        ADIW    R27:R26, 1
        RJMP    ??ByteToBitPack_1
//  124 
//  125     if (uiShift != 0)
??ByteToBitPack_2:
        TST     R6
        BREQ    ??ByteToBitPack_6
//  126     {
//  127         puiResponse[uiLength++] = uiData;
        MOVW    R31:R30, R3:R2
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R21
        ADIW    R25:R24, 1
//  128     }
//  129 
//  130     return uiLength;
??ByteToBitPack_6:
        MOVW    R17:R16, R25:R24
        LDI     R30, 14
        JMP     ?EPILOGUE_B10_L09
//  131 }
//  132 
//  133 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  134 int16_t CModbus::ReadCoils(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReadCoils:
//  135 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R11:R10, R19:R18
        MOVW    R9:R8, R21:R20
        MOVW    R25:R24, R23:R22
//  136     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R7:R6, R17:R16
//  137     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        SBIW    R31:R30, 1
        LD      R15, Z
//  138     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LD      R14, Z
//  139     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  140                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R13, Z+1
        CLR     R12
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R12, R16
        OR      R13, R17
//  141 
//  142     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  143                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R27, Z+3
        LDI     R26, 0
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  144 
//  145     if (uiNumberB < 1 || MODBUS_MAX_READ_BITS < uiNumberB)
        MOV     R16, R26
        OR      R16, R27
        BREQ    ??ReadCoils_1
        CPI     R26, 209
        LDI     R16, 7
        CPC     R27, R16
        BRCS    ??ReadCoils_2
//  146     {
//  147         uiLength = ResponseException(uiSlave,
//  148                                      uiFunctionCode,
//  149                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  150                                      puiResponse);
??ReadCoils_1:
        MOVW    R23:R22, R9:R8
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadCoils_3
//  151     }
//  152     else if ((uiAddress + uiNumberB) > m_uiCoilsNumber)
??ReadCoils_2:
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+26
        LDD     R17, Z+27
        MOVW    R19:R18, R13:R12
        ADD     R18, R26
        ADC     R19, R27
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??ReadCoils_4
//  153     {
//  154         uiLength = ResponseException(uiSlave,
//  155                                      uiFunctionCode,
//  156                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  157                                      puiResponse);
        MOVW    R23:R22, R9:R8
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadCoils_3
//  158     }
//  159     else
//  160     {
//  161         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??ReadCoils_4:
        MOVW    R21:R20, R9:R8
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  162 
//  163         if (uiNumberB % 8)
        MOV     R16, R26
        ANDI    R16, 0x07
        TST     R16
        BREQ    ??ReadCoils_5
//  164         {
//  165             puiResponse[uiLength++] = ((uiNumberB / 8) + 1);
        LDI     R20, 3
        MOVW    R17:R16, R27:R26
        CALL    ?US_SHR_L02
        INC     R16
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
        RJMP    ??ReadCoils_6
//  166         }
//  167         else
//  168         {
//  169             puiResponse[uiLength++] = (uiNumberB / 8);
??ReadCoils_5:
        LDI     R20, 3
        MOVW    R17:R16, R27:R26
        CALL    ?US_SHR_L02
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  170         }
//  171         uiLength = ByteToBitPack(uiAddress,
//  172                                  uiNumberB,
//  173                                  m_puiCoils,
//  174                                  puiResponse,
//  175                                  uiLength);
??ReadCoils_6:
        ST      -Y, R25
        ST      -Y, R24
        ST      -Y, R9
        ST      -Y, R8
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+18
        LDD     R23, Z+19
        MOVW    R21:R20, R27:R26
        MOVW    R19:R18, R13:R12
        MOVW    R17:R16, R5:R4
        RCALL   ??ByteToBitPack
        MOVW    R25:R24, R17:R16
//  176     }
//  177     return uiLength;
??ReadCoils_3:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  178 }
//  179 
//  180 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  181 int16_t CModbus::ReadDiscreteInputs(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReadDiscreteInputs:
//  182 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R11:R10, R19:R18
        MOVW    R9:R8, R21:R20
        MOVW    R25:R24, R23:R22
//  183     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R7:R6, R17:R16
//  184     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        SBIW    R31:R30, 1
        LD      R15, Z
//  185     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LD      R14, Z
//  186     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  187                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R13, Z+1
        CLR     R12
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R12, R16
        OR      R13, R17
//  188 
//  189     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  190                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R27, Z+3
        LDI     R26, 0
        MOVW    R31:R30, R11:R10
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  191 
//  192     if (uiNumberB < 1 || MODBUS_MAX_READ_BITS < uiNumberB)
        MOV     R16, R26
        OR      R16, R27
        BREQ    ??ReadDiscreteInputs_1
        CPI     R26, 209
        LDI     R16, 7
        CPC     R27, R16
        BRCS    ??ReadDiscreteInputs_2
//  193     {
//  194         uiLength = ResponseException(uiSlave,
//  195                                      uiFunctionCode,
//  196                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  197                                      puiResponse);
??ReadDiscreteInputs_1:
        MOVW    R23:R22, R9:R8
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadDiscreteInputs_3
//  198     }
//  199     else if ((uiAddress + uiNumberB) > m_uiDiscreteInputsNumber)
??ReadDiscreteInputs_2:
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+28
        LDD     R17, Z+29
        MOVW    R19:R18, R13:R12
        ADD     R18, R26
        ADC     R19, R27
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??ReadDiscreteInputs_4
//  200     {
//  201         uiLength = ResponseException(uiSlave,
//  202                                      uiFunctionCode,
//  203                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  204                                      puiResponse);
        MOVW    R23:R22, R9:R8
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadDiscreteInputs_3
//  205     }
//  206     else
//  207     {
//  208         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??ReadDiscreteInputs_4:
        MOVW    R21:R20, R9:R8
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  209 
//  210         if (uiNumberB % 8)
        MOV     R16, R26
        ANDI    R16, 0x07
        TST     R16
        BREQ    ??ReadDiscreteInputs_5
//  211         {
//  212             puiResponse[uiLength++] = ((uiNumberB / 8) + 1);
        LDI     R20, 3
        MOVW    R17:R16, R27:R26
        CALL    ?US_SHR_L02
        INC     R16
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
        RJMP    ??ReadDiscreteInputs_6
//  213         }
//  214         else
//  215         {
//  216             puiResponse[uiLength++] = (uiNumberB / 8);
??ReadDiscreteInputs_5:
        LDI     R20, 3
        MOVW    R17:R16, R27:R26
        CALL    ?US_SHR_L02
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  217         }
//  218         uiLength = ByteToBitPack(uiAddress,
//  219                                  uiNumberB,
//  220                                  m_puiDiscreteInputs,
//  221                                  puiResponse,
//  222                                  uiLength);
??ReadDiscreteInputs_6:
        ST      -Y, R25
        ST      -Y, R24
        ST      -Y, R9
        ST      -Y, R8
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+20
        LDD     R23, Z+21
        MOVW    R21:R20, R27:R26
        MOVW    R19:R18, R13:R12
        MOVW    R17:R16, R5:R4
        RCALL   ??ByteToBitPack
        MOVW    R25:R24, R17:R16
//  223     }
//  224     return uiLength;
??ReadDiscreteInputs_3:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  225 }
//  226 
//  227 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  228 int16_t CModbus::ReadHoldingRegisters(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReadHoldingRegisters:
//  229 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R13:R12, R19:R18
        MOVW    R9:R8, R21:R20
        MOVW    R25:R24, R23:R22
//  230     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R11:R10, R17:R16
//  231     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        SBIW    R31:R30, 1
        LD      R15, Z
//  232     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LD      R14, Z
//  233     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  234                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R27, Z+1
        LDI     R26, 0
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  235 
//  236     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  237                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R7, Z+3
        CLR     R6
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R6, R16
        OR      R7, R17
//  238 
//  239     if (uiNumberB < 1 || MODBUS_MAX_READ_REGISTERS < uiNumberB)
        MOV     R16, R6
        OR      R16, R7
        BREQ    ??ReadHoldingRegisters_1
        LDI     R16, 126
        CP      R6, R16
        LDI     R16, 0
        CPC     R7, R16
        BRCS    ??ReadHoldingRegisters_2
//  240     {
//  241         uiLength = ResponseException(uiSlave,
//  242                                      uiFunctionCode,
//  243                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  244                                      puiResponse);
??ReadHoldingRegisters_1:
        MOVW    R23:R22, R9:R8
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadHoldingRegisters_3
//  245     }
//  246     else if ((uiAddress + uiNumberB) > m_uiHoldingRegistersNumber)
??ReadHoldingRegisters_2:
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+30
        LDD     R17, Z+31
        MOVW    R19:R18, R27:R26
        ADD     R18, R6
        ADC     R19, R7
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??ReadHoldingRegisters_4
//  247     {
//  248         uiLength = ResponseException(uiSlave,
//  249                                      uiFunctionCode,
//  250                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  251                                      puiResponse);
        MOVW    R23:R22, R9:R8
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadHoldingRegisters_3
//  252     }
//  253     else
//  254     {
//  255         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??ReadHoldingRegisters_4:
        MOVW    R21:R20, R9:R8
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  256         puiResponse[uiLength++] = (uiNumberB << 1);
        MOV     R16, R6
        LSL     R16
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  257         for (uint16_t i = 0; i < uiNumberB; i++)
        LDI     R16, 0
        LDI     R17, 0
??ReadHoldingRegisters_5:
        CP      R16, R6
        CPC     R17, R7
        BRCC    ??ReadHoldingRegisters_3
//  258         {
//  259             puiResponse[uiLength++] = (static_cast<uint8_t>(m_pui16HoldingRegisters[uiAddress] >> 8));
        MOVW    R31:R30, R5:R4
        LDD     R20, Z+22
        LDD     R21, Z+23
        MOVW    R19:R18, R27:R26
        LSL     R18
        ROL     R19
        ADD     R20, R18
        ADC     R21, R19
        MOVW    R31:R30, R21:R20
        LD      R18, Z
        LDD     R19, Z+1
        MOV     R18, R19
        LDI     R19, 0
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  260             puiResponse[uiLength++] = (static_cast<uint8_t>(m_pui16HoldingRegisters[uiAddress] & 0x00FF));
        MOVW    R31:R30, R5:R4
        LDD     R20, Z+22
        LDD     R21, Z+23
        MOVW    R19:R18, R27:R26
        LSL     R18
        ROL     R19
        ADD     R20, R18
        ADC     R21, R19
        MOVW    R31:R30, R21:R20
        LD      R18, Z
        LDD     R19, Z+1
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  261             uiAddress++;
        ADIW    R27:R26, 1
//  262         }
        SUBI    R16, 255
        SBCI    R17, 255
        RJMP    ??ReadHoldingRegisters_5
//  263     }
//  264     return uiLength;
??ReadHoldingRegisters_3:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  265 }
//  266 
//  267 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  268 int16_t CModbus::ReadInputRegisters(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReadInputRegisters:
//  269 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R13:R12, R19:R18
        MOVW    R9:R8, R21:R20
        MOVW    R25:R24, R23:R22
//  270     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R11:R10, R17:R16
//  271     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        SBIW    R31:R30, 1
        LD      R15, Z
//  272     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LD      R14, Z
//  273     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  274                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R27, Z+1
        LDI     R26, 0
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  275 
//  276     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  277                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R7, Z+3
        CLR     R6
        MOVW    R31:R30, R13:R12
        ADD     R30, R10
        ADC     R31, R11
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R6, R16
        OR      R7, R17
//  278 
//  279     if (uiNumberB < 1 || MODBUS_MAX_READ_REGISTERS < uiNumberB)
        MOV     R16, R6
        OR      R16, R7
        BREQ    ??ReadInputRegisters_1
        LDI     R16, 126
        CP      R6, R16
        LDI     R16, 0
        CPC     R7, R16
        BRCS    ??ReadInputRegisters_2
//  280     {
//  281         uiLength = ResponseException(uiSlave,
//  282                                      uiFunctionCode,
//  283                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  284                                      puiResponse);
??ReadInputRegisters_1:
        MOVW    R23:R22, R9:R8
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadInputRegisters_3
//  285     }
//  286     else if ((uiAddress + uiNumberB) > m_uiInputRegistersNumber)
??ReadInputRegisters_2:
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+32
        LDD     R17, Z+33
        MOVW    R19:R18, R27:R26
        ADD     R18, R6
        ADC     R19, R7
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??ReadInputRegisters_4
//  287     {
//  288         uiLength = ResponseException(uiSlave,
//  289                                      uiFunctionCode,
//  290                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  291                                      puiResponse);
        MOVW    R23:R22, R9:R8
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??ReadInputRegisters_3
//  292     }
//  293     else
//  294     {
//  295         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??ReadInputRegisters_4:
        MOVW    R21:R20, R9:R8
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  296         puiResponse[uiLength++] = (uiNumberB << 1);
        MOV     R16, R6
        LSL     R16
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  297         for (uint16_t i = 0; i < uiNumberB; i++)
        LDI     R16, 0
        LDI     R17, 0
??ReadInputRegisters_5:
        CP      R16, R6
        CPC     R17, R7
        BRCC    ??ReadInputRegisters_3
//  298         {
//  299             puiResponse[uiLength++] = (static_cast<uint8_t>(m_pui16InputRegisters[uiAddress] >> 8));
        MOVW    R31:R30, R5:R4
        LDD     R20, Z+24
        LDD     R21, Z+25
        MOVW    R19:R18, R27:R26
        LSL     R18
        ROL     R19
        ADD     R20, R18
        ADC     R21, R19
        MOVW    R31:R30, R21:R20
        LD      R18, Z
        LDD     R19, Z+1
        MOV     R18, R19
        LDI     R19, 0
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  300             puiResponse[uiLength++] = (static_cast<uint8_t>(m_pui16InputRegisters[uiAddress] & 0x00FF));
        MOVW    R31:R30, R5:R4
        LDD     R20, Z+24
        LDD     R21, Z+25
        MOVW    R19:R18, R27:R26
        LSL     R18
        ROL     R19
        ADD     R20, R18
        ADC     R21, R19
        MOVW    R31:R30, R21:R20
        LD      R18, Z
        LDD     R19, Z+1
        MOVW    R31:R30, R9:R8
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  301             uiAddress++;
        ADIW    R27:R26, 1
//  302         }
        SUBI    R16, 255
        SBCI    R17, 255
        RJMP    ??ReadInputRegisters_5
//  303     }
//  304     return uiLength;
??ReadInputRegisters_3:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  305 }
//  306 
//  307 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  308 int16_t CModbus::WriteSingleCoil(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??WriteSingleCoil:
//  309 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R11:R10, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R13:R12, R21:R20
        MOVW    R25:R24, R23:R22
//  310     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R11:R10
        MOVW    R31:R30, R11:R10
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R7:R6, R17:R16
//  311     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        SBIW    R31:R30, 1
        LD      R15, Z
//  312     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        LD      R14, Z
//  313     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  314                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        LDD     R9, Z+1
        CLR     R8
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R8, R16
        OR      R9, R17
//  315 
//  316     if (uiAddress >= m_uiCoilsNumber)
        MOVW    R31:R30, R11:R10
        LDD     R16, Z+26
        LDD     R17, Z+27
        CP      R8, R16
        CPC     R9, R17
        BRCS    ??WriteSingleCoil_1
//  317     {
//  318         uiLength = ResponseException(uiSlave,
//  319                                      uiFunctionCode,
//  320                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  321                                      puiResponse);
        MOVW    R23:R22, R13:R12
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R11:R10
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??WriteSingleCoil_2
//  322     }
//  323     else
//  324     {
//  325         uint16_t uiData = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  326                            (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
??WriteSingleCoil_1:
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        LDD     R27, Z+3
        LDI     R26, 0
        MOVW    R31:R30, R5:R4
        ADD     R30, R6
        ADC     R31, R7
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  327 
//  328         if (uiData == 0xFF00)
        CPI     R26, 0
        LDI     R16, 255
        CPC     R27, R16
        BRNE    ??WriteSingleCoil_3
//  329         {
//  330             CPss21::ModbusDeviceControl(1, uiAddress);
        MOVW    R19:R18, R9:R8
        LDI     R16, 1
        CALL    ??ModbusDeviceControl
//  331             memcpy(puiResponse, puiRequest, uiLength);
        MOVW    R21:R20, R25:R24
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R13:R12
        CALL    memcpy
        RJMP    ??WriteSingleCoil_2
//  332         }
//  333         else if (uiData == 0x0000)
??WriteSingleCoil_3:
        MOV     R16, R26
        OR      R16, R27
        BRNE    ??WriteSingleCoil_4
//  334         {
//  335             CPss21::ModbusDeviceControl(0, uiAddress);
        MOVW    R19:R18, R9:R8
        LDI     R16, 0
        CALL    ??ModbusDeviceControl
//  336             memcpy(puiResponse, puiRequest, uiLength);
        MOVW    R21:R20, R25:R24
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R13:R12
        CALL    memcpy
        RJMP    ??WriteSingleCoil_2
//  337         }
//  338         else
//  339         {
//  340             uiLength = ResponseException(uiSlave,
//  341                                          uiFunctionCode,
//  342                                          MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  343                                          puiResponse);
??WriteSingleCoil_4:
        MOVW    R23:R22, R13:R12
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R11:R10
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  344         }
//  345 
//  346 //        if (uiData == 0xFF00 || uiData == 0x0)
//  347 //        {
//  348 //            if (uiData)
//  349 //            {
//  350 //                m_puiCoils[uiAddress] = ON;
//  351 //            }
//  352 //            else
//  353 //            {
//  354 //                m_puiCoils[uiAddress] = OFF;
//  355 //            }
//  356 //            memcpy(puiResponse, puiRequest, uiLength);
//  357 //        }
//  358 //        else
//  359 //        {
//  360 //            uiLength = ResponseException(uiSlave,
//  361 //                                         uiFunctionCode,
//  362 //                                         MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  363 //                                         puiResponse);
//  364 //        }
//  365 
//  366     }
//  367     return uiLength;
??WriteSingleCoil_2:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  368 }
//  369 
//  370 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  371 int16_t CModbus::WriteSingleRegister(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??WriteSingleRegister:
//  372 {
        CALL    ?PROLOGUE14_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R25:R24, R19:R18
        MOVW    R11:R10, R21:R20
        MOVW    R9:R8, R23:R22
//  373     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R27:R26, R17:R16
//  374     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        SBIW    R31:R30, 1
        LD      R13, Z
//  375     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        LD      R12, Z
//  376     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  377                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        LDD     R7, Z+1
        CLR     R6
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R6, R16
        OR      R7, R17
//  378 
//  379     if (uiAddress >= m_uiHoldingRegistersNumber)
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+30
        LDD     R17, Z+31
        CP      R6, R16
        CPC     R7, R17
        BRCS    ??WriteSingleRegister_1
//  380     {
//  381         uiLength = ResponseException(uiSlave,
//  382                                      uiFunctionCode,
//  383                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  384                                      puiResponse);
        MOVW    R23:R22, R11:R10
        LDI     R20, 2
        MOV     R19, R12
        MOV     R18, R13
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R9:R8, R17:R16
        RJMP    ??WriteSingleRegister_2
//  385     }
//  386     else
//  387     {
//  388         m_pui16HoldingRegisters[uiAddress] =
//  389             ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  390              (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
??WriteSingleRegister_1:
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        LDD     R21, Z+3
        LDI     R20, 0
        MOVW    R31:R30, R25:R24
        ADD     R30, R26
        ADC     R31, R27
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R20, R16
        OR      R21, R17
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+22
        LDD     R19, Z+23
        MOVW    R17:R16, R7:R6
        LSL     R16
        ROL     R17
        ADD     R18, R16
        ADC     R19, R17
        MOVW    R31:R30, R19:R18
        ST      Z, R20
        STD     Z+1, R21
//  391         memcpy(puiResponse, puiRequest, uiLength);
        MOVW    R21:R20, R9:R8
        MOVW    R19:R18, R25:R24
        MOVW    R17:R16, R11:R10
        CALL    memcpy
//  392     }
//  393     return uiLength;
??WriteSingleRegister_2:
        MOVW    R17:R16, R9:R8
        LDI     R30, 14
        JMP     ?EPILOGUE_B14_L09
//  394 }
//  395 
//  396 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  397 int16_t CModbus::WriteMultipleCoils(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??WriteMultipleCoils:
//  398 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R7:R6, R19:R18
        MOVW    R13:R12, R21:R20
        MOVW    R25:R24, R23:R22
//  399     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R9:R8, R17:R16
//  400     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        SBIW    R31:R30, 1
        LD      R15, Z
//  401     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        LD      R14, Z
//  402     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  403                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        LDD     R11, Z+1
        CLR     R10
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R10, R16
        OR      R11, R17
//  404 
//  405     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  406                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        LDD     R27, Z+3
        LDI     R26, 0
        MOVW    R31:R30, R7:R6
        ADD     R30, R8
        ADC     R31, R9
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  407 
//  408     if (uiNumberB < 1 || MODBUS_MAX_WRITE_BITS < uiNumberB)
        MOV     R16, R26
        OR      R16, R27
        BREQ    ??WriteMultipleCoils_1
        CPI     R26, 177
        LDI     R16, 7
        CPC     R27, R16
        BRCS    ??WriteMultipleCoils_2
//  409     {
//  410         uiLength = ResponseException(uiSlave,
//  411                                      uiFunctionCode,
//  412                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  413                                      puiResponse);
??WriteMultipleCoils_1:
        MOVW    R23:R22, R13:R12
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??WriteMultipleCoils_3
//  414     }
//  415     else if ((uiAddress + uiNumberB) > m_uiCoilsNumber)
??WriteMultipleCoils_2:
        MOVW    R31:R30, R5:R4
        LDD     R16, Z+26
        LDD     R17, Z+27
        MOVW    R19:R18, R11:R10
        ADD     R18, R26
        ADC     R19, R27
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??WriteMultipleCoils_4
//  416     {
//  417         uiLength = ResponseException(uiSlave,
//  418                                      uiFunctionCode,
//  419                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  420                                      puiResponse);
        MOVW    R23:R22, R13:R12
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??WriteMultipleCoils_3
//  421     }
//  422     else
//  423     {
//  424 
//  425 
//  426         CPss21::ModbusDeviceControl(&puiRequest[uiOffset + 6], uiNumberB, uiAddress);
??WriteMultipleCoils_4:
        MOVW    R21:R20, R11:R10
        MOVW    R19:R18, R27:R26
        MOVW    R17:R16, R7:R6
        ADD     R16, R8
        ADC     R17, R9
        SUBI    R16, 250
        SBCI    R17, 255
        CALL    ??ModbusDeviceControl_1
//  427 //        SetBytesFromBits(m_puiCoils, uiAddress, uiNumberB, &puiRequest[uiOffset + 6]);
//  428 
//  429         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
        MOVW    R21:R20, R13:R12
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  430         /* 4 to copy the bit address (2) and the quantity of bits */
//  431         memcpy(puiResponse + uiLength, puiRequest + uiLength, 4);
        LDI     R20, 4
        LDI     R21, 0
        MOVW    R19:R18, R7:R6
        ADD     R18, R24
        ADC     R19, R25
        MOVW    R17:R16, R13:R12
        ADD     R16, R24
        ADC     R17, R25
        CALL    memcpy
//  432         uiLength += 4;
        ADIW    R25:R24, 4
//  433     }
//  434     return uiLength;
??WriteMultipleCoils_3:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  435 }
//  436 
//  437 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  438 int16_t CModbus::WriteMultipleRegisters(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??WriteMultipleRegisters:
//  439 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R9:R8, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R13:R12, R21:R20
        MOVW    R7:R6, R23:R22
//  440     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R9:R8
        MOVW    R31:R30, R9:R8
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R25:R24, R17:R16
//  441     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        SBIW    R31:R30, 1
        LD      R15, Z
//  442     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LD      R14, Z
//  443     uint16_t uiAddress = ((static_cast<uint16_t>(puiRequest[uiOffset + 1]) << 8) |
//  444                           (static_cast<uint16_t>(puiRequest[uiOffset + 2])));
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R27, Z+1
        LDI     R26, 0
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R16, Z+2
        LDI     R17, 0
        OR      R26, R16
        OR      R27, R17
//  445 
//  446     uint16_t uiNumberB = ((static_cast<uint16_t>(puiRequest[uiOffset + 3]) << 8) |
//  447                           (static_cast<uint16_t>(puiRequest[uiOffset + 4])));
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R11, Z+3
        CLR     R10
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R16, Z+4
        LDI     R17, 0
        OR      R10, R16
        OR      R11, R17
//  448 
//  449     if (uiNumberB < 1 || MODBUS_MAX_WRITE_REGISTERS < uiNumberB)
        MOV     R16, R10
        OR      R16, R11
        BREQ    ??WriteMultipleRegisters_1
        LDI     R16, 124
        CP      R10, R16
        LDI     R16, 0
        CPC     R11, R16
        BRCS    ??WriteMultipleRegisters_2
//  450     {
//  451         uiLength = ResponseException(uiSlave,
//  452                                      uiFunctionCode,
//  453                                      MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  454                                      puiResponse);
??WriteMultipleRegisters_1:
        MOVW    R23:R22, R13:R12
        LDI     R20, 3
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R9:R8
        RCALL   ??ResponseException
        MOVW    R7:R6, R17:R16
        RJMP    ??WriteMultipleRegisters_3
//  455     }
//  456     else if ((uiAddress + uiNumberB) > m_uiHoldingRegistersNumber)
??WriteMultipleRegisters_2:
        MOVW    R31:R30, R9:R8
        LDD     R16, Z+30
        LDD     R17, Z+31
        MOVW    R19:R18, R27:R26
        ADD     R18, R10
        ADC     R19, R11
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??WriteMultipleRegisters_4
//  457     {
//  458         uiLength = ResponseException(uiSlave,
//  459                                      uiFunctionCode,
//  460                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  461                                      puiResponse);
        MOVW    R23:R22, R13:R12
        LDI     R20, 2
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R9:R8
        RCALL   ??ResponseException
        MOVW    R7:R6, R17:R16
        RJMP    ??WriteMultipleRegisters_3
//  462     }
//  463     else
//  464     {
//  465         for (uint16_t i = 0; i < uiNumberB; i++)
??WriteMultipleRegisters_4:
        LDI     R18, 0
        LDI     R19, 0
??WriteMultipleRegisters_5:
        CP      R18, R10
        CPC     R19, R11
        BRCC    ??WriteMultipleRegisters_6
//  466         {
//  467             m_pui16HoldingRegisters[uiAddress++] = ((static_cast<uint16_t>(puiRequest[uiOffset + 6]) << 8) |
//  468                                                     (static_cast<uint16_t>(puiRequest[uiOffset + 6 + 1])));
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R21, Z+6
        LDI     R20, 0
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R16, Z+7
        LDI     R17, 0
        OR      R20, R16
        OR      R21, R17
        MOVW    R31:R30, R9:R8
        LDD     R22, Z+22
        LDD     R23, Z+23
        MOVW    R17:R16, R27:R26
        LSL     R16
        ROL     R17
        ADD     R22, R16
        ADC     R23, R17
        MOVW    R31:R30, R23:R22
        ST      Z, R20
        STD     Z+1, R21
        ADIW    R27:R26, 1
//  469             uiOffset += 2;
        ADIW    R25:R24, 2
//  470         }
        SUBI    R18, 255
        SBCI    R19, 255
        RJMP    ??WriteMultipleRegisters_5
//  471 
//  472         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??WriteMultipleRegisters_6:
        MOVW    R21:R20, R13:R12
        MOV     R19, R14
        MOV     R18, R15
        MOVW    R17:R16, R9:R8
        MOVW    R31:R30, R9:R8
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R7:R6, R17:R16
//  473         /* 4 to copy the bit address (2) and the quantity of bits */
//  474         memcpy(puiResponse + uiLength, puiRequest + uiLength, 4);
        LDI     R20, 4
        LDI     R21, 0
        MOVW    R19:R18, R5:R4
        ADD     R18, R6
        ADC     R19, R7
        MOVW    R17:R16, R13:R12
        ADD     R16, R6
        ADC     R17, R7
        CALL    memcpy
//  475         uiLength += 4;
        LDI     R16, 4
        ADD     R6, R16
        LDI     R16, 0
        ADC     R7, R16
//  476 
//  477     }
//  478     return uiLength;
??WriteMultipleRegisters_3:
        MOVW    R17:R16, R7:R6
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  479 }
//  480 
//  481 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  482 int16_t CModbus::ReadExceptionStatus(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReadExceptionStatus:
//  483 {
        MOVW    R1:R0, R17:R16
//  484 //    errno = ENOPROTOOPT;
//  485     return -1;
        LDI     R16, 255
        LDI     R17, 255
        RET
//  486 }
//  487 
//  488 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  489 int16_t CModbus::WriteAndReadRegisters(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??WriteAndReadRegisters:
//  490 {
        MOVW    R1:R0, R17:R16
//  491 
//  492     return 0;
        LDI     R16, 0
        LDI     R17, 0
        RET
//  493 }
//  494 
//  495 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  496 int16_t CModbus::ReportSlaveID(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??ReportSlaveID:
//  497 {
        CALL    ?PROLOGUE12_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        MOVW    R5:R4, R17:R16
        MOVW    R9:R8, R19:R18
        MOVW    R27:R26, R21:R20
        MOVW    R25:R24, R23:R22
//  498     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R7:R6, R17:R16
//  499     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R9:R8
        ADD     R30, R6
        ADC     R31, R7
        SBIW    R31:R30, 1
        LD      R11, Z
//  500     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R9:R8
        ADD     R30, R6
        ADC     R31, R7
        LD      R10, Z
//  501 
//  502     uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
        MOVW    R21:R20, R27:R26
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R5:R4
        MOVW    R31:R30, R5:R4
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  503     puiResponse[uiLength++] = 3;			//   
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 3
        ST      Z, R16
        ADIW    R25:R24, 1
//  504     puiResponse[uiLength++] = 32;			//   
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 32
        ST      Z, R16
        ADIW    R25:R24, 1
//  505     puiResponse[uiLength++] = 7;			//  
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 7
        ST      Z, R16
        ADIW    R25:R24, 1
//  506     puiResponse[uiLength++] = 50;			//  
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 50
        ST      Z, R16
        ADIW    R25:R24, 1
//  507 
//  508     return uiLength;
        MOVW    R17:R16, R25:R24
        LDI     R30, 12
        JMP     ?EPILOGUE_B12_L09
//  509 }
//  510 
//  511 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  512 int16_t CModbus::Programming(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??Programming:
//  513 {
        CALL    ?PROLOGUE16_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        REQUIRE ?Register_R15_is_cg_reg
        MOVW    R7:R6, R17:R16
        MOVW    R9:R8, R19:R18
        MOVW    R27:R26, R21:R20
        MOVW    R25:R24, R23:R22
//  514 //  0x46 "".   :
//  515 // Buff[0] -  Slave.
//  516 // Buff[1] -  .
//  517 // Buff[2] -       .
//  518 // Buff[3] -       .
//  519 // Buff[4] -  (0 -   , 1 -  , 2 -  ).
//  520 // Buff[5] -   .
//  521 
//  522     //    .
//  523     enum
//  524     {
//  525         REQUEST_LENGTH = 2,
//  526         REQUEST_COMMAND = 3,
//  527         BLOCK_NUMBER = 4,
//  528         DATA_BEGIN = 5,
//  529     };
//  530 
//  531     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R7:R6
        MOVW    R31:R30, R7:R6
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R5:R4, R17:R16
//  532     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        SBIW    R31:R30, 1
        LD      R11, Z
//  533     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LD      R10, Z
//  534 
//  535     uint16_t uiNumberB = (static_cast<uint16_t>(puiRequest[uiOffset + REQUEST_LENGTH]));
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R14, Z+2
        CLR     R15
//  536 
//  537     if (uiNumberB != (uiLength - 6))
        MOVW    R17:R16, R25:R24
        SUBI    R16, 6
        SBCI    R17, 0
        CP      R14, R16
        CPC     R15, R17
        BREQ    ??Programming_1
//  538     {
//  539         uiLength = ResponseException(uiSlave,
//  540                                      uiFunctionCode,
//  541                                      MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  542                                      puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 2
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  543     }
//  544     else
//  545     {
//  546         uint8_t uiBlockNumber;
//  547         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
??Programming_1:
        MOVW    R21:R20, R27:R26
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        MOVW    R31:R30, R7:R6
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
//  548         //   ?
//  549         switch(puiRequest[uiOffset + REQUEST_COMMAND])
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+3
        SUBI    R16, 0
        BREQ    ??Programming_3
        DEC     R16
        BREQ    ??Programming_4
        DEC     R16
        BRNE    $+2+2
        RJMP    ??Programming_5
        DEC     R16
        BRNE    $+2+2
        RJMP    ??Programming_6
        RJMP    ??Programming_7
//  550         {
//  551         case 0x00:
//  552             //   .
//  553             puiResponse[uiLength++] = 0;
??Programming_3:
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 0
        ST      Z, R16
        ADIW    R25:R24, 1
//  554             puiResponse[uiLength++] = 4;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 4
        ST      Z, R16
        ADIW    R25:R24, 1
//  555             puiResponse[uiLength++] = puiRequest[uiOffset + REQUEST_COMMAND];
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+3
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  556             puiResponse[uiLength++] = 2; // 1.7.01
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 2
        ST      Z, R16
        ADIW    R25:R24, 1
//  557             puiResponse[uiLength++] = 0;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 0
        ST      Z, R16
        ADIW    R25:R24, 1
//  558             puiResponse[uiLength++] = 0x02;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 2
        ST      Z, R16
        ADIW    R25:R24, 1
//  559             break;
        RJMP    ??Programming_2
//  560 
//  561         case 0x01:
//  562             //   .
//  563             uiBlockNumber = puiRequest[uiOffset + BLOCK_NUMBER];
??Programming_4:
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+4
        MOV     R12, R16
//  564             //   ?
//  565             if (uiBlockNumber > CDataBase::GetBlocksNumber())
        CALL    ??GetBlocksNumber
        CP      R16, R12
        BRCC    ??Programming_8
//  566             {
//  567                 uiLength = ResponseException(uiSlave,
//  568                                              uiFunctionCode,
//  569                                              MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  570                                              puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 2
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  571             }
//  572             else
//  573             {
//  574                 if (uiBlockNumber == TDataBase::DEV_CONFIG)
??Programming_8:
        TST     R12
        BRNE    ??Programming_9
//  575                 {
//  576                     //   .
//  577                     uint16_t uiLengthLocal = CDataBase::ReadBlock(&puiResponse[uiOffset + DATA_BEGIN], uiBlockNumber);
        MOV     R18, R12
        MOVW    R17:R16, R27:R26
        ADD     R16, R4
        ADC     R17, R5
        SUBI    R16, 251
        SBCI    R17, 255
        CALL    ??ReadBlock
//  578                     //   .   ,     .
//  579                     puiResponse[(uiOffset + DATA_BEGIN)] = CPss21::m_xDeviceConfigSearch.uiDiscreteInputQuantity;
        LDS     R18, (??m_xDeviceConfigSearch + 8)
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        STD     Z+5, R18
//  580                     puiResponse[(uiOffset + DATA_BEGIN) + 1] = CPss21::m_xDeviceConfigSearch.uiDiscreteOutputQuantity;
        LDS     R18, (??m_xDeviceConfigSearch + 7)
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        STD     Z+6, R18
//  581                     puiResponse[(uiOffset + DATA_BEGIN) + 2] = ALARM_WINDOWS_NUMBER;
        MOVW    R31:R30, R27:R26
        ADD     R30, R4
        ADC     R31, R5
        LDI     R18, 48
        STD     Z+7, R18
//  582 
//  583                     puiResponse[uiLength++] = 0;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R18, 0
        ST      Z, R18
        ADIW    R25:R24, 1
//  584                     puiResponse[uiLength++] = uiLengthLocal + 2;
        MOV     R18, R16
        SUBI    R18, 254
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  585                     puiResponse[uiLength++] = puiRequest[uiOffset + REQUEST_COMMAND];
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R18, Z+3
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R18
        ADIW    R25:R24, 1
//  586                     puiResponse[uiLength++] = uiBlockNumber;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R12
        ADIW    R25:R24, 1
//  587                     uiLength += uiLengthLocal;
        ADD     R24, R16
        ADC     R25, R17
        RJMP    ??Programming_2
//  588                 }
//  589                 else
//  590                 {
//  591                     //   .
//  592                     uint16_t uiLengthLocal = CDataBase::ReadBlock(&puiResponse[uiOffset + DATA_BEGIN], uiBlockNumber);
??Programming_9:
        MOV     R18, R12
        MOVW    R17:R16, R27:R26
        ADD     R16, R4
        ADC     R17, R5
        SUBI    R16, 251
        SBCI    R17, 255
        CALL    ??ReadBlock
        MOVW    R19:R18, R17:R16
//  593                     puiResponse[uiLength++] = 0;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        LDI     R16, 0
        ST      Z, R16
        ADIW    R25:R24, 1
//  594                     puiResponse[uiLength++] = uiLengthLocal + 2;
        MOV     R16, R18
        SUBI    R16, 254
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  595                     puiResponse[uiLength++] = puiRequest[uiOffset + REQUEST_COMMAND];
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+3
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R16
        ADIW    R25:R24, 1
//  596                     puiResponse[uiLength++] = uiBlockNumber;
        MOVW    R31:R30, R27:R26
        ADD     R30, R24
        ADC     R31, R25
        ST      Z, R12
        ADIW    R25:R24, 1
//  597                     uiLength += uiLengthLocal;
        ADD     R24, R18
        ADC     R25, R19
//  598                 }
//  599             }
//  600             break;
        RJMP    ??Programming_2
//  601 
//  602         case 0x02:
//  603             //   .
//  604             uiBlockNumber = puiRequest[uiOffset + BLOCK_NUMBER];
??Programming_5:
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+4
        MOV     R12, R16
//  605             //   ?
//  606             if (uiBlockNumber > CDataBase::GetBlocksNumber())
        CALL    ??GetBlocksNumber
        CP      R16, R12
        BRCC    ??Programming_10
//  607             {
//  608                 uiLength = ResponseException(uiSlave,
//  609                                              uiFunctionCode,
//  610                                              MODBUS_EXCEPTION_ILLEGAL_DATA_ADDRESS,
//  611                                              puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 2
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  612             }
//  613             //    ?
//  614             else if ((puiRequest[uiOffset + REQUEST_LENGTH] - 2) != CDataBase::GetBlockLength(uiBlockNumber))
??Programming_10:
        MOV     R16, R12
        CALL    ??GetBlockLength
        MOVW    R19:R18, R17:R16
        MOVW    R31:R30, R9:R8
        ADD     R30, R4
        ADC     R31, R5
        LDD     R16, Z+2
        LDI     R17, 0
        SUBI    R16, 2
        SBCI    R17, 0
        CP      R16, R18
        CPC     R17, R19
        BREQ    ??Programming_11
//  615             {
//  616                 uiLength = ResponseException(uiSlave,
//  617                                              uiFunctionCode,
//  618                                              MODBUS_EXCEPTION_ILLEGAL_DATA_VALUE,
//  619                                              puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 3
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  620             }
//  621             else
//  622             {
//  623                 //   .
//  624                 // ?
//  625                 if (CDataBase::WriteBlock(&puiRequest[uiOffset + DATA_BEGIN], uiBlockNumber))
??Programming_11:
        MOV     R18, R12
        MOVW    R17:R16, R9:R8
        ADD     R16, R4
        ADC     R17, R5
        SUBI    R16, 251
        SBCI    R17, 255
        CALL    ??WriteBlock
        OR      R16, R17
        BREQ    ??Programming_12
//  626                 {
//  627                     //         .
//  628                     //   .
//  629                     CDataBase::SignatureCreate();
        CALL    ??SignatureCreate
//  630                     //        
//  631                     //  "PROGRAMMING_TIME + WDTO_2S",    .
//  632                     CPss21::SetFsmState(CPss21::PROGRAMMING_START);
        LDI     R16, 18
        CALL    ??SetFsmState_1
//  633 
//  634                     uiLength = ResponseException(uiSlave,
//  635                                                  uiFunctionCode,
//  636                                                  MODBUS_EXCEPTION_ACKNOWLEDGE,
//  637                                                  puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 5
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  638                 }
//  639                 else
//  640                 {
//  641                     uiLength = ResponseException(uiSlave,
//  642                                                  uiFunctionCode,
//  643                                                  MODBUS_EXCEPTION_NEGATIVE_ACKNOWLEDGE,
//  644                                                  puiResponse);
??Programming_12:
        MOVW    R23:R22, R27:R26
        LDI     R20, 7
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  645                 }
//  646             }
//  647             break;
        RJMP    ??Programming_2
//  648 
//  649         case 0x03:
//  650             if (CDataStore::GetFsmEvent() == CDataStore::WRITE_OK_FSM_EVENT)
??Programming_6:
        CALL    ??GetFsmEvent
        CPI     R16, 3
        BRNE    ??Programming_13
//  651             {
//  652                 uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
        MOVW    R21:R20, R27:R26
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        MOVW    R31:R30, R7:R6
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  653             }
//  654             else if (CDataStore::GetFsmEvent() == CDataStore::WRITE_IN_PROGRESS_FSM_EVENT)
??Programming_13:
        CALL    ??GetFsmEvent
        CPI     R16, 1
        BRNE    ??Programming_14
//  655             {
//  656                 uiLength = ResponseException(uiSlave,
//  657                                              uiFunctionCode,
//  658                                              MODBUS_EXCEPTION_SLAVE_OR_SERVER_BUSY,
//  659                                              puiResponse);
        MOVW    R23:R22, R27:R26
        LDI     R20, 6
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??Programming_2
//  660             }
//  661             else
//  662             {
//  663                 uiLength = ResponseException(uiSlave,
//  664                                              uiFunctionCode,
//  665                                              MODBUS_EXCEPTION_ILLEGAL_FUNCTION,
//  666                                              puiResponse);
??Programming_14:
        MOVW    R23:R22, R27:R26
        LDI     R20, 1
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  667             }
//  668             break;
        RJMP    ??Programming_2
//  669 
//  670         default:
//  671             uiLength = ResponseException(uiSlave,
//  672                                          uiFunctionCode,
//  673                                          MODBUS_EXCEPTION_ILLEGAL_FUNCTION,
//  674                                          puiResponse);
??Programming_7:
        MOVW    R23:R22, R27:R26
        LDI     R20, 1
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R7:R6
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  675             break;
//  676         };
//  677     }
//  678 
//  679     return uiLength;
??Programming_2:
        MOVW    R17:R16, R25:R24
        LDI     R30, 16
        JMP     ?EPILOGUE_B16_L09
//  680 }
//  681 
//  682 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  683 int16_t CModbus::PollProgramming(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiLength)
??PollProgramming:
//  684 
//  685 {
        CALL    ?PROLOGUE12_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R9:R8, R19:R18
        MOVW    R5:R4, R21:R20
        MOVW    R25:R24, R23:R22
//  686     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R7:R6, R17:R16
//  687     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R9:R8
        ADD     R30, R6
        ADC     R31, R7
        SBIW    R31:R30, 1
        LD      R11, Z
//  688     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R9:R8
        ADD     R30, R6
        ADC     R31, R7
        LD      R10, Z
//  689 
//  690     if (CDataStore::GetFsmEvent() == CDataStore::WRITE_OK_FSM_EVENT)
        CALL    ??GetFsmEvent
        CPI     R16, 3
        BRNE    ??PollProgramming_1
//  691     {
//  692         uiLength = ResponseBasis(uiSlave, uiFunctionCode, puiResponse);
        MOVW    R21:R20, R5:R4
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R22, Z+1
        LDD     R23, Z+2
        MOVW    R31:R30, R23:R22
        ADIW    R31:R30, 10
        LPM     R22, Z+
        LPM     R23, Z
        SBIW    R31:R30, 11
        MOVW    R31:R30, R23:R22
        ICALL
        MOVW    R25:R24, R17:R16
        RJMP    ??PollProgramming_2
//  693     }
//  694     else if (CDataStore::GetFsmEvent() == CDataStore::WRITE_IN_PROGRESS_FSM_EVENT)
??PollProgramming_1:
        CALL    ??GetFsmEvent
        CPI     R16, 1
        BRNE    ??PollProgramming_3
//  695     {
//  696         uiLength = ResponseException(uiSlave,
//  697                                      uiFunctionCode,
//  698                                      MODBUS_EXCEPTION_SLAVE_OR_SERVER_BUSY,
//  699                                      puiResponse);
        MOVW    R23:R22, R5:R4
        LDI     R20, 6
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R27:R26
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
        RJMP    ??PollProgramming_2
//  700     }
//  701     else
//  702     {
//  703         uiLength = ResponseException(uiSlave,
//  704                                      uiFunctionCode,
//  705                                      MODBUS_EXCEPTION_ILLEGAL_FUNCTION,
//  706                                      puiResponse);
??PollProgramming_3:
        MOVW    R23:R22, R5:R4
        LDI     R20, 1
        MOV     R19, R10
        MOV     R18, R11
        MOVW    R17:R16, R27:R26
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  707     }
//  708 
//  709     return uiLength;
??PollProgramming_2:
        MOVW    R17:R16, R25:R24
        LDI     R30, 12
        JMP     ?EPILOGUE_B12_L09
//  710 }
//  711 
//  712 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  713 int16_t CModbus::Reply(uint8_t *puiRequest, uint8_t *puiResponse, uint16_t uiFrameLength)
??Reply:
//  714 {
        CALL    ?PROLOGUE15_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        REQUIRE ?Register_R12_is_cg_reg
        REQUIRE ?Register_R13_is_cg_reg
        REQUIRE ?Register_R14_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R7:R6, R21:R20
        MOVW    R11:R10, R23:R22
//  715     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R9:R8, R17:R16
//  716     int8_t uiSlave = puiRequest[uiOffset - 1];
        MOVW    R31:R30, R5:R4
        ADD     R30, R8
        ADC     R31, R9
        SBIW    R31:R30, 1
        LD      R12, Z
//  717     int8_t uiFunctionCode = puiRequest[uiOffset];
        MOVW    R31:R30, R5:R4
        ADD     R30, R8
        ADC     R31, R9
        LD      R14, Z
//  718     uint16_t uiLength = uiFrameLength;
        MOVW    R25:R24, R11:R10
//  719 
//  720     /* Filter on the Modbus unit identifier (slave) in RTU mode */
//  721     if (uiSlave != m_uiOwnAddress && uiSlave != MODBUS_BROADCAST_ADDRESS)
        MOV     R13, R12
        LSL     R13
        SBC     R13, R13
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+5
        LDI     R17, 0
        CP      R12, R16
        CPC     R13, R17
        BREQ    ??Reply_1
        TST     R12
        BREQ    ??Reply_1
//  722     {
//  723         return 0;
        LDI     R16, 0
        LDI     R17, 0
        RJMP    ??Reply_2
//  724     }
//  725 
//  726     switch (uiFunctionCode)
??Reply_1:
        MOV     R16, R14
        MOV     R17, R16
        LSL     R17
        SBC     R17, R17
        LDI     R30, LOW(`?<Jumptable for Reply>_0`)
        LDI     R31, (`?<Jumptable for Reply>_0`) >> 16
        OUT     0x3B, R31
        LDI     R31, HIGH(`?<Jumptable for Reply>_0`)
        JMP     ?CV_SWITCH_L06
//  727     {
//  728     case _FC_READ_COILS:
//  729         uiLength = ReadCoils(puiRequest, puiResponse, uiLength);
??Reply_3:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadCoils
        MOVW    R25:R24, R17:R16
//  730         break;
        RJMP    ??Reply_4
//  731 
//  732     case _FC_READ_DISCRETE_INPUTS:
//  733         uiLength = ReadDiscreteInputs(puiRequest, puiResponse, uiLength);
??Reply_5:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadDiscreteInputs
        MOVW    R25:R24, R17:R16
//  734         break;
        RJMP    ??Reply_4
//  735 
//  736     case _FC_READ_HOLDING_REGISTERS:
//  737         uiLength = ReadHoldingRegisters(puiRequest, puiResponse, uiLength);
??Reply_6:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadHoldingRegisters
        MOVW    R25:R24, R17:R16
//  738         break;
        RJMP    ??Reply_4
//  739 
//  740     case _FC_READ_INPUT_REGISTERS:
//  741         uiLength = ReadInputRegisters(puiRequest, puiResponse, uiLength);
??Reply_7:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadInputRegisters
        MOVW    R25:R24, R17:R16
//  742         break;
        RJMP    ??Reply_4
//  743 
//  744     case _FC_WRITE_SINGLE_COIL:
//  745         uiLength = WriteSingleCoil(puiRequest, puiResponse, uiLength);
??Reply_8:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??WriteSingleCoil
        MOVW    R25:R24, R17:R16
//  746         break;
        RJMP    ??Reply_4
//  747 
//  748     case _FC_WRITE_SINGLE_REGISTER:
//  749         uiLength = WriteSingleRegister(puiRequest, puiResponse, uiLength);
??Reply_9:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??WriteSingleRegister
        MOVW    R25:R24, R17:R16
//  750         break;
        RJMP    ??Reply_4
//  751 
//  752     case _FC_READ_EXCEPTION_STATUS:
//  753         uiLength = ReadExceptionStatus(puiRequest, puiResponse, uiLength);
??Reply_10:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadExceptionStatus
        MOVW    R25:R24, R17:R16
//  754         break;
        RJMP    ??Reply_4
//  755 
//  756     case _FC_WRITE_MULTIPLE_COILS:
//  757         uiLength = WriteMultipleCoils(puiRequest, puiResponse, uiLength);
??Reply_11:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??WriteMultipleCoils
        MOVW    R25:R24, R17:R16
//  758         break;
        RJMP    ??Reply_4
//  759 
//  760     case _FC_PROGRAMMING_COMPLETION_REQUEST:
//  761         uiLength = PollProgramming(puiRequest, puiResponse, uiLength);
??Reply_12:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??PollProgramming
        MOVW    R25:R24, R17:R16
//  762         break;
        RJMP    ??Reply_4
//  763 
//  764     case _FC_WRITE_MULTIPLE_REGISTERS:
//  765         uiLength = WriteMultipleRegisters(puiRequest, puiResponse, uiLength);
??Reply_13:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??WriteMultipleRegisters
        MOVW    R25:R24, R17:R16
//  766         break;
        RJMP    ??Reply_4
//  767 
//  768     case _FC_REPORT_SLAVE_ID:
//  769         uiLength = ReportSlaveID(puiRequest, puiResponse, uiLength);
??Reply_14:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??ReportSlaveID
        MOVW    R25:R24, R17:R16
//  770         break;
        RJMP    ??Reply_4
//  771 
//  772     case _FC_WRITE_AND_READ_REGISTERS:
//  773         uiLength = WriteAndReadRegisters(puiRequest, puiResponse, uiLength);
??Reply_15:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??WriteAndReadRegisters
        MOVW    R25:R24, R17:R16
//  774         break;
        RJMP    ??Reply_4
//  775 
//  776     case _FC_DATA_EXCHANGE:
//  777         break;
//  778 
//  779     case _FC_DATA_BASE_READ:
//  780         break;
//  781 
//  782     case _FC_DATA_BASE_WRITE:
//  783         break;
//  784 
//  785     case _FC_PROGRAMMING:
//  786         uiLength = Programming(puiRequest, puiResponse, uiLength);
??Reply_16:
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R7:R6
        MOVW    R19:R18, R5:R4
        MOVW    R17:R16, R27:R26
        RCALL   ??Programming
        MOVW    R25:R24, R17:R16
//  787         break;
        RJMP    ??Reply_4
//  788 
//  789     default:
//  790         uiLength = ResponseException(uiSlave,
//  791                                      uiFunctionCode,
//  792                                      MODBUS_EXCEPTION_ILLEGAL_FUNCTION,
//  793                                      puiResponse);
??Reply_17:
        MOVW    R23:R22, R7:R6
        LDI     R20, 1
        MOV     R19, R14
        MOV     R18, R12
        MOVW    R17:R16, R27:R26
        RCALL   ??ResponseException
        MOVW    R25:R24, R17:R16
//  794         break;
//  795     }
//  796 
//  797     m_uiMessageLength = uiLength;
??Reply_4:
        MOVW    R31:R30, R27:R26
        STD     Z+12, R24
        STD     Z+13, R25
//  798     return uiLength;
        MOVW    R17:R16, R25:R24
??Reply_2:
        LDI     R30, 15
        JMP     ?EPILOGUE_B15_L09
//  799 //    return SendMessage(puiResponse, uiLength);
//  800 }
//  801 
//  802 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  803 void CModbus::SetByteFromBits(uint8_t *dest, int16_t index, const uint8_t value)
??SetByteFromBits:
//  804 {
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R3:R2, R17:R16
        MOVW    R1:R0, R21:R20
//  805     int16_t i;
//  806 
//  807     for (i=0; i<8; i++)
        LDI     R24, 0
        LDI     R25, 0
??SetByteFromBits_1:
        CPI     R24, 8
        LDI     R16, 0
        CPC     R25, R16
        BRGE    ??SetByteFromBits_2
//  808     {
//  809         dest[index+i] = (value & (1 << i)) ? 1 : 0;
        MOV     R20, R24
        LDI     R16, 1
        LDI     R17, 0
        CALL    ?S_SHL_L02
        MOV     R17, R22
        AND     R17, R16
        TST     R17
        BREQ    ??SetByteFromBits_3
        LDI     R16, 1
        RJMP    ??SetByteFromBits_4
??SetByteFromBits_3:
        LDI     R16, 0
??SetByteFromBits_4:
        MOVW    R21:R20, R1:R0
        ADD     R20, R24
        ADC     R21, R25
        MOVW    R31:R30, R19:R18
        ADD     R30, R20
        ADC     R31, R21
        ST      Z, R16
//  810     }
        ADIW    R25:R24, 1
        RJMP    ??SetByteFromBits_1
//  811 }
??SetByteFromBits_2:
        LD      R24, Y+
        LD      R25, Y+
        RET
//  812 
//  813 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  814 void CModbus::SetBytesFromBits(uint8_t *dest, int16_t index, uint16_t nb_bits,
??SetBytesFromBits:
//  815                                const uint8_t *tab_byte)
//  816 {
        CALL    ?PROLOGUE8_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        MOVW    R7:R6, R17:R16
        MOVW    R3:R2, R21:R20
        LDD     R4, Y+8
        LDD     R5, Y+9
//  817     int16_t i;
//  818     int16_t shift = 0;
        LDI     R24, 0
        LDI     R25, 0
//  819 
//  820     for (i = index; i < index + nb_bits; i++)
        MOVW    R27:R26, R3:R2
??SetBytesFromBits_1:
        MOVW    R17:R16, R3:R2
        ADD     R16, R22
        ADC     R17, R23
        CP      R26, R16
        CPC     R27, R17
        BRCC    ??SetBytesFromBits_2
//  821     {
//  822         dest[i] = tab_byte[(i - index) / 8] & (1 << shift) ? 1 : 0;
        MOVW    R1:R0, R27:R26
        SUB     R0, R2
        SBC     R1, R3
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R1:R0
        CALL    ?SS_DIVMOD_L02
        MOVW    R31:R30, R5:R4
        ADD     R30, R16
        ADC     R31, R17
        LD      R21, Z
        MOV     R20, R24
        LDI     R16, 1
        LDI     R17, 0
        CALL    ?S_SHL_L02
        AND     R21, R16
        TST     R21
        BREQ    ??SetBytesFromBits_3
        LDI     R16, 1
        RJMP    ??SetBytesFromBits_4
??SetBytesFromBits_3:
        LDI     R16, 0
??SetBytesFromBits_4:
        MOVW    R31:R30, R19:R18
        ADD     R30, R26
        ADC     R31, R27
        ST      Z, R16
//  823         /* gcc doesn't like: shift = (++shift) % 8; */
//  824         shift++;
        ADIW    R25:R24, 1
//  825         shift %= 8;
        LDI     R20, 8
        LDI     R21, 0
        MOVW    R17:R16, R25:R24
        CALL    ?SS_DIVMOD_L02
        MOVW    R25:R24, R21:R20
//  826     }
        ADIW    R27:R26, 1
        RJMP    ??SetBytesFromBits_1
//  827 }
??SetBytesFromBits_2:
        LDI     R30, 10
        JMP     ?EPILOGUE_B8_L09
//  828 
//  829 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  830 uint8_t CModbus::GetByteFromBits(const uint8_t *src, int16_t index,
??GetByteFromBits:
//  831                                  uint16_t nb_bits)
//  832 {
        ST      -Y, R25
        ST      -Y, R24
        MOVW    R3:R2, R17:R16
        MOVW    R1:R0, R21:R20
//  833     int16_t i;
//  834     uint8_t value = 0;
        LDI     R21, 0
//  835 
//  836     if (nb_bits > 8)
        CPI     R22, 9
        LDI     R16, 0
        CPC     R23, R16
        BRCS    ??GetByteFromBits_1
//  837     {
//  838         /* Assert is ignored if NDEBUG is set */
//  839 //        assert(nb_bits < 8); //?
//  840         nb_bits = 8;
        LDI     R22, 8
        LDI     R23, 0
//  841     }
//  842 
//  843     for (i=0; i < nb_bits; i++)
??GetByteFromBits_1:
        LDI     R24, 0
        LDI     R25, 0
??GetByteFromBits_2:
        CP      R24, R22
        CPC     R25, R23
        BRCC    ??GetByteFromBits_3
//  844     {
//  845         value |= (src[index+i] << i);
        MOVW    R17:R16, R1:R0
        ADD     R16, R24
        ADC     R17, R25
        MOVW    R31:R30, R19:R18
        ADD     R30, R16
        ADC     R31, R17
        LD      R16, Z
        LDI     R17, 0
        MOV     R20, R24
        CALL    ?S_SHL_L02
        OR      R21, R16
//  846     }
        ADIW    R25:R24, 1
        RJMP    ??GetByteFromBits_2
//  847 
//  848     return value;
??GetByteFromBits_3:
        MOV     R16, R21
        LD      R24, Y+
        LD      R25, Y+
        RET
//  849 }
//  850 
//  851 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  852 float CModbus::GetFloat(const uint16_t *src)
??GetFloat:
//  853 {
        MOVW    R23:R22, R27:R26
        SBIW    R29:R28, 8
        MOVW    R21:R20, R17:R16
        MOVW    R27:R26, R19:R18
//  854     float f = 0.0f;
        LDI     R16, 0
        ST      Y, R16
        LDI     R16, 0
        STD     Y+1, R16
        LDI     R16, 0
        STD     Y+2, R16
        LDI     R16, 0
        STD     Y+3, R16
//  855     uint32_t i;
//  856 
//  857     i = (((uint32_t)src[1]) << 16) + src[0];
        ADIW    R27:R26, 2
        LD      R2, X+
        LD      R3, X
        SBIW    R27:R26, 3
        CLR     R0
        CLR     R1
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 1
        LDI     R18, 0
        LDI     R19, 0
        ADD     R0, R16
        ADC     R1, R17
        ADC     R2, R18
        ADC     R3, R19
        STD     Y+4, R0
        STD     Y+5, R1
        STD     Y+6, R2
        STD     Y+7, R3
//  858     memcpy(&f, &i, sizeof(float));
        LDD     R16, Y+4
        LDD     R17, Y+5
        LDD     R18, Y+6
        LDD     R19, Y+7
        ST      Y, R16
        STD     Y+1, R17
        STD     Y+2, R18
        STD     Y+3, R19
//  859 
//  860     return f;
        LD      R16, Y
        LDD     R17, Y+1
        LDD     R18, Y+2
        LDD     R19, Y+3
        ADIW    R29:R28, 8
        MOVW    R27:R26, R23:R22
        RET
//  861 }
//  862 
//  863 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  864 void CModbus::SetFloat(float f, uint16_t *dest)
??SetFloat:
//  865 {
        SBIW    R29:R28, 8
        STD     Y+4, R20
        STD     Y+5, R21
        STD     Y+6, R22
        STD     Y+7, R23
//  866     uint32_t i = 0;
        LDI     R20, 0
        ST      Y, R20
        LDI     R20, 0
        STD     Y+1, R20
        LDI     R20, 0
        STD     Y+2, R20
        LDI     R20, 0
        STD     Y+3, R20
//  867 
//  868     memcpy(&i, &f, sizeof(uint32_t));
        LDD     R20, Y+4
        LDD     R21, Y+5
        LDD     R22, Y+6
        LDD     R23, Y+7
        ST      Y, R20
        STD     Y+1, R21
        STD     Y+2, R22
        STD     Y+3, R23
//  869     dest[0] = (uint16_t)i;
        LD      R20, Y
        LDD     R21, Y+1
        LDD     R22, Y+2
        LDD     R23, Y+3
        MOVW    R31:R30, R19:R18
        ST      Z, R20
        STD     Z+1, R21
//  870     dest[1] = (uint16_t)(i >> 16);
        LD      R20, Y
        LDD     R21, Y+1
        LDD     R22, Y+2
        LDD     R23, Y+3
        MOV     R20, R22
        MOV     R21, R23
        LDI     R22, 0
        LDI     R23, 0
        MOVW    R31:R30, R19:R18
        STD     Z+2, R20
        STD     Z+3, R21
//  871 }
        ADIW    R29:R28, 8
        RET
//  872 
//  873 //-----------------------------------------------------------------------------------------------------
//  874 
//  875 
//  876 
//  877 
//  878 
//  879 
//  880 ////-----------------------------------------------------------------------------------------------------
//  881 //int8_t CModbus::ReadCoilsRequest(uint16_t uiAddress,
//  882 //                                  uint16_t uiBitNumber)
//  883 //{
//  884 //    if (uiBitNumber > MODBUS_MAX_READ_BITS)
//  885 //    {
//  886 //        return EMBMDATA;
//  887 //    }
//  888 //
//  889 //    if (MessengerIsReady())
//  890 //    {
//  891 //        m_uiFunctionCode = _FC_READ_COILS;
//  892 //        m_uiMessageLength = RequestBasis(m_uiOwnAddress,
//  893 //                                         m_uiFunctionCode,
//  894 //                                         uiAddress,
//  895 //                                         uiBitNumber,
//  896 //                                         m_puiTxBuffer);
//  897 //        SetFsmState(FRAME_TRANSMIT_REQUEST);
//  898 //        return 1;
//  899 //    }
//  900 //    else
//  901 //    {
//  902 //        return 0;
//  903 //    }
//  904 //}
//  905 //
//  906 ////-----------------------------------------------------------------------------------------------------
//  907 //int16_t CModbus::ReadCoilsReply(uint8_t *puiDestination)
//  908 //{
//  909 //
//  910 //    if (MessengerIsReady())
//  911 //    {
//  912 //
//  913 //        SetFsmState(FRAME_TRANSMIT_REQUEST);
//  914 //        return 1;
//  915 //    }
//  916 //    else
//  917 //    {
//  918 //        return 0;
//  919 //    }
//  920 //}
//  921 
//  922 
//  923 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  924 int8_t CModbus::ReadDiscreteInputsRequest(uint8_t uiSlaveAddress,
??ReadDiscreteInputsRequest:
//  925         uint16_t uiAddress,
//  926         uint16_t uiBitNumber)
//  927 {
        CALL    ?PROLOGUE7_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOV     R6, R18
        MOVW    R5:R4, R21:R20
        MOVW    R25:R24, R23:R22
//  928     if (uiBitNumber > MODBUS_MAX_READ_BITS)
        CPI     R24, 209
        LDI     R16, 7
        CPC     R25, R16
        BRCS    ??ReadDiscreteInputsRequest_1
//  929     {
//  930         return EMBMDATA;
        LDI     R16, 16
        RJMP    ??ReadDiscreteInputsRequest_2
//  931     }
//  932 
//  933     if (MessengerIsReady() == 1)
??ReadDiscreteInputsRequest_1:
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 4
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 5
        MOVW    R31:R30, R19:R18
        ICALL
        CPI     R16, 1
        BRNE    ??ReadDiscreteInputsRequest_3
        LDI     R16, 1
        RJMP    ??ReadDiscreteInputsRequest_4
??ReadDiscreteInputsRequest_3:
        LDI     R16, 0
??ReadDiscreteInputsRequest_4:
        TST     R16
        BREQ    ??ReadDiscreteInputsRequest_5
//  934     {
//  935         m_uiFunctionCode = _FC_READ_DISCRETE_INPUTS;
        MOVW    R31:R30, R27:R26
        LDI     R16, 2
        STD     Z+7, R16
//  936         m_uiQuantity = uiBitNumber;
        MOVW    R31:R30, R27:R26
        STD     Z+8, R24
        STD     Z+9, R25
//  937         m_uiMessageLength = RequestBasis(uiSlaveAddress,
//  938                                          m_uiFunctionCode,
//  939                                          uiAddress,
//  940                                          uiBitNumber,
//  941                                          m_puiTxBuffer);
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+16
        LDD     R17, Z+17
        ST      -Y, R17
        ST      -Y, R16
        MOVW    R23:R22, R25:R24
        MOVW    R21:R20, R5:R4
        MOVW    R31:R30, R27:R26
        LDD     R19, Z+7
        MOV     R18, R6
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R0, Z+1
        LDD     R1, Z+2
        MOVW    R31:R30, R1:R0
        ADIW    R31:R30, 8
        LPM     R0, Z+
        LPM     R1, Z
        SBIW    R31:R30, 9
        MOVW    R31:R30, R1:R0
        ICALL
        MOVW    R31:R30, R27:R26
        STD     Z+12, R16
        STD     Z+13, R17
//  942         SetFsmState(FRAME_TRANSMIT_REQUEST);
        LDI     R18, 16
        MOVW    R17:R16, R27:R26
        CALL    ??SetFsmState
//  943         return 1;
        LDI     R16, 1
        RJMP    ??ReadDiscreteInputsRequest_2
//  944     }
//  945     else
//  946     {
//  947         return 0;
??ReadDiscreteInputsRequest_5:
        LDI     R16, 0
??ReadDiscreteInputsRequest_2:
        LDI     R30, 7
        JMP     ?EPILOGUE_B7_L09
//  948     }
//  949 }
//  950 
//  951 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  952 int16_t CModbus::ReadDiscreteInputsReceive(uint8_t *puiMessage, uint16_t uiLength)
??ReadDiscreteInputsReceive:
//  953 {
        MOVW    R23:R22, R17:R16
//  954 //    uint8_t uiByteCounter = 0;
//  955 //    for (int8_t i = 0; i < (m_uiQuantity / 2); )
//  956 //    {
//  957 //        uint8_t uiData = puiMessage[uiByteCounter];
//  958 //        for (uint8_t j = 0; j < CHANNELS_IN_BYTE; j++)
//  959 //        {
//  960 //            uint8_t uiState = 0;
//  961 //            for (uint8_t k = 0; k < MEASURE_CHANNEL_STATE_BIT_NUMBER; k++)
//  962 //            {
//  963 //                if (uiData & 0x01)
//  964 //                {
//  965 //                    uiState |= (0x01 << k);
//  966 //                }
//  967 //                uiData >>= 1;
//  968 //            }
//  969 //
//  970 //            CMvsn21::axChipsChannelsData[m_uiSlaveAddress - 1].axMeasurementChannels[i].uiState = uiState;
//  971 //            //   .
//  972 //            i++;
//  973 //            //      ?
//  974 //            if (i >= m_uiQuantity)
//  975 //            {
//  976 //                //      .
//  977 //                return 1;
//  978 //            }
//  979 //        }
//  980 //        uiByteCounter += 1;
//  981 //    }
//  982     return 1;
        LDI     R16, 1
        LDI     R17, 0
        RET
//  983 }
//  984 
//  985 //-----------------------------------------------------------------------------------------------------

        RSEG CODE:CODE:NOROOT(1)
//  986 int16_t CModbus::ReceiveMessage(uint8_t *puiResponse, uint16_t uiFrameLength)
??ReceiveMessage:
//  987 {
        CALL    ?PROLOGUE12_L09
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        REQUIRE ?Register_R8_is_cg_reg
        REQUIRE ?Register_R9_is_cg_reg
        REQUIRE ?Register_R10_is_cg_reg
        REQUIRE ?Register_R11_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R5:R4, R19:R18
        MOVW    R7:R6, R21:R20
//  988     uint16_t uiOffset = HEADER_LENGTH();
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 14
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 15
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R25:R24, R17:R16
//  989     uint8_t uiSlave = puiResponse[uiOffset - 1];
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        SBIW    R31:R30, 1
        LD      R9, Z
//  990     uint8_t uiFunctionCode = puiResponse[uiOffset];
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LD      R8, Z
//  991     uint16_t uiLength = uiFrameLength;
        MOVW    R11:R10, R7:R6
//  992 
//  993     if ((m_uiSlaveAddress == uiSlave) &&
//  994             (m_uiFunctionCode == uiFunctionCode))
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        CP      R16, R9
        BRNE    ??ReceiveMessage_1
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+7
        CP      R16, R8
        BRNE    ??ReceiveMessage_1
//  995     {
//  996         switch (uiFunctionCode)
        LDI     R16, 2
        CP      R8, R16
        BRNE    ??ReceiveMessage_2
//  997         {
//  998 //    case _FC_READ_COILS:
//  999 //        break;
// 1000 //
// 1001         case _FC_READ_DISCRETE_INPUTS:
// 1002             ReadDiscreteInputsReceive(&puiResponse[uiOffset + 2], uiLength);
        MOVW    R21:R20, R11:R10
        MOVW    R19:R18, R5:R4
        ADD     R18, R24
        ADC     R19, R25
        SUBI    R18, 254
        SBCI    R19, 255
        MOVW    R17:R16, R27:R26
        RCALL   ??ReadDiscreteInputsReceive
// 1003             break;
// 1004 
// 1005 //    case _FC_READ_HOLDING_REGISTERS:
// 1006 //        break;
// 1007 //
// 1008 //    case _FC_READ_INPUT_REGISTERS:
// 1009 //        break;
// 1010 //
// 1011 //    case _FC_WRITE_SINGLE_COIL:
// 1012 //        break;
// 1013 //
// 1014 //    case _FC_WRITE_SINGLE_REGISTER:
// 1015 //        break;
// 1016 //
// 1017 //    case _FC_READ_EXCEPTION_STATUS:
// 1018 //        break;
// 1019 //
// 1020 //    case _FC_WRITE_MULTIPLE_COILS:
// 1021 //        break;
// 1022 //
// 1023 //    case _FC_PROGRAMMING_COMPLETION_REQUEST:
// 1024 //        break;
// 1025 //
// 1026 //    case _FC_WRITE_MULTIPLE_REGISTERS:
// 1027 //        break;
// 1028 //
// 1029 //    case _FC_REPORT_SLAVE_ID:
// 1030 //        break;
// 1031 //
// 1032 //    case _FC_WRITE_AND_READ_REGISTERS:
// 1033 //        break;
// 1034 //
// 1035 //    case _FC_DATA_EXCHANGE:
// 1036 //        break;
// 1037 //
// 1038 //    case _FC_DATA_BASE_READ:
// 1039 //        break;
// 1040 //
// 1041 //    case _FC_DATA_BASE_WRITE:
// 1042 //        break;
// 1043 //
// 1044 //    case _FC_PROGRAMMING:
// 1045 //        break;
// 1046 
// 1047         default:
// 1048             break;
// 1049         }
// 1050         return 1;
??ReceiveMessage_2:
        LDI     R16, 1
        LDI     R17, 0
        RJMP    ??ReceiveMessage_3
// 1051     }
// 1052     else if (uiLength == (uiOffset + 2 + CRC_LENGTH()) &&
// 1053              (uiFunctionCode & 0x80))
??ReceiveMessage_1:
        MOVW    R17:R16, R27:R26
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+1
        LDD     R19, Z+2
        MOVW    R31:R30, R19:R18
        ADIW    R31:R30, 16
        LPM     R18, Z+
        LPM     R19, Z
        SBIW    R31:R30, 17
        MOVW    R31:R30, R19:R18
        ICALL
        MOVW    R19:R18, R17:R16
        MOVW    R17:R16, R25:R24
        ADD     R16, R18
        ADC     R17, R19
        SUBI    R16, 254
        SBCI    R17, 255
        CP      R10, R16
        CPC     R11, R17
        BRNE    ??ReceiveMessage_4
        BST     R8, 7
        BRTC    ??ReceiveMessage_5
        LDI     R16, 1
        RJMP    ??ReceiveMessage_6
??ReceiveMessage_5:
        LDI     R16, 0
        RJMP    ??ReceiveMessage_6
??ReceiveMessage_4:
        LDI     R16, 0
??ReceiveMessage_6:
        TST     R16
        BREQ    ??ReceiveMessage_7
// 1054     {
// 1055         /* EXCEPTION CODE RECEIVED */
// 1056         int8_t uiExceptionCode =
// 1057             puiResponse[uiOffset + MODBUS_EXCEPTION_CODE_OFFSET];
        MOVW    R31:R30, R5:R4
        ADD     R30, R24
        ADC     R31, R25
        LDD     R18, Z+1
// 1058         if (uiExceptionCode < MODBUS_EXCEPTION_MAX)
        CPI     R18, 12
        BRGE    ??ReceiveMessage_8
// 1059         {
// 1060             return MODBUS_ENOBASE + uiExceptionCode;
        MOV     R16, R18
        MOV     R17, R16
        LSL     R17
        SBC     R17, R17
        RJMP    ??ReceiveMessage_3
// 1061         }
// 1062         else
// 1063         {
// 1064             return EMBBADEXC;
??ReceiveMessage_8:
        LDI     R16, 14
        LDI     R17, 0
        RJMP    ??ReceiveMessage_3
// 1065         }
// 1066     }
// 1067 
// 1068     return 1;
??ReceiveMessage_7:
        LDI     R16, 1
        LDI     R17, 0
??ReceiveMessage_3:
        LDI     R30, 12
        JMP     ?EPILOGUE_B12_L09
// 1069 }

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CDfaLite::SetFsmState(uint8_t)
??SetFsmState:
        MOVW    R31:R30, R17:R16
        ST      Z, R18
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CDfaLite::GetFsmState()
??GetFsmState:
        MOVW    R31:R30, R17:R16
        LD      R16, Z
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CModbus::HEADER_LENGTH()
??HEADER_LENGTH:
        MOVW    R19:R18, R17:R16
        LDI     R16, 1
        LDI     R17, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint16_t CModbus::CRC_LENGTH()
??CRC_LENGTH:
        MOVW    R19:R18, R17:R16
        LDI     R16, 2
        LDI     R17, 0
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CDataStore::GetFsmEvent()
??GetFsmEvent:
        LDS     R16, ??m_uiFsmEvent
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 uint8_t CDataBase::GetBlocksNumber()
??GetBlocksNumber:
        LDI     R16, 11
        RET

        RSEG CODE:CODE:NOROOT(1)
// __version_3 void CPss21::SetFsmState(uint8_t)
??SetFsmState_1:
        STS     ??m_uiFsmState, R16
        RET

        ASEGN ABSOLUTE:DATA:NOROOT,01cH
__?EECR:

        ASEGN ABSOLUTE:DATA:NOROOT,01dH
__?EEDR:

        ASEGN ABSOLUTE:DATA:NOROOT,01eH
__?EEARL:

        ASEGN ABSOLUTE:DATA:NOROOT,01fH
__?EEARH:

        RSEG SWITCH:CODE:NOROOT(1)
`?<Jumptable for Reply>_0`:
        DB      1
        DB      1
        DW      (??Reply_17) /2
        DW      (??Reply_3) /2
        DB      0x1
        DW      (??Reply_5) /2
        DB      0x1
        DW      (??Reply_6) /2
        DB      0x1
        DW      (??Reply_7) /2
        DB      0x1
        DW      (??Reply_8) /2
        DB      0x1
        DW      (??Reply_9) /2
        DB      0x1
        DW      (??Reply_10) /2
        DB      0x7
        DW      (??Reply_12) /2
        DB      0x1
        DW      (??Reply_11) /2
        DB      0x1
        DW      (??Reply_13) /2
        DB      0x1
        DW      (??Reply_14) /2
        DB      0x6
        DW      (??Reply_15) /2
        DB      0x2a
        DW      (??Reply_4) /2
        DB      0x3
        DW      (??Reply_4) /2
        DB      0x1
        DW      (??Reply_4) /2
        DB      0x1
        DW      (??Reply_16) /2
        DB      251

        RSEG NEAR_F:CODE:ROOT(0)
// __vtbl_entry const __flash CModbus::__vtbl[9]
??__vtbl:
        DC16 `?~CModbus`/2, ??Fsm/2, ??MessengerIsReady/2
        DC16 __pure_virtual_called/2, __pure_virtual_called/2
        DC16 __pure_virtual_called/2, __pure_virtual_called/2
        DC16 ??HEADER_LENGTH/2, ??CRC_LENGTH/2

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0

        RSEG NEAR_F:CODE:ROOT(0)
        DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0

        END
// 
//   105 bytes in segment ABSOLUTE
// 4 606 bytes in segment CODE
//    40 bytes in segment NEAR_F
//    52 bytes in segment SWITCH
// 
// 4 636 bytes of CODE memory (+  62 bytes shared)
//     0 bytes of DATA memory (+ 105 bytes shared)
//
//Errors: none
//Warnings: 7
